<?xml version="1.0"?>
<fo:root xmlns:fo="http://www.w3.org/1999/XSL/Format" font-family="serif,Symbol,ZapfDingbats" font-size="10pt" text-align="justify" line-height="normal" font-selection-strategy="character-by-character" line-height-shift-adjustment="disregard-shifts" writing-mode="lr-tb" language="en"><fo:layout-master-set><fo:simple-page-master master-name="blank" page-width="8.5in" page-height="11in" margin-top="0.5in" margin-bottom="0.5in" margin-left="1in" margin-right="1in"><fo:region-body display-align="center" margin-bottom="0.5in" margin-top="0.5in" margin-left="0in" margin-right="0in" region-name="blank-body"/><fo:region-before region-name="xsl-region-before-blank" extent="0.4in" precedence="true" display-align="before"/><fo:region-after region-name="xsl-region-after-blank" extent="0.4in" precedence="true" display-align="after"/><fo:region-start border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-outer-blank" precedence="false" extent="0in"/><fo:region-end border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-inner-blank" precedence="false" extent="0in"/></fo:simple-page-master><fo:simple-page-master master-name="titlepage-first" page-width="8.5in" page-height="11in" margin-top="0.5in" margin-bottom="0.5in" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="0.5in" margin-top="0.5in" column-gap="12pt" column-count="1" margin-left="0in" margin-right="0in"/><fo:region-before region-name="xsl-region-before-first" extent="0.4in" precedence="true" display-align="before"/><fo:region-after region-name="xsl-region-after-first" extent="0.4in" precedence="true" display-align="after"/><fo:region-start border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-inner-first" precedence="false" extent="0in"/><fo:region-end border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-outer-first" precedence="false" extent="0in"/></fo:simple-page-master><fo:simple-page-master master-name="titlepage-odd" page-width="8.5in" page-height="11in" margin-top="0.5in" margin-bottom="0.5in" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="0.5in" margin-top="0.5in" column-gap="12pt" column-count="1" margin-left="0in" margin-right="0in"/><fo:region-before region-name="xsl-region-before-odd" extent="0.4in" precedence="true" display-align="before"/><fo:region-after region-name="xsl-region-after-odd" extent="0.4in" precedence="true" display-align="after"/><fo:region-start border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-inner-odd" precedence="false" extent="0in"/><fo:region-end border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-outer-odd" precedence="false" extent="0in"/></fo:simple-page-master><fo:simple-page-master master-name="titlepage-even" page-width="8.5in" page-height="11in" margin-top="0.5in" margin-bottom="0.5in" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="0.5in" margin-top="0.5in" column-gap="12pt" column-count="1" margin-left="0in" margin-right="0in"/><fo:region-before region-name="xsl-region-before-even" extent="0.4in" precedence="true" display-align="before"/><fo:region-after region-name="xsl-region-after-even" extent="0.4in" precedence="true" display-align="after"/><fo:region-start border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-outer-even" precedence="false" extent="0in"/><fo:region-end border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-inner-even" precedence="false" extent="0in"/></fo:simple-page-master><fo:simple-page-master master-name="lot-first" page-width="8.5in" page-height="11in" margin-top="0.5in" margin-bottom="0.5in" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="0.5in" margin-top="0.5in" column-gap="12pt" column-count="1" margin-left="0in" margin-right="0in"/><fo:region-before region-name="xsl-region-before-first" extent="0.4in" precedence="true" display-align="before"/><fo:region-after region-name="xsl-region-after-first" extent="0.4in" precedence="true" display-align="after"/><fo:region-start border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-inner-first" precedence="false" extent="0in"/><fo:region-end border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-outer-first" precedence="false" extent="0in"/></fo:simple-page-master><fo:simple-page-master master-name="lot-odd" page-width="8.5in" page-height="11in" margin-top="0.5in" margin-bottom="0.5in" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="0.5in" margin-top="0.5in" column-gap="12pt" column-count="1" margin-left="0in" margin-right="0in"/><fo:region-before region-name="xsl-region-before-odd" extent="0.4in" precedence="true" display-align="before"/><fo:region-after region-name="xsl-region-after-odd" extent="0.4in" precedence="true" display-align="after"/><fo:region-start border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-inner-odd" precedence="false" extent="0in"/><fo:region-end border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-outer-odd" precedence="false" extent="0in"/></fo:simple-page-master><fo:simple-page-master master-name="lot-even" page-width="8.5in" page-height="11in" margin-top="0.5in" margin-bottom="0.5in" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="0.5in" margin-top="0.5in" column-gap="12pt" column-count="1" margin-left="0in" margin-right="0in"/><fo:region-before region-name="xsl-region-before-even" extent="0.4in" precedence="true" display-align="before"/><fo:region-after region-name="xsl-region-after-even" extent="0.4in" precedence="true" display-align="after"/><fo:region-start border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-outer-even" precedence="false" extent="0in"/><fo:region-end border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-inner-even" precedence="false" extent="0in"/></fo:simple-page-master><fo:simple-page-master master-name="front-first" page-width="8.5in" page-height="11in" margin-top="0.5in" margin-bottom="0.5in" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="0.5in" margin-top="0.5in" column-gap="12pt" column-count="1" margin-left="0in" margin-right="0in"/><fo:region-before region-name="xsl-region-before-first" extent="0.4in" precedence="true" display-align="before"/><fo:region-after region-name="xsl-region-after-first" extent="0.4in" precedence="true" display-align="after"/><fo:region-start border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-inner-first" precedence="false" extent="0in"/><fo:region-end border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-outer-first" precedence="false" extent="0in"/></fo:simple-page-master><fo:simple-page-master master-name="front-odd" page-width="8.5in" page-height="11in" margin-top="0.5in" margin-bottom="0.5in" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="0.5in" margin-top="0.5in" column-gap="12pt" column-count="1" margin-left="0in" margin-right="0in"/><fo:region-before region-name="xsl-region-before-odd" extent="0.4in" precedence="true" display-align="before"/><fo:region-after region-name="xsl-region-after-odd" extent="0.4in" precedence="true" display-align="after"/><fo:region-start border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-inner-odd" precedence="false" extent="0in"/><fo:region-end border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-outer-odd" precedence="false" extent="0in"/></fo:simple-page-master><fo:simple-page-master master-name="front-even" page-width="8.5in" page-height="11in" margin-top="0.5in" margin-bottom="0.5in" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="0.5in" margin-top="0.5in" column-gap="12pt" column-count="1" margin-left="0in" margin-right="0in"/><fo:region-before region-name="xsl-region-before-even" extent="0.4in" precedence="true" display-align="before"/><fo:region-after region-name="xsl-region-after-even" extent="0.4in" precedence="true" display-align="after"/><fo:region-start border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-outer-even" precedence="false" extent="0in"/><fo:region-end border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-inner-even" precedence="false" extent="0in"/></fo:simple-page-master><fo:simple-page-master master-name="body-first" page-width="8.5in" page-height="11in" margin-top="0.5in" margin-bottom="0.5in" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="0.5in" margin-top="0.5in" column-gap="12pt" column-count="1" margin-left="0in" margin-right="0in"/><fo:region-before region-name="xsl-region-before-first" extent="0.4in" precedence="true" display-align="before"/><fo:region-after region-name="xsl-region-after-first" extent="0.4in" precedence="true" display-align="after"/><fo:region-start border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-inner-first" precedence="false" extent="0in"/><fo:region-end border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-outer-first" precedence="false" extent="0in"/></fo:simple-page-master><fo:simple-page-master master-name="body-odd" page-width="8.5in" page-height="11in" margin-top="0.5in" margin-bottom="0.5in" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="0.5in" margin-top="0.5in" column-gap="12pt" column-count="1" margin-left="0in" margin-right="0in"/><fo:region-before region-name="xsl-region-before-odd" extent="0.4in" precedence="true" display-align="before"/><fo:region-after region-name="xsl-region-after-odd" extent="0.4in" precedence="true" display-align="after"/><fo:region-start border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-inner-odd" precedence="false" extent="0in"/><fo:region-end border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-outer-odd" precedence="false" extent="0in"/></fo:simple-page-master><fo:simple-page-master master-name="body-even" page-width="8.5in" page-height="11in" margin-top="0.5in" margin-bottom="0.5in" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="0.5in" margin-top="0.5in" column-gap="12pt" column-count="1" margin-left="0in" margin-right="0in"/><fo:region-before region-name="xsl-region-before-even" extent="0.4in" precedence="true" display-align="before"/><fo:region-after region-name="xsl-region-after-even" extent="0.4in" precedence="true" display-align="after"/><fo:region-start border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-outer-even" precedence="false" extent="0in"/><fo:region-end border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-inner-even" precedence="false" extent="0in"/></fo:simple-page-master><fo:simple-page-master master-name="back-first" page-width="8.5in" page-height="11in" margin-top="0.5in" margin-bottom="0.5in" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="0.5in" margin-top="0.5in" column-gap="12pt" column-count="1" margin-left="0in" margin-right="0in"/><fo:region-before region-name="xsl-region-before-first" extent="0.4in" precedence="true" display-align="before"/><fo:region-after region-name="xsl-region-after-first" extent="0.4in" precedence="true" display-align="after"/><fo:region-start border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-inner-first" precedence="false" extent="0in"/><fo:region-end border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-outer-first" precedence="false" extent="0in"/></fo:simple-page-master><fo:simple-page-master master-name="back-odd" page-width="8.5in" page-height="11in" margin-top="0.5in" margin-bottom="0.5in" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="0.5in" margin-top="0.5in" column-gap="12pt" column-count="1" margin-left="0in" margin-right="0in"/><fo:region-before region-name="xsl-region-before-odd" extent="0.4in" precedence="true" display-align="before"/><fo:region-after region-name="xsl-region-after-odd" extent="0.4in" precedence="true" display-align="after"/><fo:region-start border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-inner-odd" precedence="false" extent="0in"/><fo:region-end border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-outer-odd" precedence="false" extent="0in"/></fo:simple-page-master><fo:simple-page-master master-name="back-even" page-width="8.5in" page-height="11in" margin-top="0.5in" margin-bottom="0.5in" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="0.5in" margin-top="0.5in" column-gap="12pt" column-count="1" margin-left="0in" margin-right="0in"/><fo:region-before region-name="xsl-region-before-even" extent="0.4in" precedence="true" display-align="before"/><fo:region-after region-name="xsl-region-after-even" extent="0.4in" precedence="true" display-align="after"/><fo:region-start border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-outer-even" precedence="false" extent="0in"/><fo:region-end border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-inner-even" precedence="false" extent="0in"/></fo:simple-page-master><fo:simple-page-master master-name="index-first" page-width="8.5in" page-height="11in" margin-top="0.5in" margin-bottom="0.5in" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="0.5in" margin-top="0.5in" column-gap="12pt" column-count="2" margin-left="0in" margin-right="0in"/><fo:region-before region-name="xsl-region-before-first" extent="0.4in" precedence="true" display-align="before"/><fo:region-after region-name="xsl-region-after-first" extent="0.4in" precedence="true" display-align="after"/><fo:region-start border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-inner-first" precedence="false" extent="0in"/><fo:region-end border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-outer-first" precedence="false" extent="0in"/></fo:simple-page-master><fo:simple-page-master master-name="index-odd" page-width="8.5in" page-height="11in" margin-top="0.5in" margin-bottom="0.5in" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="0.5in" margin-top="0.5in" column-gap="12pt" column-count="2" margin-left="0in" margin-right="0in"/><fo:region-before region-name="xsl-region-before-odd" extent="0.4in" precedence="true" display-align="before"/><fo:region-after region-name="xsl-region-after-odd" extent="0.4in" precedence="true" display-align="after"/><fo:region-start border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-inner-odd" precedence="false" extent="0in"/><fo:region-end border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-outer-odd" precedence="false" extent="0in"/></fo:simple-page-master><fo:simple-page-master master-name="index-even" page-width="8.5in" page-height="11in" margin-top="0.5in" margin-bottom="0.5in" margin-left="1in" margin-right="1in"><fo:region-body margin-bottom="0.5in" margin-top="0.5in" column-gap="12pt" column-count="2" margin-left="0in" margin-right="0in"/><fo:region-before region-name="xsl-region-before-even" extent="0.4in" precedence="true" display-align="before"/><fo:region-after region-name="xsl-region-after-even" extent="0.4in" precedence="true" display-align="after"/><fo:region-start border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-outer-even" precedence="false" extent="0in"/><fo:region-end border-width="0" padding="0" reference-orientation="90" region-name="xsl-region-inner-even" precedence="false" extent="0in"/></fo:simple-page-master><fo:page-sequence-master master-name="titlepage"><fo:repeatable-page-master-alternatives><fo:conditional-page-master-reference master-reference="blank" blank-or-not-blank="blank"/><fo:conditional-page-master-reference master-reference="titlepage-first" page-position="first"/><fo:conditional-page-master-reference master-reference="titlepage-odd" odd-or-even="odd"/><fo:conditional-page-master-reference odd-or-even="even" master-reference="titlepage-odd"/></fo:repeatable-page-master-alternatives></fo:page-sequence-master><fo:page-sequence-master master-name="lot"><fo:repeatable-page-master-alternatives><fo:conditional-page-master-reference master-reference="blank" blank-or-not-blank="blank"/><fo:conditional-page-master-reference master-reference="lot-first" page-position="first"/><fo:conditional-page-master-reference master-reference="lot-odd" odd-or-even="odd"/><fo:conditional-page-master-reference odd-or-even="even" master-reference="lot-odd"/></fo:repeatable-page-master-alternatives></fo:page-sequence-master><fo:page-sequence-master master-name="front"><fo:repeatable-page-master-alternatives><fo:conditional-page-master-reference master-reference="blank" blank-or-not-blank="blank"/><fo:conditional-page-master-reference master-reference="front-first" page-position="first"/><fo:conditional-page-master-reference master-reference="front-odd" odd-or-even="odd"/><fo:conditional-page-master-reference odd-or-even="even" master-reference="front-odd"/></fo:repeatable-page-master-alternatives></fo:page-sequence-master><fo:page-sequence-master master-name="body"><fo:repeatable-page-master-alternatives><fo:conditional-page-master-reference master-reference="blank" blank-or-not-blank="blank"/><fo:conditional-page-master-reference master-reference="body-first" page-position="first"/><fo:conditional-page-master-reference master-reference="body-odd" odd-or-even="odd"/><fo:conditional-page-master-reference odd-or-even="even" master-reference="body-odd"/></fo:repeatable-page-master-alternatives></fo:page-sequence-master><fo:page-sequence-master master-name="back"><fo:repeatable-page-master-alternatives><fo:conditional-page-master-reference master-reference="blank" blank-or-not-blank="blank"/><fo:conditional-page-master-reference master-reference="back-first" page-position="first"/><fo:conditional-page-master-reference master-reference="back-odd" odd-or-even="odd"/><fo:conditional-page-master-reference odd-or-even="even" master-reference="back-odd"/></fo:repeatable-page-master-alternatives></fo:page-sequence-master><fo:page-sequence-master master-name="index"><fo:repeatable-page-master-alternatives><fo:conditional-page-master-reference master-reference="blank" blank-or-not-blank="blank"/><fo:conditional-page-master-reference master-reference="index-first" page-position="first"/><fo:conditional-page-master-reference master-reference="index-odd" odd-or-even="odd"/><fo:conditional-page-master-reference odd-or-even="even" master-reference="index-odd"/></fo:repeatable-page-master-alternatives></fo:page-sequence-master></fo:layout-master-set><fo:page-sequence hyphenate="true" master-reference="titlepage" language="en" format="i" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"/></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="blank-body"><fo:block text-align="center"/></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"/></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body"><fo:block id="idm1"><fo:block><fo:block><fo:block text-align="center" font-size="24.8832pt" space-before="18.6624pt" font-weight="bold" font-family="sans-serif,Symbol,ZapfDingbats"><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" keep-with-next.within-column="always" hyphenate="false">Nix Package Manager Guide</fo:block></fo:block><fo:block text-align="center" font-size="20.736pt" space-before="15.552pt" font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold">Version 2.3.3</fo:block><fo:block font-size="17.28pt" space-before="10.8pt" keep-with-next.within-column="always" font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" text-align="center"><fo:block>Eelco Dolstra</fo:block></fo:block></fo:block><fo:block><fo:block break-after="page"/><fo:block font-size="14.4pt" font-weight="bold" font-family="sans-serif,Symbol,ZapfDingbats"><fo:block>Nix Package Manager Guide: Version 2.3.3</fo:block></fo:block><fo:block font-size="10pt"><fo:block>Eelco Dolstra</fo:block></fo:block><fo:block font-size="10pt">Copyright <fo:inline font-family="serif,Symbol,ZapfDingbats">Â©</fo:inline> 2004-2018 Eelco Dolstra</fo:block></fo:block><fo:block break-after="page"/></fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence hyphenate="true" master-reference="lot" language="en" format="i" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Nix Package Manager Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Nix Package Manager Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="blank-body"><fo:block text-align="center"/></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block id="toc...idm1" space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em"><fo:block><fo:block><fo:block space-before.minimum="1em" space-before.optimum="1.5em" space-before.maximum="2em" space-after="0.5em" start-indent="0pt" font-size="17.28pt" font-weight="bold" font-family="sans-serif,Symbol,ZapfDingbats">Table of Contents</fo:block></fo:block></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="chap-introduction">I. Introduction</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="chap-introduction"><fo:page-number-citation ref-id="chap-introduction"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.idm1.chap-introduction" margin-left="24pt"><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ch-about-nix">1. About Nix</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ch-about-nix"><fo:page-number-citation ref-id="ch-about-nix"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="chap-quick-start">2. Quick Start</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="chap-quick-start"><fo:page-number-citation ref-id="chap-quick-start"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="chap-installation">II. Installation</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="chap-installation"><fo:page-number-citation ref-id="chap-installation"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.idm1.chap-installation" margin-left="24pt"><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ch-supported-platforms">3. Supported Platforms</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ch-supported-platforms"><fo:page-number-citation ref-id="ch-supported-platforms"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ch-installing-binary">4. Installing a Binary Distribution</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ch-installing-binary"><fo:page-number-citation ref-id="ch-installing-binary"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.idm1.ch-installing-binary" margin-left="24pt"><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sect-single-user-installation">Single User Installation</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sect-single-user-installation"><fo:page-number-citation ref-id="sect-single-user-installation"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sect-multi-user-installation">Multi User Installation</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sect-multi-user-installation"><fo:page-number-citation ref-id="sect-multi-user-installation"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sect-nix-install-pinned-version-url">Installing a pinned Nix version from a URL</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sect-nix-install-pinned-version-url"><fo:page-number-citation ref-id="sect-nix-install-pinned-version-url"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sect-nix-install-binary-tarball">Installing from a binary tarball</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sect-nix-install-binary-tarball"><fo:page-number-citation ref-id="sect-nix-install-binary-tarball"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ch-installing-source">5. Installing Nix from Source</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ch-installing-source"><fo:page-number-citation ref-id="ch-installing-source"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.idm1.ch-installing-source" margin-left="24pt"><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-prerequisites-source">Prerequisites</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-prerequisites-source"><fo:page-number-citation ref-id="sec-prerequisites-source"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-obtaining-source">Obtaining a Source Distribution</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-obtaining-source"><fo:page-number-citation ref-id="sec-obtaining-source"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-building-source">Building Nix from Source</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-building-source"><fo:page-number-citation ref-id="sec-building-source"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ch-nix-security">6. Security</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ch-nix-security"><fo:page-number-citation ref-id="ch-nix-security"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.idm1.ch-nix-security" margin-left="24pt"><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-single-user">Single-User Mode</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-single-user"><fo:page-number-citation ref-id="sec-single-user"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ssec-multi-user">Multi-User Mode</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ssec-multi-user"><fo:page-number-citation ref-id="ssec-multi-user"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ch-env-variables">7. Environment Variables</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ch-env-variables"><fo:page-number-citation ref-id="ch-env-variables"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.idm1.ch-env-variables" margin-left="24pt"><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-nix-ssl-cert-file"><fo:inline font-family="monospace">NIX_SSL_CERT_FILE</fo:inline></fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-nix-ssl-cert-file"><fo:page-number-citation ref-id="sec-nix-ssl-cert-file"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.idm1.sec-nix-ssl-cert-file" margin-left="24pt"><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-nix-ssl-cert-file-with-nix-daemon-and-macos"><fo:inline font-family="monospace">NIX_SSL_CERT_FILE</fo:inline> with macOS and the Nix daemon</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-nix-ssl-cert-file-with-nix-daemon-and-macos"><fo:page-number-citation ref-id="sec-nix-ssl-cert-file-with-nix-daemon-and-macos"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-installer-proxy-settings">Proxy Environment Variables</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-installer-proxy-settings"><fo:page-number-citation ref-id="sec-installer-proxy-settings"/></fo:basic-link></fo:inline></fo:block></fo:block></fo:block></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ch-upgrading-nix">8. Upgrading Nix</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ch-upgrading-nix"><fo:page-number-citation ref-id="ch-upgrading-nix"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="chap-package-management">III. Package Management</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="chap-package-management"><fo:page-number-citation ref-id="chap-package-management"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.idm1.chap-package-management" margin-left="24pt"><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ch-basic-package-mgmt">9. Basic Package Management</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ch-basic-package-mgmt"><fo:page-number-citation ref-id="ch-basic-package-mgmt"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-profiles">10. Profiles</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-profiles"><fo:page-number-citation ref-id="sec-profiles"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-garbage-collection">11. Garbage Collection</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-garbage-collection"><fo:page-number-citation ref-id="sec-garbage-collection"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.idm1.sec-garbage-collection" margin-left="24pt"><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ssec-gc-roots">Garbage Collector Roots</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ssec-gc-roots"><fo:page-number-citation ref-id="ssec-gc-roots"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-channels">12. Channels</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-channels"><fo:page-number-citation ref-id="sec-channels"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-sharing-packages">13. Sharing Packages Between Machines</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-sharing-packages"><fo:page-number-citation ref-id="sec-sharing-packages"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.idm1.sec-sharing-packages" margin-left="24pt"><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ssec-binary-cache-substituter">Serving a Nix store via HTTP</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ssec-binary-cache-substituter"><fo:page-number-citation ref-id="ssec-binary-cache-substituter"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ssec-copy-closure">Copying Closures Via SSH</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ssec-copy-closure"><fo:page-number-citation ref-id="ssec-copy-closure"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ssec-ssh-substituter">Serving a Nix store via SSH</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ssec-ssh-substituter"><fo:page-number-citation ref-id="ssec-ssh-substituter"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ssec-s3-substituter">Serving a Nix store via AWS S3 or S3-compatible Service</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ssec-s3-substituter"><fo:page-number-citation ref-id="ssec-s3-substituter"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.idm1.ssec-s3-substituter" margin-left="24pt"><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ssec-s3-substituter-anonymous-reads">Anonymous Reads to your S3-compatible binary cache</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ssec-s3-substituter-anonymous-reads"><fo:page-number-citation ref-id="ssec-s3-substituter-anonymous-reads"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ssec-s3-substituter-authenticated-reads">Authenticated Reads to your S3 binary cache</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ssec-s3-substituter-authenticated-reads"><fo:page-number-citation ref-id="ssec-s3-substituter-authenticated-reads"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ssec-s3-substituter-authenticated-writes">Authenticated Writes to your S3-compatible binary cache</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ssec-s3-substituter-authenticated-writes"><fo:page-number-citation ref-id="ssec-s3-substituter-authenticated-writes"/></fo:basic-link></fo:inline></fo:block></fo:block></fo:block></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="chap-writing-nix-expressions">IV. Writing Nix Expressions</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="chap-writing-nix-expressions"><fo:page-number-citation ref-id="chap-writing-nix-expressions"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.idm1.chap-writing-nix-expressions" margin-left="24pt"><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ch-simple-expression">14. A Simple Nix Expression</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ch-simple-expression"><fo:page-number-citation ref-id="ch-simple-expression"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.idm1.ch-simple-expression" margin-left="24pt"><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-expression-syntax">Expression Syntax</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-expression-syntax"><fo:page-number-citation ref-id="sec-expression-syntax"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-build-script">Build Script</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-build-script"><fo:page-number-citation ref-id="sec-build-script"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-arguments">Arguments and Variables</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-arguments"><fo:page-number-citation ref-id="sec-arguments"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-building-simple">Building and Testing</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-building-simple"><fo:page-number-citation ref-id="sec-building-simple"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-generic-builder">Generic Builder Syntax</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-generic-builder"><fo:page-number-citation ref-id="sec-generic-builder"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ch-expression-language">15. Nix Expression Language</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ch-expression-language"><fo:page-number-citation ref-id="ch-expression-language"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.idm1.ch-expression-language" margin-left="24pt"><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ssec-values">Values</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ssec-values"><fo:page-number-citation ref-id="ssec-values"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-constructs">Language Constructs</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-constructs"><fo:page-number-citation ref-id="sec-constructs"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-language-operators">Operators</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-language-operators"><fo:page-number-citation ref-id="sec-language-operators"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ssec-derivation">Derivations</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ssec-derivation"><fo:page-number-citation ref-id="ssec-derivation"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.idm1.ssec-derivation" margin-left="24pt"><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-advanced-attributes">Advanced Attributes</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-advanced-attributes"><fo:page-number-citation ref-id="sec-advanced-attributes"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ssec-builtins">Built-in Functions</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ssec-builtins"><fo:page-number-citation ref-id="ssec-builtins"/></fo:basic-link></fo:inline></fo:block></fo:block></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="part-advanced-topics">V. Advanced Topics</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="part-advanced-topics"><fo:page-number-citation ref-id="part-advanced-topics"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.idm1.part-advanced-topics" margin-left="24pt"><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="chap-distributed-builds">16. Remote Builds</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="chap-distributed-builds"><fo:page-number-citation ref-id="chap-distributed-builds"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="chap-tuning-cores-and-jobs">17. Tuning Cores and Jobs</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="chap-tuning-cores-and-jobs"><fo:page-number-citation ref-id="chap-tuning-cores-and-jobs"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="chap-diff-hook">18. Verifying Build Reproducibility with <fo:inline font-family="monospace"><fo:basic-link internal-destination="conf-diff-hook">diff-hook</fo:basic-link></fo:inline></fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="chap-diff-hook"><fo:page-number-citation ref-id="chap-diff-hook"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.idm1.chap-diff-hook" margin-left="24pt"><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="idm3074">
    Spot-Checking Build Determinism
  </fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="idm3074"><fo:page-number-citation ref-id="idm3074"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="idm3103">
    Automatic and Optionally Enforced Determinism Verification
  </fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="idm3103"><fo:page-number-citation ref-id="idm3103"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="chap-post-build-hook">19. Using the <fo:inline font-family="monospace">post-build-hook</fo:inline></fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="chap-post-build-hook"><fo:page-number-citation ref-id="chap-post-build-hook"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.idm1.chap-post-build-hook" margin-left="24pt"><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="chap-post-build-hook-caveats">Implementation Caveats</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="chap-post-build-hook-caveats"><fo:page-number-citation ref-id="chap-post-build-hook-caveats"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="idm3127">Prerequisites</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="idm3127"><fo:page-number-citation ref-id="idm3127"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="idm3132">Set up a Signing Key</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="idm3132"><fo:page-number-citation ref-id="idm3132"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="idm3143">Implementing the build hook</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="idm3143"><fo:page-number-citation ref-id="idm3143"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="idm3158">Updating Nix Configuration</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="idm3158"><fo:page-number-citation ref-id="idm3158"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="idm3165">Testing</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="idm3165"><fo:page-number-citation ref-id="idm3165"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="idm3173">Conclusion</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="idm3173"><fo:page-number-citation ref-id="idm3173"/></fo:basic-link></fo:inline></fo:block></fo:block></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="part-command-ref">VI. Command Reference</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="part-command-ref"><fo:page-number-citation ref-id="part-command-ref"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.idm1.part-command-ref" margin-left="24pt"><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-common-options">20. Common Options</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-common-options"><fo:page-number-citation ref-id="sec-common-options"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-common-env">21. Common Environment Variables</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-common-env"><fo:page-number-citation ref-id="sec-common-env"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ch-main-commands">22. Main Commands</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ch-main-commands"><fo:page-number-citation ref-id="ch-main-commands"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.idm1.ch-main-commands" margin-left="24pt"><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-nix-env">nix-env</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-nix-env"><fo:page-number-citation ref-id="sec-nix-env"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-nix-build">nix-build</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-nix-build"><fo:page-number-citation ref-id="sec-nix-build"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-nix-shell">nix-shell</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-nix-shell"><fo:page-number-citation ref-id="sec-nix-shell"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-nix-store">nix-store</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-nix-store"><fo:page-number-citation ref-id="sec-nix-store"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ch-utilities">23. Utilities</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ch-utilities"><fo:page-number-citation ref-id="ch-utilities"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.idm1.ch-utilities" margin-left="24pt"><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-nix-channel">nix-channel</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-nix-channel"><fo:page-number-citation ref-id="sec-nix-channel"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-nix-collect-garbage">nix-collect-garbage</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-nix-collect-garbage"><fo:page-number-citation ref-id="sec-nix-collect-garbage"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-nix-copy-closure">nix-copy-closure</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-nix-copy-closure"><fo:page-number-citation ref-id="sec-nix-copy-closure"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-nix-daemon">nix-daemon</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-nix-daemon"><fo:page-number-citation ref-id="sec-nix-daemon"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-nix-hash">nix-hash</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-nix-hash"><fo:page-number-citation ref-id="sec-nix-hash"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-nix-instantiate">nix-instantiate</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-nix-instantiate"><fo:page-number-citation ref-id="sec-nix-instantiate"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-nix-prefetch-url">nix-prefetch-url</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-nix-prefetch-url"><fo:page-number-citation ref-id="sec-nix-prefetch-url"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ch-files">24. Files</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ch-files"><fo:page-number-citation ref-id="ch-files"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.idm1.ch-files" margin-left="24pt"><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-conf-file">nix.conf</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-conf-file"><fo:page-number-citation ref-id="sec-conf-file"/></fo:basic-link></fo:inline></fo:block></fo:block></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="part-glossary">A. Glossary</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="part-glossary"><fo:page-number-citation ref-id="part-glossary"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="chap-hacking">B. Hacking</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="chap-hacking"><fo:page-number-citation ref-id="chap-hacking"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-relnotes">C. Nix Release Notes</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-relnotes"><fo:page-number-citation ref-id="sec-relnotes"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.idm1.sec-relnotes" margin-left="24pt"><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ssec-relnotes-2.3">Release 2.3 (2019-09-04)</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ssec-relnotes-2.3"><fo:page-number-citation ref-id="ssec-relnotes-2.3"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ssec-relnotes-2.2">Release 2.2 (2019-01-11)</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ssec-relnotes-2.2"><fo:page-number-citation ref-id="ssec-relnotes-2.2"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ssec-relnotes-2.1">Release 2.1 (2018-09-02)</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ssec-relnotes-2.1"><fo:page-number-citation ref-id="ssec-relnotes-2.1"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ssec-relnotes-2.0">Release 2.0 (2018-02-22)</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ssec-relnotes-2.0"><fo:page-number-citation ref-id="ssec-relnotes-2.0"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ssec-relnotes-1.11.10">Release 1.11.10 (2017-06-12)</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ssec-relnotes-1.11.10"><fo:page-number-citation ref-id="ssec-relnotes-1.11.10"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ssec-relnotes-1.11">Release 1.11 (2016-01-19)</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ssec-relnotes-1.11"><fo:page-number-citation ref-id="ssec-relnotes-1.11"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ssec-relnotes-1.10">Release 1.10 (2015-09-03)</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ssec-relnotes-1.10"><fo:page-number-citation ref-id="ssec-relnotes-1.10"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ssec-relnotes-1.9">Release 1.9 (2015-06-12)</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ssec-relnotes-1.9"><fo:page-number-citation ref-id="ssec-relnotes-1.9"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ssec-relnotes-1.8">Release 1.8 (2014-12-14)</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ssec-relnotes-1.8"><fo:page-number-citation ref-id="ssec-relnotes-1.8"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ssec-relnotes-1.7">Release 1.7 (2014-04-11)</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ssec-relnotes-1.7"><fo:page-number-citation ref-id="ssec-relnotes-1.7"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ssec-relnotes-1.6.1">Release 1.6.1 (2013-10-28)</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ssec-relnotes-1.6.1"><fo:page-number-citation ref-id="ssec-relnotes-1.6.1"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ssec-relnotes-1.6.0">Release 1.6 (2013-09-10)</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ssec-relnotes-1.6.0"><fo:page-number-citation ref-id="ssec-relnotes-1.6.0"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ssec-relnotes-1.5.2">Release 1.5.2 (2013-05-13)</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ssec-relnotes-1.5.2"><fo:page-number-citation ref-id="ssec-relnotes-1.5.2"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ssec-relnotes-1.5">Release 1.5 (2013-02-27)</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ssec-relnotes-1.5"><fo:page-number-citation ref-id="ssec-relnotes-1.5"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ssec-relnotes-1.4">Release 1.4 (2013-02-26)</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ssec-relnotes-1.4"><fo:page-number-citation ref-id="ssec-relnotes-1.4"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ssec-relnotes-1.3">Release 1.3 (2013-01-04)</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ssec-relnotes-1.3"><fo:page-number-citation ref-id="ssec-relnotes-1.3"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ssec-relnotes-1.2">Release 1.2 (2012-12-06)</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ssec-relnotes-1.2"><fo:page-number-citation ref-id="ssec-relnotes-1.2"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ssec-relnotes-1.1">Release 1.1 (2012-07-18)</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ssec-relnotes-1.1"><fo:page-number-citation ref-id="ssec-relnotes-1.1"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ssec-relnotes-1.0">Release 1.0 (2012-05-11)</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ssec-relnotes-1.0"><fo:page-number-citation ref-id="ssec-relnotes-1.0"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ssec-relnotes-0.16">Release 0.16 (2010-08-17)</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ssec-relnotes-0.16"><fo:page-number-citation ref-id="ssec-relnotes-0.16"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ssec-relnotes-0.15">Release 0.15 (2010-03-17)</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ssec-relnotes-0.15"><fo:page-number-citation ref-id="ssec-relnotes-0.15"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ssec-relnotes-0.14">Release 0.14 (2010-02-04)</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ssec-relnotes-0.14"><fo:page-number-citation ref-id="ssec-relnotes-0.14"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ssec-relnotes-0.13">Release 0.13 (2009-11-05)</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ssec-relnotes-0.13"><fo:page-number-citation ref-id="ssec-relnotes-0.13"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ssec-relnotes-0.12">Release 0.12 (2008-11-20)</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ssec-relnotes-0.12"><fo:page-number-citation ref-id="ssec-relnotes-0.12"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ssec-relnotes-0.11">Release 0.11 (2007-12-31)</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ssec-relnotes-0.11"><fo:page-number-citation ref-id="ssec-relnotes-0.11"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ch-relnotes-0.10.1">Release 0.10.1 (2006-10-11)</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ch-relnotes-0.10.1"><fo:page-number-citation ref-id="ch-relnotes-0.10.1"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ch-relnotes-0.10">Release 0.10 (2006-10-06)</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ch-relnotes-0.10"><fo:page-number-citation ref-id="ch-relnotes-0.10"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ch-relnotes-0.9.2">Release 0.9.2 (2005-09-21)</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ch-relnotes-0.9.2"><fo:page-number-citation ref-id="ch-relnotes-0.9.2"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ch-relnotes-0.9.1">Release 0.9.1 (2005-09-20)</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ch-relnotes-0.9.1"><fo:page-number-citation ref-id="ch-relnotes-0.9.1"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ch-relnotes-0.9">Release 0.9 (2005-09-16)</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ch-relnotes-0.9"><fo:page-number-citation ref-id="ch-relnotes-0.9"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ch-relnotes-0.8.1">Release 0.8.1 (2005-04-13)</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ch-relnotes-0.8.1"><fo:page-number-citation ref-id="ch-relnotes-0.8.1"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ch-relnotes-0.8">Release 0.8 (2005-04-11)</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ch-relnotes-0.8"><fo:page-number-citation ref-id="ch-relnotes-0.8"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ch-relnotes-0.7">Release 0.7 (2005-01-12)</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ch-relnotes-0.7"><fo:page-number-citation ref-id="ch-relnotes-0.7"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ch-relnotes-0.6">Release 0.6 (2004-11-14)</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ch-relnotes-0.6"><fo:page-number-citation ref-id="ch-relnotes-0.6"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ch-relnotes-0.5">Release 0.5 and earlier</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ch-relnotes-0.5"><fo:page-number-citation ref-id="ch-relnotes-0.5"/></fo:basic-link></fo:inline></fo:block></fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence hyphenate="true" master-reference="lot" language="en" format="i" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Nix Package Manager Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Nix Package Manager Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="blank-body"><fo:block text-align="center"/></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block id="lot...figure...idm1" space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em"><fo:block><fo:block><fo:block space-before.minimum="1em" space-before.optimum="1.5em" space-before.maximum="2em" space-after="0.5em" start-indent="0pt" font-size="17.28pt" font-weight="bold" font-family="sans-serif,Symbol,ZapfDingbats">List of Figures</fo:block></fo:block></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="fig-user-environments">10.1. User environments</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="fig-user-environments"><fo:page-number-citation ref-id="fig-user-environments"/></fo:basic-link></fo:inline></fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence hyphenate="true" master-reference="lot" language="en" format="i" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Nix Package Manager Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Nix Package Manager Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="blank-body"><fo:block text-align="center"/></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block id="lot...table...idm1" space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em"><fo:block><fo:block><fo:block space-before.minimum="1em" space-before.optimum="1.5em" space-before.maximum="2em" space-after="0.5em" start-indent="0pt" font-size="17.28pt" font-weight="bold" font-family="sans-serif,Symbol,ZapfDingbats">List of Tables</fo:block></fo:block></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="table-operators">15.1. Operators</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="table-operators"><fo:page-number-citation ref-id="table-operators"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="idm3014">17.1. Balancing 24 Build Cores</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="idm3014"><fo:page-number-citation ref-id="idm3014"/></fo:basic-link></fo:inline></fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence hyphenate="true" master-reference="lot" language="en" format="i" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Nix Package Manager Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Nix Package Manager Guide</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="blank-body"><fo:block text-align="center"/></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block id="lot...example...idm1" space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em"><fo:block><fo:block><fo:block space-before.minimum="1em" space-before.optimum="1.5em" space-before.maximum="2em" space-after="0.5em" start-indent="0pt" font-size="17.28pt" font-weight="bold" font-family="sans-serif,Symbol,ZapfDingbats">List of Examples</fo:block></fo:block></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="idm753">13.1. Uploading with a specific credential profile for Amazon S3</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="idm753"><fo:page-number-citation ref-id="idm753"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="idm757">13.2. Uploading to an S3-Compatible Binary Cache</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="idm757"><fo:page-number-citation ref-id="idm757"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ex-hello-nix">14.1. Nix expression for GNU Hello
(<fo:inline font-family="monospace">default.nix</fo:inline>)</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ex-hello-nix"><fo:page-number-citation ref-id="ex-hello-nix"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ex-hello-builder">14.2. Build script for GNU Hello
(<fo:inline font-family="monospace">builder.sh</fo:inline>)</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ex-hello-builder"><fo:page-number-citation ref-id="ex-hello-builder"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ex-hello-composition">14.3. Composing GNU Hello
(<fo:inline font-family="monospace">all-packages.nix</fo:inline>)</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ex-hello-composition"><fo:page-number-citation ref-id="ex-hello-composition"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ex-hello-builder2">14.4. Build script using the generic
build functions</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ex-hello-builder2"><fo:page-number-citation ref-id="ex-hello-builder2"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ex-subversion-nix">15.1. Nix expression for Subversion</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ex-subversion-nix"><fo:page-number-citation ref-id="ex-subversion-nix"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="idm2140">15.2. Fetching a private repository over SSH</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="idm2140"><fo:page-number-citation ref-id="idm2140"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="idm2143">15.3. Fetching an arbitrary ref</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="idm2143"><fo:page-number-citation ref-id="idm2143"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="idm2146">15.4. Fetching a repository's specific commit on an arbitrary branch</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="idm2146"><fo:page-number-citation ref-id="idm2146"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="idm2155">15.5. Fetching a repository's specific commit on the default branch</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="idm2155"><fo:page-number-citation ref-id="idm2155"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="idm2160">15.6. Fetching a tag</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="idm2160"><fo:page-number-citation ref-id="idm2160"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="idm2163">15.7. Fetching the latest version of a remote branch</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="idm2163"><fo:page-number-citation ref-id="idm2163"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ex-toxml">15.8. Passing information to a builder
    using <fo:inline font-family="monospace">toXML</fo:inline></fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ex-toxml"><fo:page-number-citation ref-id="ex-toxml"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ex-toxml-result">15.9. XML representation produced by
    <fo:inline font-family="monospace">toXML</fo:inline></fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ex-toxml-result"><fo:page-number-citation ref-id="ex-toxml-result"/></fo:basic-link></fo:inline></fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="true" master-reference="titlepage" language="en" format="1" initial-page-number="1" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="blank-body"><fo:block text-align="center"/></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body"><fo:block id="chap-introduction"><fo:block><fo:block><fo:block text-align="center" font-size="24.8832pt" space-before="18.6624pt" font-weight="bold" font-family="sans-serif,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always" hyphenate="false">PartÂ I.Â Introduction</fo:block></fo:block></fo:block></fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence hyphenate="true" master-reference="lot" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Introduction</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Introduction</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="blank-body"><fo:block text-align="center"/></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block id="toc...chap-introduction" space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em"><fo:block><fo:block><fo:block space-before.minimum="1em" space-before.optimum="1.5em" space-before.maximum="2em" space-after="0.5em" start-indent="0pt" font-size="17.28pt" font-weight="bold" font-family="sans-serif,Symbol,ZapfDingbats">Table of Contents</fo:block></fo:block></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ch-about-nix">1. About Nix</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ch-about-nix"><fo:page-number-citation ref-id="ch-about-nix"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="chap-quick-start">2. Quick Start</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="chap-quick-start"><fo:page-number-citation ref-id="chap-quick-start"/></fo:basic-link></fo:inline></fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="true" master-reference="body" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>About Nix</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>About Nix</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="blank-body"><fo:block text-align="center"/></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block id="ch-about-nix"><fo:block font-family="sans-serif,Symbol,ZapfDingbats"><fo:block margin-left="0pt"><fo:block font-size="24.8832pt" font-weight="bold"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0pt" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">ChapterÂ 1.Â About Nix</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix is a <fo:inline font-style="italic">purely functional package manager</fo:inline>.
This means that it treats packages like values in purely functional
programming languages such as Haskell â they are built by functions
that donât have side-effects, and they never change after they have
been built.  Nix stores packages in the <fo:inline font-style="italic">Nix
store</fo:inline>, usually the directory
<fo:inline font-family="monospace">/nix/store</fo:inline>, where each package has its own unique
subdirectory such as

<fo:block id="idm21" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
/nix/store/b6gvzjyb2pg0kjfwrjmg1vfhh54ad73z-firefox-33.1/
</fo:block>

where <fo:inline font-family="monospace">b6gvzjyb2pg0â¦</fo:inline> is a unique identifier for the
package that captures all its dependencies (itâs a cryptographic hash
of the packageâs build dependency graph).  This enables many powerful
features.</fo:block><fo:block id="idm23"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Multiple versions</fo:marker><fo:block font-size="20.736pt">Multiple versions</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You can have multiple versions or variants of a package
installed at the same time.  This is especially important when
different applications have dependencies on different versions of the
same package â it prevents the âDLL hellâ.  Because of the hashing
scheme, different versions of a package end up in different paths in
the Nix store, so they donât interfere with each other.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">An important consequence is that operations like upgrading or
uninstalling an application cannot break other applications, since
these operations never âdestructivelyâ update or delete files that are
used by other packages.</fo:block></fo:block><fo:block id="idm27"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Complete dependencies</fo:marker><fo:block font-size="20.736pt">Complete dependencies</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix helps you make sure that package dependency specifications
are complete.  In general, when youâre making a package for a package
management system like RPM, you have to specify for each package what
its dependencies are, but there are no guarantees that this
specification is complete.  If you forget a dependency, then the
package will build and work correctly on <fo:inline font-style="italic">your</fo:inline>
machine if you have the dependency installed, but not on the end
user's machine if it's not there.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Since Nix on the other hand doesnât install packages in âglobalâ
locations like <fo:inline font-family="monospace">/usr/bin</fo:inline> but in package-specific
directories, the risk of incomplete dependencies is greatly reduced.
This is because tools such as compilers donât search in per-packages
directories such as
<fo:inline font-family="monospace">/nix/store/5lbfaxb722zpâ¦-openssl-0.9.8d/include</fo:inline>,
so if a package builds correctly on your system, this is because you
specified the dependency explicitly. This takes care of the build-time
dependencies.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Once a package is built, runtime dependencies are found by
scanning binaries for the hash parts of Nix store paths (such as
<fo:inline font-family="monospace">r8vvq9kqâ¦</fo:inline>).  This sounds risky, but it works
extremely well.</fo:block></fo:block><fo:block id="idm36"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Multi-user support</fo:marker><fo:block font-size="20.736pt">Multi-user support</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix has multi-user support.  This means that non-privileged
users can securely install software.  Each user can have a different
<fo:inline font-style="italic">profile</fo:inline>, a set of packages in the Nix store that
appear in the userâs <fo:inline font-family="monospace">PATH</fo:inline>.  If a user installs a
package that another user has already installed previously, the
package wonât be built or downloaded a second time.  At the same time,
it is not possible for one user to inject a Trojan horse into a
package that might be used by another user.</fo:block></fo:block><fo:block id="idm41"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Atomic upgrades and rollbacks</fo:marker><fo:block font-size="20.736pt">Atomic upgrades and rollbacks</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Since package management operations never overwrite packages in
the Nix store but just add new versions in different paths, they are
<fo:inline font-style="italic">atomic</fo:inline>.  So during a package upgrade, there is no
time window in which the package has some files from the old version
and some files from the new version â which would be bad because a
program might well crash if itâs started during that period.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">And since packages arenât overwritten, the old versions are still
there after an upgrade.  This means that you can <fo:inline font-style="italic">roll
back</fo:inline> to the old version:</fo:block><fo:block id="idm47" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env --upgrade <fo:inline font-style="italic" font-family="monospace">some-packages</fo:inline>
$ nix-env --rollback
</fo:block></fo:block><fo:block id="idm49"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Garbage collection</fo:marker><fo:block font-size="20.736pt">Garbage collection</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">When you uninstall a package like thisâ¦

<fo:block id="idm52" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env --uninstall firefox
</fo:block>

the package isnât deleted from the system right away (after all, you
might want to do a rollback, or it might be in the profiles of other
users).  Instead, unused packages can be deleted safely by running the
<fo:inline font-style="italic">garbage collector</fo:inline>:

<fo:block id="idm54" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-collect-garbage
</fo:block>

This deletes all packages that arenât in use by any user profile or by
a currently running program.</fo:block></fo:block><fo:block id="idm55"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Functional package language</fo:marker><fo:block font-size="20.736pt">Functional package language</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Packages are built from <fo:inline font-style="italic">Nix expressions</fo:inline>,
which is a simple functional language.  A Nix expression describes
everything that goes into a package build action (a âderivationâ):
other packages, sources, the build script, environment variables for
the build script, etc.  Nix tries very hard to ensure that Nix
expressions are <fo:inline font-style="italic">deterministic</fo:inline>: building a Nix
expression twice should yield the same result.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Because itâs a functional language, itâs easy to support
building variants of a package: turn the Nix expression into a
function and call it any number of times with the appropriate
arguments.  Due to the hashing scheme, variants donât conflict with
each other in the Nix store.</fo:block></fo:block><fo:block id="idm61"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Transparent source/binary deployment</fo:marker><fo:block font-size="20.736pt">Transparent source/binary deployment</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix expressions generally describe how to build a package from
source, so an installation action like

<fo:block id="idm64" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env --install firefox
</fo:block>

<fo:inline font-style="italic">could</fo:inline> cause quite a bit of build activity, as not
only Firefox but also all its dependencies (all the way up to the C
library and the compiler) would have to built, at least if they are
not already in the Nix store.  This is a <fo:inline font-style="italic">source deployment
model</fo:inline>.  For most users, building from source is not very
pleasant as it takes far too long.  However, Nix can automatically
skip building from source and instead use a <fo:inline font-style="italic">binary
cache</fo:inline>, a web server that provides pre-built binaries. For
instance, when asked to build
<fo:inline font-family="monospace">/nix/store/b6gvzjyb2pg0â¦-firefox-33.1</fo:inline> from source,
Nix would first check if the file
<fo:inline font-family="monospace">https://cache.nixos.org/b6gvzjyb2pg0â¦.narinfo</fo:inline> exists, and
if so, fetch the pre-built binary referenced from there; otherwise, it
would fall back to building from source.</fo:block></fo:block><fo:block id="idm70"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Nix Packages collection</fo:marker><fo:block font-size="20.736pt">Nix Packages collection</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">We provide a large set of Nix expressions containing hundreds of
existing Unix packages, the <fo:inline font-style="italic">Nix Packages
collection</fo:inline> (Nixpkgs).</fo:block></fo:block><fo:block id="idm74"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Managing build environments</fo:marker><fo:block font-size="20.736pt">Managing build environments</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix is extremely useful for developers as it makes it easy to
automatically set up the build environment for a package. Given a
Nix expression that describes the dependencies of your package, the
command <fo:inline font-weight="bold">nix-shell</fo:inline> will build or download those
dependencies if theyâre not already in your Nix store, and then start
a Bash shell in which all necessary environment variables (such as
compiler search paths) are set.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">For example, the following command gets all dependencies of the
Pan newsreader, as described by <fo:basic-link external-destination="url(https://github.com/NixOS/nixpkgs/blob/master/pkgs/applications/networking/newsreaders/pan/default.nix)"><fo:inline>its
Nix expression</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(https://github.com/NixOS/nixpkgs/blob/master/pkgs/applications/networking/newsreaders/pan/default.nix)">https://github.com/NixOS/nixpkgs/blob/master/pkgs/applications/networking/newsreaders/pan/default.nix</fo:basic-link>]</fo:inline>:</fo:block><fo:block id="idm80" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-shell '&lt;nixpkgs&gt;' -A pan
</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Youâre then dropped into a shell where you can edit, build and test
the package:</fo:block><fo:block id="idm82" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
[nix-shell]$ tar xf $src
[nix-shell]$ cd pan-*
[nix-shell]$ ./configure
[nix-shell]$ make
[nix-shell]$ ./pan/gui/pan
</fo:block></fo:block><fo:block id="idm83"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Portability</fo:marker><fo:block font-size="20.736pt">Portability</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix runs on Linux and macOS.</fo:block></fo:block><fo:block id="idm86"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">NixOS</fo:marker><fo:block font-size="20.736pt">NixOS</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">NixOS is a Linux distribution based on Nix.  It uses Nix not
just for package management but also to manage the system
configuration (e.g., to build configuration files in
<fo:inline font-family="monospace">/etc</fo:inline>).  This means, among other things, that it
is easy to roll back the entire configuration of the system to an
earlier state.  Also, users can install software without root
privileges.  For more information and downloads, see the <fo:basic-link external-destination="url(http://nixos.org/)"><fo:inline>NixOS homepage</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(http://nixos.org/)">http://nixos.org/</fo:basic-link>]</fo:inline>.</fo:block></fo:block><fo:block id="idm91"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">License</fo:marker><fo:block font-size="20.736pt">License</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix is released under the terms of the <fo:basic-link external-destination="url(http://www.gnu.org/licenses/old-licenses/lgpl-2.1.html)"><fo:inline>GNU
LGPLv2.1 or (at your option) any later version</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(http://www.gnu.org/licenses/old-licenses/lgpl-2.1.html)">http://www.gnu.org/licenses/old-licenses/lgpl-2.1.html</fo:basic-link>]</fo:inline>.</fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="true" master-reference="body" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Quick Start</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Quick Start</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="blank-body"><fo:block text-align="center"/></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block id="chap-quick-start"><fo:block font-family="sans-serif,Symbol,ZapfDingbats"><fo:block margin-left="0pt"><fo:block font-size="24.8832pt" font-weight="bold"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0pt" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">ChapterÂ 2.Â Quick Start</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This chapter is for impatient people who don't like reading
documentation.  For more in-depth information you are kindly referred
to subsequent chapters.</fo:block><fo:block id="idm98" keep-together.within-column="auto" space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em"><fo:list-block provisional-distance-between-starts="2em" provisional-label-separation="0.2em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block id="idm99">1.
          </fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Install single-user Nix by running the following:

<fo:block id="idm101" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ bash &lt;(curl https://nixos.org/nix/install)
</fo:block>

This will install Nix in <fo:inline font-family="monospace">/nix</fo:inline>. The install script
will create <fo:inline font-family="monospace">/nix</fo:inline> using <fo:inline font-weight="bold">sudo</fo:inline>,
so make sure you have sufficient rights.  (For other installation
methods, see <fo:basic-link internal-destination="chap-installation"><fo:inline>PartÂ II, âInstallationâ</fo:inline></fo:basic-link>.)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block id="idm106">2.
          </fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">See what installable packages are currently available
in the channel:

<fo:block id="idm108" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env -qa
docbook-xml-4.3
docbook-xml-4.5
firefox-33.0.2
hello-2.9
libxslt-1.1.28
<fo:inline font-style="italic" font-family="monospace">...</fo:inline></fo:block>

</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block id="idm110">3.
          </fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Install some packages from the channel:

<fo:block id="idm112" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env -i hello</fo:block>

This should download pre-built packages; it should not build them
locally (if it does, something went wrong).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block id="idm113">4.
          </fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Test that they work:

<fo:block id="idm115" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ which hello
/home/eelco/.nix-profile/bin/hello
$ hello
Hello, world!
</fo:block>

</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block id="idm116">5.
          </fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Uninstall a package:

<fo:block id="idm118" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env -e hello</fo:block>

</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block id="idm119">6.
          </fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You can also test a package without installing it:

<fo:block id="idm121" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-shell -p hello
</fo:block>

This builds or downloads GNU Hello and its dependencies, then drops
you into a Bash shell where the <fo:inline font-weight="bold">hello</fo:inline> command is
present, all without affecting your normal environment:

<fo:block id="idm123" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
[nix-shell:~]$ hello
Hello, world!

[nix-shell:~]$ exit

$ hello
hello: command not found
</fo:block>

</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block id="idm124">7.
          </fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To keep up-to-date with the channel, do:

<fo:block id="idm126" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-channel --update nixpkgs
$ nix-env -u '*'</fo:block>

The latter command will upgrade each installed package for which there
is a ânewerâ version (as determined by comparing the version
numbers).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block id="idm127">8.
          </fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If you're unhappy with the result of a
<fo:inline font-weight="bold">nix-env</fo:inline> action (e.g., an upgraded package turned
out not to work properly), you can go back:

<fo:block id="idm130" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env --rollback</fo:block>

</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block id="idm131">9.
          </fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You should periodically run the Nix garbage collector
to get rid of unused packages, since uninstalls or upgrades don't
actually delete them:

<fo:block id="idm133" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-collect-garbage -d</fo:block>



</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="true" master-reference="titlepage" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="blank-body"><fo:block text-align="center"/></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body"><fo:block id="chap-installation"><fo:block><fo:block><fo:block text-align="center" font-size="24.8832pt" space-before="18.6624pt" font-weight="bold" font-family="sans-serif,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always" hyphenate="false">PartÂ II.Â Installation</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This section describes how to install and configure Nix for first-time use.</fo:block></fo:flow></fo:page-sequence><fo:page-sequence hyphenate="true" master-reference="lot" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Installation</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Installation</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="blank-body"><fo:block text-align="center"/></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block id="toc...chap-installation" space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em"><fo:block><fo:block><fo:block space-before.minimum="1em" space-before.optimum="1.5em" space-before.maximum="2em" space-after="0.5em" start-indent="0pt" font-size="17.28pt" font-weight="bold" font-family="sans-serif,Symbol,ZapfDingbats">Table of Contents</fo:block></fo:block></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ch-supported-platforms">3. Supported Platforms</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ch-supported-platforms"><fo:page-number-citation ref-id="ch-supported-platforms"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ch-installing-binary">4. Installing a Binary Distribution</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ch-installing-binary"><fo:page-number-citation ref-id="ch-installing-binary"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.chap-installation.ch-installing-binary" margin-left="24pt"><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sect-single-user-installation">Single User Installation</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sect-single-user-installation"><fo:page-number-citation ref-id="sect-single-user-installation"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sect-multi-user-installation">Multi User Installation</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sect-multi-user-installation"><fo:page-number-citation ref-id="sect-multi-user-installation"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sect-nix-install-pinned-version-url">Installing a pinned Nix version from a URL</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sect-nix-install-pinned-version-url"><fo:page-number-citation ref-id="sect-nix-install-pinned-version-url"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sect-nix-install-binary-tarball">Installing from a binary tarball</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sect-nix-install-binary-tarball"><fo:page-number-citation ref-id="sect-nix-install-binary-tarball"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ch-installing-source">5. Installing Nix from Source</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ch-installing-source"><fo:page-number-citation ref-id="ch-installing-source"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.chap-installation.ch-installing-source" margin-left="24pt"><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-prerequisites-source">Prerequisites</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-prerequisites-source"><fo:page-number-citation ref-id="sec-prerequisites-source"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-obtaining-source">Obtaining a Source Distribution</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-obtaining-source"><fo:page-number-citation ref-id="sec-obtaining-source"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-building-source">Building Nix from Source</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-building-source"><fo:page-number-citation ref-id="sec-building-source"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ch-nix-security">6. Security</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ch-nix-security"><fo:page-number-citation ref-id="ch-nix-security"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.chap-installation.ch-nix-security" margin-left="24pt"><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-single-user">Single-User Mode</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-single-user"><fo:page-number-citation ref-id="sec-single-user"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ssec-multi-user">Multi-User Mode</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ssec-multi-user"><fo:page-number-citation ref-id="ssec-multi-user"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ch-env-variables">7. Environment Variables</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ch-env-variables"><fo:page-number-citation ref-id="ch-env-variables"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.chap-installation.ch-env-variables" margin-left="24pt"><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-nix-ssl-cert-file"><fo:inline font-family="monospace">NIX_SSL_CERT_FILE</fo:inline></fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-nix-ssl-cert-file"><fo:page-number-citation ref-id="sec-nix-ssl-cert-file"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.chap-installation.sec-nix-ssl-cert-file" margin-left="24pt"><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-nix-ssl-cert-file-with-nix-daemon-and-macos"><fo:inline font-family="monospace">NIX_SSL_CERT_FILE</fo:inline> with macOS and the Nix daemon</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-nix-ssl-cert-file-with-nix-daemon-and-macos"><fo:page-number-citation ref-id="sec-nix-ssl-cert-file-with-nix-daemon-and-macos"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-installer-proxy-settings">Proxy Environment Variables</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-installer-proxy-settings"><fo:page-number-citation ref-id="sec-installer-proxy-settings"/></fo:basic-link></fo:inline></fo:block></fo:block></fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="true" master-reference="body" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Supported Platforms</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Supported Platforms</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="blank-body"><fo:block text-align="center"/></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block id="ch-supported-platforms"><fo:block font-family="sans-serif,Symbol,ZapfDingbats"><fo:block margin-left="0pt"><fo:block font-size="24.8832pt" font-weight="bold"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0pt" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">ChapterÂ 3.Â Supported Platforms</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix is currently supported on the following platforms:

<fo:list-block id="idm141" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm142" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Linux (i686, x86_64, aarch64).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm144" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">macOS (x86_64).</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block>

</fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="true" master-reference="body" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Installing a Binary Distribution</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Installing a Binary Distribution</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="blank-body"><fo:block text-align="center"/></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block id="ch-installing-binary"><fo:block font-family="sans-serif,Symbol,ZapfDingbats"><fo:block margin-left="0pt"><fo:block font-size="24.8832pt" font-weight="bold"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0pt" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">ChapterÂ 4.Â Installing a Binary Distribution</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If you are using Linux or macOS, the easiest way to install Nix
is to run the following command:

<fo:block id="idm149" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
  $ sh &lt;(curl https://nixos.org/nix/install)
</fo:block>

As of Nix 2.1.0, the Nix installer will always default to creating a
single-user installation, however opting in to the multi-user
installation is highly recommended.
</fo:block><fo:block id="sect-single-user-installation"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Single User Installation</fo:marker><fo:block font-size="20.736pt">Single User Installation</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    To explicitly select a single-user installation on your system:

    <fo:block id="idm153" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
  sh &lt;(curl https://nixos.org/nix/install) --no-daemon
</fo:block>
  </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
This will perform a single-user installation of Nix, meaning that
<fo:inline font-family="monospace">/nix</fo:inline> is owned by the invoking user.  You should
run this under your usual user account, <fo:inline font-style="italic">not</fo:inline> as
root.  The script will invoke <fo:inline font-weight="bold">sudo</fo:inline> to create
<fo:inline font-family="monospace">/nix</fo:inline> if it doesnât already exist.  If you donât
have <fo:inline font-weight="bold">sudo</fo:inline>, you should manually create
<fo:inline font-weight="bold">/nix</fo:inline> first as root, e.g.:

<fo:block id="idm161" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ mkdir /nix
$ chown alice /nix
</fo:block>

The install script will modify the first writable file from amongst
<fo:inline font-family="monospace">.bash_profile</fo:inline>, <fo:inline font-family="monospace">.bash_login</fo:inline>
and <fo:inline font-family="monospace">.profile</fo:inline> to source
<fo:inline font-family="monospace">~/.nix-profile/etc/profile.d/nix.sh</fo:inline>. You can set
the <fo:inline font-weight="bold">NIX_INSTALLER_NO_MODIFY_PROFILE</fo:inline> environment
variable before executing the install script to disable this
behaviour.
</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You can uninstall Nix simply by running:

<fo:block id="idm168" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ rm -rf /nix
</fo:block>

</fo:block></fo:block><fo:block id="sect-multi-user-installation"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Multi User Installation</fo:marker><fo:block font-size="20.736pt">Multi User Installation</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    The multi-user Nix installation creates system users, and a system
    service for the Nix daemon.
  </fo:block><fo:block font-weight="bold" font-size="12pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" keep-with-next.within-column="always">Supported Systems</fo:block><fo:list-block id="idm172" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm174" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Linux running systemd, with SELinux disabled</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm176" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">macOS</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    You can instruct the installer to perform a multi-user
    installation on your system:

    <fo:block id="idm179" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
  sh &lt;(curl https://nixos.org/nix/install) --daemon
</fo:block>
  </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    The multi-user installation of Nix will create build users between
    the user IDs 30001 and 30032, and a group with the group ID 30000.

    You should run this under your usual user account,
    <fo:inline font-style="italic">not</fo:inline> as root. The script will invoke
    <fo:inline font-weight="bold">sudo</fo:inline> as needed.
  </fo:block><fo:block id="idm183" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" margin-left="0.25in" margin-right="0.25in"><fo:block keep-with-next.within-column="always" font-size="14pt" font-weight="bold" hyphenate="false">Note</fo:block><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    If you need Nix to use a different group ID or user ID set, you
    will have to download the tarball manually and <fo:basic-link internal-destination="sect-nix-install-binary-tarball"><fo:inline>edit the install
    script</fo:inline></fo:basic-link>.
  </fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    The installer will modify <fo:inline font-family="monospace">/etc/bashrc</fo:inline>, and
    <fo:inline font-family="monospace">/etc/zshrc</fo:inline> if they exist. The installer will
    first back up these files with a
    <fo:inline font-family="monospace">.backup-before-nix</fo:inline> extension. The installer
    will also create <fo:inline font-family="monospace">/etc/profile.d/nix.sh</fo:inline>.
  </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You can uninstall Nix with the following commands:

<fo:block id="idm192" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
sudo rm -rf /etc/profile/nix.sh /etc/nix /nix ~root/.nix-profile ~root/.nix-defexpr ~root/.nix-channels ~/.nix-profile ~/.nix-defexpr ~/.nix-channels

# If you are on Linux with systemd, you will need to run:
sudo systemctl stop nix-daemon.socket
sudo systemctl stop nix-daemon.service
sudo systemctl disable nix-daemon.socket
sudo systemctl disable nix-daemon.service
sudo systemctl daemon-reload

# If you are on macOS, you will need to run:
sudo launchctl unload /Library/LaunchDaemons/org.nixos.nix-daemon.plist
sudo rm /Library/LaunchDaemons/org.nixos.nix-daemon.plist
</fo:block>

    There may also be references to Nix in
    <fo:inline font-family="monospace">/etc/profile</fo:inline>,
    <fo:inline font-family="monospace">/etc/bashrc</fo:inline>, and
    <fo:inline font-family="monospace">/etc/zshrc</fo:inline> which you may remove.
  </fo:block></fo:block><fo:block id="sect-nix-install-pinned-version-url"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Installing a pinned Nix version from a URL</fo:marker><fo:block font-size="20.736pt">Installing a pinned Nix version from a URL</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    NixOS.org hosts version-specific installation URLs for all Nix
    versions since 1.11.16, at
    <fo:inline font-family="monospace">https://nixos.org/releases/nix/nix-VERSION/install</fo:inline>.
  </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    These install scripts can be used the same as the main
  NixOS.org installation script:

  <fo:block id="idm201" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
  sh &lt;(curl https://nixos.org/nix/install)
</fo:block>
  </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    In the same directory of the install script are sha256 sums, and
    gpg signature files.
  </fo:block></fo:block><fo:block id="sect-nix-install-binary-tarball"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Installing from a binary tarball</fo:marker><fo:block font-size="20.736pt">Installing from a binary tarball</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    You can also download a binary tarball that contains Nix and all
    its dependencies.  (This is what the install script at
    <fo:inline font-family="monospace">https://nixos.org/nix/install</fo:inline> does automatically.)  You
    should unpack it somewhere (e.g. in <fo:inline font-family="monospace">/tmp</fo:inline>),
    and then run the script named <fo:inline font-weight="bold">install</fo:inline> inside
    the binary tarball:


<fo:block id="idm209" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
alice$ cd /tmp
alice$ tar xfj nix-1.8-x86_64-darwin.tar.bz2
alice$ cd nix-1.8-x86_64-darwin
alice$ ./install
</fo:block>
  </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    If you need to edit the multi-user installation script to use
    different group ID or a different user ID range, modify the
    variables set in the file named
    <fo:inline font-family="monospace">install-multi-user</fo:inline>.
  </fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="true" master-reference="body" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Installing Nix from Source</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Installing Nix from Source</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="blank-body"><fo:block text-align="center"/></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block id="ch-installing-source"><fo:block font-family="sans-serif,Symbol,ZapfDingbats"><fo:block margin-left="0pt"><fo:block font-size="24.8832pt" font-weight="bold"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0pt" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">ChapterÂ 5.Â Installing Nix from Source</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If no binary package is available, you can download and compile
a source distribution.</fo:block><fo:block id="sec-prerequisites-source"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Prerequisites</fo:marker><fo:block font-size="20.736pt">Prerequisites</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:list-block id="idm217" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm218" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">GNU Make.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm220" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Bash Shell. The <fo:inline font-family="monospace">./configure</fo:inline> script
  relies on bashisms, so Bash is required.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm223" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A version of GCC or Clang that supports C++17.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm225" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">pkg-config</fo:inline> to locate
  dependencies.  If your distribution does not provide it, you can get
  it from <fo:basic-link external-destination="url(http://www.freedesktop.org/wiki/Software/pkg-config)"><fo:inline><fo:inline hyphenate="false">http://www.freedesktop.org/wiki/Software/pkg-config</fo:inline></fo:inline></fo:basic-link>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm229" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The OpenSSL library to calculate cryptographic hashes.
  If your distribution does not provide it, you can get it from <fo:basic-link external-destination="url(https://www.openssl.org)"><fo:inline><fo:inline hyphenate="false">https://www.openssl.org</fo:inline></fo:inline></fo:basic-link>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm232" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The <fo:inline font-family="monospace">libbrotlienc</fo:inline> and
  <fo:inline font-family="monospace">libbrotlidec</fo:inline> libraries to provide implementation
  of the Brotli compression algorithm. They are available for download
  from the official repository <fo:basic-link external-destination="url(https://github.com/google/brotli)"><fo:inline><fo:inline hyphenate="false">https://github.com/google/brotli</fo:inline></fo:inline></fo:basic-link>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm237" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The bzip2 compressor program and the
  <fo:inline font-family="monospace">libbz2</fo:inline> library.  Thus you must have bzip2
  installed, including development headers and libraries.  If your
  distribution does not provide these, you can obtain bzip2 from <fo:basic-link external-destination="url(https://web.archive.org/web/20180624184756/http://www.bzip.org/)"><fo:inline><fo:inline hyphenate="false">https://web.archive.org/web/20180624184756/http://www.bzip.org/</fo:inline></fo:inline></fo:basic-link>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm241" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">liblzma</fo:inline>, which is provided by
  XZ Utils. If your distribution does not provide this, you can
  get it from <fo:basic-link external-destination="url(https://tukaani.org/xz/)"><fo:inline><fo:inline hyphenate="false">https://tukaani.org/xz/</fo:inline></fo:inline></fo:basic-link>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm245" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">cURL and its library. If your distribution does not
  provide it, you can get it from <fo:basic-link external-destination="url(https://curl.haxx.se/)"><fo:inline><fo:inline hyphenate="false">https://curl.haxx.se/</fo:inline></fo:inline></fo:basic-link>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm248" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The SQLite embedded database library, version 3.6.19
  or higher.  If your distribution does not provide it, please install
  it from <fo:basic-link external-destination="url(http://www.sqlite.org/)"><fo:inline><fo:inline hyphenate="false">http://www.sqlite.org/</fo:inline></fo:inline></fo:basic-link>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm251" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The <fo:basic-link external-destination="url(http://www.hboehm.info/gc/)"><fo:inline>Boehm
  garbage collector</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(http://www.hboehm.info/gc/)">http://www.hboehm.info/gc/</fo:basic-link>]</fo:inline> to reduce the evaluatorâs memory
  consumption (optional).  To enable it, install
  <fo:inline font-family="monospace">pkgconfig</fo:inline> and the Boehm garbage collector, and
  pass the flag <fo:inline font-family="monospace">--enable-gc</fo:inline> to
  <fo:inline font-weight="bold">configure</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm257" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The <fo:inline font-family="monospace">boost</fo:inline> library of version
  1.66.0 or higher. It can be obtained from the official web site
  <fo:basic-link external-destination="url(https://www.boost.org/)"><fo:inline><fo:inline hyphenate="false">https://www.boost.org/</fo:inline></fo:inline></fo:basic-link>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm261" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The <fo:inline font-family="monospace">editline</fo:inline> library of version
  1.14.0 or higher. It can be obtained from the its repository
  <fo:basic-link external-destination="url(https://github.com/troglobit/editline)"><fo:inline><fo:inline hyphenate="false">https://github.com/troglobit/editline</fo:inline></fo:inline></fo:basic-link>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm265" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The <fo:inline font-weight="bold">xmllint</fo:inline> and
  <fo:inline font-weight="bold">xsltproc</fo:inline> programs to build this manual and the
  man-pages.  These are part of the <fo:inline font-family="monospace">libxml2</fo:inline> and
  <fo:inline font-family="monospace">libxslt</fo:inline> packages, respectively.  You also need
  the <fo:basic-link external-destination="url(http://docbook.sourceforge.net/projects/xsl/)"><fo:inline>DocBook
  XSL stylesheets</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(http://docbook.sourceforge.net/projects/xsl/)">http://docbook.sourceforge.net/projects/xsl/</fo:basic-link>]</fo:inline> and optionally the <fo:basic-link external-destination="url(http://www.docbook.org/schemas/5x)"><fo:inline> DocBook 5.0 RELAX NG
  schemas</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(http://www.docbook.org/schemas/5x)">http://www.docbook.org/schemas/5x</fo:basic-link>]</fo:inline>.  Note that these are only required if you modify the
  manual sources or when you are building from the Git
  repository.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm273" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Recent versions of Bison and Flex to build the
  parser.  (This is because Nix needs GLR support in Bison and
  reentrancy support in Flex.)  For Bison, you need version 2.6, which
  can be obtained from the <fo:basic-link external-destination="url(ftp://alpha.gnu.org/pub/gnu/bison)"><fo:inline>GNU FTP
  server</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(ftp://alpha.gnu.org/pub/gnu/bison)">ftp://alpha.gnu.org/pub/gnu/bison</fo:basic-link>]</fo:inline>.  For Flex, you need version 2.5.35, which is
  available on <fo:basic-link external-destination="url(http://lex.sourceforge.net/)"><fo:inline>SourceForge</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(http://lex.sourceforge.net/)">http://lex.sourceforge.net/</fo:basic-link>]</fo:inline>.
  Slightly older versions may also work, but ancient versions like the
  ubiquitous 2.5.4a won't.  Note that these are only required if you
  modify the parser or when you are building from the Git
  repository.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm277" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The <fo:inline font-family="monospace">libseccomp</fo:inline> is used to provide
  syscall filtering on Linux. This is an optional dependency and can
  be disabled passing a <fo:inline font-family="monospace">--disable-seccomp-sandboxing</fo:inline>
  option to the <fo:inline font-weight="bold">configure</fo:inline> script (Not recommended
  unless your system doesn't support
  <fo:inline font-family="monospace">libseccomp</fo:inline>). To get the library, visit <fo:basic-link external-destination="url(https://github.com/seccomp/libseccomp)"><fo:inline><fo:inline hyphenate="false">https://github.com/seccomp/libseccomp</fo:inline></fo:inline></fo:basic-link>.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="sec-obtaining-source"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Obtaining a Source Distribution</fo:marker><fo:block font-size="20.736pt">Obtaining a Source Distribution</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The source tarball of the most recent stable release can be
downloaded from the <fo:basic-link external-destination="url(http://nixos.org/nix/download.html)"><fo:inline>Nix homepage</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(http://nixos.org/nix/download.html)">http://nixos.org/nix/download.html</fo:basic-link>]</fo:inline>.
You can also grab the <fo:basic-link external-destination="url(http://hydra.nixos.org/job/nix/master/release/latest-finished#tabs-constituents)"><fo:inline>most
recent development release</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(http://hydra.nixos.org/job/nix/master/release/latest-finished#tabs-constituents)">http://hydra.nixos.org/job/nix/master/release/latest-finished#tabs-constituents</fo:basic-link>]</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Alternatively, the most recent sources of Nix can be obtained
from its <fo:basic-link external-destination="url(https://github.com/NixOS/nix)"><fo:inline>Git
repository</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(https://github.com/NixOS/nix)">https://github.com/NixOS/nix</fo:basic-link>]</fo:inline>.  For example, the following command will check out
the latest revision into a directory called
<fo:inline font-family="monospace">nix</fo:inline>:</fo:block><fo:block id="idm292" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ git clone https://github.com/NixOS/nix</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Likewise, specific releases can be obtained from the <fo:basic-link external-destination="url(https://github.com/NixOS/nix/tags)"><fo:inline>tags</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(https://github.com/NixOS/nix/tags)">https://github.com/NixOS/nix/tags</fo:basic-link>]</fo:inline> of the
repository.</fo:block></fo:block><fo:block id="sec-building-source"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Building Nix from Source</fo:marker><fo:block font-size="20.736pt">Building Nix from Source</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">After unpacking or checking out the Nix sources, issue the
following commands:

<fo:block id="idm298" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ ./configure <fo:inline font-style="italic" font-family="monospace">options...</fo:inline>
$ make
$ make install</fo:block>

Nix requires GNU Make so you may need to invoke
<fo:inline font-weight="bold">gmake</fo:inline> instead.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">When building from the Git repository, these should be preceded
by the command:

<fo:block id="idm302" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ ./bootstrap.sh</fo:block>

</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The installation path can be specified by passing the
<fo:inline font-family="monospace">--prefix=<fo:inline font-style="italic" font-family="monospace">prefix</fo:inline></fo:inline> to
<fo:inline font-weight="bold">configure</fo:inline>.  The default installation directory is
<fo:inline font-family="monospace">/usr/local</fo:inline>.  You can change this to any location
you like.  You must have write permission to the
<fo:inline font-style="italic" font-family="monospace">prefix</fo:inline> path.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix keeps its <fo:inline font-style="italic">store</fo:inline> (the place where
packages are stored) in <fo:inline font-family="monospace">/nix/store</fo:inline> by default.
This can be changed using
<fo:inline font-family="monospace">--with-store-dir=<fo:inline font-style="italic" font-family="monospace">path</fo:inline></fo:inline>.</fo:block><fo:block id="idm314" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" margin-left="0.25in" margin-right="0.25in"><fo:block keep-with-next.within-column="always" font-size="14pt" font-weight="bold" hyphenate="false">Warning</fo:block><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">It is best <fo:inline font-style="italic">not</fo:inline> to change the Nix
store from its default, since doing so makes it impossible to use
pre-built binaries from the standard Nixpkgs channels â that is, all
packages will need to be built from source.</fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix keeps state (such as its database and log files) in
<fo:inline font-family="monospace">/nix/var</fo:inline> by default.  This can be changed using
<fo:inline font-family="monospace">--localstatedir=<fo:inline font-style="italic" font-family="monospace">path</fo:inline></fo:inline>.</fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="true" master-reference="body" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Security</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Security</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="blank-body"><fo:block text-align="center"/></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block id="ch-nix-security"><fo:block font-family="sans-serif,Symbol,ZapfDingbats"><fo:block margin-left="0pt"><fo:block font-size="24.8832pt" font-weight="bold"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0pt" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">ChapterÂ 6.Â Security</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix has two basic security models.  First, it can be used in
âsingle-user modeâ, which is similar to what most other package
management tools do: there is a single user (typically <fo:inline font-family="monospace">root</fo:inline>) who performs all package
management operations.  All other users can then use the installed
packages, but they cannot perform package management operations
themselves.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Alternatively, you can configure Nix in âmulti-user modeâ.  In
this model, all users can perform package management operations â for
instance, every user can install software without requiring root
privileges.  Nix ensures that this is secure.  For instance, itâs not
possible for one user to overwrite a package used by another user with
a Trojan horse.</fo:block><fo:block id="sec-single-user"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Single-User Mode</fo:marker><fo:block font-size="20.736pt">Single-User Mode</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In single-user mode, all Nix operations that access the database
in <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">prefix</fo:inline>/var/nix/db</fo:inline>
or modify the Nix store in
<fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">prefix</fo:inline>/store</fo:inline> must be
performed under the user ID that owns those directories.  This is
typically <fo:inline font-family="monospace">root</fo:inline>.  (If you
install from RPM packages, thatâs in fact the default ownership.)
However, on single-user machines, it is often convenient to
<fo:inline font-weight="bold">chown</fo:inline> those directories to your normal user account
so that you donât have to <fo:inline font-weight="bold">su</fo:inline> to <fo:inline font-family="monospace">root</fo:inline> all the time.</fo:block></fo:block><fo:block id="ssec-multi-user"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Multi-User Mode</fo:marker><fo:block font-size="20.736pt">Multi-User Mode</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To allow a Nix store to be shared safely among multiple users,
it is important that users are not able to run builders that modify
the Nix store or database in arbitrary ways, or that interfere with
builds started by other users.  If they could do so, they could
install a Trojan horse in some package and compromise the accounts of
other users.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To prevent this, the Nix store and database are owned by some
privileged user (usually <fo:inline font-family="monospace">root</fo:inline>) and builders are
executed under special user accounts (usually named
<fo:inline font-family="monospace">nixbld1</fo:inline>, <fo:inline font-family="monospace">nixbld2</fo:inline>, etc.).  When a
unprivileged user runs a Nix command, actions that operate on the Nix
store (such as builds) are forwarded to a <fo:inline font-style="italic">Nix
daemon</fo:inline> running under the owner of the Nix store/database
that performs the operation.</fo:block><fo:block id="idm345" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" margin-left="0.25in" margin-right="0.25in"><fo:block keep-with-next.within-column="always" font-size="14pt" font-weight="bold" hyphenate="false">Note</fo:block><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Multi-user mode has one important limitation: only
<fo:inline font-family="monospace">root</fo:inline> and a set of trusted
users specified in <fo:inline font-family="monospace">nix.conf</fo:inline> can specify arbitrary
binary caches. So while unprivileged users may install packages from
arbitrary Nix expressions, they may not get pre-built
binaries.</fo:block></fo:block></fo:block><fo:block id="idm349"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Setting up the build users</fo:marker><fo:block font-size="17.28pt">Setting up the build users</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The <fo:inline font-style="italic">build users</fo:inline> are the special UIDs under
which builds are performed.  They should all be members of the
<fo:inline font-style="italic">build users group</fo:inline> <fo:inline font-family="monospace">nixbld</fo:inline>.
This group should have no other members.  The build users should not
be members of any other group. On Linux, you can create the group and
users as follows:

<fo:block id="idm355" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ groupadd -r nixbld
$ for n in $(seq 1 10); do useradd -c "Nix build user $n" \
    -d /var/empty -g nixbld -G nixbld -M -N -r -s "$(which nologin)" \
    nixbld$n; done
</fo:block>

This creates 10 build users. There can never be more concurrent builds
than the number of build users, so you may want to increase this if
you expect to do many builds at the same time.</fo:block></fo:block><fo:block id="idm356"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Running the daemon</fo:marker><fo:block font-size="17.28pt">Running the daemon</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The <fo:basic-link internal-destination="sec-nix-daemon"><fo:inline>Nix daemon</fo:inline></fo:basic-link> should be
started as follows (as <fo:inline font-family="monospace">root</fo:inline>):

<fo:block id="idm361" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-daemon</fo:block>

Youâll want to put that line somewhere in your systemâs boot
scripts.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To let unprivileged users use the daemon, they should set the
<fo:inline><fo:inline font-family="monospace">NIX_REMOTE</fo:inline> environment
variable</fo:inline> to <fo:inline font-family="monospace">daemon</fo:inline>.  So you should put a
line like

<fo:block id="idm366" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
export NIX_REMOTE=daemon</fo:block>

into the usersâ login scripts.</fo:block></fo:block><fo:block id="idm367"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Restricting access</fo:marker><fo:block font-size="17.28pt">Restricting access</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To limit which users can perform Nix operations, you can use the
permissions on the directory
<fo:inline font-family="monospace">/nix/var/nix/daemon-socket</fo:inline>.  For instance, if you
want to restrict the use of Nix to the members of a group called
<fo:inline font-family="monospace">nix-users</fo:inline>, do

<fo:block id="idm372" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ chgrp nix-users /nix/var/nix/daemon-socket
$ chmod ug=rwx,o= /nix/var/nix/daemon-socket
</fo:block>

This way, users who are not in the <fo:inline font-family="monospace">nix-users</fo:inline> group
cannot connect to the Unix domain socket
<fo:inline font-family="monospace">/nix/var/nix/daemon-socket/socket</fo:inline>, so they cannot
perform Nix operations.</fo:block></fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="true" master-reference="body" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Environment Variables</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Environment Variables</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="blank-body"><fo:block text-align="center"/></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block id="ch-env-variables"><fo:block font-family="sans-serif,Symbol,ZapfDingbats"><fo:block margin-left="0pt"><fo:block font-size="24.8832pt" font-weight="bold"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0pt" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">ChapterÂ 7.Â Environment Variables</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To use Nix, some environment variables should be set.  In
particular, <fo:inline font-family="monospace">PATH</fo:inline> should contain the directories
<fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">prefix</fo:inline>/bin</fo:inline> and
<fo:inline font-family="monospace">~/.nix-profile/bin</fo:inline>.  The first directory contains
the Nix tools themselves, while <fo:inline font-family="monospace">~/.nix-profile</fo:inline> is
a symbolic link to the current <fo:inline font-style="italic">user environment</fo:inline>
(an automatically generated package consisting of symlinks to
installed packages).  The simplest way to set the required environment
variables is to include the file
<fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">prefix</fo:inline>/etc/profile.d/nix.sh</fo:inline>
in your <fo:inline font-family="monospace">~/.profile</fo:inline> (or similar), like this:</fo:block><fo:block id="idm387" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
source <fo:inline font-style="italic" font-family="monospace">prefix</fo:inline>/etc/profile.d/nix.sh</fo:block><fo:block id="sec-nix-ssl-cert-file"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"><fo:inline font-family="monospace">NIX_SSL_CERT_FILE</fo:inline></fo:marker><fo:block font-size="20.736pt"><fo:inline font-family="monospace">NIX_SSL_CERT_FILE</fo:inline></fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If you need to specify a custom certificate bundle to account
for an HTTPS-intercepting man in the middle proxy, you must specify
the path to the certificate bundle in the environment variable
<fo:inline font-family="monospace">NIX_SSL_CERT_FILE</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If you don't specify a <fo:inline font-family="monospace">NIX_SSL_CERT_FILE</fo:inline>
manually, Nix will install and use its own certificate
bundle.</fo:block><fo:block id="idm396" keep-together.within-column="auto" space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em"><fo:list-block provisional-distance-between-starts="2em" provisional-label-separation="0.2em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block id="idm397">1.
          </fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Set the environment variable and install Nix</fo:block><fo:block id="idm399" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ export NIX_SSL_CERT_FILE=/etc/ssl/my-certificate-bundle.crt
$ sh &lt;(curl https://nixos.org/nix/install)
</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block id="idm400">2.
          </fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In the shell profile and rc files (for example,
  <fo:inline font-family="monospace">/etc/bashrc</fo:inline>, <fo:inline font-family="monospace">/etc/zshrc</fo:inline>),
  add the following line:</fo:block><fo:block id="idm404" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
export NIX_SSL_CERT_FILE=/etc/ssl/my-certificate-bundle.crt
</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="idm405" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" margin-left="0.25in" margin-right="0.25in"><fo:block keep-with-next.within-column="always" font-size="14pt" font-weight="bold" hyphenate="false">Note</fo:block><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You must not add the export and then do the install, as
the Nix installer will detect the presense of Nix configuration, and
abort.</fo:block></fo:block></fo:block><fo:block id="sec-nix-ssl-cert-file-with-nix-daemon-and-macos"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"><fo:inline font-family="monospace">NIX_SSL_CERT_FILE</fo:inline> with macOS and the Nix daemon</fo:marker><fo:block font-size="17.28pt"><fo:inline font-family="monospace">NIX_SSL_CERT_FILE</fo:inline> with macOS and the Nix daemon</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">On macOS you must specify the environment variable for the Nix
daemon service, then restart it:</fo:block><fo:block id="idm411" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ sudo launchctl setenv NIX_SSL_CERT_FILE /etc/ssl/my-certificate-bundle.crt
$ sudo launchctl kickstart -k system/org.nixos.nix-daemon
</fo:block></fo:block><fo:block id="sec-installer-proxy-settings"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Proxy Environment Variables</fo:marker><fo:block font-size="17.28pt">Proxy Environment Variables</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The Nix installer has special handling for these proxy-related
environment variables:
<fo:inline font-family="monospace">http_proxy</fo:inline>, <fo:inline font-family="monospace">https_proxy</fo:inline>,
<fo:inline font-family="monospace">ftp_proxy</fo:inline>, <fo:inline font-family="monospace">no_proxy</fo:inline>,
<fo:inline font-family="monospace">HTTP_PROXY</fo:inline>, <fo:inline font-family="monospace">HTTPS_PROXY</fo:inline>,
<fo:inline font-family="monospace">FTP_PROXY</fo:inline>, <fo:inline font-family="monospace">NO_PROXY</fo:inline>.
</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If any of these variables are set when running the Nix installer,
then the installer will create an override file at
<fo:inline font-family="monospace">/etc/systemd/system/nix-daemon.service.d/override.conf</fo:inline>
so <fo:inline font-weight="bold">nix-daemon</fo:inline> will use them.
</fo:block></fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="true" master-reference="body" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Upgrading Nix</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Upgrading Nix</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="blank-body"><fo:block text-align="center"/></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block id="ch-upgrading-nix"><fo:block font-family="sans-serif,Symbol,ZapfDingbats"><fo:block margin-left="0pt"><fo:block font-size="24.8832pt" font-weight="bold"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0pt" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">ChapterÂ 8.Â Upgrading Nix</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    Multi-user Nix users on macOS can upgrade Nix by running:
    <fo:inline font-weight="bold">sudo -i sh -c 'nix-channel --update &amp;&amp;
    nix-env -iA nixpkgs.nix &amp;&amp;
    launchctl remove org.nixos.nix-daemon &amp;&amp;
    launchctl load /Library/LaunchDaemons/org.nixos.nix-daemon.plist'</fo:inline>
  </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    Single-user installations of Nix should run this:
    <fo:inline font-weight="bold">nix-channel --update; nix-env -iA nixpkgs.nix</fo:inline>
  </fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="true" master-reference="titlepage" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="blank-body"><fo:block text-align="center"/></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body"><fo:block id="chap-package-management"><fo:block><fo:block><fo:block text-align="center" font-size="24.8832pt" space-before="18.6624pt" font-weight="bold" font-family="sans-serif,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always" hyphenate="false">PartÂ III.Â Package Management</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This chapter discusses how to do package management with Nix,
i.e., how to obtain, install, upgrade, and erase packages.  This is
the âuserâsâ perspective of the Nix system â people
who want to <fo:inline font-style="italic">create</fo:inline> packages should consult
<fo:basic-link internal-destination="chap-writing-nix-expressions"><fo:inline>PartÂ IV, âWriting Nix Expressionsâ</fo:inline></fo:basic-link>.</fo:block></fo:flow></fo:page-sequence><fo:page-sequence hyphenate="true" master-reference="lot" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Package Management</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Package Management</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="blank-body"><fo:block text-align="center"/></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block id="toc...chap-package-management" space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em"><fo:block><fo:block><fo:block space-before.minimum="1em" space-before.optimum="1.5em" space-before.maximum="2em" space-after="0.5em" start-indent="0pt" font-size="17.28pt" font-weight="bold" font-family="sans-serif,Symbol,ZapfDingbats">Table of Contents</fo:block></fo:block></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ch-basic-package-mgmt">9. Basic Package Management</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ch-basic-package-mgmt"><fo:page-number-citation ref-id="ch-basic-package-mgmt"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-profiles">10. Profiles</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-profiles"><fo:page-number-citation ref-id="sec-profiles"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-garbage-collection">11. Garbage Collection</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-garbage-collection"><fo:page-number-citation ref-id="sec-garbage-collection"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.chap-package-management.sec-garbage-collection" margin-left="24pt"><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ssec-gc-roots">Garbage Collector Roots</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ssec-gc-roots"><fo:page-number-citation ref-id="ssec-gc-roots"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-channels">12. Channels</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-channels"><fo:page-number-citation ref-id="sec-channels"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-sharing-packages">13. Sharing Packages Between Machines</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-sharing-packages"><fo:page-number-citation ref-id="sec-sharing-packages"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.chap-package-management.sec-sharing-packages" margin-left="24pt"><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ssec-binary-cache-substituter">Serving a Nix store via HTTP</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ssec-binary-cache-substituter"><fo:page-number-citation ref-id="ssec-binary-cache-substituter"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ssec-copy-closure">Copying Closures Via SSH</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ssec-copy-closure"><fo:page-number-citation ref-id="ssec-copy-closure"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ssec-ssh-substituter">Serving a Nix store via SSH</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ssec-ssh-substituter"><fo:page-number-citation ref-id="ssec-ssh-substituter"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ssec-s3-substituter">Serving a Nix store via AWS S3 or S3-compatible Service</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ssec-s3-substituter"><fo:page-number-citation ref-id="ssec-s3-substituter"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.chap-package-management.ssec-s3-substituter" margin-left="24pt"><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ssec-s3-substituter-anonymous-reads">Anonymous Reads to your S3-compatible binary cache</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ssec-s3-substituter-anonymous-reads"><fo:page-number-citation ref-id="ssec-s3-substituter-anonymous-reads"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ssec-s3-substituter-authenticated-reads">Authenticated Reads to your S3 binary cache</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ssec-s3-substituter-authenticated-reads"><fo:page-number-citation ref-id="ssec-s3-substituter-authenticated-reads"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ssec-s3-substituter-authenticated-writes">Authenticated Writes to your S3-compatible binary cache</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ssec-s3-substituter-authenticated-writes"><fo:page-number-citation ref-id="ssec-s3-substituter-authenticated-writes"/></fo:basic-link></fo:inline></fo:block></fo:block></fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="true" master-reference="body" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Basic Package Management</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Basic Package Management</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="blank-body"><fo:block text-align="center"/></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block id="ch-basic-package-mgmt"><fo:block font-family="sans-serif,Symbol,ZapfDingbats"><fo:block margin-left="0pt"><fo:block font-size="24.8832pt" font-weight="bold"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0pt" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">ChapterÂ 9.Â Basic Package Management</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The main command for package management is <fo:basic-link internal-destination="sec-nix-env"><fo:inline><fo:inline font-weight="bold">nix-env</fo:inline></fo:inline></fo:basic-link>.  You can use
it to install, upgrade, and erase packages, and to query what
packages are installed or are available for installation.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In Nix, different users can have different âviewsâ
on the set of installed applications.  That is, there might be lots of
applications present on the system (possibly in many different
versions), but users can have a specific selection of those active â
where âactiveâ just means that it appears in a directory
in the userâs <fo:inline font-family="monospace">PATH</fo:inline>.  Such a view on the set of
installed applications is called a <fo:inline font-style="italic">user
environment</fo:inline>, which is just a directory tree consisting of
symlinks to the files of the active applications.  </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Components are installed from a set of <fo:inline font-style="italic">Nix
expressions</fo:inline> that tell Nix how to build those packages,
including, if necessary, their dependencies.  There is a collection of
Nix expressions called the Nixpkgs package collection that contains
packages ranging from basic development stuff such as GCC and Glibc,
to end-user applications like Mozilla Firefox.  (Nix is however not
tied to the Nixpkgs package collection; you could write your own Nix
expressions based on Nixpkgs, or completely new ones.)</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You can manually download the latest version of Nixpkgs from
<fo:basic-link external-destination="url(http://nixos.org/nixpkgs/download.html)"><fo:inline><fo:inline hyphenate="false">http://nixos.org/nixpkgs/download.html</fo:inline></fo:inline></fo:basic-link>. However,
itâs much more convenient to use the Nixpkgs
<fo:inline font-style="italic">channel</fo:inline>, since it makes it easy to stay up to
date with new versions of Nixpkgs. (Channels are described in more
detail in <fo:basic-link internal-destination="sec-channels"><fo:inline>ChapterÂ 12, <fo:inline font-style="italic">Channels</fo:inline></fo:inline></fo:basic-link>.) Nixpkgs is automatically
added to your list of âsubscribedâ channels when you install
Nix. If this is not the case for some reason, you can add it as
follows:

<fo:block id="idm452" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-channel --add https://nixos.org/channels/nixpkgs-unstable
$ nix-channel --update
</fo:block>

</fo:block><fo:block id="idm453" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" margin-left="0.25in" margin-right="0.25in"><fo:block keep-with-next.within-column="always" font-size="14pt" font-weight="bold" hyphenate="false">Note</fo:block><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">On NixOS, youâre automatically subscribed to a NixOS
channel corresponding to your NixOS major release
(e.g. <fo:inline font-family="monospace">http://nixos.org/channels/nixos-14.12</fo:inline>). A NixOS
channel is identical to the Nixpkgs channel, except that it contains
only Linux binaries and is updated only if a set of regression tests
succeed.</fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You can view the set of available packages in Nixpkgs:

<fo:block id="idm457" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env -qa
aterm-2.2
bash-3.0
binutils-2.15
bison-1.875d
blackdown-1.4.2
bzip2-1.0.2
â¦</fo:block>

The flag <fo:inline font-family="monospace">-q</fo:inline> specifies a query operation, and
<fo:inline font-family="monospace">-a</fo:inline> means that you want to show the âavailableâ (i.e.,
installable) packages, as opposed to the installed packages. If you
downloaded Nixpkgs yourself, or if you checked it out from GitHub,
then you need to pass the path to your Nixpkgs tree using the
<fo:inline font-family="monospace">-f</fo:inline> flag:

<fo:block id="idm461" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env -qaf <fo:inline font-style="italic" font-family="monospace">/path/to/nixpkgs</fo:inline>
</fo:block>

where <fo:inline font-style="italic" font-family="monospace">/path/to/nixpkgs</fo:inline> is where youâve
unpacked or checked out Nixpkgs.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You can select specific packages by name:

<fo:block id="idm465" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env -qa firefox
firefox-34.0.5
firefox-with-plugins-34.0.5
</fo:block>

and using regular expressions:

<fo:block id="idm466" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env -qa 'firefox.*'
</fo:block>

</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">It is also possible to see the <fo:inline font-style="italic">status</fo:inline> of
available packages, i.e., whether they are installed into the user
environment and/or present in the system:

<fo:block id="idm469" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env -qas
â¦
-PS bash-3.0
--S binutils-2.15
IPS bison-1.875d
â¦</fo:block>

The first character (<fo:inline font-family="monospace">I</fo:inline>) indicates whether the
package is installed in your current user environment.  The second
(<fo:inline font-family="monospace">P</fo:inline>) indicates whether it is present on your system
(in which case installing it into your user environment would be a
very quick operation).  The last one (<fo:inline font-family="monospace">S</fo:inline>) indicates
whether there is a so-called <fo:inline font-style="italic">substitute</fo:inline> for the
package, which is Nixâs mechanism for doing binary deployment.  It
just means that Nix knows that it can fetch a pre-built package from
somewhere (typically a network server) instead of building it
locally.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You can install a package using <fo:inline font-family="monospace">nix-env -i</fo:inline>.
For instance,

<fo:block id="idm476" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env -i subversion</fo:block>

will install the package called <fo:inline font-family="monospace">subversion</fo:inline> (which
is, of course, the <fo:basic-link external-destination="url(http://subversion.tigris.org/)"><fo:inline>Subversion version
management system</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(http://subversion.tigris.org/)">http://subversion.tigris.org/</fo:basic-link>]</fo:inline>).</fo:block><fo:block id="idm479" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" margin-left="0.25in" margin-right="0.25in"><fo:block keep-with-next.within-column="always" font-size="14pt" font-weight="bold" hyphenate="false">Note</fo:block><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">When you ask Nix to install a package, it will first try
to get it in pre-compiled form from a <fo:inline font-style="italic">binary
cache</fo:inline>. By default, Nix will use the binary cache
<fo:inline font-family="monospace">https://cache.nixos.org</fo:inline>; it contains binaries for most
packages in Nixpkgs. Only if no binary is available in the binary
cache, Nix will build the package from source. So if <fo:inline font-family="monospace">nix-env
-i subversion</fo:inline> results in Nix building stuff from source,
then either the package is not built for your platform by the Nixpkgs
build servers, or your version of Nixpkgs is too old or too new. For
instance, if you have a very recent checkout of Nixpkgs, then the
Nixpkgs build servers may not have had a chance to build everything
and upload the resulting binaries to
<fo:inline font-family="monospace">https://cache.nixos.org</fo:inline>. The Nixpkgs channel is only
updated after all binaries have been uploaded to the cache, so if you
stick to the Nixpkgs channel (rather than using a Git checkout of the
Nixpkgs tree), you will get binaries for most packages.</fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Naturally, packages can also be uninstalled:

<fo:block id="idm486" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env -e subversion</fo:block>

</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Upgrading to a new version is just as easy.  If you have a new
release of Nix Packages, you can do:

<fo:block id="idm488" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env -u subversion</fo:block>

This will <fo:inline font-style="italic">only</fo:inline> upgrade Subversion if there is a
ânewerâ version in the new set of Nix expressions, as
defined by some pretty arbitrary rules regarding ordering of version
numbers (which generally do what youâd expect of them).  To just
unconditionally replace Subversion with whatever version is in the Nix
expressions, use <fo:inline font-style="italic" font-family="monospace">-i</fo:inline> instead of
<fo:inline font-style="italic" font-family="monospace">-u</fo:inline>; <fo:inline font-style="italic" font-family="monospace">-i</fo:inline> will remove
whatever version is already installed.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You can also upgrade all packages for which there are newer
versions:

<fo:block id="idm494" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env -u</fo:block>

</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Sometimes itâs useful to be able to ask what
<fo:inline font-weight="bold">nix-env</fo:inline> would do, without actually doing it.  For
instance, to find out what packages would be upgraded by
<fo:inline font-family="monospace">nix-env -u</fo:inline>, you can do

<fo:block id="idm498" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env -u --dry-run
(dry run; not doing anything)
upgrading `libxslt-1.1.0' to `libxslt-1.1.10'
upgrading `graphviz-1.10' to `graphviz-1.12'
upgrading `coreutils-5.0' to `coreutils-5.2.1'</fo:block>

</fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="true" master-reference="body" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Profiles</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Profiles</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="blank-body"><fo:block text-align="center"/></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block id="sec-profiles"><fo:block font-family="sans-serif,Symbol,ZapfDingbats"><fo:block margin-left="0pt"><fo:block font-size="24.8832pt" font-weight="bold"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0pt" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">ChapterÂ 10.Â Profiles</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Profiles and user environments are Nixâs mechanism for
implementing the ability to allow different users to have different
configurations, and to do atomic upgrades and rollbacks.  To
understand how they work, itâs useful to know a bit about how Nix
works.  In Nix, packages are stored in unique locations in the
<fo:inline font-style="italic">Nix store</fo:inline> (typically,
<fo:inline font-family="monospace">/nix/store</fo:inline>).  For instance, a particular version
of the Subversion package might be stored in a directory
<fo:inline font-family="monospace">/nix/store/dpmvp969yhdqs7lm2r1a3gng7pyq6vy4-subversion-1.1.3/</fo:inline>,
while another version might be stored in
<fo:inline font-family="monospace">/nix/store/5mq2jcn36ldlmh93yj1n8s9c95pj7c5s-subversion-1.1.2</fo:inline>.
The long strings prefixed to the directory names are cryptographic
hashes<fo:footnote><fo:inline><fo:inline font-family="serif,Symbol,ZapfDingbats" font-size="75%" font-weight="normal" font-style="normal" baseline-shift="super">1</fo:inline></fo:inline><fo:footnote-body font-family="serif,Symbol,ZapfDingbats" font-size="8pt" font-weight="normal" font-style="normal" text-align="justify" start-indent="0pt" end-indent="0pt" text-indent="0pt" hyphenate="true" wrap-option="wrap" linefeed-treatment="treat-as-space"><fo:block><fo:inline font-family="serif,Symbol,ZapfDingbats" font-size="75%" font-weight="normal" font-style="normal" baseline-shift="super">1</fo:inline>160-bit truncations of SHA-256 hashes encoded in
a base-32 notation, to be precise.</fo:block></fo:footnote-body></fo:footnote> of
<fo:inline font-style="italic">all</fo:inline> inputs involved in building the package â
sources, dependencies, compiler flags, and so on.  So if two
packages differ in any way, they end up in different locations in
the file system, so they donât interfere with each other.  <fo:basic-link internal-destination="fig-user-environments"><fo:inline>FigureÂ 10.1, âUser environmentsâ</fo:inline></fo:basic-link> shows a part of a typical Nix
store.</fo:block><fo:block id="fig-user-environments" space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em" keep-together.within-column="always"><fo:block font-weight="bold" font-size="12pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" keep-with-next.within-column="always">FigureÂ 10.1.Â User environments</fo:block><fo:block id="idm512"><fo:external-graphic src="url(figures/user-environments.png)" width="auto" height="auto" content-width="auto" content-height="auto" content-type="content-type:image/png"/></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Of course, you wouldnât want to type

<fo:block id="idm516" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ /nix/store/dpmvp969yhdq...-subversion-1.1.3/bin/svn</fo:block>

every time you want to run Subversion.  Of course we could set up the
<fo:inline font-family="monospace">PATH</fo:inline> environment variable to include the
<fo:inline font-family="monospace">bin</fo:inline> directory of every package we want to use,
but this is not very convenient since changing <fo:inline font-family="monospace">PATH</fo:inline>
doesnât take effect for already existing processes.  The solution Nix
uses is to create directory trees of symlinks to
<fo:inline font-style="italic">activated</fo:inline> packages.  These are called
<fo:inline font-style="italic">user environments</fo:inline> and they are packages
themselves (though automatically generated by
<fo:inline font-weight="bold">nix-env</fo:inline>), so they too reside in the Nix store.  For
instance, in <fo:basic-link internal-destination="fig-user-environments"><fo:inline>FigureÂ 10.1, âUser environmentsâ</fo:inline></fo:basic-link> the user
environment <fo:inline font-family="monospace">/nix/store/0c1p5z4kda11...-user-env</fo:inline>
contains a symlink to just Subversion 1.1.2 (arrows in the figure
indicate symlinks).  This would be what we would obtain if we had done

<fo:block id="idm525" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env -i subversion</fo:block>

on a set of Nix expressions that contained Subversion 1.1.2.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This doesnât in itself solve the problem, of course; you
wouldnât want to type
<fo:inline font-family="monospace">/nix/store/0c1p5z4kda11...-user-env/bin/svn</fo:inline>
either.  Thatâs why there are symlinks outside of the store that point
to the user environments in the store; for instance, the symlinks
<fo:inline font-family="monospace">default-42-link</fo:inline> and
<fo:inline font-family="monospace">default-43-link</fo:inline> in the example.  These are called
<fo:inline font-style="italic">generations</fo:inline> since every time you perform a
<fo:inline font-weight="bold">nix-env</fo:inline> operation, a new user environment is
generated based on the current one.  For instance, generation 43 was
created from generation 42 when we did

<fo:block id="idm532" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env -i subversion firefox</fo:block>

on a set of Nix expressions that contained Firefox and a new version
of Subversion.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Generations are grouped together into
<fo:inline font-style="italic">profiles</fo:inline> so that different users donât interfere
with each other if they donât want to.  For example:

<fo:block id="idm535" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ ls -l /nix/var/nix/profiles/
...
lrwxrwxrwx  1 eelco ... default-42-link -&gt; /nix/store/0c1p5z4kda11...-user-env
lrwxrwxrwx  1 eelco ... default-43-link -&gt; /nix/store/3aw2pdyx2jfc...-user-env
lrwxrwxrwx  1 eelco ... default -&gt; default-43-link</fo:block>

This shows a profile called <fo:inline font-family="monospace">default</fo:inline>.  The file
<fo:inline font-family="monospace">default</fo:inline> itself is actually a symlink that points
to the current generation.  When we do a <fo:inline font-weight="bold">nix-env</fo:inline>
operation, a new user environment and generation link are created
based on the current one, and finally the <fo:inline font-family="monospace">default</fo:inline>
symlink is made to point at the new generation.  This last step is
atomic on Unix, which explains how we can do atomic upgrades.  (Note
that the building/installing of new packages doesnât interfere in
any way with old packages, since they are stored in different
locations in the Nix store.)</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If you find that you want to undo a <fo:inline font-weight="bold">nix-env</fo:inline>
operation, you can just do

<fo:block id="idm542" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env --rollback</fo:block>

which will just make the current generation link point at the previous
link.  E.g., <fo:inline font-family="monospace">default</fo:inline> would be made to point at
<fo:inline font-family="monospace">default-42-link</fo:inline>.  You can also switch to a
specific generation:

<fo:block id="idm545" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env --switch-generation 43</fo:block>

which in this example would roll forward to generation 43 again.  You
can also see all available generations:

<fo:block id="idm546" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env --list-generations</fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You generally wouldnât have
<fo:inline font-family="monospace">/nix/var/nix/profiles/<fo:inline font-style="italic" font-family="monospace">some-profile</fo:inline>/bin</fo:inline>
in your <fo:inline font-family="monospace">PATH</fo:inline>.  Rather, there is a symlink
<fo:inline font-family="monospace">~/.nix-profile</fo:inline> that points to your current
profile.  This means that you should put
<fo:inline font-family="monospace">~/.nix-profile/bin</fo:inline> in your <fo:inline font-family="monospace">PATH</fo:inline>
(and indeed, thatâs what the initialisation script
<fo:inline font-family="monospace">/nix/etc/profile.d/nix.sh</fo:inline> does).  This makes it
easier to switch to a different profile.  You can do that using the
command <fo:inline font-weight="bold">nix-env --switch-profile</fo:inline>:

<fo:block id="idm556" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env --switch-profile /nix/var/nix/profiles/my-profile

$ nix-env --switch-profile /nix/var/nix/profiles/default</fo:block>

These commands switch to the <fo:inline font-family="monospace">my-profile</fo:inline> and
default profile, respectively.  If the profile doesnât exist, it will
be created automatically.  You should be careful about storing a
profile in another location than the <fo:inline font-family="monospace">profiles</fo:inline>
directory, since otherwise it might not be used as a root of the
garbage collector (see <fo:basic-link internal-destination="sec-garbage-collection"><fo:inline>ChapterÂ 11, <fo:inline font-style="italic">Garbage Collection</fo:inline></fo:inline></fo:basic-link>).</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">All <fo:inline font-weight="bold">nix-env</fo:inline> operations work on the profile
pointed to by <fo:inline font-weight="bold">~/.nix-profile</fo:inline>, but you can override
this using the <fo:inline font-family="monospace">--profile</fo:inline> option (abbreviation
<fo:inline font-family="monospace">-p</fo:inline>):

<fo:block id="idm565" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env -p /nix/var/nix/profiles/other-profile -i subversion</fo:block>

This will <fo:inline font-style="italic">not</fo:inline> change the
<fo:inline font-weight="bold">~/.nix-profile</fo:inline> symlink.</fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="true" master-reference="body" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Garbage Collection</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Garbage Collection</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="blank-body"><fo:block text-align="center"/></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block id="sec-garbage-collection"><fo:block font-family="sans-serif,Symbol,ZapfDingbats"><fo:block margin-left="0pt"><fo:block font-size="24.8832pt" font-weight="bold"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0pt" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">ChapterÂ 11.Â Garbage Collection</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-env</fo:inline> operations such as upgrades
(<fo:inline font-family="monospace">-u</fo:inline>) and uninstall (<fo:inline font-family="monospace">-e</fo:inline>) never
actually delete packages from the system.  All they do (as shown
above) is to create a new user environment that no longer contains
symlinks to the âdeletedâ packages.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Of course, since disk space is not infinite, unused packages
should be removed at some point.  You can do this by running the Nix
garbage collector.  It will remove from the Nix store any package
not used (directly or indirectly) by any generation of any
profile.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Note however that as long as old generations reference a
package, it will not be deleted.  After all, we wouldnât be able to
do a rollback otherwise.  So in order for garbage collection to be
effective, you should also delete (some) old generations.  Of course,
this should only be done if you are certain that you will not need to
roll back.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To delete all old (non-current) generations of your current
profile:

<fo:block id="idm577" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env --delete-generations old</fo:block>

Instead of <fo:inline font-family="monospace">old</fo:inline> you can also specify a list of
generations, e.g.,

<fo:block id="idm579" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env --delete-generations 10 11 14</fo:block>

To delete all generations older than a specified number of days
(except the current generation), use the <fo:inline font-family="monospace">d</fo:inline>
suffix. For example,

<fo:block id="idm581" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env --delete-generations 14d</fo:block>

deletes all generations older than two weeks.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">After removing appropriate old generations you can run the
garbage collector as follows:

<fo:block id="idm583" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-store --gc</fo:block>

The behaviour of the gargage collector is affected by the 
<fo:inline font-family="monospace">keep-derivations</fo:inline> (default: true) and <fo:inline font-family="monospace">keep-outputs</fo:inline>
(default: false) options in the Nix configuration file. The defaults will ensure
that all derivations that are build-time dependencies of garbage collector roots
will be kept and that all output paths that are runtime dependencies
will be kept as well. All other derivations or paths will be collected. 
(This is usually what you want, but while you are developing
it may make sense to keep outputs to ensure that rebuild times are quick.)

If you are feeling uncertain, you can also first view what files would
be deleted:

<fo:block id="idm586" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-store --gc --print-dead</fo:block>

Likewise, the option <fo:inline font-family="monospace">--print-live</fo:inline> will show the paths
that <fo:inline font-style="italic">wonât</fo:inline> be deleted.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">There is also a convenient little utility
<fo:inline font-weight="bold">nix-collect-garbage</fo:inline>, which when invoked with the
<fo:inline font-family="monospace">-d</fo:inline> (<fo:inline font-family="monospace">--delete-old</fo:inline>) switch deletes all
old generations of all profiles in
<fo:inline font-family="monospace">/nix/var/nix/profiles</fo:inline>.  So

<fo:block id="idm594" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-collect-garbage -d</fo:block>

is a quick and easy way to clean up your system.</fo:block><fo:block id="ssec-gc-roots"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Garbage Collector Roots</fo:marker><fo:block font-size="20.736pt">Garbage Collector Roots</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The roots of the garbage collector are all store paths to which
there are symlinks in the directory
<fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">prefix</fo:inline>/nix/var/nix/gcroots</fo:inline>.
For instance, the following command makes the path
<fo:inline font-family="monospace">/nix/store/d718ef...-foo</fo:inline> a root of the collector:

<fo:block id="idm601" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ ln -s /nix/store/d718ef...-foo /nix/var/nix/gcroots/bar</fo:block>
	
That is, after this command, the garbage collector will not remove
<fo:inline font-family="monospace">/nix/store/d718ef...-foo</fo:inline> or any of its
dependencies.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Subdirectories of
<fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">prefix</fo:inline>/nix/var/nix/gcroots</fo:inline>
are also searched for symlinks.  Symlinks to non-store paths are
followed and searched for roots, but symlinks to non-store paths
<fo:inline font-style="italic">inside</fo:inline> the paths reached in that way are not
followed to prevent infinite recursion.</fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="true" master-reference="body" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Channels</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Channels</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="blank-body"><fo:block text-align="center"/></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block id="sec-channels"><fo:block font-family="sans-serif,Symbol,ZapfDingbats"><fo:block margin-left="0pt"><fo:block font-size="24.8832pt" font-weight="bold"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0pt" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">ChapterÂ 12.Â Channels</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If you want to stay up to date with a set of packages, itâs not
very convenient to manually download the latest set of Nix expressions
for those packages and upgrade using <fo:inline font-weight="bold">nix-env</fo:inline>.
Fortunately, thereâs a better way: <fo:inline font-style="italic">Nix
channels</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A Nix channel is just a URL that points to a place that contains
a set of Nix expressions and a manifest.  Using the command <fo:basic-link internal-destination="sec-nix-channel"><fo:inline><fo:inline font-weight="bold">nix-channel</fo:inline></fo:inline></fo:basic-link> you
can automatically stay up to date with whatever is available at that
URL.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You can âsubscribeâ to a channel using
<fo:inline font-weight="bold">nix-channel --add</fo:inline>, e.g.,

<fo:block id="idm617" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-channel --add https://nixos.org/channels/nixpkgs-unstable</fo:block>

subscribes you to a channel that always contains that latest version
of the Nix Packages collection.  (Subscribing really just means that
the URL is added to the file <fo:inline font-family="monospace">~/.nix-channels</fo:inline>,
where it is read by subsequent calls to <fo:inline font-weight="bold">nix-channel
--update</fo:inline>.) You can âunsubscribeâ using <fo:inline font-weight="bold">nix-channel
--remove</fo:inline>:

<fo:block id="idm621" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-channel --remove nixpkgs
</fo:block>
</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To obtain the latest Nix expressions available in a channel, do

<fo:block id="idm623" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-channel --update</fo:block>

This downloads and unpacks the Nix expressions in every channel
(downloaded from <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">url</fo:inline>/nixexprs.tar.bz2</fo:inline>).
It also makes the union of each channelâs Nix expressions available by
default to <fo:inline font-weight="bold">nix-env</fo:inline> operations (via the symlink
<fo:inline font-family="monospace">~/.nix-defexpr/channels</fo:inline>).  Consequently, you can
then say

<fo:block id="idm628" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env -u</fo:block>

to upgrade all packages in your profile to the latest versions
available in the subscribed channels.</fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="true" master-reference="body" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Sharing Packages Between Machines</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Sharing Packages Between Machines</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="blank-body"><fo:block text-align="center"/></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block id="sec-sharing-packages"><fo:block font-family="sans-serif,Symbol,ZapfDingbats"><fo:block margin-left="0pt"><fo:block font-size="24.8832pt" font-weight="bold"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0pt" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">ChapterÂ 13.Â Sharing Packages Between Machines</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Sometimes you want to copy a package from one machine to
another.  Or, you want to install some packages and you know that
another machine already has some or all of those packages or their
dependencies.  In that case there are mechanisms to quickly copy
packages between machines.</fo:block><fo:block id="ssec-binary-cache-substituter"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Serving a Nix store via HTTP</fo:marker><fo:block font-size="20.736pt">Serving a Nix store via HTTP</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You can easily share the Nix store of a machine via HTTP. This
allows other machines to fetch store paths from that machine to speed
up installations. It uses the same <fo:inline font-style="italic">binary cache</fo:inline>
mechanism that Nix usually uses to fetch pre-built binaries from
<fo:inline font-family="monospace">https://cache.nixos.org</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The daemon that handles binary cache requests via HTTP,
<fo:inline font-weight="bold">nix-serve</fo:inline>, is not part of the Nix distribution, but
you can install it from Nixpkgs:

<fo:block id="idm639" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env -i nix-serve
</fo:block>

You can then start the server, listening for HTTP connections on
whatever port you like:

<fo:block id="idm640" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-serve -p 8080
</fo:block>

To check whether it works, try the following on the client:

<fo:block id="idm641" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ curl http://avalon:8080/nix-cache-info
</fo:block>

which should print something like:

<fo:block id="idm642" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
StoreDir: /nix/store
WantMassQuery: 1
Priority: 30
</fo:block>

</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">On the client side, you can tell Nix to use your binary cache
using <fo:inline font-family="monospace">--option extra-binary-caches</fo:inline>, e.g.:

<fo:block id="idm645" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env -i firefox --option extra-binary-caches http://avalon:8080/
</fo:block>

The option <fo:inline font-family="monospace">extra-binary-caches</fo:inline> tells Nix to use this
binary cache in addition to your default caches, such as
<fo:inline font-family="monospace">https://cache.nixos.org</fo:inline>. Thus, for any path in the closure
of Firefox, Nix will first check if the path is available on the
server <fo:inline font-family="monospace">avalon</fo:inline> or another binary caches. If not, it
will fall back to building from source.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You can also tell Nix to always use your binary cache by adding
a line to the <fo:inline font-family="monospace"><fo:basic-link internal-destination="sec-conf-file">nix.conf</fo:basic-link></fo:inline>
configuration file like this:

<fo:block id="idm651" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
binary-caches = http://avalon:8080/ https://cache.nixos.org/
</fo:block>

</fo:block></fo:block><fo:block id="ssec-copy-closure"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Copying Closures Via SSH</fo:marker><fo:block font-size="20.736pt">Copying Closures Via SSH</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The command <fo:inline font-weight="bold"><fo:basic-link internal-destination="sec-nix-copy-closure">nix-copy-closure</fo:basic-link></fo:inline> copies a Nix
store path along with all its dependencies to or from another machine
via the SSH protocol.  It doesnât copy store paths that are already
present on the target machine.  For example, the following command
copies Firefox with all its dependencies:

<fo:block id="idm656" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-copy-closure --to alice@itchy.example.org $(type -p firefox)</fo:block>

See <fo:basic-link internal-destination="sec-nix-copy-closure"><fo:inline>nix-copy-closure(1)</fo:inline></fo:basic-link> for details.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">With <fo:inline font-weight="bold"><fo:basic-link internal-destination="refsec-nix-store-export">nix-store
--export</fo:basic-link></fo:inline> and <fo:inline font-weight="bold"><fo:basic-link internal-destination="refsec-nix-store-import">nix-store --import</fo:basic-link></fo:inline> you can
write the closure of a store path (that is, the path and all its
dependencies) to a file, and then unpack that file into another Nix
store.  For example,

<fo:block id="idm661" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-store --export $(nix-store -qR $(type -p firefox)) &gt; firefox.closure</fo:block>

writes the closure of Firefox to a file.  You can then copy this file
to another machine and install the closure:

<fo:block id="idm662" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-store --import &lt; firefox.closure</fo:block>

Any store paths in the closure that are already present in the target
store are ignored.  It is also possible to pipe the export into
another command, e.g. to copy and install a closure directly to/on
another machine:

<fo:block id="idm663" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-store --export $(nix-store -qR $(type -p firefox)) | bzip2 | \
    ssh alice@itchy.example.org "bunzip2 | nix-store --import"</fo:block>

However, <fo:inline font-weight="bold">nix-copy-closure</fo:inline> is generally more
efficient because it only copies paths that are not already present in
the target Nix store.</fo:block></fo:block><fo:block id="ssec-ssh-substituter"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Serving a Nix store via SSH</fo:marker><fo:block font-size="20.736pt">Serving a Nix store via SSH</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You can tell Nix to automatically fetch needed binaries from a
remote Nix store via SSH. For example, the following installs Firefox,
automatically fetching any store paths in Firefoxâs closure if they
are available on the server <fo:inline font-family="monospace">avalon</fo:inline>:

<fo:block id="idm669" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env -i firefox --substituters ssh://alice@avalon
</fo:block>

This works similar to the binary cache substituter that Nix usually
uses, only using SSH instead of HTTP: if a store path
<fo:inline font-family="monospace">P</fo:inline> is needed, Nix will first check if itâs available
in the Nix store on <fo:inline font-family="monospace">avalon</fo:inline>. If not, it will fall
back to using the binary cache substituter, and then to building from
source.</fo:block><fo:block id="idm672" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" margin-left="0.25in" margin-right="0.25in"><fo:block keep-with-next.within-column="always" font-size="14pt" font-weight="bold" hyphenate="false">Note</fo:block><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The SSH substituter currently does not allow you to enter
an SSH passphrase interactively. Therefore, you should use
<fo:inline font-weight="bold">ssh-add</fo:inline> to load the decrypted private key into
<fo:inline font-weight="bold">ssh-agent</fo:inline>.</fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You can also copy the closure of some store path, without
installing it into your profile, e.g.

<fo:block id="idm677" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-store -r /nix/store/m85bxgâ¦-firefox-34.0.5 --substituters ssh://alice@avalon
</fo:block>

This is essentially equivalent to doing

<fo:block id="idm678" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-copy-closure --from alice@avalon /nix/store/m85bxgâ¦-firefox-34.0.5
</fo:block>

</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You can use SSHâs <fo:inline font-style="italic">forced command</fo:inline> feature to
set up a restricted user account for SSH substituter access, allowing
read-only access to the local Nix store, but nothing more. For
example, add the following lines to <fo:inline font-family="monospace">sshd_config</fo:inline>
to restrict the user <fo:inline font-family="monospace">nix-ssh</fo:inline>:

<fo:block id="idm683" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
Match User nix-ssh
  AllowAgentForwarding no
  AllowTcpForwarding no
  PermitTTY no
  PermitTunnel no
  X11Forwarding no
  ForceCommand nix-store --serve
Match All
</fo:block>

On NixOS, you can accomplish the same by adding the following to your
<fo:inline font-family="monospace">configuration.nix</fo:inline>:

<fo:block id="idm685" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
nix.sshServe.enable = true;
nix.sshServe.keys = [ "ssh-dss AAAAB3NzaC1k... bob@example.org" ];
</fo:block>

where the latter line lists the public keys of users that are allowed
to connect.</fo:block></fo:block><fo:block id="ssec-s3-substituter"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Serving a Nix store via AWS S3 or S3-compatible Service</fo:marker><fo:block font-size="20.736pt">Serving a Nix store via AWS S3 or S3-compatible Service</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix has built-in support for storing and fetching store paths
from Amazon S3 and S3 compatible services. This uses the same
<fo:inline font-style="italic">binary</fo:inline> cache mechanism that Nix usually uses to
fetch prebuilt binaries from <fo:inline font-family="monospace">cache.nixos.org</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The following options can be specified as URL parameters to
the S3 URL:</fo:block><fo:list-block id="idm692" provisional-distance-between-starts="8em * 0.60+1em" provisional-label-separation="1em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em"><fo:list-item id="idm693" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">profile</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      The name of the AWS configuration profile to use. By default
      Nix will use the <fo:inline font-family="monospace">default</fo:inline> profile.
    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm699" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">region</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      The region of the S3 bucket. <fo:inline font-family="monospace">usâeast-1</fo:inline> by
      default.
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      If your bucket is not in <fo:inline font-family="monospace">usâeast-1</fo:inline>, you
      should always explicitly specify the region parameter.
    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm707" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">endpoint</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      The URL to your S3-compatible service, for when not using
      Amazon S3. Do not specify this value if you're using Amazon
      S3.
    </fo:block><fo:block id="idm712" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" margin-left="0.25in" margin-right="0.25in"><fo:block keep-with-next.within-column="always" font-size="14pt" font-weight="bold" hyphenate="false">Note</fo:block><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This endpoint must support HTTPS and will use
    path-based addressing instead of virtual host based
    addressing.</fo:block></fo:block></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm714" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">scheme</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      The scheme used for S3 requests, <fo:inline font-family="monospace">https</fo:inline>
      (default) or <fo:inline font-family="monospace">http</fo:inline>.  This option allows you to
      disable HTTPS for binary caches which don't support it.
    </fo:block><fo:block id="idm721" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" margin-left="0.25in" margin-right="0.25in"><fo:block keep-with-next.within-column="always" font-size="14pt" font-weight="bold" hyphenate="false">Note</fo:block><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">HTTPS should be used if the cache might contain
    sensitive information.</fo:block></fo:block></fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In this example we will use the bucket named
<fo:inline font-family="monospace">example-nix-cache</fo:inline>.</fo:block><fo:block id="ssec-s3-substituter-anonymous-reads"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Anonymous Reads to your S3-compatible binary cache</fo:marker><fo:block font-size="17.28pt">Anonymous Reads to your S3-compatible binary cache</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If your binary cache is publicly accessible and does not
  require authentication, the simplest and easiest way to use Nix with
  your S3 compatible binary cache is to use the HTTP URL for that
  cache.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">For AWS S3 the binary cache URL for example bucket will be
  exactly <fo:inline font-family="monospace">https://example-nix-cache.s3.amazonaws.com</fo:inline> or
  <fo:inline font-family="monospace">s3://example-nix-cache</fo:inline>. For S3 compatible binary caches,
  consult that cache's documentation.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Your bucket will need the following bucket policy:</fo:block><fo:block id="idm732" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
{
    "Id": "DirectReads",
    "Version": "2012-10-17",
    "Statement": [
        {
            "Sid": "AllowDirectReads",
            "Action": [
                "s3:GetObject",
                "s3:GetBucketLocation"
            ],
            "Effect": "Allow",
            "Resource": [
                "arn:aws:s3:::example-nix-cache",
                "arn:aws:s3:::example-nix-cache/*"
            ],
            "Principal": "*"
        }
    ]
}
</fo:block></fo:block><fo:block id="ssec-s3-substituter-authenticated-reads"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Authenticated Reads to your S3 binary cache</fo:marker><fo:block font-size="17.28pt">Authenticated Reads to your S3 binary cache</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">For AWS S3 the binary cache URL for example bucket will be
  exactly <fo:inline font-family="monospace">s3://example-nix-cache</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix will use the <fo:basic-link external-destination="url(https://docs.aws.amazon.com/sdk-for-cpp/v1/developer-guide/credentials.html)"><fo:inline>default
  credential provider chain</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(https://docs.aws.amazon.com/sdk-for-cpp/v1/developer-guide/credentials.html)">https://docs.aws.amazon.com/sdk-for-cpp/v1/developer-guide/credentials.html</fo:basic-link>]</fo:inline> for authenticating requests to
  Amazon S3.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix supports authenticated reads from Amazon S3 and S3
  compatible binary caches.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Your bucket will need a bucket policy allowing the desired
  users to perform the <fo:inline font-family="monospace">s3:GetObject</fo:inline> and
  <fo:inline font-family="monospace">s3:GetBucketLocation</fo:inline> action on all objects in the
  bucket. The anonymous policy in <fo:basic-link internal-destination="ssec-s3-substituter-anonymous-reads"><fo:inline>the section called âAnonymous Reads to your S3-compatible binary cacheâ</fo:inline></fo:basic-link> can be updated to
  have a restricted <fo:inline font-family="monospace">Principal</fo:inline> to support
  this.</fo:block></fo:block><fo:block id="ssec-s3-substituter-authenticated-writes"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Authenticated Writes to your S3-compatible binary cache</fo:marker><fo:block font-size="17.28pt">Authenticated Writes to your S3-compatible binary cache</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix support fully supports writing to Amazon S3 and S3
  compatible buckets. The binary cache URL for our example bucket will
  be <fo:inline font-family="monospace">s3://example-nix-cache</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix will use the <fo:basic-link external-destination="url(https://docs.aws.amazon.com/sdk-for-cpp/v1/developer-guide/credentials.html)"><fo:inline>default
  credential provider chain</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(https://docs.aws.amazon.com/sdk-for-cpp/v1/developer-guide/credentials.html)">https://docs.aws.amazon.com/sdk-for-cpp/v1/developer-guide/credentials.html</fo:basic-link>]</fo:inline> for authenticating requests to
  Amazon S3.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Your account will need the following IAM policy to
  upload to the cache:</fo:block><fo:block id="idm752" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Sid": "UploadToCache",
      "Effect": "Allow",
      "Action": [
        "s3:AbortMultipartUpload",
        "s3:GetBucketLocation",
        "s3:GetObject",
        "s3:ListBucket",
        "s3:ListBucketMultipartUploads",
        "s3:ListMultipartUploadParts",
        "s3:PutObject"
      ],
      "Resource": [
        "arn:aws:s3:::example-nix-cache",
        "arn:aws:s3:::example-nix-cache/*"
      ]
    }
  ]
}
</fo:block><fo:block><fo:block id="idm753" keep-together.within-column="auto" space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em"><fo:block font-weight="bold" font-size="12pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" keep-with-next.within-column="always">ExampleÂ 13.1.Â Uploading with a specific credential profile for Amazon S3</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix copy --to 's3://example-nix-cache?profile=cache-upload&amp;region=eu-west-2' nixpkgs.hello</fo:inline></fo:block></fo:block></fo:block><fo:block><fo:block id="idm757" keep-together.within-column="auto" space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em"><fo:block font-weight="bold" font-size="12pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" keep-with-next.within-column="always">ExampleÂ 13.2.Â Uploading to an S3-Compatible Binary Cache</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix copy --to 's3://example-nix-cache?profile=cache-upload&amp;scheme=https&amp;endpoint=minio.example.com' nixpkgs.hello</fo:inline></fo:block></fo:block></fo:block></fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="true" master-reference="titlepage" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="blank-body"><fo:block text-align="center"/></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body"><fo:block id="chap-writing-nix-expressions"><fo:block><fo:block><fo:block text-align="center" font-size="24.8832pt" space-before="18.6624pt" font-weight="bold" font-family="sans-serif,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always" hyphenate="false">PartÂ IV.Â Writing Nix Expressions</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This chapter shows you how to write Nix expressions, which 
instruct Nix how to build packages.  It starts with a
simple example (a Nix expression for GNU Hello), and then moves
on to a more in-depth look at the Nix expression language.</fo:block><fo:block id="idm765" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" margin-left="0.25in" margin-right="0.25in"><fo:block keep-with-next.within-column="always" font-size="14pt" font-weight="bold" hyphenate="false">Note</fo:block><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This chapter is mostly about the Nix expression language.
For more extensive information on adding packages to the Nix Packages
collection (such as functions in the standard environment and coding
conventions), please consult <fo:basic-link external-destination="url(http://nixos.org/nixpkgs/manual/)"><fo:inline>its
manual</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(http://nixos.org/nixpkgs/manual/)">http://nixos.org/nixpkgs/manual/</fo:basic-link>]</fo:inline>.</fo:block></fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence hyphenate="true" master-reference="lot" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Writing Nix Expressions</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Writing Nix Expressions</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="blank-body"><fo:block text-align="center"/></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block id="toc...chap-writing-nix-expressions" space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em"><fo:block><fo:block><fo:block space-before.minimum="1em" space-before.optimum="1.5em" space-before.maximum="2em" space-after="0.5em" start-indent="0pt" font-size="17.28pt" font-weight="bold" font-family="sans-serif,Symbol,ZapfDingbats">Table of Contents</fo:block></fo:block></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ch-simple-expression">14. A Simple Nix Expression</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ch-simple-expression"><fo:page-number-citation ref-id="ch-simple-expression"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.chap-writing-nix-expressions.ch-simple-expression" margin-left="24pt"><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-expression-syntax">Expression Syntax</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-expression-syntax"><fo:page-number-citation ref-id="sec-expression-syntax"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-build-script">Build Script</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-build-script"><fo:page-number-citation ref-id="sec-build-script"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-arguments">Arguments and Variables</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-arguments"><fo:page-number-citation ref-id="sec-arguments"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-building-simple">Building and Testing</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-building-simple"><fo:page-number-citation ref-id="sec-building-simple"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-generic-builder">Generic Builder Syntax</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-generic-builder"><fo:page-number-citation ref-id="sec-generic-builder"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ch-expression-language">15. Nix Expression Language</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ch-expression-language"><fo:page-number-citation ref-id="ch-expression-language"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.chap-writing-nix-expressions.ch-expression-language" margin-left="24pt"><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ssec-values">Values</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ssec-values"><fo:page-number-citation ref-id="ssec-values"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-constructs">Language Constructs</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-constructs"><fo:page-number-citation ref-id="sec-constructs"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-language-operators">Operators</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-language-operators"><fo:page-number-citation ref-id="sec-language-operators"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ssec-derivation">Derivations</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ssec-derivation"><fo:page-number-citation ref-id="ssec-derivation"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.chap-writing-nix-expressions.ssec-derivation" margin-left="24pt"><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-advanced-attributes">Advanced Attributes</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-advanced-attributes"><fo:page-number-citation ref-id="sec-advanced-attributes"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ssec-builtins">Built-in Functions</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ssec-builtins"><fo:page-number-citation ref-id="ssec-builtins"/></fo:basic-link></fo:inline></fo:block></fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="true" master-reference="body" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>A Simple Nix Expression</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>A Simple Nix Expression</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="blank-body"><fo:block text-align="center"/></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block id="ch-simple-expression"><fo:block font-family="sans-serif,Symbol,ZapfDingbats"><fo:block margin-left="0pt"><fo:block font-size="24.8832pt" font-weight="bold"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0pt" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">ChapterÂ 14.Â A Simple Nix Expression</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This section shows how to add and test the <fo:basic-link external-destination="url(http://www.gnu.org/software/hello/hello.html)"><fo:inline>GNU Hello
package</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(http://www.gnu.org/software/hello/hello.html)">http://www.gnu.org/software/hello/hello.html</fo:basic-link>]</fo:inline> to the Nix Packages collection.  Hello is a program
that prints out the text <fo:inline>âHello, world!â</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To add a package to the Nix Packages collection, you generally
need to do three things:

<fo:list-block id="idm774" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-distance-between-starts="1.2em" provisional-label-separation="0.2em"><fo:list-item id="idm775" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>1.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Write a Nix expression for the package.  This is a
  file that describes all the inputs involved in building the package,
  such as dependencies, sources, and so on.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm777" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>2.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Write a <fo:inline font-style="italic">builder</fo:inline>.  This is a
  shell script<fo:footnote><fo:inline><fo:inline font-family="serif,Symbol,ZapfDingbats" font-size="75%" font-weight="normal" font-style="normal" baseline-shift="super">1</fo:inline></fo:inline><fo:footnote-body font-family="serif,Symbol,ZapfDingbats" font-size="8pt" font-weight="normal" font-style="normal" text-align="justify" start-indent="0pt" end-indent="0pt" text-indent="0pt" hyphenate="true" wrap-option="wrap" linefeed-treatment="treat-as-space"><fo:block><fo:inline font-family="serif,Symbol,ZapfDingbats" font-size="75%" font-weight="normal" font-style="normal" baseline-shift="super">1</fo:inline>In fact, it can be written in any
  language, but typically it's a <fo:inline font-weight="bold">bash</fo:inline> shell
  script.</fo:block></fo:footnote-body></fo:footnote> that actually builds the package from
  the inputs.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm783" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>3.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Add the package to the file
  <fo:inline font-family="monospace">pkgs/top-level/all-packages.nix</fo:inline>.  The Nix
  expression written in the first step is a
  <fo:inline font-style="italic">function</fo:inline>; it requires other packages in order
  to build it.  In this step you put it all together, i.e., you call
  the function with the right arguments to build the actual
  package.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block>

</fo:block><fo:block id="sec-expression-syntax"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Expression Syntax</fo:marker><fo:block font-size="20.736pt">Expression Syntax</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block><fo:block id="ex-hello-nix" keep-together.within-column="auto" space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em"><fo:block font-weight="bold" font-size="12pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" keep-with-next.within-column="always">ExampleÂ 14.1.Â Nix expression for GNU Hello
(<fo:inline font-family="monospace">default.nix</fo:inline>)</fo:block><fo:block id="idm792" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
{ stdenv, fetchurl, perl }: <fo:inline id="ex-hello-nix-co-1"><fo:external-graphic content-width="7pt" width="7pt" src="url(images/callouts/1.svg)"/></fo:inline>

stdenv.mkDerivation { <fo:inline id="ex-hello-nix-co-2"><fo:external-graphic content-width="7pt" width="7pt" src="url(images/callouts/2.svg)"/></fo:inline>
  name = "hello-2.1.1"; <fo:inline id="ex-hello-nix-co-3"><fo:external-graphic content-width="7pt" width="7pt" src="url(images/callouts/3.svg)"/></fo:inline>
  builder = ./builder.sh; <fo:inline id="ex-hello-nix-co-4"><fo:external-graphic content-width="7pt" width="7pt" src="url(images/callouts/4.svg)"/></fo:inline>
  src = fetchurl { <fo:inline id="ex-hello-nix-co-5"><fo:external-graphic content-width="7pt" width="7pt" src="url(images/callouts/5.svg)"/></fo:inline>
    url = ftp://ftp.nluug.nl/pub/gnu/hello/hello-2.1.1.tar.gz;
    sha256 = "1md7jsfd8pa45z73bz1kszpp01yw6x5ljkjk2hx7wl800any6465";
  };
  inherit perl; <fo:inline id="ex-hello-nix-co-6"><fo:external-graphic content-width="7pt" width="7pt" src="url(images/callouts/6.svg)"/></fo:inline>
}</fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:basic-link internal-destination="ex-hello-nix"><fo:inline>ExampleÂ 14.1, âNix expression for GNU Hello
(<fo:inline font-family="monospace">default.nix</fo:inline>)â</fo:inline></fo:basic-link> shows a Nix expression for GNU
Hello.  It's actually already in the Nix Packages collection in
<fo:inline font-family="monospace">pkgs/applications/misc/hello/ex-1/default.nix</fo:inline>.
It is customary to place each package in a separate directory and call
the single Nix expression in that directory
<fo:inline font-family="monospace">default.nix</fo:inline>.  The file has the following elements
(referenced from the figure by number):

<fo:block id="idm803" text-align="justify"><fo:list-block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" provisional-distance-between-starts="2.2em" provisional-label-separation="0.2em"><fo:list-item id="idm804"><fo:list-item-label end-indent="label-end()"><fo:block><fo:basic-link internal-destination="ex-hello-nix-co-1"><fo:external-graphic content-width="7pt" width="7pt" src="url(images/callouts/1.svg)"/></fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This states that the expression is a
    <fo:inline font-style="italic">function</fo:inline> that expects to be called with three
    arguments: <fo:inline font-family="monospace">stdenv</fo:inline>, <fo:inline font-family="monospace">fetchurl</fo:inline>,
    and <fo:inline font-family="monospace">perl</fo:inline>.  They are needed to build Hello, but
    we don't know how to build them here; that's why they are function
    arguments.  <fo:inline font-family="monospace">stdenv</fo:inline> is a package that is used
    by almost all Nix Packages packages; it provides a
    <fo:inline>âstandardâ</fo:inline> environment consisting of the things you
    would expect in a basic Unix environment: a C/C++ compiler (GCC,
    to be precise), the Bash shell, fundamental Unix tools such as
    <fo:inline font-weight="bold">cp</fo:inline>, <fo:inline font-weight="bold">grep</fo:inline>,
    <fo:inline font-weight="bold">tar</fo:inline>, etc.  <fo:inline font-family="monospace">fetchurl</fo:inline> is a
    function that downloads files.  <fo:inline font-family="monospace">perl</fo:inline> is the
    Perl interpreter.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix functions generally have the form <fo:inline font-family="monospace">{ x, y, ...,
    z }: e</fo:inline> where <fo:inline font-family="monospace">x</fo:inline>, <fo:inline font-family="monospace">y</fo:inline>,
    etc. are the names of the expected arguments, and where
    <fo:inline font-style="italic" font-family="monospace">e</fo:inline> is the body of the function.  So
    here, the entire remainder of the file is the body of the
    function; when given the required arguments, the body should
    describe how to build an instance of the Hello package.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm822"><fo:list-item-label end-indent="label-end()"><fo:block><fo:basic-link internal-destination="ex-hello-nix-co-2"><fo:external-graphic content-width="7pt" width="7pt" src="url(images/callouts/2.svg)"/></fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">So we have to build a package.  Building something from
    other stuff is called a <fo:inline font-style="italic">derivation</fo:inline> in Nix (as
    opposed to sources, which are built by humans instead of
    computers).  We perform a derivation by calling
    <fo:inline font-family="monospace">stdenv.mkDerivation</fo:inline>.
    <fo:inline font-family="monospace">mkDerivation</fo:inline> is a function provided by
    <fo:inline font-family="monospace">stdenv</fo:inline> that builds a package from a set of
    <fo:inline font-style="italic">attributes</fo:inline>.  A set is just a list of
    key/value pairs where each key is a string and each value is an
    arbitrary Nix expression.  They take the general form <fo:inline font-family="monospace">{
    <fo:inline font-style="italic" font-family="monospace">name1</fo:inline> =
    <fo:inline font-style="italic" font-family="monospace">expr1</fo:inline>; <fo:inline font-style="italic" font-family="monospace">...</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">nameN</fo:inline> =
    <fo:inline font-style="italic" font-family="monospace">exprN</fo:inline>; }</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm835"><fo:list-item-label end-indent="label-end()"><fo:block><fo:basic-link internal-destination="ex-hello-nix-co-3"><fo:external-graphic content-width="7pt" width="7pt" src="url(images/callouts/3.svg)"/></fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The attribute <fo:inline font-family="monospace">name</fo:inline> specifies the symbolic
    name and version of the package.  Nix doesn't really care about
    these things, but they are used by for instance <fo:inline font-weight="bold">nix-env
    -q</fo:inline> to show a <fo:inline>âhuman-readableâ</fo:inline> name for
    packages.  This attribute is required by
    <fo:inline font-family="monospace">mkDerivation</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm841"><fo:list-item-label end-indent="label-end()"><fo:block><fo:basic-link internal-destination="ex-hello-nix-co-4"><fo:external-graphic content-width="7pt" width="7pt" src="url(images/callouts/4.svg)"/></fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The attribute <fo:inline font-family="monospace">builder</fo:inline> specifies the
    builder.  This attribute can sometimes be omitted, in which case
    <fo:inline font-family="monospace">mkDerivation</fo:inline> will fill in a default builder
    (which does a <fo:inline font-family="monospace">configure; make; make install</fo:inline>, in
    essence).  Hello is sufficiently simple that the default builder
    would suffice, but in this case, we will show an actual builder
    for educational purposes.  The value
    <fo:inline font-weight="bold">./builder.sh</fo:inline> refers to the shell script shown
    in <fo:basic-link internal-destination="ex-hello-builder"><fo:inline>ExampleÂ 14.2, âBuild script for GNU Hello
(<fo:inline font-family="monospace">builder.sh</fo:inline>)â</fo:inline></fo:basic-link>, discussed below.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm848"><fo:list-item-label end-indent="label-end()"><fo:block><fo:basic-link internal-destination="ex-hello-nix-co-5"><fo:external-graphic content-width="7pt" width="7pt" src="url(images/callouts/5.svg)"/></fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The builder has to know what the sources of the package
    are.  Here, the attribute <fo:inline font-family="monospace">src</fo:inline> is bound to the
    result of a call to the <fo:inline font-weight="bold">fetchurl</fo:inline> function.
    Given a URL and a SHA-256 hash of the expected contents of the file
    at that URL, this function builds a derivation that downloads the
    file and checks its hash.  So the sources are a dependency that
    like all other dependencies is built before Hello itself is
    built.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Instead of <fo:inline font-family="monospace">src</fo:inline> any other name could have
    been used, and in fact there can be any number of sources (bound
    to different attributes).  However, <fo:inline font-family="monospace">src</fo:inline> is
    customary, and it's also expected by the default builder (which we
    don't use in this example).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm855"><fo:list-item-label end-indent="label-end()"><fo:block><fo:basic-link internal-destination="ex-hello-nix-co-6"><fo:external-graphic content-width="7pt" width="7pt" src="url(images/callouts/6.svg)"/></fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Since the derivation requires Perl, we have to pass the
    value of the <fo:inline font-family="monospace">perl</fo:inline> function argument to the
    builder.  All attributes in the set are actually passed as
    environment variables to the builder, so declaring an attribute

    <fo:block id="idm858" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
perl = perl;</fo:block>

    will do the trick: it binds an attribute <fo:inline font-family="monospace">perl</fo:inline>
    to the function argument which also happens to be called
    <fo:inline font-family="monospace">perl</fo:inline>.  However, it looks a bit silly, so there
    is a shorter syntax.  The <fo:inline font-family="monospace">inherit</fo:inline> keyword
    causes the specified attributes to be bound to whatever variables
    with the same name happen to be in scope.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block>

</fo:block></fo:block><fo:block id="sec-build-script"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Build Script</fo:marker><fo:block font-size="20.736pt">Build Script</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block><fo:block id="ex-hello-builder" keep-together.within-column="auto" space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em"><fo:block font-weight="bold" font-size="12pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" keep-with-next.within-column="always">ExampleÂ 14.2.Â Build script for GNU Hello
(<fo:inline font-family="monospace">builder.sh</fo:inline>)</fo:block><fo:block id="idm867" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
source $stdenv/setup <fo:inline id="ex-hello-builder-co-1"><fo:external-graphic content-width="7pt" width="7pt" src="url(images/callouts/1.svg)"/></fo:inline>

PATH=$perl/bin:$PATH <fo:inline id="ex-hello-builder-co-2"><fo:external-graphic content-width="7pt" width="7pt" src="url(images/callouts/2.svg)"/></fo:inline>

tar xvfz $src <fo:inline id="ex-hello-builder-co-3"><fo:external-graphic content-width="7pt" width="7pt" src="url(images/callouts/3.svg)"/></fo:inline>
cd hello-*
./configure --prefix=$out <fo:inline id="ex-hello-builder-co-4"><fo:external-graphic content-width="7pt" width="7pt" src="url(images/callouts/4.svg)"/></fo:inline>
make <fo:inline id="ex-hello-builder-co-5"><fo:external-graphic content-width="7pt" width="7pt" src="url(images/callouts/5.svg)"/></fo:inline>
make install</fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:basic-link internal-destination="ex-hello-builder"><fo:inline>ExampleÂ 14.2, âBuild script for GNU Hello
(<fo:inline font-family="monospace">builder.sh</fo:inline>)â</fo:inline></fo:basic-link> shows the builder referenced
from Hello's Nix expression (stored in
<fo:inline font-family="monospace">pkgs/applications/misc/hello/ex-1/builder.sh</fo:inline>).
The builder can actually be made a lot shorter by using the
<fo:inline font-style="italic">generic builder</fo:inline> functions provided by
<fo:inline font-family="monospace">stdenv</fo:inline>, but here we write out the build steps to
elucidate what a builder does.  It performs the following
steps:</fo:block><fo:block id="idm878" text-align="justify"><fo:list-block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" provisional-distance-between-starts="2.2em" provisional-label-separation="0.2em"><fo:list-item id="idm879"><fo:list-item-label end-indent="label-end()"><fo:block><fo:basic-link internal-destination="ex-hello-builder-co-1"><fo:external-graphic content-width="7pt" width="7pt" src="url(images/callouts/1.svg)"/></fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">When Nix runs a builder, it initially completely clears the
    environment (except for the attributes declared in the
    derivation).  For instance, the <fo:inline font-family="monospace">PATH</fo:inline> variable is
    empty<fo:footnote><fo:inline><fo:inline font-family="serif,Symbol,ZapfDingbats" font-size="75%" font-weight="normal" font-style="normal" baseline-shift="super">2</fo:inline></fo:inline><fo:footnote-body font-family="serif,Symbol,ZapfDingbats" font-size="8pt" font-weight="normal" font-style="normal" text-align="justify" start-indent="0pt" end-indent="0pt" text-indent="0pt" hyphenate="true" wrap-option="wrap" linefeed-treatment="treat-as-space"><fo:block><fo:inline font-family="serif,Symbol,ZapfDingbats" font-size="75%" font-weight="normal" font-style="normal" baseline-shift="super">2</fo:inline>Actually, it's initialised to
    <fo:inline font-family="monospace">/path-not-set</fo:inline> to prevent Bash from setting it
    to a default value.</fo:block></fo:footnote-body></fo:footnote>.  This is done to prevent
    undeclared inputs from being used in the build process.  If for
    example the <fo:inline font-family="monospace">PATH</fo:inline> contained
    <fo:inline font-family="monospace">/usr/bin</fo:inline>, then you might accidentally use
    <fo:inline font-family="monospace">/usr/bin/gcc</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">So the first step is to set up the environment.  This is
    done by calling the <fo:inline font-family="monospace">setup</fo:inline> script of the
    standard environment.  The environment variable
    <fo:inline font-family="monospace">stdenv</fo:inline> points to the location of the standard
    environment being used.  (It wasn't specified explicitly as an
    attribute in <fo:basic-link internal-destination="ex-hello-nix"><fo:inline>ExampleÂ 14.1, âNix expression for GNU Hello
(<fo:inline font-family="monospace">default.nix</fo:inline>)â</fo:inline></fo:basic-link>, but
    <fo:inline font-family="monospace">mkDerivation</fo:inline> adds it automatically.)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm893"><fo:list-item-label end-indent="label-end()"><fo:block><fo:basic-link internal-destination="ex-hello-builder-co-2"><fo:external-graphic content-width="7pt" width="7pt" src="url(images/callouts/2.svg)"/></fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Since Hello needs Perl, we have to make sure that Perl is in
    the <fo:inline font-family="monospace">PATH</fo:inline>.  The <fo:inline font-family="monospace">perl</fo:inline> environment
    variable points to the location of the Perl package (since it
    was passed in as an attribute to the derivation), so
    <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">$perl</fo:inline>/bin</fo:inline> is the
    directory containing the Perl interpreter.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm899"><fo:list-item-label end-indent="label-end()"><fo:block><fo:basic-link internal-destination="ex-hello-builder-co-3"><fo:external-graphic content-width="7pt" width="7pt" src="url(images/callouts/3.svg)"/></fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Now we have to unpack the sources.  The
    <fo:inline font-family="monospace">src</fo:inline> attribute was bound to the result of
    fetching the Hello source tarball from the network, so the
    <fo:inline font-family="monospace">src</fo:inline> environment variable points to the location in
    the Nix store to which the tarball was downloaded.  After
    unpacking, we <fo:inline font-weight="bold">cd</fo:inline> to the resulting source
    directory.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The whole build is performed in a temporary directory
    created in <fo:inline font-family="monospace">/tmp</fo:inline>, by the way.  This directory is
    removed after the builder finishes, so there is no need to clean
    up the sources afterwards.  Also, the temporary directory is
    always newly created, so you don't have to worry about files from
    previous builds interfering with the current build.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm906"><fo:list-item-label end-indent="label-end()"><fo:block><fo:basic-link internal-destination="ex-hello-builder-co-4"><fo:external-graphic content-width="7pt" width="7pt" src="url(images/callouts/4.svg)"/></fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">GNU Hello is a typical Autoconf-based package, so we first
    have to run its <fo:inline font-family="monospace">configure</fo:inline> script.  In Nix
    every package is stored in a separate location in the Nix store,
    for instance
    <fo:inline font-family="monospace">/nix/store/9a54ba97fb71b65fda531012d0443ce2-hello-2.1.1</fo:inline>.
    Nix computes this path by cryptographically hashing all attributes
    of the derivation.  The path is passed to the builder through the
    <fo:inline font-family="monospace">out</fo:inline> environment variable.  So here we give
    <fo:inline font-family="monospace">configure</fo:inline> the parameter
    <fo:inline font-family="monospace">--prefix=$out</fo:inline> to cause Hello to be installed in
    the expected location.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm913"><fo:list-item-label end-indent="label-end()"><fo:block><fo:basic-link internal-destination="ex-hello-builder-co-5"><fo:external-graphic content-width="7pt" width="7pt" src="url(images/callouts/5.svg)"/></fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Finally we build Hello (<fo:inline font-family="monospace">make</fo:inline>) and install
    it into the location specified by <fo:inline font-family="monospace">out</fo:inline>
    (<fo:inline font-family="monospace">make install</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If you are wondering about the absence of error checking on the
result of various commands called in the builder: this is because the
shell script is evaluated with Bash's <fo:inline font-family="monospace">-e</fo:inline> option,
which causes the script to be aborted if any command fails without an
error check.</fo:block></fo:block><fo:block id="sec-arguments"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Arguments and Variables</fo:marker><fo:block font-size="20.736pt">Arguments and Variables</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block><fo:block id="ex-hello-composition" keep-together.within-column="auto" space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em"><fo:block font-weight="bold" font-size="12pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" keep-with-next.within-column="always">ExampleÂ 14.3.Â Composing GNU Hello
(<fo:inline font-family="monospace">all-packages.nix</fo:inline>)</fo:block><fo:block id="idm925" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
...

rec { <fo:inline id="ex-hello-composition-co-1"><fo:external-graphic content-width="7pt" width="7pt" src="url(images/callouts/1.svg)"/></fo:inline>

  hello = import ../applications/misc/hello/ex-1 <fo:inline id="ex-hello-composition-co-2"><fo:external-graphic content-width="7pt" width="7pt" src="url(images/callouts/2.svg)"/></fo:inline> { <fo:inline id="ex-hello-composition-co-3"><fo:external-graphic content-width="7pt" width="7pt" src="url(images/callouts/3.svg)"/></fo:inline>
    inherit fetchurl stdenv perl;
  };

  perl = import ../development/interpreters/perl { <fo:inline id="ex-hello-composition-co-4"><fo:external-graphic content-width="7pt" width="7pt" src="url(images/callouts/4.svg)"/></fo:inline>
    inherit fetchurl stdenv;
  };

  fetchurl = import ../build-support/fetchurl {
    inherit stdenv; ...
  };

  stdenv = ...;

}
</fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The Nix expression in <fo:basic-link internal-destination="ex-hello-nix"><fo:inline>ExampleÂ 14.1, âNix expression for GNU Hello
(<fo:inline font-family="monospace">default.nix</fo:inline>)â</fo:inline></fo:basic-link> is a
function; it is missing some arguments that have to be filled in
somewhere.  In the Nix Packages collection this is done in the file
<fo:inline font-family="monospace">pkgs/top-level/all-packages.nix</fo:inline>, where all
Nix expressions for packages are imported and called with the
appropriate arguments.  <fo:basic-link internal-destination="ex-hello-composition"><fo:inline>ExampleÂ 14.3, âComposing GNU Hello
(<fo:inline font-family="monospace">all-packages.nix</fo:inline>)â</fo:inline></fo:basic-link> shows
some fragments of
<fo:inline font-family="monospace">all-packages.nix</fo:inline>.</fo:block><fo:block id="idm935" text-align="justify"><fo:list-block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" provisional-distance-between-starts="2.2em" provisional-label-separation="0.2em"><fo:list-item id="idm936"><fo:list-item-label end-indent="label-end()"><fo:block><fo:basic-link internal-destination="ex-hello-composition-co-1"><fo:external-graphic content-width="7pt" width="7pt" src="url(images/callouts/1.svg)"/></fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This file defines a set of attributes, all of which are
    concrete derivations (i.e., not functions).  In fact, we define a
    <fo:inline font-style="italic">mutually recursive</fo:inline> set of attributes.  That
    is, the attributes can refer to each other.  This is precisely
    what we want since we want to <fo:inline>âplugâ</fo:inline> the
    various packages into each other.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm940"><fo:list-item-label end-indent="label-end()"><fo:block><fo:basic-link internal-destination="ex-hello-composition-co-2"><fo:external-graphic content-width="7pt" width="7pt" src="url(images/callouts/2.svg)"/></fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Here we <fo:inline font-style="italic">import</fo:inline> the Nix expression for
    GNU Hello.  The import operation just loads and returns the
    specified Nix expression. In fact, we could just have put the
    contents of <fo:basic-link internal-destination="ex-hello-nix"><fo:inline>ExampleÂ 14.1, âNix expression for GNU Hello
(<fo:inline font-family="monospace">default.nix</fo:inline>)â</fo:inline></fo:basic-link> in
    <fo:inline font-family="monospace">all-packages.nix</fo:inline> at this point.  That
    would be completely equivalent, but it would make the file rather
    bulky.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Note that we refer to
    <fo:inline font-family="monospace">../applications/misc/hello/ex-1</fo:inline>, not
    <fo:inline font-family="monospace">../applications/misc/hello/ex-1/default.nix</fo:inline>.
    When you try to import a directory, Nix automatically appends
    <fo:inline font-family="monospace">/default.nix</fo:inline> to the file name.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm949"><fo:list-item-label end-indent="label-end()"><fo:block><fo:basic-link internal-destination="ex-hello-composition-co-3"><fo:external-graphic content-width="7pt" width="7pt" src="url(images/callouts/3.svg)"/></fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This is where the actual composition takes place.  Here we
    <fo:inline font-style="italic">call</fo:inline> the function imported from
    <fo:inline font-family="monospace">../applications/misc/hello/ex-1</fo:inline> with a set
    containing the things that the function expects, namely
    <fo:inline font-family="monospace">fetchurl</fo:inline>, <fo:inline font-family="monospace">stdenv</fo:inline>, and
    <fo:inline font-family="monospace">perl</fo:inline>.  We use inherit again to use the
    attributes defined in the surrounding scope (we could also have
    written <fo:inline font-family="monospace">fetchurl = fetchurl;</fo:inline>, etc.).</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The result of this function call is an actual derivation
    that can be built by Nix (since when we fill in the arguments of
    the function, what we get is its body, which is the call to
    <fo:inline font-family="monospace">stdenv.mkDerivation</fo:inline> in <fo:basic-link internal-destination="ex-hello-nix"><fo:inline>ExampleÂ 14.1, âNix expression for GNU Hello
(<fo:inline font-family="monospace">default.nix</fo:inline>)â</fo:inline></fo:basic-link>).</fo:block><fo:block id="idm960" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" margin-left="0.25in" margin-right="0.25in"><fo:block keep-with-next.within-column="always" font-size="14pt" font-weight="bold" hyphenate="false">Note</fo:block><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nixpkgs has a convenience function
    <fo:inline font-family="monospace">callPackage</fo:inline> that imports and calls a
    function, filling in any missing arguments by passing the
    corresponding attribute from the Nixpkgs set, like this:

<fo:block id="idm963" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
hello = callPackage ../applications/misc/hello/ex-1 { };
</fo:block>

    If necessary, you can set or override arguments:

<fo:block id="idm964" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
hello = callPackage ../applications/misc/hello/ex-1 { stdenv = myStdenv; };
</fo:block>

    </fo:block></fo:block></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm965"><fo:list-item-label end-indent="label-end()"><fo:block><fo:basic-link internal-destination="ex-hello-composition-co-4"><fo:external-graphic content-width="7pt" width="7pt" src="url(images/callouts/4.svg)"/></fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Likewise, we have to instantiate Perl,
    <fo:inline font-family="monospace">fetchurl</fo:inline>, and the standard environment.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block></fo:block><fo:block id="sec-building-simple"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Building and Testing</fo:marker><fo:block font-size="20.736pt">Building and Testing</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You can now try to build Hello.  Of course, you could do
<fo:inline font-family="monospace">nix-env -i hello</fo:inline>, but you may not want to install a
possibly broken package just yet.  The best way to test the package is by
using the command <fo:inline font-weight="bold"><fo:basic-link internal-destination="sec-nix-build">nix-build</fo:basic-link></fo:inline>,
which builds a Nix expression and creates a symlink named
<fo:inline font-family="monospace">result</fo:inline> in the current directory:

<fo:block id="idm974" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-build -A hello
building path `/nix/store/632d2b22514d...-hello-2.1.1'
hello-2.1.1/
hello-2.1.1/intl/
hello-2.1.1/intl/ChangeLog
<fo:inline font-style="italic" font-family="monospace">...</fo:inline>

$ ls -l result
lrwxrwxrwx ... 2006-09-29 10:43 result -&gt; /nix/store/632d2b22514d...-hello-2.1.1

$ ./result/bin/hello
Hello, world!</fo:block>

The <fo:inline><fo:inline font-family="monospace">-A</fo:inline></fo:inline> option selects
the <fo:inline font-family="monospace">hello</fo:inline> attribute.  This is faster than using the
symbolic package name specified by the <fo:inline font-family="monospace">name</fo:inline>
attribute (which also happens to be <fo:inline font-family="monospace">hello</fo:inline>) and is
unambiguous (there can be multiple packages with the symbolic name
<fo:inline font-family="monospace">hello</fo:inline>, but there can be only one attribute in a set
named <fo:inline font-family="monospace">hello</fo:inline>).</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-build</fo:inline> registers the
<fo:inline font-family="monospace">./result</fo:inline> symlink as a garbage collection root, so
unless and until you delete the <fo:inline font-family="monospace">./result</fo:inline> symlink,
the output of the build will be safely kept on your system.  You can
use <fo:inline font-weight="bold">nix-build</fo:inline>âs <fo:inline font-family="monospace"><fo:basic-link internal-destination="opt-out-link">-o</fo:basic-link></fo:inline> switch to give the symlink another
name.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix has transactional semantics.  Once a build finishes
successfully, Nix makes a note of this in its database: it registers
that the path denoted by <fo:inline font-family="monospace">out</fo:inline> is now
<fo:inline>âvalidâ</fo:inline>.  If you try to build the derivation again, Nix
will see that the path is already valid and finish immediately.  If a
build fails, either because it returns a non-zero exit code, because
Nix or the builder are killed, or because the machine crashes, then
the output paths will not be registered as valid.  If you try to build
the derivation again, Nix will remove the output paths if they exist
(e.g., because the builder died half-way through <fo:inline font-family="monospace">make
install</fo:inline>) and try again.  Note that there is no
<fo:inline>ânegative cachingâ</fo:inline>: Nix doesn't remember that a build
failed, and so a failed build can always be repeated.  This is because
Nix cannot distinguish between permanent failures (e.g., a compiler
error due to a syntax error in the source) and transient failures
(e.g., a disk full condition).</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix also performs locking.  If you run multiple Nix builds
simultaneously, and they try to build the same derivation, the first
Nix instance that gets there will perform the build, while the others
block (or perform other derivations if available) until the build
finishes:

<fo:block id="idm995" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-build -A hello
waiting for lock on `/nix/store/0h5b7hp8d4hqfrw8igvx97x1xawrjnac-hello-2.1.1x'</fo:block>

So it is always safe to run multiple instances of Nix in parallel
(which isnât the case with, say, <fo:inline font-weight="bold">make</fo:inline>).</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If you have a system with multiple CPUs, you may want to have
Nix build different derivations in parallel (insofar as possible).
Just pass the option <fo:inline><fo:inline font-family="monospace">-j
<fo:inline font-style="italic" font-family="monospace">N</fo:inline></fo:inline></fo:inline>, where
<fo:inline font-style="italic" font-family="monospace">N</fo:inline> is the maximum number of jobs to be run
in parallel, or set.  Typically this should be the number of
CPUs.</fo:block></fo:block><fo:block id="sec-generic-builder"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Generic Builder Syntax</fo:marker><fo:block font-size="20.736pt">Generic Builder Syntax</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Recall from <fo:basic-link internal-destination="ex-hello-builder"><fo:inline>ExampleÂ 14.2, âBuild script for GNU Hello
(<fo:inline font-family="monospace">builder.sh</fo:inline>)â</fo:inline></fo:basic-link> that the builder
looked something like this:

<fo:block id="idm1006" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
PATH=$perl/bin:$PATH
tar xvfz $src
cd hello-*
./configure --prefix=$out
make
make install</fo:block>

The builders for almost all Unix packages look like this â set up some
environment variables, unpack the sources, configure, build, and
install.  For this reason the standard environment provides some Bash
functions that automate the build process.  A builder using the
generic build facilities in shown in <fo:basic-link internal-destination="ex-hello-builder2"><fo:inline>ExampleÂ 14.4, âBuild script using the generic
build functionsâ</fo:inline></fo:basic-link>.</fo:block><fo:block><fo:block id="ex-hello-builder2" keep-together.within-column="auto" space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em"><fo:block font-weight="bold" font-size="12pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" keep-with-next.within-column="always">ExampleÂ 14.4.Â Build script using the generic
build functions</fo:block><fo:block id="idm1010" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
buildInputs="$perl" <fo:inline id="ex-hello-builder2-co-1"><fo:external-graphic content-width="7pt" width="7pt" src="url(images/callouts/1.svg)"/></fo:inline>

source $stdenv/setup <fo:inline id="ex-hello-builder2-co-2"><fo:external-graphic content-width="7pt" width="7pt" src="url(images/callouts/2.svg)"/></fo:inline>

genericBuild <fo:inline id="ex-hello-builder2-co-3"><fo:external-graphic content-width="7pt" width="7pt" src="url(images/callouts/3.svg)"/></fo:inline></fo:block></fo:block></fo:block><fo:block id="idm1014" text-align="justify"><fo:list-block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" provisional-distance-between-starts="2.2em" provisional-label-separation="0.2em"><fo:list-item id="idm1015"><fo:list-item-label end-indent="label-end()"><fo:block><fo:basic-link internal-destination="ex-hello-builder2-co-1"><fo:external-graphic content-width="7pt" width="7pt" src="url(images/callouts/1.svg)"/></fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The <fo:inline font-family="monospace">buildInputs</fo:inline> variable tells
    <fo:inline font-family="monospace">setup</fo:inline> to use the indicated packages as
    <fo:inline>âinputsâ</fo:inline>.  This means that if a package provides a
    <fo:inline font-family="monospace">bin</fo:inline> subdirectory, it's added to
    <fo:inline font-family="monospace">PATH</fo:inline>; if it has a <fo:inline font-family="monospace">include</fo:inline>
    subdirectory, it's added to GCC's header search path; and so
    on.<fo:footnote><fo:inline><fo:inline font-family="serif,Symbol,ZapfDingbats" font-size="75%" font-weight="normal" font-style="normal" baseline-shift="super">3</fo:inline></fo:inline><fo:footnote-body font-family="serif,Symbol,ZapfDingbats" font-size="8pt" font-weight="normal" font-style="normal" text-align="justify" start-indent="0pt" end-indent="0pt" text-indent="0pt" hyphenate="true" wrap-option="wrap" linefeed-treatment="treat-as-space"><fo:block><fo:inline font-family="serif,Symbol,ZapfDingbats" font-size="75%" font-weight="normal" font-style="normal" baseline-shift="super">3</fo:inline>How does it work? <fo:inline font-family="monospace">setup</fo:inline>
    tries to source the file
    <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">pkg</fo:inline>/nix-support/setup-hook</fo:inline>
    of all dependencies.  These âsetup hooksâ can then set up whatever
    environment variables they want; for instance, the setup hook for
    Perl sets the <fo:inline font-family="monospace">PERL5LIB</fo:inline> environment variable to
    contain the <fo:inline font-family="monospace">lib/site_perl</fo:inline> directories of all
    inputs.</fo:block></fo:footnote-body></fo:footnote>
    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm1030"><fo:list-item-label end-indent="label-end()"><fo:block><fo:basic-link internal-destination="ex-hello-builder2-co-2"><fo:external-graphic content-width="7pt" width="7pt" src="url(images/callouts/2.svg)"/></fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The function <fo:inline font-family="monospace">genericBuild</fo:inline> is defined in
    the file <fo:inline font-family="monospace">$stdenv/setup</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm1034"><fo:list-item-label end-indent="label-end()"><fo:block><fo:basic-link internal-destination="ex-hello-builder2-co-3"><fo:external-graphic content-width="7pt" width="7pt" src="url(images/callouts/3.svg)"/></fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The final step calls the shell function
    <fo:inline font-family="monospace">genericBuild</fo:inline>, which performs the steps that
    were done explicitly in <fo:basic-link internal-destination="ex-hello-builder"><fo:inline>ExampleÂ 14.2, âBuild script for GNU Hello
(<fo:inline font-family="monospace">builder.sh</fo:inline>)â</fo:inline></fo:basic-link>.  The
    generic builder is smart enough to figure out whether to unpack
    the sources using <fo:inline font-weight="bold">gzip</fo:inline>,
    <fo:inline font-weight="bold">bzip2</fo:inline>, etc.  It can be customised in many ways;
    see the Nixpkgs manual for details.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Discerning readers will note that the
<fo:inline font-family="monospace">buildInputs</fo:inline> could just as well have been set in the Nix
expression, like this:

<fo:block id="idm1042" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
  buildInputs = [ perl ];</fo:block>

The <fo:inline font-family="monospace">perl</fo:inline> attribute can then be removed, and the
builder becomes even shorter:

<fo:block id="idm1044" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
source $stdenv/setup
genericBuild</fo:block>

In fact, <fo:inline font-family="monospace">mkDerivation</fo:inline> provides a default builder
that looks exactly like that, so it is actually possible to omit the
builder for Hello entirely.</fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="true" master-reference="body" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Nix Expression Language</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Nix Expression Language</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="blank-body"><fo:block text-align="center"/></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block id="ch-expression-language"><fo:block font-family="sans-serif,Symbol,ZapfDingbats"><fo:block margin-left="0pt"><fo:block font-size="24.8832pt" font-weight="bold"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0pt" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">ChapterÂ 15.Â Nix Expression Language</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The Nix expression language is a pure, lazy, functional
language.  Purity means that operations in the language don't have
side-effects (for instance, there is no variable assignment).
Laziness means that arguments to functions are evaluated only when
they are needed.  Functional means that functions are
<fo:inline>ânormalâ</fo:inline> values that can be passed around and manipulated
in interesting ways.  The language is not a full-featured, general
purpose language.  Its main job is to describe packages,
compositions of packages, and the variability within
packages.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This section presents the various features of the
language.</fo:block><fo:block id="ssec-values"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Values</fo:marker><fo:block font-size="20.736pt">Values</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="idm1053"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Simple Values</fo:marker><fo:block font-size="17.28pt">Simple Values</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix has the following basic data types:

<fo:list-block id="idm1056" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm1057" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-style="italic">Strings</fo:inline> can be written in three
    ways.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The most common way is to enclose the string between double
    quotes, e.g., <fo:inline font-family="monospace">"foo bar"</fo:inline>.  Strings can span
    multiple lines.  The special characters <fo:inline font-family="monospace">"</fo:inline> and
    <fo:inline font-family="monospace">\</fo:inline> and the character sequence
    <fo:inline font-family="monospace">${</fo:inline> must be escaped by prefixing them with a
    backslash (<fo:inline font-family="monospace">\</fo:inline>).  Newlines, carriage returns and
    tabs can be written as <fo:inline font-family="monospace">\n</fo:inline>,
    <fo:inline font-family="monospace">\r</fo:inline> and <fo:inline font-family="monospace">\t</fo:inline>,
    respectively.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You can include the result of an expression into a string by
    enclosing it in
    <fo:inline font-family="monospace">${<fo:inline font-style="italic" font-family="monospace">...</fo:inline>}</fo:inline>, a feature
    known as <fo:inline font-style="italic">antiquotation</fo:inline>.  The enclosed
    expression must evaluate to something that can be coerced into a
    string (meaning that it must be a string, a path, or a
    derivation).  For instance, rather than writing

<fo:block id="idm1073" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
"--with-freetype2-library=" + freetype + "/lib"</fo:block>

    (where <fo:inline font-family="monospace">freetype</fo:inline> is a derivation), you can
    instead write the more natural

<fo:block id="idm1075" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
"--with-freetype2-library=${freetype}/lib"</fo:block>

    The latter is automatically translated to the former.  A more
    complicated example (from the Nix expression for <fo:basic-link external-destination="url(http://www.trolltech.com/products/qt)"><fo:inline>Qt</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(http://www.trolltech.com/products/qt)">http://www.trolltech.com/products/qt</fo:basic-link>]</fo:inline>):

<fo:block id="idm1077" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
configureFlags = "
  -system-zlib -system-libpng -system-libjpeg
  ${if openglSupport then "-dlopen-opengl
    -L${mesa}/lib -I${mesa}/include
    -L${libXmu}/lib -I${libXmu}/include" else ""}
  ${if threadSupport then "-thread" else "-no-thread"}
";</fo:block>

    Note that Nix expressions and strings can be arbitrarily nested;
    in this case the outer string contains various antiquotations that
    themselves contain strings (e.g., <fo:inline font-family="monospace">"-thread"</fo:inline>),
    some of which in turn contain expressions (e.g.,
    <fo:inline font-family="monospace">${mesa}</fo:inline>).</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The second way to write string literals is as an
    <fo:inline font-style="italic">indented string</fo:inline>, which is enclosed between
    pairs of <fo:inline font-style="italic">double single-quotes</fo:inline>, like so:

<fo:block id="idm1083" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
''
  This is the first line.
  This is the second line.
    This is the third line.
''</fo:block>

    This kind of string literal intelligently strips indentation from
    the start of each line.  To be precise, it strips from each line a
    number of spaces equal to the minimal indentation of the string as
    a whole (disregarding the indentation of empty lines).  For
    instance, the first and second line are indented two space, while
    the third line is indented four spaces.  Thus, two spaces are
    stripped from each line, so the resulting string is

<fo:block id="idm1084" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
"This is the first line.\nThis is the second line.\n  This is the third line.\n"</fo:block>

    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Note that the whitespace and newline following the opening
    <fo:inline font-family="monospace">''</fo:inline> is ignored if there is no non-whitespace
    text on the initial line.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Antiquotation
    (<fo:inline font-family="monospace">${<fo:inline font-style="italic" font-family="monospace">expr</fo:inline>}</fo:inline>) is
    supported in indented strings.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Since <fo:inline font-family="monospace">${</fo:inline> and <fo:inline font-family="monospace">''</fo:inline> have
    special meaning in indented strings, you need a way to quote them.
    <fo:inline font-family="monospace">$</fo:inline> can be escaped by prefixing it with
    <fo:inline font-family="monospace">''</fo:inline> (that is, two single quotes), i.e.,
    <fo:inline font-family="monospace">''$</fo:inline>. <fo:inline font-family="monospace">''</fo:inline> can be escaped by
    prefixing it with <fo:inline font-family="monospace">'</fo:inline>, i.e.,
    <fo:inline font-family="monospace">'''</fo:inline>. <fo:inline font-family="monospace">$</fo:inline> removes any special meaning
    from the following <fo:inline font-family="monospace">$</fo:inline>. Linefeed, carriage-return and tab
    characters can be written as <fo:inline font-family="monospace">''\n</fo:inline>,
    <fo:inline font-family="monospace">''\r</fo:inline>, <fo:inline font-family="monospace">''\t</fo:inline>, and <fo:inline font-family="monospace">''\</fo:inline>
    escapes any other character.

    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Indented strings are primarily useful in that they allow
    multi-line string literals to follow the indentation of the
    enclosing Nix expression, and that less escaping is typically
    necessary for strings representing languages such as shell scripts
    and configuration files because <fo:inline font-family="monospace">''</fo:inline> is much less
    common than <fo:inline font-family="monospace">"</fo:inline>.  Example:

<fo:block id="idm1108" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
stdenv.mkDerivation {
  <fo:inline font-style="italic" font-family="monospace">...</fo:inline>
  postInstall =
    ''
      mkdir $out/bin $out/etc
      cp foo $out/bin
      echo "Hello World" &gt; $out/etc/foo.conf
      ${if enableBar then "cp bar $out/bin" else ""}
    '';
  <fo:inline font-style="italic" font-family="monospace">...</fo:inline>
}
</fo:block>

    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Finally, as a convenience, <fo:inline font-style="italic">URIs</fo:inline> as
    defined in appendix B of <fo:basic-link external-destination="url(http://www.ietf.org/rfc/rfc2396.txt)"><fo:inline>RFC 2396</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(http://www.ietf.org/rfc/rfc2396.txt)">http://www.ietf.org/rfc/rfc2396.txt</fo:basic-link>]</fo:inline>
    can be written <fo:inline font-style="italic">as is</fo:inline>, without quotes.  For
    instance, the string
    <fo:inline font-family="monospace">"http://example.org/foo.tar.bz2"</fo:inline>
    can also be written as
    <fo:inline font-family="monospace">http://example.org/foo.tar.bz2</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm1117" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Numbers, which can be <fo:inline font-style="italic">integers</fo:inline> (like
  <fo:inline font-family="monospace">123</fo:inline>) or <fo:inline font-style="italic">floating point</fo:inline> (like
  <fo:inline font-family="monospace">123.43</fo:inline> or <fo:inline font-family="monospace">.27e13</fo:inline>).</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Numbers are type-compatible: pure integer operations will always
  return integers, whereas any operation involving at least one floating point
  number will have a floating point number as a result.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm1125" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-style="italic">Paths</fo:inline>, e.g.,
  <fo:inline font-family="monospace">/bin/sh</fo:inline> or <fo:inline font-family="monospace">./builder.sh</fo:inline>.
  A path must contain at least one slash to be recognised as such; for
  instance, <fo:inline font-family="monospace">builder.sh</fo:inline> is not a
  path<fo:footnote><fo:inline><fo:inline font-family="serif,Symbol,ZapfDingbats" font-size="75%" font-weight="normal" font-style="normal" baseline-shift="super">1</fo:inline></fo:inline><fo:footnote-body font-family="serif,Symbol,ZapfDingbats" font-size="8pt" font-weight="normal" font-style="normal" text-align="justify" start-indent="0pt" end-indent="0pt" text-indent="0pt" hyphenate="true" wrap-option="wrap" linefeed-treatment="treat-as-space"><fo:block><fo:inline font-family="serif,Symbol,ZapfDingbats" font-size="75%" font-weight="normal" font-style="normal" baseline-shift="super">1</fo:inline>It's parsed as an expression that selects the
  attribute <fo:inline font-family="monospace">sh</fo:inline> from the variable
  <fo:inline font-family="monospace">builder</fo:inline>.</fo:block></fo:footnote-body></fo:footnote>.  If the file name is
  relative, i.e., if it does not begin with a slash, it is made
  absolute at parse time relative to the directory of the Nix
  expression that contained it.  For instance, if a Nix expression in
  <fo:inline font-family="monospace">/foo/bar/bla.nix</fo:inline> refers to
  <fo:inline font-family="monospace">../xyzzy/fnord.nix</fo:inline>, the absolute path is
  <fo:inline font-family="monospace">/foo/xyzzy/fnord.nix</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If the first component of a path is a <fo:inline font-family="monospace">~</fo:inline>,
  it is interpreted as if the rest of the path were relative to the
  user's home directory. e.g. <fo:inline font-family="monospace">~/foo</fo:inline> would be
  equivalent to <fo:inline font-family="monospace">/home/edolstra/foo</fo:inline> for a user
  whose home directory is <fo:inline font-family="monospace">/home/edolstra</fo:inline>.
  </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Paths can also be specified between angle brackets, e.g.
  <fo:inline font-family="monospace">&lt;nixpkgs&gt;</fo:inline>. This means that the directories
  listed in the environment variable
  <fo:inline font-family="monospace">NIX_PATH</fo:inline> will be searched
  for the given file or directory name.
  </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm1146" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-style="italic">Booleans</fo:inline> with values
  <fo:inline font-family="monospace">true</fo:inline> and
  <fo:inline font-family="monospace">false</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm1151" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The null value, denoted as
  <fo:inline font-family="monospace">null</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block>

</fo:block></fo:block><fo:block id="idm1154"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Lists</fo:marker><fo:block font-size="17.28pt">Lists</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Lists are formed by enclosing a whitespace-separated list of
values between square brackets.  For example,

<fo:block id="idm1157" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
[ 123 ./foo.nix "abc" (f { x = y; }) ]</fo:block>

defines a list of four elements, the last being the result of a call
to the function <fo:inline font-family="monospace">f</fo:inline>.  Note that function calls have
to be enclosed in parentheses.  If they had been omitted, e.g.,

<fo:block id="idm1159" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
[ 123 ./foo.nix "abc" f { x = y; } ]</fo:block>

the result would be a list of five elements, the fourth one being a
function and the fifth being a set.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Note that lists are only lazy in values, and they are strict in length.
</fo:block></fo:block><fo:block id="idm1161"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Sets</fo:marker><fo:block font-size="17.28pt">Sets</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Sets are really the core of the language, since ultimately the
Nix language is all about creating derivations, which are really just
sets of attributes to be passed to build scripts.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Sets are just a list of name/value pairs (called
<fo:inline font-style="italic">attributes</fo:inline>) enclosed in curly brackets, where
each value is an arbitrary expression terminated by a semicolon.  For
example:

<fo:block id="idm1166" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
{ x = 123;
  text = "Hello";
  y = f { bla = 456; };
}</fo:block>

This defines a set with attributes named <fo:inline font-family="monospace">x</fo:inline>,
<fo:inline font-family="monospace">text</fo:inline>, <fo:inline font-family="monospace">y</fo:inline>.  The order of the
attributes is irrelevant.  An attribute name may only occur
once.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Attributes can be selected from a set using the
<fo:inline font-family="monospace">.</fo:inline> operator.  For instance,

<fo:block id="idm1172" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
{ a = "Foo"; b = "Bar"; }.a</fo:block>

evaluates to <fo:inline font-family="monospace">"Foo"</fo:inline>.  It is possible to provide a
default value in an attribute selection using the
<fo:inline font-family="monospace">or</fo:inline> keyword.  For example,

<fo:block id="idm1175" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
{ a = "Foo"; b = "Bar"; }.c or "Xyzzy"</fo:block>

will evaluate to <fo:inline font-family="monospace">"Xyzzy"</fo:inline> because there is no
<fo:inline font-family="monospace">c</fo:inline> attribute in the set.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You can use arbitrary double-quoted strings as attribute
names:

<fo:block id="idm1179" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
{ "foo ${bar}" = 123; "nix-1.0" = 456; }."foo ${bar}"
</fo:block>

This will evaluate to <fo:inline font-family="monospace">123</fo:inline> (Assuming
<fo:inline font-family="monospace">bar</fo:inline> is antiquotable). In the case where an
attribute name is just a single antiquotation, the quotes can be
dropped:

<fo:block id="idm1182" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
{ foo = 123; }.${bar} or 456 </fo:block>

This will evaluate to <fo:inline font-family="monospace">123</fo:inline> if
<fo:inline font-family="monospace">bar</fo:inline> evaluates to <fo:inline font-family="monospace">"foo"</fo:inline> when
coerced to a string and <fo:inline font-family="monospace">456</fo:inline> otherwise (again
assuming <fo:inline font-family="monospace">bar</fo:inline> is antiquotable).</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In the special case where an attribute name inside of a set declaration
evaluates to <fo:inline font-family="monospace">null</fo:inline> (which is normally an error, as
<fo:inline font-family="monospace">null</fo:inline> is not antiquotable), that attribute is simply not
added to the set:

<fo:block id="idm1191" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
{ ${if foo then "bar" else null} = true; }</fo:block>

This will evaluate to <fo:inline font-family="monospace">{}</fo:inline> if <fo:inline font-family="monospace">foo</fo:inline>
evaluates to <fo:inline font-family="monospace">false</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A set that has a <fo:inline font-family="monospace">__functor</fo:inline> attribute whose value
is callable (i.e. is itself a function or a set with a
<fo:inline font-family="monospace">__functor</fo:inline> attribute whose value is callable) can be
applied as if it were a function, with the set itself passed in first
, e.g.,

<fo:block id="idm1198" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
let add = { __functor = self: x: x + self.x; };
    inc = add // { x = 1; };
in inc 1
</fo:block>

evaluates to <fo:inline font-family="monospace">2</fo:inline>. This can be used to attach metadata to a
function without the caller needing to treat it specially, or to implement
a form of object-oriented programming, for example.

</fo:block></fo:block></fo:block><fo:block id="sec-constructs"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Language Constructs</fo:marker><fo:block font-size="20.736pt">Language Constructs</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="idm1202"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Recursive sets</fo:marker><fo:block font-size="17.28pt">Recursive sets</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Recursive sets are just normal sets, but the attributes can
refer to each other.  For example,

<fo:block id="idm1205" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
rec {
  x = y;
  y = 123;
}.x
</fo:block>

evaluates to <fo:inline font-family="monospace">123</fo:inline>.  Note that without
<fo:inline font-family="monospace">rec</fo:inline> the binding <fo:inline font-family="monospace">x = y;</fo:inline> would
refer to the variable <fo:inline font-family="monospace">y</fo:inline> in the surrounding scope,
if one exists, and would be invalid if no such variable exists.  That
is, in a normal (non-recursive) set, attributes are not added to the
lexical scope; in a recursive set, they are.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Recursive sets of course introduce the danger of infinite
recursion.  For example,

<fo:block id="idm1211" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
rec {
  x = y;
  y = x;
}.x</fo:block>

does not terminate<fo:footnote><fo:inline><fo:inline font-family="serif,Symbol,ZapfDingbats" font-size="75%" font-weight="normal" font-style="normal" baseline-shift="super">2</fo:inline></fo:inline><fo:footnote-body font-family="serif,Symbol,ZapfDingbats" font-size="8pt" font-weight="normal" font-style="normal" text-align="justify" start-indent="0pt" end-indent="0pt" text-indent="0pt" hyphenate="true" wrap-option="wrap" linefeed-treatment="treat-as-space"><fo:block><fo:inline font-family="serif,Symbol,ZapfDingbats" font-size="75%" font-weight="normal" font-style="normal" baseline-shift="super">2</fo:inline>Actually, Nix detects infinite
recursion in this case and aborts (<fo:inline>âinfinite recursion
encounteredâ</fo:inline>).</fo:block></fo:footnote-body></fo:footnote>.</fo:block></fo:block><fo:block id="sect-let-expressions"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Let-expressions</fo:marker><fo:block font-size="17.28pt">Let-expressions</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A let-expression allows you to define local variables for an
expression.  For instance,

<fo:block id="idm1218" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
let
  x = "foo";
  y = "bar";
in x + y</fo:block>

evaluates to <fo:inline font-family="monospace">"foobar"</fo:inline>.

</fo:block></fo:block><fo:block id="idm1220"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Inheriting attributes</fo:marker><fo:block font-size="17.28pt">Inheriting attributes</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">When defining a set or in a let-expression it is often convenient to copy variables
from the surrounding lexical scope (e.g., when you want to propagate
attributes).  This can be shortened using the
<fo:inline font-family="monospace">inherit</fo:inline> keyword.  For instance,

<fo:block id="idm1224" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
let x = 123; in
{ inherit x;
  y = 456;
}</fo:block>

is equivalent to

<fo:block id="idm1225" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
let x = 123; in
{ x = x;
  y = 456;
}</fo:block>

and both evaluate to <fo:inline font-family="monospace">{ x = 123; y = 456; }</fo:inline>. (Note that
this works because <fo:inline font-family="monospace">x</fo:inline> is added to the lexical scope
by the <fo:inline font-family="monospace">let</fo:inline> construct.)  It is also possible to
inherit attributes from another set.  For instance, in this fragment
from <fo:inline font-family="monospace">all-packages.nix</fo:inline>,

<fo:block id="idm1230" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
  graphviz = (import ../tools/graphics/graphviz) {
    inherit fetchurl stdenv libpng libjpeg expat x11 yacc;
    inherit (xlibs) libXaw;
  };

  xlibs = {
    libX11 = ...;
    libXaw = ...;
    ...
  }

  libpng = ...;
  libjpg = ...;
  ...</fo:block>

the set used in the function call to the function defined in
<fo:inline font-family="monospace">../tools/graphics/graphviz</fo:inline> inherits a number of
variables from the surrounding scope (<fo:inline font-family="monospace">fetchurl</fo:inline>
... <fo:inline font-family="monospace">yacc</fo:inline>), but also inherits
<fo:inline font-family="monospace">libXaw</fo:inline> (the X Athena Widgets) from the
<fo:inline font-family="monospace">xlibs</fo:inline> (X11 client-side libraries) set.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
Summarizing the fragment

<fo:block id="idm1237" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
...
inherit x y z;
inherit (src-set) a b c;
...</fo:block>

is equivalent to

<fo:block id="idm1238" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
...
x = x; y = y; z = z;
a = src-set.a; b = src-set.b; c = src-set.c;
...</fo:block>

when used while defining local variables in a let-expression or
while defining a set.</fo:block></fo:block><fo:block id="ss-functions"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Functions</fo:marker><fo:block font-size="17.28pt">Functions</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Functions have the following form:

<fo:block id="idm1242" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
<fo:inline font-style="italic" font-family="monospace">pattern</fo:inline>: <fo:inline font-style="italic" font-family="monospace">body</fo:inline></fo:block>

The pattern specifies what the argument of the function must look
like, and binds variables in the body to (parts of) the
argument.  There are three kinds of patterns:</fo:block><fo:list-block id="idm1245" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm1246" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If a pattern is a single identifier, then the
  function matches any argument.  Example:

  <fo:block id="idm1248" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
let negate = x: !x;
    concat = x: y: x + y;
in if negate true then concat "foo" "bar" else ""</fo:block>

  Note that <fo:inline font-family="monospace">concat</fo:inline> is a function that takes one
  argument and returns a function that takes another argument.  This
  allows partial parameterisation (i.e., only filling some of the
  arguments of a function); e.g.,

  <fo:block id="idm1250" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
map (concat "foo") [ "bar" "bla" "abc" ]</fo:block>

  evaluates to <fo:inline font-family="monospace">[ "foobar" "foobla"
  "fooabc" ]</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm1252" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A <fo:inline font-style="italic">set pattern</fo:inline> of the form
  <fo:inline font-family="monospace">{ name1, name2, â¦, nameN }</fo:inline> matches a set
  containing the listed attributes, and binds the values of those
  attributes to variables in the function body.  For example, the
  function

<fo:block id="idm1256" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
{ x, y, z }: z + y + x</fo:block>

  can only be called with a set containing exactly the attributes
  <fo:inline font-family="monospace">x</fo:inline>, <fo:inline font-family="monospace">y</fo:inline> and
  <fo:inline font-family="monospace">z</fo:inline>.  No other attributes are allowed.  If you want
  to allow additional arguments, you can use an ellipsis
  (<fo:inline font-family="monospace">...</fo:inline>):

<fo:block id="idm1261" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
{ x, y, z, ... }: z + y + x</fo:block>

  This works on any set that contains at least the three named
  attributes.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">It is possible to provide <fo:inline font-style="italic">default values</fo:inline>
  for attributes, in which case they are allowed to be missing.  A
  default value is specified by writing
  <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">name</fo:inline> ?
  <fo:inline font-style="italic" font-family="monospace">e</fo:inline></fo:inline>, where
  <fo:inline font-style="italic" font-family="monospace">e</fo:inline> is an arbitrary expression.  For example,

<fo:block id="idm1268" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
{ x, y ? "foo", z ? "bar" }: z + y + x</fo:block>

  specifies a function that only requires an attribute named
  <fo:inline font-family="monospace">x</fo:inline>, but optionally accepts <fo:inline font-family="monospace">y</fo:inline>
  and <fo:inline font-family="monospace">z</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm1272" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">An <fo:inline font-family="monospace">@</fo:inline>-pattern provides a means of referring
  to the whole value being matched:

<fo:block id="idm1275" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace"> args@{ x, y, z, ... }: z + y + x + args.a</fo:block>

but can also be written as:

<fo:block id="idm1276" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace"> { x, y, z, ... } @ args: z + y + x + args.a</fo:block>

  Here <fo:inline font-family="monospace">args</fo:inline> is bound to the entire argument, which
  is further matched against the pattern <fo:inline font-family="monospace">{ x, y, z,
  ... }</fo:inline>. <fo:inline font-family="monospace">@</fo:inline>-pattern makes mainly sense with an 
  ellipsis(<fo:inline font-family="monospace">...</fo:inline>) as you can access attribute names as 
  <fo:inline font-family="monospace">a</fo:inline>, using <fo:inline font-family="monospace">args.a</fo:inline>, which was given as an
  additional attribute to the function.
  </fo:block><fo:block id="idm1283" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" margin-left="0.25in" margin-right="0.25in"><fo:block keep-with-next.within-column="always" font-size="14pt" font-weight="bold" hyphenate="false">Warning</fo:block><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    The <fo:inline font-family="monospace">args@</fo:inline> expression is bound to the argument passed to the function which
    means that attributes with defaults that aren't explicitly specified in the function call
    won't cause an evaluation error, but won't exist in <fo:inline font-family="monospace">args</fo:inline>.
   </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    For instance
<fo:block id="idm1288" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
let
  function = args@{ a ? 23, ... }: args;
in
 function {}
</fo:block>
    will evaluate to an empty attribute set.
   </fo:block></fo:block></fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Note that functions do not have names.  If you want to give them
a name, you can bind them to an attribute, e.g.,

<fo:block id="idm1290" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
let concat = { x, y }: x + y;
in concat { x = "foo"; y = "bar"; }</fo:block>

</fo:block></fo:block><fo:block id="idm1291"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Conditionals</fo:marker><fo:block font-size="17.28pt">Conditionals</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Conditionals look like this:

<fo:block id="idm1294" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
if <fo:inline font-style="italic" font-family="monospace">e1</fo:inline> then <fo:inline font-style="italic" font-family="monospace">e2</fo:inline> else <fo:inline font-style="italic" font-family="monospace">e3</fo:inline></fo:block>

where <fo:inline font-style="italic" font-family="monospace">e1</fo:inline> is an expression that should
evaluate to a Boolean value (<fo:inline font-family="monospace">true</fo:inline> or
<fo:inline font-family="monospace">false</fo:inline>).</fo:block></fo:block><fo:block id="idm1301"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Assertions</fo:marker><fo:block font-size="17.28pt">Assertions</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Assertions are generally used to check that certain requirements
on or between features and dependencies hold.  They look like this:

<fo:block id="idm1304" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
assert <fo:inline font-style="italic" font-family="monospace">e1</fo:inline>; <fo:inline font-style="italic" font-family="monospace">e2</fo:inline></fo:block>

where <fo:inline font-style="italic" font-family="monospace">e1</fo:inline> is an expression that should
evaluate to a Boolean value.  If it evaluates to
<fo:inline font-family="monospace">true</fo:inline>, <fo:inline font-style="italic" font-family="monospace">e2</fo:inline> is returned;
otherwise expression evaluation is aborted and a backtrace is printed.</fo:block><fo:block><fo:block id="ex-subversion-nix" keep-together.within-column="auto" space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em"><fo:block font-weight="bold" font-size="12pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" keep-with-next.within-column="always">ExampleÂ 15.1.Â Nix expression for Subversion</fo:block><fo:block id="idm1312" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
{ localServer ? false
, httpServer ? false
, sslSupport ? false
, pythonBindings ? false
, javaSwigBindings ? false
, javahlBindings ? false
, stdenv, fetchurl
, openssl ? null, httpd ? null, db4 ? null, expat, swig ? null, j2sdk ? null
}:

assert localServer -&gt; db4 != null; <fo:inline id="ex-subversion-nix-co-1"><fo:external-graphic content-width="7pt" width="7pt" src="url(images/callouts/1.svg)"/></fo:inline>
assert httpServer -&gt; httpd != null &amp;&amp; httpd.expat == expat; <fo:inline id="ex-subversion-nix-co-2"><fo:external-graphic content-width="7pt" width="7pt" src="url(images/callouts/2.svg)"/></fo:inline>
assert sslSupport -&gt; openssl != null &amp;&amp; (httpServer -&gt; httpd.openssl == openssl); <fo:inline id="ex-subversion-nix-co-3"><fo:external-graphic content-width="7pt" width="7pt" src="url(images/callouts/3.svg)"/></fo:inline>
assert pythonBindings -&gt; swig != null &amp;&amp; swig.pythonSupport;
assert javaSwigBindings -&gt; swig != null &amp;&amp; swig.javaSupport;
assert javahlBindings -&gt; j2sdk != null;

stdenv.mkDerivation {
  name = "subversion-1.1.1";
  ...
  openssl = if sslSupport then openssl else null; <fo:inline id="ex-subversion-nix-co-4"><fo:external-graphic content-width="7pt" width="7pt" src="url(images/callouts/4.svg)"/></fo:inline>
  ...
}</fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:basic-link internal-destination="ex-subversion-nix"><fo:inline>ExampleÂ 15.1, âNix expression for Subversionâ</fo:inline></fo:basic-link> show how assertions are
used in the Nix expression for Subversion.</fo:block><fo:block id="idm1319" text-align="justify"><fo:list-block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" provisional-distance-between-starts="2.2em" provisional-label-separation="0.2em"><fo:list-item id="idm1320"><fo:list-item-label end-indent="label-end()"><fo:block><fo:basic-link internal-destination="ex-subversion-nix-co-1"><fo:external-graphic content-width="7pt" width="7pt" src="url(images/callouts/1.svg)"/></fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This assertion states that if Subversion is to have support
    for local repositories, then Berkeley DB is needed.  So if the
    Subversion function is called with the
    <fo:inline font-family="monospace">localServer</fo:inline> argument set to
    <fo:inline font-family="monospace">true</fo:inline> but the <fo:inline font-family="monospace">db4</fo:inline> argument
    set to <fo:inline font-family="monospace">null</fo:inline>, then the evaluation fails.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm1326"><fo:list-item-label end-indent="label-end()"><fo:block><fo:basic-link internal-destination="ex-subversion-nix-co-2"><fo:external-graphic content-width="7pt" width="7pt" src="url(images/callouts/2.svg)"/></fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This is a more subtle condition: if Subversion is built with
    Apache (<fo:inline font-family="monospace">httpServer</fo:inline>) support, then the Expat
    library (an XML library) used by Subversion should be same as the
    one used by Apache.  This is because in this configuration
    Subversion code ends up being linked with Apache code, and if the
    Expat libraries do not match, a build- or runtime link error or
    incompatibility might occur.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm1329"><fo:list-item-label end-indent="label-end()"><fo:block><fo:basic-link internal-destination="ex-subversion-nix-co-3"><fo:external-graphic content-width="7pt" width="7pt" src="url(images/callouts/3.svg)"/></fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This assertion says that in order for Subversion to have SSL
    support (so that it can access <fo:inline font-family="monospace">https</fo:inline> URLs), an
    OpenSSL library must be passed.  Additionally, it says that
    <fo:inline font-style="italic">if</fo:inline> Apache support is enabled, then Apache's
    OpenSSL should match Subversion's.  (Note that if Apache support
    is not enabled, we don't care about Apache's OpenSSL.)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm1333"><fo:list-item-label end-indent="label-end()"><fo:block><fo:basic-link internal-destination="ex-subversion-nix-co-4"><fo:external-graphic content-width="7pt" width="7pt" src="url(images/callouts/4.svg)"/></fo:basic-link></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The conditional here is not really related to assertions,
    but is worth pointing out: it ensures that if SSL support is
    disabled, then the Subversion derivation is not dependent on
    OpenSSL, even if a non-<fo:inline font-family="monospace">null</fo:inline> value was passed.
    This prevents an unnecessary rebuild of Subversion if OpenSSL
    changes.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block></fo:block><fo:block id="idm1336"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">With-expressions</fo:marker><fo:block font-size="17.28pt">With-expressions</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A <fo:inline font-style="italic">with-expression</fo:inline>,

<fo:block id="idm1340" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
with <fo:inline font-style="italic" font-family="monospace">e1</fo:inline>; <fo:inline font-style="italic" font-family="monospace">e2</fo:inline></fo:block>

introduces the set <fo:inline font-style="italic" font-family="monospace">e1</fo:inline> into the lexical
scope of the expression <fo:inline font-style="italic" font-family="monospace">e2</fo:inline>.  For instance,

<fo:block id="idm1345" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
let as = { x = "foo"; y = "bar"; };
in with as; x + y</fo:block>

evaluates to <fo:inline font-family="monospace">"foobar"</fo:inline> since the
<fo:inline font-family="monospace">with</fo:inline> adds the <fo:inline font-family="monospace">x</fo:inline> and
<fo:inline font-family="monospace">y</fo:inline> attributes of <fo:inline font-family="monospace">as</fo:inline> to the
lexical scope in the expression <fo:inline font-family="monospace">x + y</fo:inline>.  The most
common use of <fo:inline font-family="monospace">with</fo:inline> is in conjunction with the
<fo:inline font-family="monospace">import</fo:inline> function.  E.g.,

<fo:block id="idm1354" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
with (import ./definitions.nix); ...</fo:block>

makes all attributes defined in the file
<fo:inline font-family="monospace">definitions.nix</fo:inline> available as if they were defined
locally in a <fo:inline font-family="monospace">let</fo:inline>-expression.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The bindings introduced by <fo:inline font-family="monospace">with</fo:inline> do not shadow bindings
introduced by other means, e.g.

<fo:block id="idm1359" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
let a = 3; in with { a = 1; }; let a = 4; in with { a = 2; }; ...</fo:block>

establishes the same scope as

<fo:block id="idm1360" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
let a = 1; in let a = 2; in let a = 3; in let a = 4; in ...</fo:block>

</fo:block></fo:block><fo:block id="idm1361"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Comments</fo:marker><fo:block font-size="17.28pt">Comments</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Comments can be single-line, started with a <fo:inline font-family="monospace">#</fo:inline>
character, or inline/multi-line, enclosed within <fo:inline font-family="monospace">/*
... */</fo:inline>.</fo:block></fo:block></fo:block><fo:block id="sec-language-operators"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Operators</fo:marker><fo:block font-size="20.736pt">Operators</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:basic-link internal-destination="table-operators"><fo:inline>TableÂ 15.1, âOperatorsâ</fo:inline></fo:basic-link> lists the operators in the
Nix expression language, in order of precedence (from strongest to
weakest binding).</fo:block><fo:block id="table-operators" keep-together.within-column="auto" space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em"><fo:block font-weight="bold" font-size="12pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" keep-with-next.within-column="always">TableÂ 15.1.Â Operators</fo:block><fo:table border-before-width.conditionality="retain" border-collapse="collapse" border-start-style="solid" border-end-style="solid" border-top-style="solid" border-bottom-style="solid" border-start-width="0.5pt" border-end-width="0.5pt" border-top-width="0.5pt" border-bottom-width="0.5pt" border-start-color="black" border-end-color="black" border-top-color="black" border-bottom-color="black" width="auto"><fo:table-header xmlns:rx="http://www.renderx.com/XSL/Extensions" start-indent="0pt" end-indent="0pt"><fo:table-row keep-with-next.within-column="always"><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.5pt" border-end-style="solid" border-end-color="black"><fo:block font-weight="bold">Name</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.5pt" border-end-style="solid" border-end-color="black"><fo:block font-weight="bold">Syntax</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block font-weight="bold">Associativity</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block font-weight="bold">Description</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block font-weight="bold">Precedence</fo:block></fo:table-cell></fo:table-row></fo:table-header><fo:table-body xmlns:rx="http://www.renderx.com/XSL/Extensions" start-indent="0pt" end-indent="0pt"><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.5pt" border-end-style="solid" border-end-color="black"><fo:block>Select</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.5pt" border-end-style="solid" border-end-color="black"><fo:block><fo:inline font-style="italic" font-family="monospace">e</fo:inline> <fo:inline font-family="monospace">.</fo:inline>
        <fo:inline font-style="italic" font-family="monospace">attrpath</fo:inline>
        [ <fo:inline font-family="monospace">or</fo:inline> <fo:inline font-style="italic" font-family="monospace">def</fo:inline> ]
        </fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>none</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>Select attribute denoted by the attribute path
        <fo:inline font-style="italic" font-family="monospace">attrpath</fo:inline> from set
        <fo:inline font-style="italic" font-family="monospace">e</fo:inline>.  (An attribute path is a
        dot-separated list of attribute names.)  If the attribute
        doesnât exist, return <fo:inline font-style="italic" font-family="monospace">def</fo:inline> if
        provided, otherwise abort evaluation.</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>1</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.5pt" border-end-style="solid" border-end-color="black"><fo:block>Application</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.5pt" border-end-style="solid" border-end-color="black"><fo:block><fo:inline font-style="italic" font-family="monospace">e1</fo:inline> <fo:inline font-style="italic" font-family="monospace">e2</fo:inline></fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>left</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>Call function <fo:inline font-style="italic" font-family="monospace">e1</fo:inline> with
        argument <fo:inline font-style="italic" font-family="monospace">e2</fo:inline>.</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>2</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.5pt" border-end-style="solid" border-end-color="black"><fo:block>Arithmetic Negation</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.5pt" border-end-style="solid" border-end-color="black"><fo:block><fo:inline font-family="monospace">-</fo:inline> <fo:inline font-style="italic" font-family="monospace">e</fo:inline></fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>none</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>Arithmetic negation.</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>3</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.5pt" border-end-style="solid" border-end-color="black"><fo:block>Has Attribute</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.5pt" border-end-style="solid" border-end-color="black"><fo:block><fo:inline font-style="italic" font-family="monospace">e</fo:inline> <fo:inline font-family="monospace">?</fo:inline>
        <fo:inline font-style="italic" font-family="monospace">attrpath</fo:inline></fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>none</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>Test whether set <fo:inline font-style="italic" font-family="monospace">e</fo:inline> contains
        the attribute denoted by <fo:inline font-style="italic" font-family="monospace">attrpath</fo:inline>;
        return <fo:inline font-family="monospace">true</fo:inline> or
        <fo:inline font-family="monospace">false</fo:inline>.</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>4</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.5pt" border-end-style="solid" border-end-color="black"><fo:block>List Concatenation</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.5pt" border-end-style="solid" border-end-color="black"><fo:block><fo:inline font-style="italic" font-family="monospace">e1</fo:inline> <fo:inline font-family="monospace">++</fo:inline> <fo:inline font-style="italic" font-family="monospace">e2</fo:inline></fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>right</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>List concatenation.</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>5</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.5pt" border-end-style="solid" border-end-color="black"><fo:block>Multiplication</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.5pt" border-end-style="solid" border-end-color="black"><fo:block>
          <fo:inline font-style="italic" font-family="monospace">e1</fo:inline> <fo:inline font-family="monospace">*</fo:inline> <fo:inline font-style="italic" font-family="monospace">e2</fo:inline>,
        </fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>left</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>Arithmetic multiplication.</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>6</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.5pt" border-end-style="solid" border-end-color="black"><fo:block>Division</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.5pt" border-end-style="solid" border-end-color="black"><fo:block>
          <fo:inline font-style="italic" font-family="monospace">e1</fo:inline> <fo:inline font-family="monospace">/</fo:inline> <fo:inline font-style="italic" font-family="monospace">e2</fo:inline>
        </fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>left</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>Arithmetic division.</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>6</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.5pt" border-end-style="solid" border-end-color="black"><fo:block>Addition</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.5pt" border-end-style="solid" border-end-color="black"><fo:block>
          <fo:inline font-style="italic" font-family="monospace">e1</fo:inline> <fo:inline font-family="monospace">+</fo:inline> <fo:inline font-style="italic" font-family="monospace">e2</fo:inline>
        </fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>left</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>Arithmetic addition.</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>7</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.5pt" border-end-style="solid" border-end-color="black"><fo:block>Subtraction</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.5pt" border-end-style="solid" border-end-color="black"><fo:block>
          <fo:inline font-style="italic" font-family="monospace">e1</fo:inline> <fo:inline font-family="monospace">-</fo:inline> <fo:inline font-style="italic" font-family="monospace">e2</fo:inline>
        </fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>left</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>Arithmetic subtraction.</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>7</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.5pt" border-end-style="solid" border-end-color="black"><fo:block>String Concatenation</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.5pt" border-end-style="solid" border-end-color="black"><fo:block>
          <fo:inline font-style="italic" font-family="monospace">string1</fo:inline> <fo:inline font-family="monospace">+</fo:inline> <fo:inline font-style="italic" font-family="monospace">string2</fo:inline>
        </fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>left</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>String concatenation.</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>7</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.5pt" border-end-style="solid" border-end-color="black"><fo:block>Not</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.5pt" border-end-style="solid" border-end-color="black"><fo:block><fo:inline font-family="monospace">!</fo:inline> <fo:inline font-style="italic" font-family="monospace">e</fo:inline></fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>none</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>Boolean negation.</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>8</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.5pt" border-end-style="solid" border-end-color="black"><fo:block>Update</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.5pt" border-end-style="solid" border-end-color="black"><fo:block><fo:inline font-style="italic" font-family="monospace">e1</fo:inline> <fo:inline font-family="monospace">//</fo:inline>
        <fo:inline font-style="italic" font-family="monospace">e2</fo:inline></fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>right</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>Return a set consisting of the attributes in
        <fo:inline font-style="italic" font-family="monospace">e1</fo:inline> and
        <fo:inline font-style="italic" font-family="monospace">e2</fo:inline> (with the latter taking
        precedence over the former in case of equally named
        attributes).</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>9</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.5pt" border-end-style="solid" border-end-color="black"><fo:block>Less Than</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.5pt" border-end-style="solid" border-end-color="black"><fo:block>
          <fo:inline font-style="italic" font-family="monospace">e1</fo:inline> <fo:inline font-family="monospace">&lt;</fo:inline> <fo:inline font-style="italic" font-family="monospace">e2</fo:inline>,
        </fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>none</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>Arithmetic comparison.</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>10</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.5pt" border-end-style="solid" border-end-color="black"><fo:block>Less Than or Equal To</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.5pt" border-end-style="solid" border-end-color="black"><fo:block>
          <fo:inline font-style="italic" font-family="monospace">e1</fo:inline> <fo:inline font-family="monospace">&lt;=</fo:inline> <fo:inline font-style="italic" font-family="monospace">e2</fo:inline>
        </fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>none</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>Arithmetic comparison.</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>10</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.5pt" border-end-style="solid" border-end-color="black"><fo:block>Greater Than</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.5pt" border-end-style="solid" border-end-color="black"><fo:block>
          <fo:inline font-style="italic" font-family="monospace">e1</fo:inline> <fo:inline font-family="monospace">&gt;</fo:inline> <fo:inline font-style="italic" font-family="monospace">e2</fo:inline>
        </fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>none</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>Arithmetic comparison.</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>10</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.5pt" border-end-style="solid" border-end-color="black"><fo:block>Greater Than or Equal To</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.5pt" border-end-style="solid" border-end-color="black"><fo:block>
          <fo:inline font-style="italic" font-family="monospace">e1</fo:inline> <fo:inline font-family="monospace">&gt;=</fo:inline> <fo:inline font-style="italic" font-family="monospace">e2</fo:inline>
        </fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>none</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>Arithmetic comparison.</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>10</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.5pt" border-end-style="solid" border-end-color="black"><fo:block>Equality</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.5pt" border-end-style="solid" border-end-color="black"><fo:block>
          <fo:inline font-style="italic" font-family="monospace">e1</fo:inline> <fo:inline font-family="monospace">==</fo:inline> <fo:inline font-style="italic" font-family="monospace">e2</fo:inline>
        </fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>none</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>Equality.</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>11</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.5pt" border-end-style="solid" border-end-color="black"><fo:block>Inequality</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.5pt" border-end-style="solid" border-end-color="black"><fo:block>
          <fo:inline font-style="italic" font-family="monospace">e1</fo:inline> <fo:inline font-family="monospace">!=</fo:inline> <fo:inline font-style="italic" font-family="monospace">e2</fo:inline>
        </fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>none</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>Inequality.</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>11</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.5pt" border-end-style="solid" border-end-color="black"><fo:block>Logical AND</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.5pt" border-end-style="solid" border-end-color="black"><fo:block><fo:inline font-style="italic" font-family="monospace">e1</fo:inline> <fo:inline font-family="monospace">&amp;&amp;</fo:inline>
        <fo:inline font-style="italic" font-family="monospace">e2</fo:inline></fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>left</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>Logical AND.</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>12</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.5pt" border-end-style="solid" border-end-color="black"><fo:block>Logical OR</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black" border-end-width="0.5pt" border-end-style="solid" border-end-color="black"><fo:block><fo:inline font-style="italic" font-family="monospace">e1</fo:inline> <fo:inline font-family="monospace">||</fo:inline>
        <fo:inline font-style="italic" font-family="monospace">e2</fo:inline></fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>left</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>Logical OR.</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:block>13</fo:block></fo:table-cell></fo:table-row><fo:table-row><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-end-width="0.5pt" border-end-style="solid" border-end-color="black"><fo:block>Logical Implication</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-end-width="0.5pt" border-end-style="solid" border-end-color="black"><fo:block><fo:inline font-style="italic" font-family="monospace">e1</fo:inline> <fo:inline font-family="monospace">-&gt;</fo:inline>
        <fo:inline font-style="italic" font-family="monospace">e2</fo:inline></fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt"><fo:block>none</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt"><fo:block>Logical implication (equivalent to
        <fo:inline font-family="monospace">!<fo:inline font-style="italic" font-family="monospace">e1</fo:inline> ||
        <fo:inline font-style="italic" font-family="monospace">e2</fo:inline></fo:inline>).</fo:block></fo:table-cell><fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt"><fo:block>14</fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:block><fo:block id="ssec-derivation"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Derivations</fo:marker><fo:block font-size="20.736pt">Derivations</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The most important built-in function is
<fo:inline font-family="monospace">derivation</fo:inline>, which is used to describe a single
derivation (a build action).  It takes as input a set, the attributes
of which specify the inputs of the build.</fo:block><fo:list-block id="idm1587" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="attr-system" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">There must be an attribute named
  <fo:inline font-family="monospace">system</fo:inline> whose value must be a string specifying a
  Nix platform identifier, such as <fo:inline font-family="monospace">"i686-linux"</fo:inline> or
  <fo:inline font-family="monospace">"x86_64-darwin"</fo:inline><fo:footnote><fo:inline><fo:inline font-family="serif,Symbol,ZapfDingbats" font-size="75%" font-weight="normal" font-style="normal" baseline-shift="super">3</fo:inline></fo:inline><fo:footnote-body font-family="serif,Symbol,ZapfDingbats" font-size="8pt" font-weight="normal" font-style="normal" text-align="justify" start-indent="0pt" end-indent="0pt" text-indent="0pt" hyphenate="true" wrap-option="wrap" linefeed-treatment="treat-as-space"><fo:block><fo:inline font-family="serif,Symbol,ZapfDingbats" font-size="75%" font-weight="normal" font-style="normal" baseline-shift="super">3</fo:inline>To figure out
  your platform identifier, look at the line <fo:inline>âChecking for the
  canonical Nix system nameâ</fo:inline> in the output of Nix's
  <fo:inline font-family="monospace">configure</fo:inline> script.</fo:block></fo:footnote-body></fo:footnote> The build
  can only be performed on a machine and operating system matching the
  platform identifier.  (Nix can automatically forward builds for
  other platforms by forwarding them to other machines; see <fo:basic-link internal-destination="chap-distributed-builds"><fo:inline>ChapterÂ 16, <fo:inline font-style="italic">Remote Builds</fo:inline></fo:inline></fo:basic-link>.)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm1598" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">There must be an attribute named
  <fo:inline font-family="monospace">name</fo:inline> whose value must be a string.  This is used
  as a symbolic name for the package by <fo:inline font-weight="bold">nix-env</fo:inline>,
  and it is appended to the output paths of the
  derivation.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm1602" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">There must be an attribute named
  <fo:inline font-family="monospace">builder</fo:inline> that identifies the program that is
  executed to perform the build.  It can be either a derivation or a
  source (a local file reference, e.g.,
  <fo:inline font-family="monospace">./builder.sh</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm1606" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Every attribute is passed as an environment variable
  to the builder.  Attribute values are translated to environment
  variables as follows:

    <fo:list-block id="idm1608" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm1609" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Strings and numbers are just passed
      verbatim.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm1611" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A <fo:inline font-style="italic">path</fo:inline> (e.g.,
      <fo:inline font-family="monospace">../foo/sources.tar</fo:inline>) causes the referenced
      file to be copied to the store; its location in the store is put
      in the environment variable.  The idea is that all sources
      should reside in the Nix store, since all inputs to a derivation
      should reside in the Nix store.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm1615" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A <fo:inline font-style="italic">derivation</fo:inline> causes that
      derivation to be built prior to the present derivation; its
      default output path is put in the environment
      variable.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm1618" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Lists of the previous types are also allowed.
      They are simply concatenated, separated by
      spaces.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm1620" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">true</fo:inline> is passed as the string
      <fo:inline font-family="monospace">1</fo:inline>, <fo:inline font-family="monospace">false</fo:inline> and
      <fo:inline font-family="monospace">null</fo:inline> are passed as an empty string.
      </fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block>

  </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm1626" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The optional attribute <fo:inline font-family="monospace">args</fo:inline>
  specifies command-line arguments to be passed to the builder.  It
  should be a list.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm1629" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The optional attribute <fo:inline font-family="monospace">outputs</fo:inline>
  specifies a list of symbolic outputs of the derivation.  By default,
  a derivation produces a single output path, denoted as
  <fo:inline font-family="monospace">out</fo:inline>.  However, derivations can produce multiple
  output paths.  This is useful because it allows outputs to be
  downloaded or garbage-collected separately.  For instance, imagine a
  library package that provides a dynamic library, header files, and
  documentation.  A program that links against the library doesnât
  need the header files and documentation at runtime, and it doesnât
  need the documentation at build time.  Thus, the library package
  could specify:
<fo:block id="idm1633" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
outputs = [ "lib" "headers" "doc" ];
</fo:block>
  This will cause Nix to pass environment variables
  <fo:inline font-family="monospace">lib</fo:inline>, <fo:inline font-family="monospace">headers</fo:inline> and
  <fo:inline font-family="monospace">doc</fo:inline> to the builder containing the intended store
  paths of each output.  The builder would typically do something like
<fo:block id="idm1637" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
./configure --libdir=$lib/lib --includedir=$headers/include --docdir=$doc/share/doc
</fo:block>
  for an Autoconf-style package.  You can refer to each output of a
  derivation by selecting it as an attribute, e.g.
<fo:block id="idm1638" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
buildInputs = [ pkg.lib pkg.headers ];
</fo:block>
  The first element of <fo:inline font-family="monospace">outputs</fo:inline> determines the
  <fo:inline font-style="italic">default output</fo:inline>.  Thus, you could also write
<fo:block id="idm1641" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
buildInputs = [ pkg pkg.headers ];
</fo:block>
  since <fo:inline font-family="monospace">pkg</fo:inline> is equivalent to
  <fo:inline font-family="monospace">pkg.lib</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The function <fo:inline font-family="monospace">mkDerivation</fo:inline> in the Nixpkgs
standard environment is a wrapper around
<fo:inline font-family="monospace">derivation</fo:inline> that adds a default value for
<fo:inline font-family="monospace">system</fo:inline> and always uses Bash as the builder, to
which the supplied builder is passed as a command-line argument.  See
the Nixpkgs manual for details.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The builder is executed as follows:

<fo:list-block id="idm1649" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm1650" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A temporary directory is created under the directory
  specified by <fo:inline font-family="monospace">TMPDIR</fo:inline> (default
  <fo:inline font-family="monospace">/tmp</fo:inline>) where the build will take place.  The
  current directory is changed to this directory.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm1654" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The environment is cleared and set to the derivation
  attributes, as specified above.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm1656" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In addition, the following variables are set:

  <fo:list-block id="idm1658" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm1659" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">NIX_BUILD_TOP</fo:inline> contains the path of
    the temporary directory for this build.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm1662" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Also, <fo:inline font-family="monospace">TMPDIR</fo:inline>,
    <fo:inline font-family="monospace">TEMPDIR</fo:inline>, <fo:inline font-family="monospace">TMP</fo:inline>, <fo:inline font-family="monospace">TEMP</fo:inline>
    are set to point to the temporary directory.  This is to prevent
    the builder from accidentally writing temporary files anywhere
    else.  Doing so might cause interference by other
    processes.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm1668" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">PATH</fo:inline> is set to
    <fo:inline font-family="monospace">/path-not-set</fo:inline> to prevent shells from
    initialising it to their built-in default value.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm1672" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">HOME</fo:inline> is set to
    <fo:inline font-family="monospace">/homeless-shelter</fo:inline> to prevent programs from
    using <fo:inline font-family="monospace">/etc/passwd</fo:inline> or the like to find the
    user's home directory, which could cause impurity.  Usually, when
    <fo:inline font-family="monospace">HOME</fo:inline> is set, it is used as the location of the home
    directory, even if it points to a non-existent
    path.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm1678" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">NIX_STORE</fo:inline> is set to the path of the
    top-level Nix store directory (typically,
    <fo:inline font-family="monospace">/nix/store</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm1682" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">For each output declared in
    <fo:inline font-family="monospace">outputs</fo:inline>, the corresponding environment variable
    is set to point to the intended path in the Nix store for that
    output.  Each output path is a concatenation of the cryptographic
    hash of all build inputs, the <fo:inline font-family="monospace">name</fo:inline> attribute
    and the output name.  (The output name is omitted if itâs
    <fo:inline font-family="monospace">out</fo:inline>.)</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block>

  </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm1687" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If an output path already exists, it is removed.
  Also, locks are acquired to prevent multiple Nix instances from
  performing the same build at the same time.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm1689" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A log of the combined standard output and error is
  written to <fo:inline font-family="monospace">/nix/var/log/nix</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm1692" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The builder is executed with the arguments specified
  by the attribute <fo:inline font-family="monospace">args</fo:inline>.  If it exits with exit
  code 0, it is considered to have succeeded.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm1695" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The temporary directory is removed (unless the
  <fo:inline font-family="monospace">-K</fo:inline> option was specified).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm1698" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If the build was successful, Nix scans each output
  path for references to input paths by looking for the hash parts of
  the input paths.  Since these are potential runtime dependencies,
  Nix registers them as dependencies of the output
  paths.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm1700" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">After the build, Nix sets the last-modified
  timestamp on all files in the build result to 1 (00:00:01 1/1/1970
  UTC), sets the group to the default group, and sets the mode of the
  file to 0444 or 0555 (i.e., read-only, with execute permission
  enabled if the file was originally executable).  Note that possible
  <fo:inline font-family="monospace">setuid</fo:inline> and <fo:inline font-family="monospace">setgid</fo:inline> bits are
  cleared.  Setuid and setgid programs are not currently supported by
  Nix.  This is because the Nix archives used in deployment have no
  concept of ownership information, and because it makes the build
  result dependent on the user performing the build.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block>

</fo:block><fo:block id="sec-advanced-attributes"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Advanced Attributes</fo:marker><fo:block font-size="17.28pt">Advanced Attributes</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Derivations can declare some infrequently used optional
attributes.</fo:block><fo:list-block id="idm1707" provisional-distance-between-starts="21em * 0.60+1em" provisional-label-separation="1em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em"><fo:list-item id="idm1708" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">allowedReferences</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The optional attribute
    <fo:inline font-family="monospace">allowedReferences</fo:inline> specifies a list of legal
    references (dependencies) of the output of the builder.  For
    example,

<fo:block id="idm1714" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
allowedReferences = [];
</fo:block>

    enforces that the output of a derivation cannot have any runtime
    dependencies on its inputs.  To allow an output to have a runtime
    dependency on itself, use <fo:inline font-family="monospace">"out"</fo:inline> as a list item.
    This is used in NixOS to check that generated files such as
    initial ramdisks for booting Linux donât have accidental
    dependencies on other paths in the Nix store.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm1716" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">allowedRequisites</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This attribute is similar to
    <fo:inline font-family="monospace">allowedReferences</fo:inline>, but it specifies the legal
    requisites of the whole closure, so all the dependencies
    recursively.  For example,

<fo:block id="idm1722" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
allowedRequisites = [ foobar ];
</fo:block>

    enforces that the output of a derivation cannot have any other
    runtime dependency than <fo:inline font-family="monospace">foobar</fo:inline>, and in addition
    it enforces that <fo:inline font-family="monospace">foobar</fo:inline> itself doesn't
    introduce any other dependency itself.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm1725" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">disallowedReferences</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The optional attribute
    <fo:inline font-family="monospace">disallowedReferences</fo:inline> specifies a list of illegal
    references (dependencies) of the output of the builder.  For
    example,

<fo:block id="idm1731" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
disallowedReferences = [ foo ];
</fo:block>

    enforces that the output of a derivation cannot have a direct runtime
    dependencies on the derivation <fo:inline font-family="monospace">foo</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm1733" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">disallowedRequisites</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This attribute is similar to
    <fo:inline font-family="monospace">disallowedReferences</fo:inline>, but it specifies illegal
    requisites for the whole closure, so all the dependencies
    recursively.  For example,

<fo:block id="idm1739" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
disallowedRequisites = [ foobar ];
</fo:block>

    enforces that the output of a derivation cannot have any
    runtime dependency on <fo:inline font-family="monospace">foobar</fo:inline> or any other derivation
    depending recursively on <fo:inline font-family="monospace">foobar</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm1742" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">exportReferencesGraph</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This attribute allows builders access to the
    references graph of their inputs.  The attribute is a list of
    inputs in the Nix store whose references graph the builder needs
    to know.  The value of this attribute should be a list of pairs
    <fo:inline font-family="monospace">[ <fo:inline font-style="italic" font-family="monospace">name1</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">path1</fo:inline> <fo:inline font-style="italic" font-family="monospace">name2</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">path2</fo:inline> <fo:inline font-style="italic" font-family="monospace">...</fo:inline>
    ]</fo:inline>.  The references graph of each
    <fo:inline font-style="italic" font-family="monospace">pathN</fo:inline> will be stored in a text file
    <fo:inline font-style="italic" font-family="monospace">nameN</fo:inline> in the temporary build directory.
    The text files have the format used by <fo:inline font-weight="bold">nix-store
    --register-validity</fo:inline> (with the deriver fields left
    empty).  For example, when the following derivation is built:

<fo:block id="idm1756" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
derivation {
  ...
  exportReferencesGraph = [ "libfoo-graph" libfoo ];
};
</fo:block>

    the references graph of <fo:inline font-family="monospace">libfoo</fo:inline> is placed in the
    file <fo:inline font-family="monospace">libfoo-graph</fo:inline> in the temporary build
    directory.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">exportReferencesGraph</fo:inline> is useful for
    builders that want to do something with the closure of a store
    path.  Examples include the builders in NixOS that generate the
    initial ramdisk for booting Linux (a <fo:inline font-weight="bold">cpio</fo:inline>
    archive containing the closure of the boot script) and the
    ISO-9660 image for the installation CD (which is populated with a
    Nix store containing the closure of a bootable NixOS
    configuration).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm1762" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">impureEnvVars</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This attribute allows you to specify a list of
    environment variables that should be passed from the environment
    of the calling user to the builder.  Usually, the environment is
    cleared completely when the builder is executed, but with this
    attribute you can allow specific environment variables to be
    passed unmodified.  For example, <fo:inline font-family="monospace">fetchurl</fo:inline> in
    Nixpkgs has the line

<fo:block id="idm1768" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
impureEnvVars = [ "http_proxy" "https_proxy" <fo:inline font-style="italic" font-family="monospace">...</fo:inline> ];
</fo:block>

    to make it use the proxy server configuration specified by the
    user in the environment variables <fo:inline font-family="monospace">http_proxy</fo:inline> and
    friends.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This attribute is only allowed in <fo:basic-link internal-destination="fixed-output-drvs"><fo:inline>fixed-output derivations</fo:inline></fo:basic-link>, where
    impurities such as these are okay since (the hash of) the output
    is known in advance.  It is ignored for all other
    derivations.</fo:block><fo:block id="idm1773" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" margin-left="0.25in" margin-right="0.25in"><fo:block keep-with-next.within-column="always" font-size="14pt" font-weight="bold" hyphenate="false">Warning</fo:block><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">impureEnvVars</fo:inline> implementation takes
    environment variables from the current builder process. When a daemon is
    building its environmental variables are used. Without the daemon, the
    environmental variables come from the environment of the
    <fo:inline font-weight="bold">nix-build</fo:inline>.</fo:block></fo:block></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="fixed-output-drvs" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">outputHash</fo:inline></fo:inline><fo:inline>, </fo:inline><fo:inline><fo:inline font-family="monospace">outputHashAlgo</fo:inline></fo:inline><fo:inline>, </fo:inline><fo:inline><fo:inline font-family="monospace">outputHashMode</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">These attributes declare that the derivation is a
    so-called <fo:inline font-style="italic">fixed-output derivation</fo:inline>, which
    means that a cryptographic hash of the output is already known in
    advance.  When the build of a fixed-output derivation finishes,
    Nix computes the cryptographic hash of the output and compares it
    to the hash declared with these attributes.  If there is a
    mismatch, the build fails.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The rationale for fixed-output derivations is derivations
    such as those produced by the <fo:inline font-family="monospace">fetchurl</fo:inline>
    function.  This function downloads a file from a given URL.  To
    ensure that the downloaded file has not been modified, the caller
    must also specify a cryptographic hash of the file.  For example,

<fo:block id="idm1789" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
fetchurl {
  url = http://ftp.gnu.org/pub/gnu/hello/hello-2.1.1.tar.gz;
  sha256 = "1md7jsfd8pa45z73bz1kszpp01yw6x5ljkjk2hx7wl800any6465";
}
</fo:block>

    It sometimes happens that the URL of the file changes, e.g.,
    because servers are reorganised or no longer available.  We then
    must update the call to <fo:inline font-family="monospace">fetchurl</fo:inline>, e.g.,

<fo:block id="idm1791" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
fetchurl {
  url = ftp://ftp.nluug.nl/pub/gnu/hello/hello-2.1.1.tar.gz;
  sha256 = "1md7jsfd8pa45z73bz1kszpp01yw6x5ljkjk2hx7wl800any6465";
}
</fo:block>

    If a <fo:inline font-family="monospace">fetchurl</fo:inline> derivation was treated like a
    normal derivation, the output paths of the derivation and
    <fo:inline font-style="italic">all derivations depending on it</fo:inline> would change.
    For instance, if we were to change the URL of the Glibc source
    distribution in Nixpkgs (a package on which almost all other
    packages depend) massive rebuilds would be needed.  This is
    unfortunate for a change which we know cannot have a real effect
    as it propagates upwards through the dependency graph.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">For fixed-output derivations, on the other hand, the name of
    the output path only depends on the <fo:inline font-family="monospace">outputHash*</fo:inline>
    and <fo:inline font-family="monospace">name</fo:inline> attributes, while all other attributes
    are ignored for the purpose of computing the output path.  (The
    <fo:inline font-family="monospace">name</fo:inline> attribute is included because it is part
    of the path.)</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">As an example, here is the (simplified) Nix expression for
    <fo:inline font-family="monospace">fetchurl</fo:inline>:

<fo:block id="idm1800" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
{ stdenv, curl }: # The <fo:inline font-weight="bold">curl</fo:inline> program is used for downloading.

{ url, sha256 }:

stdenv.mkDerivation {
  name = baseNameOf (toString url);
  builder = ./builder.sh;
  buildInputs = [ curl ];

  # This is a fixed-output derivation; the output must be a regular
  # file with SHA256 hash <fo:inline font-family="monospace">sha256</fo:inline>.
  outputHashMode = "flat";
  outputHashAlgo = "sha256";
  outputHash = sha256;

  inherit url;
}
</fo:block>

    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The <fo:inline font-family="monospace">outputHashAlgo</fo:inline> attribute specifies
    the hash algorithm used to compute the hash.  It can currently be
    <fo:inline font-family="monospace">"sha1"</fo:inline>, <fo:inline font-family="monospace">"sha256"</fo:inline> or
    <fo:inline font-family="monospace">"sha512"</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The <fo:inline font-family="monospace">outputHashMode</fo:inline> attribute determines
    how the hash is computed.  It must be one of the following two
    values:

    <fo:list-block id="idm1810" provisional-distance-between-starts="11em * 0.60+1em" provisional-label-separation="1em"><fo:list-item id="idm1811" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">"flat"</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The output must be a non-executable regular
        file.  If it isnât, the build fails.  The hash is simply
        computed over the contents of that file (so itâs equal to what
        Unix commands like <fo:inline font-weight="bold">sha256sum</fo:inline> or
        <fo:inline font-weight="bold">sha1sum</fo:inline> produce).</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This is the default.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm1819" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">"recursive"</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The hash is computed over the NAR archive dump
        of the output (i.e., the result of <fo:basic-link internal-destination="refsec-nix-store-dump"><fo:inline><fo:inline font-weight="bold">nix-store
        --dump</fo:inline></fo:inline></fo:basic-link>).  In this case, the output can be
        anything, including a directory tree.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block>

    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The <fo:inline font-family="monospace">outputHash</fo:inline> attribute, finally, must
    be a string containing the hash in either hexadecimal or base-32
    notation.  (See the <fo:basic-link internal-destination="sec-nix-hash"><fo:inline><fo:inline font-weight="bold">nix-hash</fo:inline> command</fo:inline></fo:basic-link>
    for information about converting to and from base-32
    notation.)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm1830" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">passAsFile</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A list of names of attributes that should be
    passed via files rather than environment variables.  For example,
    if you have

    <fo:block id="idm1835" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
passAsFile = ["big"];
big = "a very long string";
    </fo:block>

    then when the builder runs, the environment variable
    <fo:inline font-family="monospace">bigPath</fo:inline> will contain the absolute path to a
    temporary file containing <fo:inline font-family="monospace">a very long
    string</fo:inline>. That is, for any attribute
    <fo:inline font-style="italic" font-family="monospace">x</fo:inline> listed in
    <fo:inline font-family="monospace">passAsFile</fo:inline>, Nix will pass an environment
    variable <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">x</fo:inline>Path</fo:inline> holding
    the path of the file containing the value of attribute
    <fo:inline font-style="italic" font-family="monospace">x</fo:inline>. This is useful when you need to pass
    large strings to a builder, since most operating systems impose a
    limit on the size of the environment (typically, a few hundred
    kilobyte).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm1843" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">preferLocalBuild</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If this attribute is set to
    <fo:inline font-family="monospace">true</fo:inline> and <fo:basic-link internal-destination="chap-distributed-builds"><fo:inline>distributed building is
    enabled</fo:inline></fo:basic-link>, then, if possible, the derivaton will be built
    locally instead of forwarded to a remote machine.  This is
    appropriate for trivial builders where the cost of doing a
    download or remote build would exceed the cost of building
    locally.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm1850" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">allowSubstitutes</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If this attribute is set to
    <fo:inline font-family="monospace">false</fo:inline>, then Nix will always build this
    derivation; it will not try to substitute its outputs. This is
    useful for very trivial derivations (such as
    <fo:inline font-family="monospace">writeText</fo:inline> in Nixpkgs) that are cheaper to
    build than to substitute from a binary cache.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block></fo:block><fo:block id="ssec-builtins"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Built-in Functions</fo:marker><fo:block font-size="20.736pt">Built-in Functions</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This section lists the functions and constants built into the
Nix expression evaluator.  (The built-in function
<fo:inline font-family="monospace">derivation</fo:inline> is discussed above.)  Some built-ins,
such as <fo:inline font-family="monospace">derivation</fo:inline>, are always in scope of every
Nix expression; you can just access them right away.  But to prevent
polluting the namespace too much, most built-ins are not in scope.
Instead, you can access them through the <fo:inline font-family="monospace">builtins</fo:inline>
built-in value, which is a set that contains all built-in functions
and values.  For instance, <fo:inline font-family="monospace">derivation</fo:inline> is also
available as <fo:inline font-family="monospace">builtins.derivation</fo:inline>.</fo:block><fo:list-block id="idm1865" provisional-distance-between-starts="24em * 0.60+1em" provisional-label-separation="1em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em"><fo:list-item id="builtin-abort" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">abort</fo:inline> <fo:inline font-style="italic" font-family="monospace">s</fo:inline></fo:inline><fo:inline>, </fo:inline><fo:inline><fo:inline font-family="monospace">builtins.abort</fo:inline> <fo:inline font-style="italic" font-family="monospace">s</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Abort Nix expression evaluation, print error
    message <fo:inline font-style="italic" font-family="monospace">s</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-add" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.add</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">e1</fo:inline> <fo:inline font-style="italic" font-family="monospace">e2</fo:inline>
    </fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Return the sum of the numbers
    <fo:inline font-style="italic" font-family="monospace">e1</fo:inline> and
    <fo:inline font-style="italic" font-family="monospace">e2</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-all" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.all</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">pred</fo:inline> <fo:inline font-style="italic" font-family="monospace">list</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Return <fo:inline font-family="monospace">true</fo:inline> if the function
    <fo:inline font-style="italic" font-family="monospace">pred</fo:inline> returns <fo:inline font-family="monospace">true</fo:inline>
    for all elements of <fo:inline font-style="italic" font-family="monospace">list</fo:inline>,
    and <fo:inline font-family="monospace">false</fo:inline> otherwise.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-any" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.any</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">pred</fo:inline> <fo:inline font-style="italic" font-family="monospace">list</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Return <fo:inline font-family="monospace">true</fo:inline> if the function
    <fo:inline font-style="italic" font-family="monospace">pred</fo:inline> returns <fo:inline font-family="monospace">true</fo:inline>
    for at least one element of <fo:inline font-style="italic" font-family="monospace">list</fo:inline>,
    and <fo:inline font-family="monospace">false</fo:inline> otherwise.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-attrNames" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.attrNames</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">set</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Return the names of the attributes in the set
    <fo:inline font-style="italic" font-family="monospace">set</fo:inline> in an alphabetically sorted list.  For instance,
    <fo:inline font-family="monospace">builtins.attrNames { y = 1; x = "foo"; }</fo:inline>
    evaluates to <fo:inline font-family="monospace">[ "x" "y" ]</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-attrValues" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.attrValues</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">set</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Return the values of the attributes in the set
    <fo:inline font-style="italic" font-family="monospace">set</fo:inline> in the order corresponding to the
    sorted attribute names.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-baseNameOf" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">baseNameOf</fo:inline> <fo:inline font-style="italic" font-family="monospace">s</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Return the <fo:inline font-style="italic">base name</fo:inline> of the
    string <fo:inline font-style="italic" font-family="monospace">s</fo:inline>, that is, everything following
    the final slash in the string.  This is similar to the GNU
    <fo:inline font-weight="bold">basename</fo:inline> command.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-bitAnd" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.bitAnd</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">e1</fo:inline> <fo:inline font-style="italic" font-family="monospace">e2</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Return the bitwise AND of the integers
    <fo:inline font-style="italic" font-family="monospace">e1</fo:inline> and
    <fo:inline font-style="italic" font-family="monospace">e2</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-bitOr" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.bitOr</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">e1</fo:inline> <fo:inline font-style="italic" font-family="monospace">e2</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Return the bitwise OR of the integers
    <fo:inline font-style="italic" font-family="monospace">e1</fo:inline> and
    <fo:inline font-style="italic" font-family="monospace">e2</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-bitXor" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.bitXor</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">e1</fo:inline> <fo:inline font-style="italic" font-family="monospace">e2</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Return the bitwise XOR of the integers
    <fo:inline font-style="italic" font-family="monospace">e1</fo:inline> and
    <fo:inline font-style="italic" font-family="monospace">e2</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-builtins" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The set <fo:inline font-family="monospace">builtins</fo:inline> contains all
    the built-in functions and values.  You can use
    <fo:inline font-family="monospace">builtins</fo:inline> to test for the availability of
    features in the Nix installation, e.g.,

<fo:block id="idm1968" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
if builtins ? getEnv then builtins.getEnv "PATH" else ""</fo:block>

    This allows a Nix expression to fall back gracefully on older Nix
    installations that donât have the desired built-in
    function.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-compareVersions" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.compareVersions</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">s1</fo:inline> <fo:inline font-style="italic" font-family="monospace">s2</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Compare two strings representing versions and
    return <fo:inline font-family="monospace">-1</fo:inline> if version
    <fo:inline font-style="italic" font-family="monospace">s1</fo:inline> is older than version
    <fo:inline font-style="italic" font-family="monospace">s2</fo:inline>, <fo:inline font-family="monospace">0</fo:inline> if they are
    the same, and <fo:inline font-family="monospace">1</fo:inline> if
    <fo:inline font-style="italic" font-family="monospace">s1</fo:inline> is newer than
    <fo:inline font-style="italic" font-family="monospace">s2</fo:inline>.  The version comparison algorithm
    is the same as the one used by <fo:basic-link internal-destination="ssec-version-comparisons"><fo:inline><fo:inline font-weight="bold">nix-env
    -u</fo:inline></fo:inline></fo:basic-link>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-concatLists" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.concatLists</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">lists</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Concatenate a list of lists into a single
    list.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-concatStringsSep" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.concatStringsSep</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">separator</fo:inline> <fo:inline font-style="italic" font-family="monospace">list</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Concatenate a list of strings with a separator
    between each element, e.g. <fo:inline font-family="monospace">concatStringsSep "/"
    ["usr" "local" "bin"] == "usr/local/bin"</fo:inline></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-currentSystem" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.currentSystem</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The built-in value <fo:inline font-family="monospace">currentSystem</fo:inline>
    evaluates to the Nix platform identifier for the Nix installation
    on which the expression is being evaluated, such as
    <fo:inline font-family="monospace">"i686-linux"</fo:inline> or
    <fo:inline font-family="monospace">"x86_64-darwin"</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-deepSeq" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.deepSeq</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">e1</fo:inline> <fo:inline font-style="italic" font-family="monospace">e2</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This is like <fo:inline font-family="monospace">seq
    <fo:inline font-style="italic" font-family="monospace">e1</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">e2</fo:inline></fo:inline>, except that
    <fo:inline font-style="italic" font-family="monospace">e1</fo:inline> is evaluated
    <fo:inline font-style="italic">deeply</fo:inline>: if itâs a list or set, its elements
    or attributes are also evaluated recursively.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-derivation" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">derivation</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">attrs</fo:inline></fo:inline><fo:inline>, </fo:inline><fo:inline><fo:inline font-family="monospace">builtins.derivation</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">attrs</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">derivation</fo:inline> is described in
    <fo:basic-link internal-destination="ssec-derivation"><fo:inline>the section called âDerivationsâ</fo:inline></fo:basic-link>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-dirOf" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">dirOf</fo:inline> <fo:inline font-style="italic" font-family="monospace">s</fo:inline></fo:inline><fo:inline>, </fo:inline><fo:inline><fo:inline font-family="monospace">builtins.dirOf</fo:inline> <fo:inline font-style="italic" font-family="monospace">s</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Return the directory part of the string
    <fo:inline font-style="italic" font-family="monospace">s</fo:inline>, that is, everything before the final
    slash in the string.  This is similar to the GNU
    <fo:inline font-weight="bold">dirname</fo:inline> command.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-div" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.div</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">e1</fo:inline> <fo:inline font-style="italic" font-family="monospace">e2</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Return the quotient of the numbers
    <fo:inline font-style="italic" font-family="monospace">e1</fo:inline> and
    <fo:inline font-style="italic" font-family="monospace">e2</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-elem" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.elem</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">x</fo:inline> <fo:inline font-style="italic" font-family="monospace">xs</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Return <fo:inline font-family="monospace">true</fo:inline> if a value equal to
    <fo:inline font-style="italic" font-family="monospace">x</fo:inline> occurs in the list
    <fo:inline font-style="italic" font-family="monospace">xs</fo:inline>, and <fo:inline font-family="monospace">false</fo:inline>
    otherwise.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-elemAt" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.elemAt</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">xs</fo:inline> <fo:inline font-style="italic" font-family="monospace">n</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Return element <fo:inline font-style="italic" font-family="monospace">n</fo:inline> from
    the list <fo:inline font-style="italic" font-family="monospace">xs</fo:inline>.  Elements are counted
    starting from 0.  A fatal error occurs if the index is out of
    bounds.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-fetchurl" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.fetchurl</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">url</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Download the specified URL and return the path of
    the downloaded file. This function is not available if <fo:basic-link internal-destination="conf-restrict-eval"><fo:inline>restricted evaluation mode</fo:inline></fo:basic-link> is
    enabled.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-fetchTarball" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">fetchTarball</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">url</fo:inline></fo:inline><fo:inline>, </fo:inline><fo:inline><fo:inline font-family="monospace">builtins.fetchTarball</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">url</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Download the specified URL, unpack it and return
    the path of the unpacked tree. The file must be a tape archive
    (<fo:inline font-family="monospace">.tar</fo:inline>) compressed with
    <fo:inline font-family="monospace">gzip</fo:inline>, <fo:inline font-family="monospace">bzip2</fo:inline> or
    <fo:inline font-family="monospace">xz</fo:inline>. The top-level path component of the files
    in the tarball is removed, so it is best if the tarball contains a
    single directory at top level. The typical use of the function is
    to obtain external Nix expression dependencies, such as a
    particular version of Nixpkgs, e.g.

<fo:block id="idm2090" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
with import (fetchTarball https://github.com/NixOS/nixpkgs-channels/archive/nixos-14.12.tar.gz) {};

stdenv.mkDerivation { â¦ }
</fo:block>
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The fetched tarball is cached for a certain amount of time
    (1 hour by default) in <fo:inline font-family="monospace">~/.cache/nix/tarballs/</fo:inline>.
    You can change the cache timeout either on the command line with
    <fo:inline font-family="monospace">--option tarball-ttl <fo:inline font-style="italic" font-family="monospace">number of seconds</fo:inline></fo:inline> or
    in the Nix configuration file with this option:
    <fo:inline font-family="monospace"><fo:basic-link internal-destination="conf-tarball-ttl"><fo:inline><fo:inline font-family="monospace">tarball-ttl</fo:inline></fo:inline></fo:basic-link> <fo:inline font-style="italic" font-family="monospace">number of seconds to cache</fo:inline></fo:inline>.
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Note that when obtaining the hash with <fo:inline font-family="monospace">nix-prefetch-url
    </fo:inline> the option <fo:inline font-family="monospace">--unpack</fo:inline> is required.
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This function can also verify the contents against a hash.
    In that case, the function takes a set instead of a URL. The set
    requires the attribute <fo:inline font-family="monospace">url</fo:inline> and the attribute
    <fo:inline font-family="monospace">sha256</fo:inline>, e.g.

<fo:block id="idm2104" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
with import (fetchTarball {
  url = https://github.com/NixOS/nixpkgs-channels/archive/nixos-14.12.tar.gz;
  sha256 = "1jppksrfvbk5ypiqdz4cddxdl8z6zyzdb2srq8fcffr327ld5jj2";
}) {};

stdenv.mkDerivation { â¦ }
</fo:block>

    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This function is not available if <fo:basic-link internal-destination="conf-restrict-eval"><fo:inline>restricted evaluation mode</fo:inline></fo:basic-link> is
    enabled.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-fetchGit" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline>
      <fo:inline font-family="monospace">builtins.fetchGit</fo:inline>
      <fo:inline font-style="italic" font-family="monospace">args</fo:inline>
    </fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
        Fetch a path from git. <fo:inline font-style="italic" font-family="monospace">args</fo:inline> can be
        a URL, in which case the HEAD of the repo at that URL is
        fetched. Otherwise, it can be an attribute with the following
        attributes (all except <fo:inline font-family="monospace">url</fo:inline> optional):
      </fo:block><fo:list-block id="idm2115" provisional-distance-between-starts="4em * 0.60+1em" provisional-label-separation="1em"><fo:list-item id="idm2116" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline>url</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
              The URL of the repo.
            </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm2120" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline>name</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
              The name of the directory the repo should be exported to
              in the store. Defaults to the basename of the URL.
            </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm2124" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline>rev</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
              The git revision to fetch. Defaults to the tip of
              <fo:inline font-family="monospace">ref</fo:inline>.
            </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm2129" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline>ref</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
              The git ref to look for the requested revision under.
              This is often a branch or tag name. Defaults to
              <fo:inline font-family="monospace">HEAD</fo:inline>.
            </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
              By default, the <fo:inline font-family="monospace">ref</fo:inline> value is prefixed
              with <fo:inline font-family="monospace">refs/heads/</fo:inline>. As of Nix 2.3.0
              Nix will not prefix <fo:inline font-family="monospace">refs/heads/</fo:inline> if
              <fo:inline font-family="monospace">ref</fo:inline> starts with <fo:inline font-family="monospace">refs/</fo:inline>.
            </fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block><fo:block id="idm2140" keep-together.within-column="auto" space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em"><fo:block font-weight="bold" font-size="12pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" keep-with-next.within-column="always">ExampleÂ 15.2.Â Fetching a private repository over SSH</fo:block><fo:block id="idm2142" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">builtins.fetchGit {
  url = "git@github.com:my-secret/repository.git";
  ref = "master";
  rev = "adab8b916a45068c044658c4158d81878f9ed1c3";
}</fo:block></fo:block></fo:block><fo:block><fo:block id="idm2143" keep-together.within-column="auto" space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em"><fo:block font-weight="bold" font-size="12pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" keep-with-next.within-column="always">ExampleÂ 15.3.Â Fetching an arbitrary ref</fo:block><fo:block id="idm2145" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">builtins.fetchGit {
  url = "https://github.com/NixOS/nix.git";
  ref = "refs/heads/0.5-release";
}</fo:block></fo:block></fo:block><fo:block><fo:block id="idm2146" keep-together.within-column="auto" space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em"><fo:block font-weight="bold" font-size="12pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" keep-with-next.within-column="always">ExampleÂ 15.4.Â Fetching a repository's specific commit on an arbitrary branch</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
          If the revision you're looking for is in the default branch
          of the git repository you don't strictly need to specify
          the branch name in the <fo:inline font-family="monospace">ref</fo:inline> attribute.
        </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
          However, if the revision you're looking for is in a future
          branch for the non-default branch you will need to specify
          the the <fo:inline font-family="monospace">ref</fo:inline> attribute as well.
        </fo:block><fo:block id="idm2152" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">builtins.fetchGit {
  url = "https://github.com/nixos/nix.git";
  rev = "841fcbd04755c7a2865c51c1e2d3b045976b7452";
  ref = "1.11-maintenance";
}</fo:block><fo:block id="idm2153" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" margin-left="0.25in" margin-right="0.25in"><fo:block keep-with-next.within-column="always" font-size="14pt" font-weight="bold" hyphenate="false">Note</fo:block><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
            It is nice to always specify the branch which a revision
            belongs to. Without the branch being specified, the
            fetcher might fail if the default branch changes.
            Additionally, it can be confusing to try a commit from a
            non-default branch and see the fetch fail. If the branch
            is specified the fault is much more obvious.
          </fo:block></fo:block></fo:block></fo:block></fo:block><fo:block><fo:block id="idm2155" keep-together.within-column="auto" space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em"><fo:block font-weight="bold" font-size="12pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" keep-with-next.within-column="always">ExampleÂ 15.5.Â Fetching a repository's specific commit on the default branch</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
          If the revision you're looking for is in the default branch
          of the git repository you may omit the
          <fo:inline font-family="monospace">ref</fo:inline> attribute.
        </fo:block><fo:block id="idm2159" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">builtins.fetchGit {
  url = "https://github.com/nixos/nix.git";
  rev = "841fcbd04755c7a2865c51c1e2d3b045976b7452";
}</fo:block></fo:block></fo:block><fo:block><fo:block id="idm2160" keep-together.within-column="auto" space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em"><fo:block font-weight="bold" font-size="12pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" keep-with-next.within-column="always">ExampleÂ 15.6.Â Fetching a tag</fo:block><fo:block id="idm2162" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">builtins.fetchGit {
  url = "https://github.com/nixos/nix.git";
  ref = "refs/tags/1.9";
}</fo:block></fo:block></fo:block><fo:block><fo:block id="idm2163" keep-together.within-column="auto" space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em"><fo:block font-weight="bold" font-size="12pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" keep-with-next.within-column="always">ExampleÂ 15.7.Â Fetching the latest version of a remote branch</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
          <fo:inline font-family="monospace">builtins.fetchGit</fo:inline> can behave impurely
           fetch the latest version of a remote branch.
        </fo:block><fo:block id="idm2167" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" margin-left="0.25in" margin-right="0.25in"><fo:block keep-with-next.within-column="always" font-size="14pt" font-weight="bold" hyphenate="false">Note</fo:block><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix will refetch the branch in accordance to
        <fo:basic-link internal-destination="conf-tarball-ttl"><fo:inline><fo:inline font-family="monospace">tarball-ttl</fo:inline></fo:inline></fo:basic-link>.</fo:block></fo:block></fo:block><fo:block id="idm2170" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" margin-left="0.25in" margin-right="0.25in"><fo:block keep-with-next.within-column="always" font-size="14pt" font-weight="bold" hyphenate="false">Note</fo:block><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This behavior is disabled in
        <fo:inline font-style="italic">Pure evaluation mode</fo:inline>.</fo:block></fo:block></fo:block><fo:block id="idm2173" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">builtins.fetchGit {
  url = "ssh://git@github.com/nixos/nix.git";
  ref = "master";
}</fo:block></fo:block></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm2174" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.filter</fo:inline>
  <fo:inline font-style="italic" font-family="monospace">f</fo:inline> <fo:inline font-style="italic" font-family="monospace">xs</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Return a list consisting of the elements of
    <fo:inline font-style="italic" font-family="monospace">xs</fo:inline> for which the function
    <fo:inline font-style="italic" font-family="monospace">f</fo:inline> returns
    <fo:inline font-family="monospace">true</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-filterSource" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.filterSource</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">e1</fo:inline> <fo:inline font-style="italic" font-family="monospace">e2</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This function allows you to copy sources into the Nix
      store while filtering certain files.  For instance, suppose that
      you want to use the directory <fo:inline font-family="monospace">source-dir</fo:inline> as
      an input to a Nix expression, e.g.

<fo:block id="idm2192" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
stdenv.mkDerivation {
  ...
  src = ./source-dir;
}
</fo:block>

      However, if <fo:inline font-family="monospace">source-dir</fo:inline> is a Subversion
      working copy, then all those annoying <fo:inline font-family="monospace">.svn</fo:inline>
      subdirectories will also be copied to the store.  Worse, the
      contents of those directories may change a lot, causing lots of
      spurious rebuilds.  With <fo:inline font-family="monospace">filterSource</fo:inline> you
      can filter out the <fo:inline font-family="monospace">.svn</fo:inline> directories:

<fo:block id="idm2197" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
  src = builtins.filterSource
    (path: type: type != "directory" || baseNameOf path != ".svn")
    ./source-dir;
</fo:block>

      </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Thus, the first argument <fo:inline font-style="italic" font-family="monospace">e1</fo:inline>
      must be a predicate function that is called for each regular
      file, directory or symlink in the source tree
      <fo:inline font-style="italic" font-family="monospace">e2</fo:inline>.  If the function returns
      <fo:inline font-family="monospace">true</fo:inline>, the file is copied to the Nix store,
      otherwise it is omitted.  The function is called with two
      arguments.  The first is the full path of the file.  The second
      is a string that identifies the type of the file, which is
      either <fo:inline font-family="monospace">"regular"</fo:inline>,
      <fo:inline font-family="monospace">"directory"</fo:inline>, <fo:inline font-family="monospace">"symlink"</fo:inline> or
      <fo:inline font-family="monospace">"unknown"</fo:inline> (for other kinds of files such as
      device nodes or fifos â but note that those cannot be copied to
      the Nix store, so if the predicate returns
      <fo:inline font-family="monospace">true</fo:inline> for them, the copy will fail). If you
      exclude a directory, the entire corresponding subtree of
      <fo:inline font-style="italic" font-family="monospace">e2</fo:inline> will be excluded.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-foldl-prime" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.foldlâ</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">op</fo:inline> <fo:inline font-style="italic" font-family="monospace">nul</fo:inline> <fo:inline font-style="italic" font-family="monospace">list</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Reduce a list by applying a binary operator, from
    left to right, e.g. <fo:inline font-family="monospace">foldlâ op nul [x0 x1 x2 ...] = op (op
    (op nul x0) x1) x2) ...</fo:inline>. The operator is applied
    strictly, i.e., its arguments are evaluated first. For example,
    <fo:inline font-family="monospace">foldlâ (x: y: x + y) 0 [1 2 3]</fo:inline> evaluates to
    6.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-functionArgs" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.functionArgs</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">f</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    Return a set containing the names of the formal arguments expected
    by the function <fo:inline font-style="italic" font-family="monospace">f</fo:inline>.
    The value of each attribute is a Boolean denoting whether the corresponding
    argument has a default value.  For instance,
    <fo:inline font-family="monospace">functionArgs ({ x, y ? 123}: ...)  =  { x = false; y = true; }</fo:inline>.
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">"Formal argument" here refers to the attributes pattern-matched by
    the function.  Plain lambdas are not included, e.g.
    <fo:inline font-family="monospace">functionArgs (x: ...)  =  { }</fo:inline>.
    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-fromJSON" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.fromJSON</fo:inline> <fo:inline font-style="italic" font-family="monospace">e</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Convert a JSON string to a Nix
    value. For example,

<fo:block id="idm2234" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
builtins.fromJSON ''{"x": [1, 2, 3], "y": null}''
</fo:block>

    returns the value <fo:inline font-family="monospace">{ x = [ 1 2 3 ]; y = null;
    }</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-genList" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.genList</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">generator</fo:inline> <fo:inline font-style="italic" font-family="monospace">length</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Generate list of size
    <fo:inline font-style="italic" font-family="monospace">length</fo:inline>, with each element
    <fo:inline font-style="italic" font-family="monospace">i</fo:inline> equal to the value returned by
    <fo:inline font-style="italic" font-family="monospace">generator</fo:inline> <fo:inline font-family="monospace">i</fo:inline>. For
    example,

<fo:block id="idm2247" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
builtins.genList (x: x * x) 5
</fo:block>

    returns the list <fo:inline font-family="monospace">[ 0 1 4 9 16 ]</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-getAttr" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.getAttr</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">s</fo:inline> <fo:inline font-style="italic" font-family="monospace">set</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">getAttr</fo:inline> returns the attribute
    named <fo:inline font-style="italic" font-family="monospace">s</fo:inline> from
    <fo:inline font-style="italic" font-family="monospace">set</fo:inline>.  Evaluation aborts if the
    attribute doesnât exist.  This is a dynamic version of the
    <fo:inline font-family="monospace">.</fo:inline> operator, since <fo:inline font-style="italic" font-family="monospace">s</fo:inline>
    is an expression rather than an identifier.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-getEnv" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.getEnv</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">s</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">getEnv</fo:inline> returns the value of
    the environment variable <fo:inline font-style="italic" font-family="monospace">s</fo:inline>, or an empty
    string if the variable doesnât exist.  This function should be
    used with care, as it can introduce all sorts of nasty environment
    dependencies in your Nix expression.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">getEnv</fo:inline> is used in Nix Packages to
    locate the file <fo:inline font-family="monospace">~/.nixpkgs/config.nix</fo:inline>, which
    contains user-local settings for Nix Packages.  (That is, it does
    a <fo:inline font-family="monospace">getEnv "HOME"</fo:inline> to locate the userâs home
    directory.)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-hasAttr" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.hasAttr</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">s</fo:inline> <fo:inline font-style="italic" font-family="monospace">set</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">hasAttr</fo:inline> returns
    <fo:inline font-family="monospace">true</fo:inline> if <fo:inline font-style="italic" font-family="monospace">set</fo:inline> has an
    attribute named <fo:inline font-style="italic" font-family="monospace">s</fo:inline>, and
    <fo:inline font-family="monospace">false</fo:inline> otherwise.  This is a dynamic version of
    the <fo:inline font-family="monospace">?</fo:inline>  operator, since
    <fo:inline font-style="italic" font-family="monospace">s</fo:inline> is an expression rather than an
    identifier.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-hashString" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.hashString</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">type</fo:inline> <fo:inline font-style="italic" font-family="monospace">s</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Return a base-16 representation of the
    cryptographic hash of string <fo:inline font-style="italic" font-family="monospace">s</fo:inline>.  The
    hash algorithm specified by <fo:inline font-style="italic" font-family="monospace">type</fo:inline> must
    be one of <fo:inline font-family="monospace">"md5"</fo:inline>, <fo:inline font-family="monospace">"sha1"</fo:inline>,
    <fo:inline font-family="monospace">"sha256"</fo:inline> or <fo:inline font-family="monospace">"sha512"</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-hashFile" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.hashFile</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">type</fo:inline> <fo:inline font-style="italic" font-family="monospace">p</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Return a base-16 representation of the
    cryptographic hash of the file at path <fo:inline font-style="italic" font-family="monospace">p</fo:inline>.  The
    hash algorithm specified by <fo:inline font-style="italic" font-family="monospace">type</fo:inline> must
    be one of <fo:inline font-family="monospace">"md5"</fo:inline>, <fo:inline font-family="monospace">"sha1"</fo:inline>,
    <fo:inline font-family="monospace">"sha256"</fo:inline> or <fo:inline font-family="monospace">"sha512"</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-head" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.head</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">list</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Return the first element of a list; abort
    evaluation if the argument isnât a list or is an empty list.  You
    can test whether a list is empty by comparing it with
    <fo:inline font-family="monospace">[]</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-import" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">import</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">path</fo:inline></fo:inline><fo:inline>, </fo:inline><fo:inline><fo:inline font-family="monospace">builtins.import</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">path</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Load, parse and return the Nix expression in the
    file <fo:inline font-style="italic" font-family="monospace">path</fo:inline>.  If <fo:inline font-style="italic" font-family="monospace">path
    </fo:inline> is a directory, the file <fo:inline font-family="monospace">default.nix
    </fo:inline> in that directory is loaded.  Evaluation aborts if the
    file doesnât exist or contains an incorrect Nix expression.
    <fo:inline font-family="monospace">import</fo:inline> implements Nixâs module system: you
    can put any Nix expression (such as a set or a function) in a
    separate file, and use it from Nix expressions in other
    files.</fo:block><fo:block id="idm2333" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" margin-left="0.25in" margin-right="0.25in"><fo:block keep-with-next.within-column="always" font-size="14pt" font-weight="bold" hyphenate="false">Note</fo:block><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Unlike some languages, <fo:inline font-family="monospace">import</fo:inline> is a regular
    function in Nix. Paths using the angle bracket syntax (e.g., <fo:inline font-family="monospace">
    import</fo:inline> <fo:inline font-style="italic" font-family="monospace">&lt;foo&gt;</fo:inline>) are normal path
    values (see <fo:basic-link internal-destination="ssec-values"><fo:inline>the section called âValuesâ</fo:inline></fo:basic-link>).</fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A Nix expression loaded by <fo:inline font-family="monospace">import</fo:inline> must
    not contain any <fo:inline font-style="italic">free variables</fo:inline> (identifiers
    that are not defined in the Nix expression itself and are not
    built-in).  Therefore, it cannot refer to variables that are in
    scope at the call site.  For instance, if you have a calling
    expression

<fo:block id="idm2342" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
rec {
  x = 123;
  y = import ./foo.nix;
}</fo:block>

    then the following <fo:inline font-family="monospace">foo.nix</fo:inline> will give an
    error:

<fo:block id="idm2344" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
x + 456</fo:block>

    since <fo:inline font-family="monospace">x</fo:inline> is not in scope in
    <fo:inline font-family="monospace">foo.nix</fo:inline>.  If you want <fo:inline font-family="monospace">x</fo:inline>
    to be available in <fo:inline font-family="monospace">foo.nix</fo:inline>, you should pass
    it as a function argument:

<fo:block id="idm2349" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
rec {
  x = 123;
  y = import ./foo.nix x;
}</fo:block>

    and

<fo:block id="idm2350" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
x: x + 456</fo:block>

    (The function argument doesnât have to be called
    <fo:inline font-family="monospace">x</fo:inline> in <fo:inline font-family="monospace">foo.nix</fo:inline>; any name
    would work.)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-intersectAttrs" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.intersectAttrs</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">e1</fo:inline> <fo:inline font-style="italic" font-family="monospace">e2</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Return a set consisting of the attributes in the
    set <fo:inline font-style="italic" font-family="monospace">e2</fo:inline> that also exist in the set
    <fo:inline font-style="italic" font-family="monospace">e1</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-isAttrs" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.isAttrs</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">e</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Return <fo:inline font-family="monospace">true</fo:inline> if
    <fo:inline font-style="italic" font-family="monospace">e</fo:inline> evaluates to a set, and
    <fo:inline font-family="monospace">false</fo:inline> otherwise.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-isList" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.isList</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">e</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Return <fo:inline font-family="monospace">true</fo:inline> if
    <fo:inline font-style="italic" font-family="monospace">e</fo:inline> evaluates to a list, and
    <fo:inline font-family="monospace">false</fo:inline> otherwise.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-isFunction" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.isFunction</fo:inline>
  <fo:inline font-style="italic" font-family="monospace">e</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Return <fo:inline font-family="monospace">true</fo:inline> if
    <fo:inline font-style="italic" font-family="monospace">e</fo:inline> evaluates to a function, and
    <fo:inline font-family="monospace">false</fo:inline> otherwise.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-isString" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.isString</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">e</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Return <fo:inline font-family="monospace">true</fo:inline> if
    <fo:inline font-style="italic" font-family="monospace">e</fo:inline> evaluates to a string, and
    <fo:inline font-family="monospace">false</fo:inline> otherwise.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-isInt" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.isInt</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">e</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Return <fo:inline font-family="monospace">true</fo:inline> if
    <fo:inline font-style="italic" font-family="monospace">e</fo:inline> evaluates to an int, and
    <fo:inline font-family="monospace">false</fo:inline> otherwise.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-isFloat" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.isFloat</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">e</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Return <fo:inline font-family="monospace">true</fo:inline> if
    <fo:inline font-style="italic" font-family="monospace">e</fo:inline> evaluates to a float, and
    <fo:inline font-family="monospace">false</fo:inline> otherwise.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-isBool" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.isBool</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">e</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Return <fo:inline font-family="monospace">true</fo:inline> if
    <fo:inline font-style="italic" font-family="monospace">e</fo:inline> evaluates to a bool, and
    <fo:inline font-family="monospace">false</fo:inline> otherwise.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm2425" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.isPath</fo:inline>
  <fo:inline font-style="italic" font-family="monospace">e</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Return <fo:inline font-family="monospace">true</fo:inline> if
    <fo:inline font-style="italic" font-family="monospace">e</fo:inline> evaluates to a path, and
    <fo:inline font-family="monospace">false</fo:inline> otherwise.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-isNull" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">isNull</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">e</fo:inline></fo:inline><fo:inline>, </fo:inline><fo:inline><fo:inline font-family="monospace">builtins.isNull</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">e</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Return <fo:inline font-family="monospace">true</fo:inline> if
    <fo:inline font-style="italic" font-family="monospace">e</fo:inline> evaluates to <fo:inline font-family="monospace">null</fo:inline>,
    and <fo:inline font-family="monospace">false</fo:inline> otherwise.</fo:block><fo:block id="idm2447" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" margin-left="0.25in" margin-right="0.25in"><fo:block keep-with-next.within-column="always" font-size="14pt" font-weight="bold" hyphenate="false">Warning</fo:block><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This function is <fo:inline font-style="italic">deprecated</fo:inline>;
    just write <fo:inline font-family="monospace">e == null</fo:inline> instead.</fo:block></fo:block></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-length" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.length</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">e</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Return the length of the list
    <fo:inline font-style="italic" font-family="monospace">e</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-lessThan" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.lessThan</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">e1</fo:inline> <fo:inline font-style="italic" font-family="monospace">e2</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Return <fo:inline font-family="monospace">true</fo:inline> if the number
    <fo:inline font-style="italic" font-family="monospace">e1</fo:inline> is less than the number
    <fo:inline font-style="italic" font-family="monospace">e2</fo:inline>, and <fo:inline font-family="monospace">false</fo:inline>
    otherwise.  Evaluation aborts if either
    <fo:inline font-style="italic" font-family="monospace">e1</fo:inline> or <fo:inline font-style="italic" font-family="monospace">e2</fo:inline>
    does not evaluate to a number.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-listToAttrs" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.listToAttrs</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">e</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Construct a set from a list specifying the names
    and values of each attribute.  Each element of the list should be
    a set consisting of a string-valued attribute
    <fo:inline font-family="monospace">name</fo:inline> specifying the name of the attribute, and
    an attribute <fo:inline font-family="monospace">value</fo:inline> specifying its value.
    Example:

<fo:block id="idm2479" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
builtins.listToAttrs
  [ { name = "foo"; value = 123; }
    { name = "bar"; value = 456; }
  ]
</fo:block>

    evaluates to

<fo:block id="idm2480" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
{ foo = 123; bar = 456; }
</fo:block>

    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-map" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">map</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">f</fo:inline> <fo:inline font-style="italic" font-family="monospace">list</fo:inline></fo:inline><fo:inline>, </fo:inline><fo:inline><fo:inline font-family="monospace">builtins.map</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">f</fo:inline> <fo:inline font-style="italic" font-family="monospace">list</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Apply the function <fo:inline font-style="italic" font-family="monospace">f</fo:inline> to
    each element in the list <fo:inline font-style="italic" font-family="monospace">list</fo:inline>.  For
    example,

<fo:block id="idm2494" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
map (x: "foo" + x) [ "bar" "bla" "abc" ]</fo:block>

    evaluates to <fo:inline font-family="monospace">[ "foobar" "foobla" "fooabc"
    ]</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-match" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.match</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">regex</fo:inline> <fo:inline font-style="italic" font-family="monospace">str</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Returns a list if the <fo:basic-link external-destination="url(http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap09.html#tag_09_04)"><fo:inline>extended
    POSIX regular expression</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap09.html#tag_09_04)">http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap09.html#tag_09_04</fo:basic-link>]</fo:inline> <fo:inline font-style="italic" font-family="monospace">regex</fo:inline>
    matches <fo:inline font-style="italic" font-family="monospace">str</fo:inline> precisely, otherwise returns
    <fo:inline font-family="monospace">null</fo:inline>.  Each item in the list is a regex group.

<fo:block id="idm2507" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
builtins.match "ab" "abc"
</fo:block>

Evaluates to <fo:inline font-family="monospace">null</fo:inline>.

<fo:block id="idm2509" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
builtins.match "abc" "abc"
</fo:block>

Evaluates to <fo:inline font-family="monospace">[ ]</fo:inline>.

<fo:block id="idm2511" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
builtins.match "a(b)(c)" "abc"
</fo:block>

Evaluates to <fo:inline font-family="monospace">[ "b" "c" ]</fo:inline>.

<fo:block id="idm2513" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
builtins.match "[[:space:]]+([[:upper:]]+)[[:space:]]+" "  FOO   "
</fo:block>

Evaluates to <fo:inline font-family="monospace">[ "foo" ]</fo:inline>.

    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-mul" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.mul</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">e1</fo:inline> <fo:inline font-style="italic" font-family="monospace">e2</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Return the product of the numbers
    <fo:inline font-style="italic" font-family="monospace">e1</fo:inline> and
    <fo:inline font-style="italic" font-family="monospace">e2</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-parseDrvName" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.parseDrvName</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">s</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Split the string <fo:inline font-style="italic" font-family="monospace">s</fo:inline> into
    a package name and version.  The package name is everything up to
    but not including the first dash followed by a digit, and the
    version is everything following that dash.  The result is returned
    in a set <fo:inline font-family="monospace">{ name, version }</fo:inline>.  Thus,
    <fo:inline font-family="monospace">builtins.parseDrvName "nix-0.12pre12876"</fo:inline>
    returns <fo:inline font-family="monospace">{ name = "nix"; version = "0.12pre12876";
    }</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-path" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline>
      <fo:inline font-family="monospace">builtins.path</fo:inline>
      <fo:inline font-style="italic" font-family="monospace">args</fo:inline>
    </fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
        An enrichment of the built-in path type, based on the attributes
        present in <fo:inline font-style="italic" font-family="monospace">args</fo:inline>. All are optional
        except <fo:inline font-family="monospace">path</fo:inline>:
      </fo:block><fo:list-block id="idm2542" provisional-distance-between-starts="9em * 0.60+1em" provisional-label-separation="1em"><fo:list-item id="idm2543" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline>path</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The underlying path.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm2547" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline>name</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
              The name of the path when added to the store. This can
              used to reference paths that have nix-illegal characters
              in their names, like <fo:inline font-family="monospace">@</fo:inline>.
            </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm2552" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline>filter</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
              A function of the type expected by
              <fo:basic-link internal-destination="builtin-filterSource"><fo:inline>builtins.filterSource</fo:inline></fo:basic-link>,
              with the same semantics.
            </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm2557" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline>recursive</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
              When <fo:inline font-family="monospace">false</fo:inline>, when
              <fo:inline font-family="monospace">path</fo:inline> is added to the store it is with a
              flat hash, rather than a hash of the NAR serialization of
              the file. Thus, <fo:inline font-family="monospace">path</fo:inline> must refer to a
              regular file, not a directory. This allows similar
              behavior to <fo:inline font-family="monospace">fetchurl</fo:inline>. Defaults to
              <fo:inline font-family="monospace">true</fo:inline>.
            </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm2566" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline>sha256</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
              When provided, this is the expected hash of the file at
              the path. Evaluation will fail if the hash is incorrect,
              and providing a hash allows
              <fo:inline font-family="monospace">builtins.path</fo:inline> to be used even when the
              <fo:inline font-family="monospace">pure-eval</fo:inline> nix config option is on.
            </fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-pathExists" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.pathExists</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">path</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Return <fo:inline font-family="monospace">true</fo:inline> if the path
    <fo:inline font-style="italic" font-family="monospace">path</fo:inline> exists at evaluation time, and
    <fo:inline font-family="monospace">false</fo:inline> otherwise.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-placeholder" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.placeholder</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">output</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Return a placeholder string for the specified
    <fo:inline font-style="italic" font-family="monospace">output</fo:inline> that will be substituted by the
    corresponding output path at build time. Typical outputs would be
    <fo:inline font-family="monospace">"out"</fo:inline>, <fo:inline font-family="monospace">"bin"</fo:inline> or
    <fo:inline font-family="monospace">"dev"</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-readDir" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.readDir</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">path</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Return the contents of the directory
    <fo:inline font-style="italic" font-family="monospace">path</fo:inline> as a set mapping directory entries
    to the corresponding file type. For instance, if directory
    <fo:inline font-family="monospace">A</fo:inline> contains a regular file
    <fo:inline font-family="monospace">B</fo:inline> and another directory
    <fo:inline font-family="monospace">C</fo:inline>, then <fo:inline font-family="monospace">builtins.readDir
    ./A</fo:inline> will return the set

<fo:block id="idm2602" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
{ B = "regular"; C = "directory"; }</fo:block>

    The possible values for the file type are
    <fo:inline font-family="monospace">"regular"</fo:inline>, <fo:inline font-family="monospace">"directory"</fo:inline>,
    <fo:inline font-family="monospace">"symlink"</fo:inline> and
    <fo:inline font-family="monospace">"unknown"</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-readFile" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.readFile</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">path</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Return the contents of the file
    <fo:inline font-style="italic" font-family="monospace">path</fo:inline> as a string.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-removeAttrs" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">removeAttrs</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">set</fo:inline> <fo:inline font-style="italic" font-family="monospace">list</fo:inline></fo:inline><fo:inline>, </fo:inline><fo:inline><fo:inline font-family="monospace">builtins.removeAttrs</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">set</fo:inline> <fo:inline font-style="italic" font-family="monospace">list</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Remove the attributes listed in
    <fo:inline font-style="italic" font-family="monospace">list</fo:inline> from
    <fo:inline font-style="italic" font-family="monospace">set</fo:inline>.  The attributes donât have to
    exist in <fo:inline font-style="italic" font-family="monospace">set</fo:inline>. For instance,

<fo:block id="idm2628" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
removeAttrs { x = 1; y = 2; z = 3; } [ "a" "x" "z" ]</fo:block>

    evaluates to <fo:inline font-family="monospace">{ y = 2; }</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-replaceStrings" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.replaceStrings</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">from</fo:inline> <fo:inline font-style="italic" font-family="monospace">to</fo:inline> <fo:inline font-style="italic" font-family="monospace">s</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Given string <fo:inline font-style="italic" font-family="monospace">s</fo:inline>, replace
    every occurrence of the strings in <fo:inline font-style="italic" font-family="monospace">from</fo:inline>
    with the corresponding string in
    <fo:inline font-style="italic" font-family="monospace">to</fo:inline>. For example,

<fo:block id="idm2641" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
builtins.replaceStrings ["oo" "a"] ["a" "i"] "foobar"
</fo:block>

    evaluates to <fo:inline font-family="monospace">"fabir"</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-seq" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.seq</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">e1</fo:inline> <fo:inline font-style="italic" font-family="monospace">e2</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Evaluate <fo:inline font-style="italic" font-family="monospace">e1</fo:inline>, then
    evaluate and return <fo:inline font-style="italic" font-family="monospace">e2</fo:inline>. This ensures
    that a computation is strict in the value of
    <fo:inline font-style="italic" font-family="monospace">e1</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-sort" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.sort</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">comparator</fo:inline> <fo:inline font-style="italic" font-family="monospace">list</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Return <fo:inline font-style="italic" font-family="monospace">list</fo:inline> in sorted
    order. It repeatedly calls the function
    <fo:inline font-style="italic" font-family="monospace">comparator</fo:inline> with two elements. The
    comparator should return <fo:inline font-family="monospace">true</fo:inline> if the first
    element is less than the second, and <fo:inline font-family="monospace">false</fo:inline>
    otherwise. For example,

<fo:block id="idm2664" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
builtins.sort builtins.lessThan [ 483 249 526 147 42 77 ]
</fo:block>

    produces the list <fo:inline font-family="monospace">[ 42 77 147 249 483 526
    ]</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This is a stable sort: it preserves the relative order of
    elements deemed equal by the comparator.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-split" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.split</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">regex</fo:inline> <fo:inline font-style="italic" font-family="monospace">str</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Returns a list composed of non matched strings interleaved
    with the lists of the <fo:basic-link external-destination="url(http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap09.html#tag_09_04)"><fo:inline>extended
    POSIX regular expression</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap09.html#tag_09_04)">http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap09.html#tag_09_04</fo:basic-link>]</fo:inline> <fo:inline font-style="italic" font-family="monospace">regex</fo:inline> matches
    of <fo:inline font-style="italic" font-family="monospace">str</fo:inline>. Each item in the lists of matched
    sequences is a regex group.

<fo:block id="idm2677" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
builtins.split "(a)b" "abc"
</fo:block>

Evaluates to <fo:inline font-family="monospace">[ "" [ "a" ] "c" ]</fo:inline>.

<fo:block id="idm2679" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
builtins.split "([ac])" "abc"
</fo:block>

Evaluates to <fo:inline font-family="monospace">[ "" [ "a" ] "b" [ "c" ] "" ]</fo:inline>.

<fo:block id="idm2681" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
builtins.split "(a)|(c)" "abc"
</fo:block>

Evaluates to <fo:inline font-family="monospace">[ "" [ "a" null ] "b" [ null "c" ] "" ]</fo:inline>.

<fo:block id="idm2683" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
builtins.split "([[:upper:]]+)" "  FOO   "
</fo:block>

Evaluates to <fo:inline font-family="monospace">[ "  " [ "FOO" ] "   " ]</fo:inline>.

    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-splitVersion" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.splitVersion</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">s</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Split a string representing a version into its
    components, by the same version splitting logic underlying the
    version comparison in <fo:basic-link internal-destination="ssec-version-comparisons"><fo:inline>
    <fo:inline font-weight="bold">nix-env -u</fo:inline></fo:inline></fo:basic-link>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-stringLength" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.stringLength</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">e</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Return the length of the string
    <fo:inline font-style="italic" font-family="monospace">e</fo:inline>.  If <fo:inline font-style="italic" font-family="monospace">e</fo:inline> is
    not a string, evaluation is aborted.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-sub" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.sub</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">e1</fo:inline> <fo:inline font-style="italic" font-family="monospace">e2</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Return the difference between the numbers
    <fo:inline font-style="italic" font-family="monospace">e1</fo:inline> and
    <fo:inline font-style="italic" font-family="monospace">e2</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-substring" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.substring</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">start</fo:inline> <fo:inline font-style="italic" font-family="monospace">len</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">s</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Return the substring of
    <fo:inline font-style="italic" font-family="monospace">s</fo:inline> from character position
    <fo:inline font-style="italic" font-family="monospace">start</fo:inline> (zero-based) up to but not
    including <fo:inline font-style="italic" font-family="monospace">start + len</fo:inline>.  If
    <fo:inline font-style="italic" font-family="monospace">start</fo:inline> is greater than the length of the
    string, an empty string is returned, and if <fo:inline font-style="italic" font-family="monospace">start +
    len</fo:inline> lies beyond the end of the string, only the
    substring up to the end of the string is returned.
    <fo:inline font-style="italic" font-family="monospace">start</fo:inline> must be
    non-negative. For example,

<fo:block id="idm2724" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
builtins.substring 0 3 "nixos"
</fo:block>

   evaluates to <fo:inline font-family="monospace">"nix"</fo:inline>.
   </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-tail" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.tail</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">list</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Return the second to last elements of a list;
    abort evaluation if the argument isnât a list or is an empty
    list.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-throw" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">throw</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">s</fo:inline></fo:inline><fo:inline>, </fo:inline><fo:inline><fo:inline font-family="monospace">builtins.throw</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">s</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Throw an error message
    <fo:inline font-style="italic" font-family="monospace">s</fo:inline>.  This usually aborts Nix expression
    evaluation, but in <fo:inline font-weight="bold">nix-env -qa</fo:inline> and other
    commands that try to evaluate a set of derivations to get
    information about those derivations, a derivation that throws an
    error is silently skipped (which is not the case for
    <fo:inline font-family="monospace">abort</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-toFile" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.toFile</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">name</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">s</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Store the string <fo:inline font-style="italic" font-family="monospace">s</fo:inline> in a
    file in the Nix store and return its path.  The file has suffix
    <fo:inline font-style="italic" font-family="monospace">name</fo:inline>.  This file can be used as an
    input to derivations.  One application is to write builders
    âinlineâ.  For instance, the following Nix expression combines
    <fo:basic-link internal-destination="ex-hello-nix"><fo:inline>ExampleÂ 14.1, âNix expression for GNU Hello
(<fo:inline font-family="monospace">default.nix</fo:inline>)â</fo:inline></fo:basic-link> and <fo:basic-link internal-destination="ex-hello-builder"><fo:inline>ExampleÂ 14.2, âBuild script for GNU Hello
(<fo:inline font-family="monospace">builder.sh</fo:inline>)â</fo:inline></fo:basic-link> into one file:

<fo:block id="idm2755" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
{ stdenv, fetchurl, perl }:

stdenv.mkDerivation {
  name = "hello-2.1.1";

  builder = builtins.toFile "builder.sh" "
    source $stdenv/setup

    PATH=$perl/bin:$PATH

    tar xvfz $src
    cd hello-*
    ./configure --prefix=$out
    make
    make install
  ";

  src = fetchurl {
    url = http://ftp.nluug.nl/pub/gnu/hello/hello-2.1.1.tar.gz;
    sha256 = "1md7jsfd8pa45z73bz1kszpp01yw6x5ljkjk2hx7wl800any6465";
  };
  inherit perl;
}</fo:block>

    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">It is even possible for one file to refer to another, e.g.,

<fo:block id="idm2757" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
  builder = let
    configFile = builtins.toFile "foo.conf" "
      # This is some dummy configuration file.
      <fo:inline font-style="italic" font-family="monospace">...</fo:inline>
    ";
  in builtins.toFile "builder.sh" "
    source $stdenv/setup
    <fo:inline font-style="italic" font-family="monospace">...</fo:inline>
    cp ${configFile} $out/etc/foo.conf
  ";</fo:block>

    Note that <fo:inline font-family="monospace">${configFile}</fo:inline> is an antiquotation
    (see <fo:basic-link internal-destination="ssec-values"><fo:inline>the section called âValuesâ</fo:inline></fo:basic-link>), so the result of the
    expression <fo:inline font-family="monospace">configFile</fo:inline> (i.e., a path like
    <fo:inline font-family="monospace">/nix/store/m7p7jfny445k...-foo.conf</fo:inline>) will be
    spliced into the resulting string.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">It is however <fo:inline font-style="italic">not</fo:inline> allowed to have files
    mutually referring to each other, like so:

<fo:block id="idm2766" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
let
  foo = builtins.toFile "foo" "...${bar}...";
  bar = builtins.toFile "bar" "...${foo}...";
in foo</fo:block>

    This is not allowed because it would cause a cyclic dependency in
    the computation of the cryptographic hashes for
    <fo:inline font-family="monospace">foo</fo:inline> and <fo:inline font-family="monospace">bar</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">It is also not possible to reference the result of a derivation.
    If you are using Nixpkgs, the <fo:inline font-family="monospace">writeTextFile</fo:inline> function is able to
    do that.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-toJSON" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.toJSON</fo:inline> <fo:inline font-style="italic" font-family="monospace">e</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Return a string containing a JSON representation
    of <fo:inline font-style="italic" font-family="monospace">e</fo:inline>.  Strings, integers, floats, booleans,
    nulls and lists are mapped to their JSON equivalents.  Sets
    (except derivations) are represented as objects.  Derivations are
    translated to a JSON string containing the derivationâs output
    path.  Paths are copied to the store and represented as a JSON
    string of the resulting store path.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-toPath" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.toPath</fo:inline> <fo:inline font-style="italic" font-family="monospace">s</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"> DEPRECATED. Use <fo:inline font-family="monospace">/. + "/path"</fo:inline>
    to convert a string into an absolute path. For relative paths,
    use <fo:inline font-family="monospace">./. + "/path"</fo:inline>.
    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-toString" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">toString</fo:inline> <fo:inline font-style="italic" font-family="monospace">e</fo:inline></fo:inline><fo:inline>, </fo:inline><fo:inline><fo:inline font-family="monospace">builtins.toString</fo:inline> <fo:inline font-style="italic" font-family="monospace">e</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Convert the expression
    <fo:inline font-style="italic" font-family="monospace">e</fo:inline> to a string.
    <fo:inline font-style="italic" font-family="monospace">e</fo:inline> can be:</fo:block><fo:list-block id="idm2797" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm2798" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A string (in which case the string is returned unmodified).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm2800" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A path (e.g., <fo:inline font-family="monospace">toString /foo/bar</fo:inline> yields <fo:inline font-family="monospace">"/foo/bar"</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm2804" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A set containing <fo:inline font-family="monospace">{ __toString = self: ...; }</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm2807" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">An integer.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm2809" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A list, in which case the string representations of its elements are joined with spaces.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm2811" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A Boolean (<fo:inline font-family="monospace">false</fo:inline> yields <fo:inline font-family="monospace">""</fo:inline>, <fo:inline font-family="monospace">true</fo:inline> yields <fo:inline font-family="monospace">"1"</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm2817" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">null</fo:inline>, which yields the empty string.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-toXML" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.toXML</fo:inline> <fo:inline font-style="italic" font-family="monospace">e</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Return a string containing an XML representation
    of <fo:inline font-style="italic" font-family="monospace">e</fo:inline>.  The main application for
    <fo:inline font-family="monospace">toXML</fo:inline> is to communicate information with the
    builder in a more structured format than plain environment
    variables.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:basic-link internal-destination="ex-toxml"><fo:inline>ExampleÂ 15.8, âPassing information to a builder
    using <fo:inline font-family="monospace">toXML</fo:inline>â</fo:inline></fo:basic-link> shows an example where this is
    the case.  The builder is supposed to generate the configuration
    file for a <fo:basic-link external-destination="url(http://jetty.mortbay.org/)"><fo:inline>Jetty
    servlet container</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(http://jetty.mortbay.org/)">http://jetty.mortbay.org/</fo:basic-link>]</fo:inline>.  A servlet container contains a number
    of servlets (<fo:inline font-family="monospace">*.war</fo:inline> files) each exported under
    a specific URI prefix.  So the servlet configuration is a list of
    sets containing the <fo:inline font-family="monospace">path</fo:inline> and
    <fo:inline font-family="monospace">war</fo:inline> of the servlet (<fo:basic-link internal-destination="ex-toxml-co-servlets"><fo:inline><fo:external-graphic content-width="7pt" width="7pt" src="url(images/callouts/3.svg)"/></fo:inline></fo:basic-link>).  This kind of information is
    difficult to communicate with the normal method of passing
    information through an environment variable, which just
    concatenates everything together into a string (which might just
    work in this case, but wouldnât work if fields are optional or
    contain lists themselves).  Instead the Nix expression is
    converted to an XML representation with
    <fo:inline font-family="monospace">toXML</fo:inline>, which is unambiguous and can easily be
    processed with the appropriate tools.  For instance, in the
    example an XSLT stylesheet (<fo:basic-link internal-destination="ex-toxml-co-stylesheet"><fo:inline><fo:external-graphic content-width="7pt" width="7pt" src="url(images/callouts/2.svg)"/></fo:inline></fo:basic-link>) is applied to it (<fo:basic-link internal-destination="ex-toxml-co-apply"><fo:inline><fo:external-graphic content-width="7pt" width="7pt" src="url(images/callouts/1.svg)"/></fo:inline></fo:basic-link>) to
    generate the XML configuration file for the Jetty server.  The XML
    representation produced from <fo:basic-link internal-destination="ex-toxml-co-servlets"><fo:inline><fo:external-graphic content-width="7pt" width="7pt" src="url(images/callouts/3.svg)"/></fo:inline></fo:basic-link> by <fo:inline font-family="monospace">toXML</fo:inline> is shown in <fo:basic-link internal-destination="ex-toxml-result"><fo:inline>ExampleÂ 15.9, âXML representation produced by
    <fo:inline font-family="monospace">toXML</fo:inline>â</fo:inline></fo:basic-link>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Note that <fo:basic-link internal-destination="ex-toxml"><fo:inline>ExampleÂ 15.8, âPassing information to a builder
    using <fo:inline font-family="monospace">toXML</fo:inline>â</fo:inline></fo:basic-link> uses the <fo:inline font-family="monospace"><fo:basic-link internal-destination="builtin-toFile">toFile</fo:basic-link></fo:inline> built-in to write the
    builder and the stylesheet âinlineâ in the Nix expression.  The
    path of the stylesheet is spliced into the builder at
    <fo:inline font-family="monospace">xsltproc ${stylesheet}
    <fo:inline font-style="italic" font-family="monospace">...</fo:inline></fo:inline>.</fo:block><fo:block><fo:block id="ex-toxml" keep-together.within-column="auto" space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em"><fo:block font-weight="bold" font-size="12pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" keep-with-next.within-column="always">ExampleÂ 15.8.Â Passing information to a builder
    using <fo:inline font-family="monospace">toXML</fo:inline></fo:block><fo:block id="idm2849" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
{ stdenv, fetchurl, libxslt, jira, uberwiki }:

stdenv.mkDerivation (rec {
  name = "web-server";

  buildInputs = [ libxslt ];

  builder = builtins.toFile "builder.sh" "
    source $stdenv/setup
    mkdir $out
    echo "$servlets" | xsltproc ${stylesheet} - &gt; $out/server-conf.xml <fo:inline id="ex-toxml-co-apply"><fo:external-graphic content-width="7pt" width="7pt" src="url(images/callouts/1.svg)"/></fo:inline> 
  ";

  stylesheet = builtins.toFile "stylesheet.xsl" <fo:inline id="ex-toxml-co-stylesheet"><fo:external-graphic content-width="7pt" width="7pt" src="url(images/callouts/2.svg)"/></fo:inline> 
   "&lt;?xml version='1.0' encoding='UTF-8'?&gt;
    &lt;xsl:stylesheet xmlns:xsl='http://www.w3.org/1999/XSL/Transform' version='1.0'&gt;
      &lt;xsl:template match='/'&gt;
        &lt;Configure&gt;
          &lt;xsl:for-each select='/expr/list/attrs'&gt;
            &lt;Call name='addWebApplication'&gt;
              &lt;Arg&gt;&lt;xsl:value-of select=\"attr[@name = 'path']/string/@value\" /&gt;&lt;/Arg&gt;
              &lt;Arg&gt;&lt;xsl:value-of select=\"attr[@name = 'war']/path/@value\" /&gt;&lt;/Arg&gt;
            &lt;/Call&gt;
          &lt;/xsl:for-each&gt;
        &lt;/Configure&gt;
      &lt;/xsl:template&gt;
    &lt;/xsl:stylesheet&gt;
  ";

  servlets = builtins.toXML [ <fo:inline id="ex-toxml-co-servlets"><fo:external-graphic content-width="7pt" width="7pt" src="url(images/callouts/3.svg)"/></fo:inline> 
    { path = "/bugtracker"; war = jira + "/lib/atlassian-jira.war"; }
    { path = "/wiki"; war = uberwiki + "/uberwiki.war"; }
  ];
})</fo:block></fo:block></fo:block><fo:block><fo:block id="ex-toxml-result" keep-together.within-column="auto" space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em"><fo:block font-weight="bold" font-size="12pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" keep-with-next.within-column="always">ExampleÂ 15.9.Â XML representation produced by
    <fo:inline font-family="monospace">toXML</fo:inline></fo:block><fo:block id="idm2856" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">&lt;?xml version='1.0' encoding='utf-8'?&gt;
&lt;expr&gt;
  &lt;list&gt;
    &lt;attrs&gt;
      &lt;attr name="path"&gt;
        &lt;string value="/bugtracker" /&gt;
      &lt;/attr&gt;
      &lt;attr name="war"&gt;
        &lt;path value="/nix/store/d1jh9pasa7k2...-jira/lib/atlassian-jira.war" /&gt;
      &lt;/attr&gt;
    &lt;/attrs&gt;
    &lt;attrs&gt;
      &lt;attr name="path"&gt;
        &lt;string value="/wiki" /&gt;
      &lt;/attr&gt;
      &lt;attr name="war"&gt;
        &lt;path value="/nix/store/y6423b1yi4sx...-uberwiki/uberwiki.war" /&gt;
      &lt;/attr&gt;
    &lt;/attrs&gt;
  &lt;/list&gt;
&lt;/expr&gt;</fo:block></fo:block></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-trace" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.trace</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">e1</fo:inline> <fo:inline font-style="italic" font-family="monospace">e2</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Evaluate <fo:inline font-style="italic" font-family="monospace">e1</fo:inline> and print its
    abstract syntax representation on standard error.  Then return
    <fo:inline font-style="italic" font-family="monospace">e2</fo:inline>.  This function is useful for
    debugging.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-tryEval" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.tryEval</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">e</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Try to shallowly evaluate <fo:inline font-style="italic" font-family="monospace">e</fo:inline>.
    Return a set containing the attributes <fo:inline font-family="monospace">success</fo:inline>
    (<fo:inline font-family="monospace">true</fo:inline> if <fo:inline font-style="italic" font-family="monospace">e</fo:inline> evaluated
    successfully, <fo:inline font-family="monospace">false</fo:inline> if an error was thrown) and
    <fo:inline font-family="monospace">value</fo:inline>, equalling <fo:inline font-style="italic" font-family="monospace">e</fo:inline>
    if successful and <fo:inline font-family="monospace">false</fo:inline> otherwise. Note that this
    doesn't evaluate <fo:inline font-style="italic" font-family="monospace">e</fo:inline> deeply, so
    <fo:inline font-family="monospace">let e = { x = throw ""; }; in (builtins.tryEval e).success
    </fo:inline> will be <fo:inline font-family="monospace">true</fo:inline>. Using <fo:inline font-family="monospace">builtins.deepSeq
    </fo:inline> one can get the expected result: <fo:inline font-family="monospace">let e = { x = throw "";
    }; in (builtins.tryEval (builtins.deepSeq e e)).success</fo:inline> will be
    <fo:inline font-family="monospace">false</fo:inline>.
    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="builtin-typeOf" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builtins.typeOf</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">e</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Return a string representing the type of the value
    <fo:inline font-style="italic" font-family="monospace">e</fo:inline>, namely <fo:inline font-family="monospace">"int"</fo:inline>,
    <fo:inline font-family="monospace">"bool"</fo:inline>, <fo:inline font-family="monospace">"string"</fo:inline>,
    <fo:inline font-family="monospace">"path"</fo:inline>, <fo:inline font-family="monospace">"null"</fo:inline>,
    <fo:inline font-family="monospace">"set"</fo:inline>, <fo:inline font-family="monospace">"list"</fo:inline>,
    <fo:inline font-family="monospace">"lambda"</fo:inline> or
    <fo:inline font-family="monospace">"float"</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="true" master-reference="titlepage" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="blank-body"><fo:block text-align="center"/></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body"><fo:block id="part-advanced-topics"><fo:block><fo:block><fo:block text-align="center" font-size="24.8832pt" space-before="18.6624pt" font-weight="bold" font-family="sans-serif,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always" hyphenate="false">PartÂ V.Â Advanced Topics</fo:block></fo:block></fo:block></fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence hyphenate="true" master-reference="lot" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Advanced Topics</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Advanced Topics</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="blank-body"><fo:block text-align="center"/></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block id="toc...part-advanced-topics" space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em"><fo:block><fo:block><fo:block space-before.minimum="1em" space-before.optimum="1.5em" space-before.maximum="2em" space-after="0.5em" start-indent="0pt" font-size="17.28pt" font-weight="bold" font-family="sans-serif,Symbol,ZapfDingbats">Table of Contents</fo:block></fo:block></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="chap-distributed-builds">16. Remote Builds</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="chap-distributed-builds"><fo:page-number-citation ref-id="chap-distributed-builds"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="chap-tuning-cores-and-jobs">17. Tuning Cores and Jobs</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="chap-tuning-cores-and-jobs"><fo:page-number-citation ref-id="chap-tuning-cores-and-jobs"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="chap-diff-hook">18. Verifying Build Reproducibility with <fo:inline font-family="monospace"><fo:basic-link internal-destination="conf-diff-hook">diff-hook</fo:basic-link></fo:inline></fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="chap-diff-hook"><fo:page-number-citation ref-id="chap-diff-hook"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.part-advanced-topics.chap-diff-hook" margin-left="24pt"><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="idm3074">
    Spot-Checking Build Determinism
  </fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="idm3074"><fo:page-number-citation ref-id="idm3074"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="idm3103">
    Automatic and Optionally Enforced Determinism Verification
  </fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="idm3103"><fo:page-number-citation ref-id="idm3103"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="chap-post-build-hook">19. Using the <fo:inline font-family="monospace">post-build-hook</fo:inline></fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="chap-post-build-hook"><fo:page-number-citation ref-id="chap-post-build-hook"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.part-advanced-topics.chap-post-build-hook" margin-left="24pt"><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="chap-post-build-hook-caveats">Implementation Caveats</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="chap-post-build-hook-caveats"><fo:page-number-citation ref-id="chap-post-build-hook-caveats"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="idm3127">Prerequisites</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="idm3127"><fo:page-number-citation ref-id="idm3127"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="idm3132">Set up a Signing Key</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="idm3132"><fo:page-number-citation ref-id="idm3132"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="idm3143">Implementing the build hook</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="idm3143"><fo:page-number-citation ref-id="idm3143"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="idm3158">Updating Nix Configuration</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="idm3158"><fo:page-number-citation ref-id="idm3158"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="idm3165">Testing</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="idm3165"><fo:page-number-citation ref-id="idm3165"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="idm3173">Conclusion</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="idm3173"><fo:page-number-citation ref-id="idm3173"/></fo:basic-link></fo:inline></fo:block></fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="true" master-reference="body" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Remote Builds</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Remote Builds</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="blank-body"><fo:block text-align="center"/></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block id="chap-distributed-builds"><fo:block font-family="sans-serif,Symbol,ZapfDingbats"><fo:block margin-left="0pt"><fo:block font-size="24.8832pt" font-weight="bold"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0pt" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">ChapterÂ 16.Â Remote Builds</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix supports remote builds, where a local Nix installation can
forward Nix builds to other machines.  This allows multiple builds to
be performed in parallel and allows Nix to perform multi-platform
builds in a semi-transparent way.  For instance, if you perform a
build for a <fo:inline font-family="monospace">x86_64-darwin</fo:inline> on an
<fo:inline font-family="monospace">i686-linux</fo:inline> machine, Nix can automatically forward
the build to a <fo:inline font-family="monospace">x86_64-darwin</fo:inline> machine, if
available.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To forward a build to a remote machine, itâs required that the
remote machine is accessible via SSH and that it has Nix
installed. You can test whether connecting to the remote Nix instance
works, e.g.

<fo:block id="idm2911" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix ping-store --store ssh://mac
</fo:block>

will try to connect to the machine named <fo:inline font-family="monospace">mac</fo:inline>. It is
possible to specify an SSH identity file as part of the remote store
URI, e.g.

<fo:block id="idm2913" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix ping-store --store ssh://mac?ssh-key=/home/alice/my-key
</fo:block>

Since builds should be non-interactive, the key should not have a
passphrase. Alternatively, you can load identities ahead of time into
<fo:inline font-weight="bold">ssh-agent</fo:inline> or <fo:inline font-weight="bold">gpg-agent</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If you get the error

<fo:block id="idm2917" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
bash: nix-store: command not found
error: cannot connect to 'mac'
</fo:block>

then you need to ensure that the <fo:inline font-family="monospace">PATH</fo:inline> of
non-interactive login shells contains Nix.</fo:block><fo:block id="idm2919" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" margin-left="0.25in" margin-right="0.25in"><fo:block keep-with-next.within-column="always" font-size="14pt" font-weight="bold" hyphenate="false">Warning</fo:block><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If you are building via the Nix daemon, it is the Nix
daemon user account (that is, <fo:inline font-family="monospace">root</fo:inline>) that should
have SSH access to the remote machine. If you canât or donât want to
configure <fo:inline font-family="monospace">root</fo:inline> to be able to access to remote
machine, you can use a private Nix store instead by passing
e.g. <fo:inline font-family="monospace">--store ~/my-nix</fo:inline>.</fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The list of remote machines can be specified on the command line
or in the Nix configuration file. The former is convenient for
testing. For example, the following command allows you to build a
derivation for <fo:inline font-family="monospace">x86_64-darwin</fo:inline> on a Linux machine:

<fo:block id="idm2926" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ uname
Linux

$ nix build \
  '(with import &lt;nixpkgs&gt; { system = "x86_64-darwin"; }; runCommand "foo" {} "uname &gt; $out")' \
  --builders 'ssh://mac x86_64-darwin'
[1/0/1 built, 0.0 MiB DL] building foo on ssh://mac

$ cat ./result
Darwin
</fo:block>

It is possible to specify multiple builders separated by a semicolon
or a newline, e.g.

<fo:block id="idm2927" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
  --builders 'ssh://mac x86_64-darwin ; ssh://beastie x86_64-freebsd'
</fo:block>
</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Each machine specification consists of the following elements,
separated by spaces. Only the first element is required.
To leave a field at its default, set it to <fo:inline font-family="monospace">-</fo:inline>.

<fo:list-block id="idm2930" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-distance-between-starts="1.2em" provisional-label-separation="0.2em"><fo:list-item id="idm2931" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>1.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The URI of the remote store in the format
  <fo:inline font-family="monospace">ssh://[<fo:inline font-style="italic" font-family="monospace">username</fo:inline>@]<fo:inline font-style="italic" font-family="monospace">hostname</fo:inline></fo:inline>,
  e.g. <fo:inline font-family="monospace">ssh://nix@mac</fo:inline> or
  <fo:inline font-family="monospace">ssh://mac</fo:inline>. For backward compatibility,
  <fo:inline font-family="monospace">ssh://</fo:inline> may be omitted. The hostname may be an
  alias defined in your
  <fo:inline font-family="monospace">~/.ssh/config</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm2940" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>2.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A comma-separated list of Nix platform type
  identifiers, such as <fo:inline font-family="monospace">x86_64-darwin</fo:inline>.  It is
  possible for a machine to support multiple platform types, e.g.,
  <fo:inline font-family="monospace">i686-linux,x86_64-linux</fo:inline>. If omitted, this
  defaults to the local platform type.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm2944" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>3.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The SSH identity file to be used to log in to the
  remote machine. If omitted, SSH will use its regular
  identities.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm2946" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>4.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The maximum number of builds that Nix will execute
  in parallel on the machine.  Typically this should be equal to the
  number of CPU cores.  For instance, the machine
  <fo:inline font-family="monospace">itchy</fo:inline> in the example will execute up to 8 builds
  in parallel.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm2949" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>5.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The âspeed factorâ, indicating the relative speed of
  the machine.  If there are multiple machines of the right type, Nix
  will prefer the fastest, taking load into account.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm2951" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>6.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A comma-separated list of <fo:inline font-style="italic">supported
  features</fo:inline>.  If a derivation has the
  <fo:inline font-family="monospace">requiredSystemFeatures</fo:inline> attribute, then Nix will
  only perform the derivation on a machine that has the specified
  features.  For instance, the attribute

<fo:block id="idm2955" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
requiredSystemFeatures = [ "kvm" ];
</fo:block>

  will cause the build to be performed on a machine that has the
  <fo:inline font-family="monospace">kvm</fo:inline> feature.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm2957" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>7.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A comma-separated list of <fo:inline font-style="italic">mandatory
  features</fo:inline>.  A machine will only be used to build a
  derivation if all of the machineâs mandatory features appear in the
  derivationâs <fo:inline font-family="monospace">requiredSystemFeatures</fo:inline>
  attribute..</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block>

For example, the machine specification

<fo:block id="idm2961" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
nix@scratchy.labs.cs.uu.nl  i686-linux      /home/nix/.ssh/id_scratchy_auto        8 1 kvm
nix@itchy.labs.cs.uu.nl     i686-linux      /home/nix/.ssh/id_scratchy_auto        8 2
nix@poochie.labs.cs.uu.nl   i686-linux      /home/nix/.ssh/id_scratchy_auto        1 2 kvm benchmark
</fo:block>

specifies several machines that can perform
<fo:inline font-family="monospace">i686-linux</fo:inline> builds. However,
<fo:inline font-family="monospace">poochie</fo:inline> will only do builds that have the attribute

<fo:block id="idm2964" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
requiredSystemFeatures = [ "benchmark" ];
</fo:block>

or

<fo:block id="idm2965" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
requiredSystemFeatures = [ "benchmark" "kvm" ];
</fo:block>

<fo:inline font-family="monospace">itchy</fo:inline> cannot do builds that require
<fo:inline font-family="monospace">kvm</fo:inline>, but <fo:inline font-family="monospace">scratchy</fo:inline> does support
such builds. For regular builds, <fo:inline font-family="monospace">itchy</fo:inline> will be
preferred over <fo:inline font-family="monospace">scratchy</fo:inline> because it has a higher
speed factor.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Remote builders can also be configured in
<fo:inline font-family="monospace">nix.conf</fo:inline>, e.g.

<fo:block id="idm2973" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
builders = ssh://mac x86_64-darwin ; ssh://beastie x86_64-freebsd
</fo:block>

Finally, remote builders can be configured in a separate configuration
file included in <fo:inline font-family="monospace">builders</fo:inline> via the syntax
<fo:inline font-family="monospace">@<fo:inline font-style="italic" font-family="monospace">file</fo:inline></fo:inline>. For example,

<fo:block id="idm2977" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
builders = @/etc/nix/machines
</fo:block>

causes the list of machines in <fo:inline font-family="monospace">/etc/nix/machines</fo:inline>
to be included. (This is the default.)</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If you want the builders to use caches, you likely want to set
the option <fo:basic-link internal-destination="conf-builders-use-substitutes"><fo:inline><fo:inline font-family="monospace">builders-use-substitutes</fo:inline></fo:inline></fo:basic-link>
in your local <fo:inline font-family="monospace">nix.conf</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To build only on remote builders and disable building on the local machine,
you can use the option <fo:inline font-family="monospace">--max-jobs 0</fo:inline>.</fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="true" master-reference="body" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Tuning Cores and Jobs</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Tuning Cores and Jobs</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="blank-body"><fo:block text-align="center"/></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block id="chap-tuning-cores-and-jobs"><fo:block font-family="sans-serif,Symbol,ZapfDingbats"><fo:block margin-left="0pt"><fo:block font-size="24.8832pt" font-weight="bold"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0pt" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">ChapterÂ 17.Â Tuning Cores and Jobs</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix has two relevant settings with regards to how your CPU cores
will be utilized: <fo:basic-link internal-destination="conf-cores"><fo:inline><fo:inline font-family="monospace">cores</fo:inline></fo:inline></fo:basic-link> and
<fo:basic-link internal-destination="conf-max-jobs"><fo:inline><fo:inline font-family="monospace">max-jobs</fo:inline></fo:inline></fo:basic-link>. This chapter will talk about what
they are, how they interact, and their configuration trade-offs.</fo:block><fo:list-block id="idm2990" provisional-distance-between-starts="8em * 0.60+1em" provisional-label-separation="1em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em"><fo:list-item id="idm2991" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:basic-link internal-destination="conf-max-jobs"><fo:inline><fo:inline font-family="monospace">max-jobs</fo:inline></fo:inline></fo:basic-link></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      Dictates how many separate derivations will be built at the same
      time. If you set this to zero, the local machine will do no
      builds. Nix will still substitute from binary caches, and build
      remotely if remote builders are configured.
    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm2996" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:basic-link internal-destination="conf-cores"><fo:inline><fo:inline font-family="monospace">cores</fo:inline></fo:inline></fo:basic-link></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      Suggests how many cores each derivation should use. Similar to
      <fo:inline font-weight="bold">make -j</fo:inline>.
    </fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The <fo:basic-link internal-destination="conf-cores"><fo:inline><fo:inline font-family="monospace">cores</fo:inline></fo:inline></fo:basic-link> setting determines the value of
<fo:inline font-family="monospace">NIX_BUILD_CORES</fo:inline>. <fo:inline font-family="monospace">NIX_BUILD_CORES</fo:inline> is equal
to <fo:basic-link internal-destination="conf-cores"><fo:inline><fo:inline font-family="monospace">cores</fo:inline></fo:inline></fo:basic-link>, unless <fo:basic-link internal-destination="conf-cores"><fo:inline><fo:inline font-family="monospace">cores</fo:inline></fo:inline></fo:basic-link>
equals <fo:inline font-family="monospace">0</fo:inline>, in which case <fo:inline font-family="monospace">NIX_BUILD_CORES</fo:inline>
will be the total number of cores in the system.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The total number of consumed cores is a simple multiplication,
<fo:basic-link internal-destination="conf-cores"><fo:inline><fo:inline font-family="monospace">cores</fo:inline></fo:inline></fo:basic-link> * <fo:inline font-family="monospace">NIX_BUILD_CORES</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The balance on how to set these two independent variables depends
upon each builder's workload and hardware. Here are a few example
scenarios on a machine with 24 cores:</fo:block><fo:block id="idm3014" keep-together.within-column="auto" space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em"><fo:block font-weight="bold" font-size="12pt" hyphenate="false" space-after.minimum="0.4em" space-after.optimum="0.6em" space-after.maximum="0.8em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" keep-with-next.within-column="always">TableÂ 17.1.Â Balancing 24 Build Cores</fo:block><fo:table border-before-width.conditionality="retain" border-collapse="collapse" width="auto" border-start-style="solid" border-end-style="solid" border-top-style="solid" border-bottom-style="solid" border-start-width="0.5pt" border-end-width="0.5pt" border-top-width="0.5pt" border-bottom-width="0.5pt" border-start-color="black" border-end-color="black" border-top-color="black" border-bottom-color="black"><fo:table-header start-indent="0pt" end-indent="0pt"><fo:table-row keep-with-next.within-column="always">
      <fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-start-style="none" border-end-style="none" border-top-style="none" border-bottom-style="none"><fo:block font-weight="bold"><fo:basic-link internal-destination="conf-max-jobs"><fo:inline><fo:inline font-family="monospace">max-jobs</fo:inline></fo:inline></fo:basic-link></fo:block></fo:table-cell>
      <fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-start-style="none" border-end-style="none" border-top-style="none" border-bottom-style="none"><fo:block font-weight="bold"><fo:basic-link internal-destination="conf-cores"><fo:inline><fo:inline font-family="monospace">cores</fo:inline></fo:inline></fo:basic-link></fo:block></fo:table-cell>
      <fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-start-style="none" border-end-style="none" border-top-style="none" border-bottom-style="none"><fo:block font-weight="bold"><fo:inline font-family="monospace">NIX_BUILD_CORES</fo:inline></fo:block></fo:table-cell>
      <fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-start-style="none" border-end-style="none" border-top-style="none" border-bottom-style="none"><fo:block font-weight="bold">Maximum Processes</fo:block></fo:table-cell>
      <fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-start-style="none" border-end-style="none" border-top-style="none" border-bottom-style="none"><fo:block font-weight="bold">Result</fo:block></fo:table-cell>
    </fo:table-row></fo:table-header><fo:table-body start-indent="0pt" end-indent="0pt"><fo:table-row>
      <fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-start-style="none" border-end-style="none" border-top-style="none" border-bottom-style="none"><fo:block>1</fo:block></fo:table-cell>
      <fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-start-style="none" border-end-style="none" border-top-style="none" border-bottom-style="none"><fo:block>24</fo:block></fo:table-cell>
      <fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-start-style="none" border-end-style="none" border-top-style="none" border-bottom-style="none"><fo:block>24</fo:block></fo:table-cell>
      <fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-start-style="none" border-end-style="none" border-top-style="none" border-bottom-style="none"><fo:block>24</fo:block></fo:table-cell>
      <fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-start-style="none" border-end-style="none" border-top-style="none" border-bottom-style="none"><fo:block>
        One derivation will be built at a time, each one can use 24
        cores. Undersold if a job canât use 24 cores.
      </fo:block></fo:table-cell>
    </fo:table-row><fo:table-row>
      <fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-start-style="none" border-end-style="none" border-top-style="none" border-bottom-style="none"><fo:block>4</fo:block></fo:table-cell>
      <fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-start-style="none" border-end-style="none" border-top-style="none" border-bottom-style="none"><fo:block>6</fo:block></fo:table-cell>
      <fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-start-style="none" border-end-style="none" border-top-style="none" border-bottom-style="none"><fo:block>6</fo:block></fo:table-cell>
      <fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-start-style="none" border-end-style="none" border-top-style="none" border-bottom-style="none"><fo:block>24</fo:block></fo:table-cell>
      <fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-start-style="none" border-end-style="none" border-top-style="none" border-bottom-style="none"><fo:block>
        Four derivations will be built at once, each given access to
        six cores.
      </fo:block></fo:table-cell>
    </fo:table-row><fo:table-row>
      <fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-start-style="none" border-end-style="none" border-top-style="none" border-bottom-style="none"><fo:block>12</fo:block></fo:table-cell>
      <fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-start-style="none" border-end-style="none" border-top-style="none" border-bottom-style="none"><fo:block>6</fo:block></fo:table-cell>
      <fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-start-style="none" border-end-style="none" border-top-style="none" border-bottom-style="none"><fo:block>6</fo:block></fo:table-cell>
      <fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-start-style="none" border-end-style="none" border-top-style="none" border-bottom-style="none"><fo:block>72</fo:block></fo:table-cell>
      <fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-start-style="none" border-end-style="none" border-top-style="none" border-bottom-style="none"><fo:block>
        12 derivations will be built at once, each given access to six
        cores. This configuration is over-sold. If all 12 derivations
        being built simultaneously try to use all six cores, the
        machine's performance will be degraded due to extensive context
        switching between the 12 builds.
      </fo:block></fo:table-cell>
    </fo:table-row><fo:table-row>
      <fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-start-style="none" border-end-style="none" border-top-style="none" border-bottom-style="none"><fo:block>24</fo:block></fo:table-cell>
      <fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-start-style="none" border-end-style="none" border-top-style="none" border-bottom-style="none"><fo:block>1</fo:block></fo:table-cell>
      <fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-start-style="none" border-end-style="none" border-top-style="none" border-bottom-style="none"><fo:block>1</fo:block></fo:table-cell>
      <fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-start-style="none" border-end-style="none" border-top-style="none" border-bottom-style="none"><fo:block>24</fo:block></fo:table-cell>
      <fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-start-style="none" border-end-style="none" border-top-style="none" border-bottom-style="none"><fo:block>
        24 derivations can build at the same time, each using a single
        core. Never oversold, but derivations which require many cores
        will be very slow to compile.
      </fo:block></fo:table-cell>
    </fo:table-row><fo:table-row>
      <fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-start-style="none" border-end-style="none" border-top-style="none" border-bottom-style="none"><fo:block>24</fo:block></fo:table-cell>
      <fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-start-style="none" border-end-style="none" border-top-style="none" border-bottom-style="none"><fo:block>0</fo:block></fo:table-cell>
      <fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-start-style="none" border-end-style="none" border-top-style="none" border-bottom-style="none"><fo:block>24</fo:block></fo:table-cell>
      <fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-start-style="none" border-end-style="none" border-top-style="none" border-bottom-style="none"><fo:block>576</fo:block></fo:table-cell>
      <fo:table-cell padding-start="2pt" padding-end="2pt" padding-top="2pt" padding-bottom="2pt" border-start-style="none" border-end-style="none" border-top-style="none" border-bottom-style="none"><fo:block>
        24 derivations can build at the same time, each using all the
        available cores of the machine. Very likely to be oversold,
        and very likely to suffer context switches.
      </fo:block></fo:table-cell>
    </fo:table-row></fo:table-body></fo:table></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">It is up to the derivations' build script to respect
host's requested cores-per-build by following the value of the
<fo:inline font-family="monospace">NIX_BUILD_CORES</fo:inline> environment variable.</fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="true" master-reference="body" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Verifying Build Reproducibility with <fo:inline font-family="monospace"><fo:basic-link internal-destination="conf-diff-hook">diff-hook</fo:basic-link></fo:inline></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Verifying Build Reproducibility with <fo:inline font-family="monospace"><fo:basic-link internal-destination="conf-diff-hook">diff-hook</fo:basic-link></fo:inline></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="blank-body"><fo:block text-align="center"/></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block id="chap-diff-hook"><fo:block font-family="sans-serif,Symbol,ZapfDingbats"><fo:block margin-left="0pt"><fo:block font-size="24.8832pt" font-weight="bold"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0pt" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">ChapterÂ 18.Â Verifying Build Reproducibility with <fo:inline font-family="monospace"><fo:basic-link internal-destination="conf-diff-hook">diff-hook</fo:basic-link></fo:inline></fo:block></fo:block><fo:block space-before="0.5em" font-style="italic" font-size="14.4pt" font-weight="bold">Check build reproducibility by running builds multiple times
and comparing their results.</fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Specify a program with Nix's <fo:basic-link internal-destination="conf-diff-hook"><fo:inline><fo:inline font-family="monospace">diff-hook</fo:inline></fo:inline></fo:basic-link> to
compare build results when two builds produce different results. Note:
this hook is only executed if the results are not the same, this hook
is not used for determining if the results are the same.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">For purposes of demonstration, we'll use the following Nix file,
<fo:inline font-family="monospace">deterministic.nix</fo:inline> for testing:</fo:block><fo:block id="idm3067" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
let
  inherit (import &lt;nixpkgs&gt; {}) runCommand;
in {
  stable = runCommand "stable" {} ''
    touch $out
  '';

  unstable = runCommand "unstable" {} ''
    echo $RANDOM &gt; $out
  '';
}
</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Additionally, <fo:inline font-family="monospace">nix.conf</fo:inline> contains:

<fo:block id="idm3070" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
diff-hook = /etc/nix/my-diff-hook
run-diff-hook = true
</fo:block>

where <fo:inline font-family="monospace">/etc/nix/my-diff-hook</fo:inline> is an executable
file containing:

<fo:block id="idm3072" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
#!/bin/sh
exec &gt;&amp;2
echo "For derivation $3:"
/run/current-system/sw/bin/diff -r "$1" "$2"
</fo:block>

</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The diff hook is executed by the same user and group who ran the
build. However, the diff hook does not have write access to the store
path just built.</fo:block><fo:block id="idm3074"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">
    Spot-Checking Build Determinism
  </fo:marker><fo:block font-size="20.736pt">
    Spot-Checking Build Determinism
  </fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    Verify a path which already exists in the Nix store by passing
    <fo:inline font-family="monospace">--check</fo:inline> to the build command.
  </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If the build passes and is deterministic, Nix will exit with a
  status code of 0:</fo:block><fo:block id="idm3079" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-build ./deterministic.nix -A stable
these derivations will be built:
  /nix/store/z98fasz2jqy9gs0xbvdj939p27jwda38-stable.drv
building '/nix/store/z98fasz2jqy9gs0xbvdj939p27jwda38-stable.drv'...
/nix/store/yyxlzw3vqaas7wfp04g0b1xg51f2czgq-stable

$ nix-build ./deterministic.nix -A stable --check
checking outputs of '/nix/store/z98fasz2jqy9gs0xbvdj939p27jwda38-stable.drv'...
/nix/store/yyxlzw3vqaas7wfp04g0b1xg51f2czgq-stable
</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If the build is not deterministic, Nix will exit with a status
  code of 1:</fo:block><fo:block id="idm3081" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-build ./deterministic.nix -A unstable
these derivations will be built:
  /nix/store/cgl13lbj1w368r5z8gywipl1ifli7dhk-unstable.drv
building '/nix/store/cgl13lbj1w368r5z8gywipl1ifli7dhk-unstable.drv'...
/nix/store/krpqk0l9ib0ibi1d2w52z293zw455cap-unstable

$ nix-build ./deterministic.nix -A unstable --check
checking outputs of '/nix/store/cgl13lbj1w368r5z8gywipl1ifli7dhk-unstable.drv'...
error: derivation '/nix/store/cgl13lbj1w368r5z8gywipl1ifli7dhk-unstable.drv' may not be deterministic: output '/nix/store/krpqk0l9ib0ibi1d2w52z293zw455cap-unstable' differs
</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In the Nix daemon's log, we will now see:
<fo:block id="idm3083" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
For derivation /nix/store/cgl13lbj1w368r5z8gywipl1ifli7dhk-unstable.drv:
1c1
&lt; 8108
---
&gt; 30204
</fo:block>
</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Using <fo:inline font-family="monospace">--check</fo:inline> with <fo:inline font-family="monospace">--keep-failed</fo:inline>
  will cause Nix to keep the second build's output in a special,
  <fo:inline font-family="monospace">.check</fo:inline> path:</fo:block><fo:block id="idm3088" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-build ./deterministic.nix -A unstable --check --keep-failed
checking outputs of '/nix/store/cgl13lbj1w368r5z8gywipl1ifli7dhk-unstable.drv'...
note: keeping build directory '/tmp/nix-build-unstable.drv-0'
error: derivation '/nix/store/cgl13lbj1w368r5z8gywipl1ifli7dhk-unstable.drv' may not be deterministic: output '/nix/store/krpqk0l9ib0ibi1d2w52z293zw455cap-unstable' differs from '/nix/store/krpqk0l9ib0ibi1d2w52z293zw455cap-unstable.check'
</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In particular, notice the
  <fo:inline font-family="monospace">/nix/store/krpqk0l9ib0ibi1d2w52z293zw455cap-unstable.check</fo:inline>
  output. Nix has copied the build results to that directory where you
  can examine it.</fo:block><fo:block id="check-dirs-are-unregistered" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" margin-left="0.25in" margin-right="0.25in"><fo:block keep-with-next.within-column="always" font-size="14pt" font-weight="bold" hyphenate="false"><fo:inline font-family="monospace">.check</fo:inline> paths are not registered store paths</fo:block><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Check paths are not protected against garbage collection,
    and this path will be deleted on the next garbage collection.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The path is guaranteed to be alive for the duration of
    <fo:basic-link internal-destination="conf-diff-hook"><fo:inline><fo:inline font-family="monospace">diff-hook</fo:inline></fo:inline></fo:basic-link>'s execution, but may be deleted
    any time after.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If the comparison is performed as part of automated tooling,
    please use the diff-hook or author your tooling to handle the case
    where the build was not deterministic and also a check path does
    not exist.</fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    <fo:inline font-family="monospace">--check</fo:inline> is only usable if the derivation has
    been built on the system already. If the derivation has not been
    built Nix will fail with the error:
    <fo:block id="idm3100" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
error: some outputs of '/nix/store/hzi1h60z2qf0nb85iwnpvrai3j2w7rr6-unstable.drv' are not valid, so checking is not possible
</fo:block>

    Run the build without <fo:inline font-family="monospace">--check</fo:inline>, and then try with
    <fo:inline font-family="monospace">--check</fo:inline> again.
  </fo:block></fo:block><fo:block id="idm3103"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">
    Automatic and Optionally Enforced Determinism Verification
  </fo:marker><fo:block font-size="20.736pt">
    Automatic and Optionally Enforced Determinism Verification
  </fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    Automatically verify every build at build time by executing the
    build multiple times.
  </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    Setting <fo:basic-link internal-destination="conf-repeat"><fo:inline><fo:inline font-family="monospace">repeat</fo:inline></fo:inline></fo:basic-link> and
    <fo:basic-link internal-destination="conf-enforce-determinism"><fo:inline><fo:inline font-family="monospace">enforce-determinism</fo:inline></fo:inline></fo:basic-link> in your
    <fo:inline font-family="monospace">nix.conf</fo:inline> permits the automated verification
    of every build Nix performs.
  </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    The following configuration will run each build three times, and
    will require the build to be deterministic:

    <fo:block id="idm3111" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
enforce-determinism = true
repeat = 2
</fo:block>
  </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    Setting <fo:basic-link internal-destination="conf-enforce-determinism"><fo:inline><fo:inline font-family="monospace">enforce-determinism</fo:inline></fo:inline></fo:basic-link> to false as in
    the following configuration will run the build multiple times,
    execute the build hook, but will allow the build to succeed even
    if it does not build reproducibly:

    <fo:block id="idm3114" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
enforce-determinism = false
repeat = 1
</fo:block>
  </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    An example output of this configuration:
    <fo:block id="idm3116" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-build ./test.nix -A unstable
these derivations will be built:
  /nix/store/ch6llwpr2h8c3jmnf3f2ghkhx59aa97f-unstable.drv
building '/nix/store/ch6llwpr2h8c3jmnf3f2ghkhx59aa97f-unstable.drv' (round 1/2)...
building '/nix/store/ch6llwpr2h8c3jmnf3f2ghkhx59aa97f-unstable.drv' (round 2/2)...
output '/nix/store/6xg356v9gl03hpbbg8gws77n19qanh02-unstable' of '/nix/store/ch6llwpr2h8c3jmnf3f2ghkhx59aa97f-unstable.drv' differs from '/nix/store/6xg356v9gl03hpbbg8gws77n19qanh02-unstable.check' from previous round
/nix/store/6xg356v9gl03hpbbg8gws77n19qanh02-unstable
</fo:block>
  </fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="true" master-reference="body" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Using the <fo:inline font-family="monospace">post-build-hook</fo:inline></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Using the <fo:inline font-family="monospace">post-build-hook</fo:inline></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="blank-body"><fo:block text-align="center"/></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block id="chap-post-build-hook"><fo:block font-family="sans-serif,Symbol,ZapfDingbats"><fo:block margin-left="0pt"><fo:block font-size="24.8832pt" font-weight="bold"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0pt" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">ChapterÂ 19.Â Using the <fo:basic-link internal-destination="conf-post-build-hook"><fo:inline><fo:inline font-family="monospace">post-build-hook</fo:inline></fo:inline></fo:basic-link></fo:block></fo:block><fo:block space-before="0.5em" font-style="italic" font-size="14.4pt" font-weight="bold">Uploading to an S3-compatible binary cache after each build</fo:block></fo:block></fo:block></fo:block><fo:block id="chap-post-build-hook-caveats"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Implementation Caveats</fo:marker><fo:block font-size="20.736pt">Implementation Caveats</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Here we use the post-build hook to upload to a binary cache.
  This is a simple and working example, but it is not suitable for all
  use cases.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The post build hook program runs after each executed build,
  and blocks the build loop. The build loop exits if the hook program
  fails.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Concretely, this implementation will make Nix slow or unusable
  when the internet is slow or unreliable.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A more advanced implementation might pass the store paths to a
  user-supplied daemon or queue for processing the store paths outside
  of the build loop.</fo:block></fo:block><fo:block id="idm3127"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Prerequisites</fo:marker><fo:block font-size="20.736pt">Prerequisites</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    This tutorial assumes you have configured an S3-compatible binary cache
    according to the instructions at
    <fo:basic-link internal-destination="ssec-s3-substituter-authenticated-writes"><fo:inline>the section called âAuthenticated Writes to your S3-compatible binary cacheâ</fo:inline></fo:basic-link>, and
    that the <fo:inline font-family="monospace">root</fo:inline> user's default AWS profile can
    upload to the bucket.
  </fo:block></fo:block><fo:block id="idm3132"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Set up a Signing Key</fo:marker><fo:block font-size="20.736pt">Set up a Signing Key</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Use <fo:inline font-weight="bold">nix-store --generate-binary-cache-key</fo:inline> to
  create our public and private signing keys. We will sign paths
  with the private key, and distribute the public key for verifying
  the authenticity of the paths.</fo:block><fo:block id="idm3136" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
# nix-store --generate-binary-cache-key example-nix-cache-1 /etc/nix/key.private /etc/nix/key.public
# cat /etc/nix/key.public
example-nix-cache-1:1/cKDz3QCCOmwcztD2eV6Coggp6rqc9DGjWv7C0G+rM=
</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Then, add the public key and the cache URL to your
<fo:inline font-family="monospace">nix.conf</fo:inline>'s <fo:basic-link internal-destination="conf-trusted-public-keys"><fo:inline><fo:inline font-family="monospace">trusted-public-keys</fo:inline></fo:inline></fo:basic-link>
and <fo:basic-link internal-destination="conf-substituters"><fo:inline><fo:inline font-family="monospace">substituters</fo:inline></fo:inline></fo:basic-link> like:</fo:block><fo:block id="idm3141" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
substituters = https://cache.nixos.org/ s3://example-nix-cache
trusted-public-keys = cache.nixos.org-1:6NCHdD59X431o0gWypbMrAURkbJ16ZPMQFGspcDShjY= example-nix-cache-1:1/cKDz3QCCOmwcztD2eV6Coggp6rqc9DGjWv7C0G+rM=
</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">we will restart the Nix daemon a later step.</fo:block></fo:block><fo:block id="idm3143"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Implementing the build hook</fo:marker><fo:block font-size="20.736pt">Implementing the build hook</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Write the following script to
  <fo:inline font-family="monospace">/etc/nix/upload-to-cache.sh</fo:inline>:
  </fo:block><fo:block id="idm3147" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
#!/bin/sh

set -eu
set -f # disable globbing
export IFS=' '

echo "Signing paths" $OUT_PATHS
nix sign-paths --key-file /etc/nix/key.private $OUT_PATHS
echo "Uploading paths" $OUT_PATHS
exec nix copy --to 's3://example-nix-cache' $OUT_PATHS
</fo:block><fo:block id="idm3148" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" margin-left="0.25in" margin-right="0.25in"><fo:block keep-with-next.within-column="always" font-size="14pt" font-weight="bold" hyphenate="false">Should <fo:inline font-family="monospace">$OUT_PATHS</fo:inline> be quoted?</fo:block><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      The <fo:inline font-family="monospace">$OUT_PATHS</fo:inline> variable is a space-separated
      list of Nix store paths. In this case, we expect and want the
      shell to perform word splitting to make each output path its
      own argument to <fo:inline font-weight="bold">nix sign-paths</fo:inline>. Nix guarantees
      the paths will not contain any spaces, however a store path
      might contain glob characters. The <fo:inline font-weight="bold">set -f</fo:inline>
      disables globbing in the shell.
    </fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    Then make sure the hook program is executable by the <fo:inline font-family="monospace">root</fo:inline> user:
    <fo:block id="idm3157" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
# chmod +x /etc/nix/upload-to-cache.sh
</fo:block></fo:block></fo:block><fo:block id="idm3158"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Updating Nix Configuration</fo:marker><fo:block font-size="20.736pt">Updating Nix Configuration</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Edit <fo:inline font-family="monospace">/etc/nix/nix.conf</fo:inline> to run our hook,
  by adding the following configuration snippet at the end:</fo:block><fo:block id="idm3162" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
post-build-hook = /etc/nix/upload-to-cache.sh
</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Then, restart the <fo:inline font-weight="bold">nix-daemon</fo:inline>.</fo:block></fo:block><fo:block id="idm3165"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Testing</fo:marker><fo:block font-size="20.736pt">Testing</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Build any derivation, for example:</fo:block><fo:block id="idm3168" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-build -E '(import &lt;nixpkgs&gt; {}).writeText "example" (builtins.toString builtins.currentTime)'
these derivations will be built:
  /nix/store/s4pnfbkalzy5qz57qs6yybna8wylkig6-example.drv
building '/nix/store/s4pnfbkalzy5qz57qs6yybna8wylkig6-example.drv'...
running post-build-hook '/home/grahamc/projects/github.com/NixOS/nix/post-hook.sh'...
post-build-hook: Signing paths /nix/store/ibcyipq5gf91838ldx40mjsp0b8w9n18-example
post-build-hook: Uploading paths /nix/store/ibcyipq5gf91838ldx40mjsp0b8w9n18-example
/nix/store/ibcyipq5gf91838ldx40mjsp0b8w9n18-example
</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Then delete the path from the store, and try substituting it from the binary cache:</fo:block><fo:block id="idm3170" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ rm ./result
$ nix-store --delete /nix/store/ibcyipq5gf91838ldx40mjsp0b8w9n18-example
</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Now, copy the path back from the cache:</fo:block><fo:block id="idm3172" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix store --realize /nix/store/ibcyipq5gf91838ldx40mjsp0b8w9n18-example
copying path '/nix/store/m8bmqwrch6l3h8s0k3d673xpmipcdpsa-example from 's3://example-nix-cache'...
warning: you did not specify '--add-root'; the result might be removed by the garbage collector
/nix/store/m8bmqwrch6l3h8s0k3d673xpmipcdpsa-example
</fo:block></fo:block><fo:block id="idm3173"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Conclusion</fo:marker><fo:block font-size="20.736pt">Conclusion</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    We now have a Nix installation configured to automatically sign and
    upload every local build to a remote binary cache.
  </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
    Before deploying this to production, be sure to consider the
    implementation caveats in <fo:basic-link internal-destination="chap-post-build-hook-caveats"><fo:inline>the section called âImplementation Caveatsâ</fo:inline></fo:basic-link>.
  </fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="true" master-reference="titlepage" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="blank-body"><fo:block text-align="center"/></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body"><fo:block id="part-command-ref"><fo:block><fo:block><fo:block text-align="center" font-size="24.8832pt" space-before="18.6624pt" font-weight="bold" font-family="sans-serif,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always" hyphenate="false">PartÂ VI.Â Command Reference</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This section lists commands and options that you can use when you
work with Nix.</fo:block></fo:flow></fo:page-sequence><fo:page-sequence hyphenate="true" master-reference="lot" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Command Reference</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Command Reference</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="blank-body"><fo:block text-align="center"/></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block id="toc...part-command-ref" space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em"><fo:block><fo:block><fo:block space-before.minimum="1em" space-before.optimum="1.5em" space-before.maximum="2em" space-after="0.5em" start-indent="0pt" font-size="17.28pt" font-weight="bold" font-family="sans-serif,Symbol,ZapfDingbats">Table of Contents</fo:block></fo:block></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-common-options">20. Common Options</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-common-options"><fo:page-number-citation ref-id="sec-common-options"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-common-env">21. Common Environment Variables</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-common-env"><fo:page-number-citation ref-id="sec-common-env"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ch-main-commands">22. Main Commands</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ch-main-commands"><fo:page-number-citation ref-id="ch-main-commands"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.part-command-ref.ch-main-commands" margin-left="24pt"><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-nix-env">nix-env</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-nix-env"><fo:page-number-citation ref-id="sec-nix-env"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-nix-build">nix-build</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-nix-build"><fo:page-number-citation ref-id="sec-nix-build"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-nix-shell">nix-shell</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-nix-shell"><fo:page-number-citation ref-id="sec-nix-shell"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-nix-store">nix-store</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-nix-store"><fo:page-number-citation ref-id="sec-nix-store"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ch-utilities">23. Utilities</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ch-utilities"><fo:page-number-citation ref-id="ch-utilities"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.part-command-ref.ch-utilities" margin-left="24pt"><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-nix-channel">nix-channel</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-nix-channel"><fo:page-number-citation ref-id="sec-nix-channel"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-nix-collect-garbage">nix-collect-garbage</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-nix-collect-garbage"><fo:page-number-citation ref-id="sec-nix-collect-garbage"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-nix-copy-closure">nix-copy-closure</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-nix-copy-closure"><fo:page-number-citation ref-id="sec-nix-copy-closure"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-nix-daemon">nix-daemon</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-nix-daemon"><fo:page-number-citation ref-id="sec-nix-daemon"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-nix-hash">nix-hash</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-nix-hash"><fo:page-number-citation ref-id="sec-nix-hash"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-nix-instantiate">nix-instantiate</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-nix-instantiate"><fo:page-number-citation ref-id="sec-nix-instantiate"/></fo:basic-link></fo:inline></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-nix-prefetch-url">nix-prefetch-url</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-nix-prefetch-url"><fo:page-number-citation ref-id="sec-nix-prefetch-url"/></fo:basic-link></fo:inline></fo:block></fo:block><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="ch-files">24. Files</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="ch-files"><fo:page-number-citation ref-id="ch-files"/></fo:basic-link></fo:inline></fo:block><fo:block id="toc.part-command-ref.ch-files" margin-left="24pt"><fo:block xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" text-align-last="justify" text-align="start" end-indent="24pt" last-line-end-indent="-24pt"><fo:inline keep-with-next.within-line="always"><fo:basic-link internal-destination="sec-conf-file">nix.conf</fo:basic-link></fo:inline><fo:inline keep-together.within-line="always"><fo:leader leader-pattern="dots" leader-pattern-width="3pt" leader-alignment="reference-area" padding-left="3pt" padding-right="3pt"/><fo:basic-link internal-destination="sec-conf-file"><fo:page-number-citation ref-id="sec-conf-file"/></fo:basic-link></fo:inline></fo:block></fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="true" master-reference="body" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Common Options</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Common Options</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="blank-body"><fo:block text-align="center"/></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block id="sec-common-options"><fo:block font-family="sans-serif,Symbol,ZapfDingbats"><fo:block margin-left="0pt"><fo:block font-size="24.8832pt" font-weight="bold"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0pt" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">ChapterÂ 20.Â Common Options</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Most Nix commands accept the following command-line options:</fo:block><fo:list-block id="opt-common" provisional-distance-between-starts="22em * 0.60+1em" provisional-label-separation="1em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em"><fo:list-item id="idm3186" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--help</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Prints out a summary of the command syntax and
  exits.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3191" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--version</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Prints out the Nix version number on standard output
  and exits.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3196" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--verbose</fo:inline> / <fo:inline font-family="monospace">-v</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Increases the level of verbosity of diagnostic messages
  printed on standard error.  For each Nix operation, the information
  printed on standard output is well-defined; any diagnostic
  information is printed on standard error, never on standard
  output.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This option may be specified repeatedly.  Currently, the
  following verbosity levels exist:</fo:block><fo:list-block id="idm3203" provisional-distance-between-starts="1em * 0.60+1em" provisional-label-separation="1em"><fo:list-item id="idm3204" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline>0</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">âErrors onlyâ: only print messages
    explaining why the Nix invocation failed.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3208" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline>1</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">âInformationalâ: print
    <fo:inline font-style="italic">useful</fo:inline> messages about what Nix is doing.
    This is the default.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3213" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline>2</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">âTalkativeâ: print more informational
    messages.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3217" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline>3</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">âChattyâ: print even more
    informational messages.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3221" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline>4</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">âDebugâ: print debug
    information.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3225" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline>5</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">âVomitâ: print vast amounts of debug
    information.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3229" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--quiet</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Decreases the level of verbosity of diagnostic messages
  printed on standard error.  This is the inverse option to
  <fo:inline font-family="monospace">-v</fo:inline> / <fo:inline font-family="monospace">--verbose</fo:inline>.
  </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This option may be specified repeatedly.  See the previous
  verbosity levels list.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3237" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--no-build-output</fo:inline> / <fo:inline font-family="monospace">-Q</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">By default, output written by builders to standard
  output and standard error is echoed to the Nix command's standard
  error.  This option suppresses this behaviour.  Note that the
  builder's standard output and error are always written to a log file
  in
  <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">prefix</fo:inline>/nix/var/log/nix</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3245" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--max-jobs</fo:inline> / <fo:inline font-family="monospace">-j</fo:inline>
<fo:inline font-style="italic" font-family="monospace">number</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Sets the maximum number of build jobs that Nix will
  perform in parallel to the specified number.  Specify
  <fo:inline font-family="monospace">auto</fo:inline> to use the number of CPUs in the system.
  The default is specified by the <fo:basic-link internal-destination="conf-max-jobs"><fo:inline><fo:inline font-family="monospace">max-jobs</fo:inline></fo:inline></fo:basic-link>
  configuration setting, which itself defaults to
  <fo:inline font-family="monospace">1</fo:inline>.  A higher value is useful on SMP systems or to
  exploit I/O latency.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"> Setting it to <fo:inline font-family="monospace">0</fo:inline> disallows building on the local
  machine, which is useful when you want builds to happen only on remote
  builders.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3258" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--cores</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Sets the value of the <fo:inline font-family="monospace">NIX_BUILD_CORES</fo:inline>
  environment variable in the invocation of builders.  Builders can
  use this variable at their discretion to control the maximum amount
  of parallelism.  For instance, in Nixpkgs, if the derivation
  attribute <fo:inline font-family="monospace">enableParallelBuilding</fo:inline> is set to
  <fo:inline font-family="monospace">true</fo:inline>, the builder passes the
  <fo:inline font-family="monospace">-j<fo:inline font-style="italic" font-family="monospace">N</fo:inline></fo:inline> flag to GNU Make.
  It defaults to the value of the <fo:basic-link internal-destination="conf-cores"><fo:inline><fo:inline font-family="monospace">cores</fo:inline></fo:inline></fo:basic-link>
  configuration setting, if set, or <fo:inline font-family="monospace">1</fo:inline> otherwise.
  The value <fo:inline font-family="monospace">0</fo:inline> means that the builder should use all
  available CPU cores in the system.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3272" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--max-silent-time</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Sets the maximum number of seconds that a builder
  can go without producing any data on standard output or standard
  error.  The default is specified by the <fo:basic-link internal-destination="conf-max-silent-time"><fo:inline><fo:inline font-family="monospace">max-silent-time</fo:inline></fo:inline></fo:basic-link>
  configuration setting.  <fo:inline font-family="monospace">0</fo:inline> means no
  time-out.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3280" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--timeout</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Sets the maximum number of seconds that a builder
  can run.  The default is specified by the <fo:basic-link internal-destination="conf-timeout"><fo:inline><fo:inline font-family="monospace">timeout</fo:inline></fo:inline></fo:basic-link>
  configuration setting.  <fo:inline font-family="monospace">0</fo:inline> means no
  timeout.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3288" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--keep-going</fo:inline> / <fo:inline font-family="monospace">-k</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Keep going in case of failed builds, to the
  greatest extent possible.  That is, if building an input of some
  derivation fails, Nix will still build the other inputs, but not the
  derivation itself.  Without this option, Nix stops if any build
  fails (except for builds of substitutes), possibly killing builds in
  progress (in case of parallel or distributed builds).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3294" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--keep-failed</fo:inline> / <fo:inline font-family="monospace">-K</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Specifies that in case of a build failure, the
  temporary directory (usually in <fo:inline font-family="monospace">/tmp</fo:inline>) in which
  the build takes place should not be deleted.  The path of the build
  directory is printed as an informational message.
    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3301" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--fallback</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Whenever Nix attempts to build a derivation for which
  substitutes are known for each output path, but realising the output
  paths through the substitutes fails, fall back on building the
  derivation.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The most common scenario in which this is useful is when we
  have registered substitutes in order to perform binary distribution
  from, say, a network repository.  If the repository is down, the
  realisation of the derivation will fail.  When this option is
  specified, Nix will build the derivation instead.  Thus,
  installation from binaries falls back on installation from source.
  This option is not the default since it is generally not desirable
  for a transient failure in obtaining the substitutes to lead to a
  full build from source (with the related consumption of
  resources).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3307" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--no-build-hook</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Disables the build hook mechanism.  This allows to ignore remote
  builders if they are setup on the machine.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">It's useful in cases where the bandwidth between the client and the
  remote builder is too low.  In that case it can take more time to upload the
  sources to the remote builder and fetch back the result than to do the
  computation locally.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3313" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--readonly-mode</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">When this option is used, no attempt is made to open
  the Nix database.  Most Nix operations do need database access, so
  those operations will fail.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3318" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--arg</fo:inline> <fo:inline font-style="italic" font-family="monospace">name</fo:inline> <fo:inline font-style="italic" font-family="monospace">value</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This option is accepted by
  <fo:inline font-weight="bold">nix-env</fo:inline>, <fo:inline font-weight="bold">nix-instantiate</fo:inline> and
  <fo:inline font-weight="bold">nix-build</fo:inline>.  When evaluating Nix expressions, the
  expression evaluator will automatically try to call functions that
  it encounters.  It can automatically call functions for which every
  argument has a <fo:basic-link internal-destination="ss-functions"><fo:inline>default value</fo:inline></fo:basic-link>
  (e.g., <fo:inline font-family="monospace">{ <fo:inline font-style="italic" font-family="monospace">argName</fo:inline> ?
  <fo:inline font-style="italic" font-family="monospace">defaultValue</fo:inline> }:
  <fo:inline font-style="italic" font-family="monospace">...</fo:inline></fo:inline>).  With
  <fo:inline font-family="monospace">--arg</fo:inline>, you can also call functions that have
  arguments without a default value (or override a default value).
  That is, if the evaluator encounters a function with an argument
  named <fo:inline font-style="italic" font-family="monospace">name</fo:inline>, it will call it with value
  <fo:inline font-style="italic" font-family="monospace">value</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">For instance, the top-level <fo:inline font-family="monospace">default.nix</fo:inline> in
  Nixpkgs is actually a function:

<fo:block id="idm3338" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
{ # The system (e.g., `i686-linux') for which to build the packages.
  system ? builtins.currentSystem
  <fo:inline font-style="italic" font-family="monospace">...</fo:inline>
}: <fo:inline font-style="italic" font-family="monospace">...</fo:inline></fo:block>

  So if you call this Nix expression (e.g., when you do
  <fo:inline font-family="monospace">nix-env -i <fo:inline font-style="italic" font-family="monospace">pkgname</fo:inline></fo:inline>),
  the function will be called automatically using the value <fo:basic-link internal-destination="builtin-currentSystem"><fo:inline><fo:inline font-family="monospace">builtins.currentSystem</fo:inline></fo:inline></fo:basic-link>
  for the <fo:inline font-family="monospace">system</fo:inline> argument.  You can override this
  using <fo:inline font-family="monospace">--arg</fo:inline>, e.g., <fo:inline font-family="monospace">nix-env -i
  <fo:inline font-style="italic" font-family="monospace">pkgname</fo:inline> --arg system
  \"i686-freebsd\"</fo:inline>.  (Note that since the argument is a Nix
  string literal, you have to escape the quotes.)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3349" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--argstr</fo:inline> <fo:inline font-style="italic" font-family="monospace">name</fo:inline> <fo:inline font-style="italic" font-family="monospace">value</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This option is like <fo:inline font-family="monospace">--arg</fo:inline>, only the
  value is not a Nix expression but a string.  So instead of
  <fo:inline font-family="monospace">--arg system \"i686-linux\"</fo:inline> (the outer quotes are
  to keep the shell happy) you can say <fo:inline font-family="monospace">--argstr system
  i686-linux</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3359" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--attr</fo:inline> / <fo:inline font-family="monospace">-A</fo:inline>
<fo:inline font-style="italic" font-family="monospace">attrPath</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Select an attribute from the top-level Nix
  expression being evaluated.  (<fo:inline font-weight="bold">nix-env</fo:inline>,
  <fo:inline font-weight="bold">nix-instantiate</fo:inline>, <fo:inline font-weight="bold">nix-build</fo:inline> and
  <fo:inline font-weight="bold">nix-shell</fo:inline> only.)  The <fo:inline font-style="italic">attribute
  path</fo:inline> <fo:inline font-style="italic" font-family="monospace">attrPath</fo:inline> is a sequence of
  attribute names separated by dots.  For instance, given a top-level
  Nix expression <fo:inline font-style="italic" font-family="monospace">e</fo:inline>, the attribute path
  <fo:inline font-family="monospace">xorg.xorgserver</fo:inline> would cause the expression
  <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">e</fo:inline>.xorg.xorgserver</fo:inline> to
  be used.  See <fo:basic-link internal-destination="refsec-nix-env-install-examples"><fo:inline><fo:inline font-weight="bold">nix-env
  --install</fo:inline></fo:inline></fo:basic-link> for some concrete examples.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In addition to attribute names, you can also specify array
  indices.  For instance, the attribute path
  <fo:inline font-family="monospace">foo.3.bar</fo:inline> selects the <fo:inline font-family="monospace">bar</fo:inline>
  attribute of the fourth element of the array in the
  <fo:inline font-family="monospace">foo</fo:inline> attribute of the top-level
  expression.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3382" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--expr</fo:inline> / <fo:inline font-family="monospace">-E</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Interpret the command line arguments as a list of
  Nix expressions to be parsed and evaluated, rather than as a list
  of file names of Nix expressions.
  (<fo:inline font-weight="bold">nix-instantiate</fo:inline>, <fo:inline font-weight="bold">nix-build</fo:inline>
  and <fo:inline font-weight="bold">nix-shell</fo:inline> only.)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3391" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">-I</fo:inline> <fo:inline font-style="italic" font-family="monospace">path</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Add a path to the Nix expression search path.  This
  option may be given multiple times.  See the <fo:inline font-family="monospace">NIX_PATH</fo:inline> environment variable for
  information on the semantics of the Nix search path.  Paths added
  through <fo:inline font-family="monospace">-I</fo:inline> take precedence over
  <fo:inline font-family="monospace">NIX_PATH</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3400" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--option</fo:inline> <fo:inline font-style="italic" font-family="monospace">name</fo:inline> <fo:inline font-style="italic" font-family="monospace">value</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Set the Nix configuration option
  <fo:inline font-style="italic" font-family="monospace">name</fo:inline> to <fo:inline font-style="italic" font-family="monospace">value</fo:inline>.
  This overrides settings in the Nix configuration file (see
  nix.conf(5)).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3412" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--repair</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Fix corrupted or missing store paths by
  redownloading or rebuilding them.  Note that this is slow because it
  requires computing a cryptographic hash of the contents of every
  path in the closure of the build.  Also note the warning under
  <fo:inline font-weight="bold">nix-store --repair-path</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="true" master-reference="body" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Common Environment Variables</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Common Environment Variables</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="blank-body"><fo:block text-align="center"/></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block id="sec-common-env"><fo:block font-family="sans-serif,Symbol,ZapfDingbats"><fo:block margin-left="0pt"><fo:block font-size="24.8832pt" font-weight="bold"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0pt" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">ChapterÂ 21.Â Common Environment Variables</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Most Nix commands interpret the following environment variables:</fo:block><fo:list-block id="env-common" provisional-distance-between-starts="24em * 0.60+1em" provisional-label-separation="1em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em"><fo:list-item id="idm3422" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">IN_NIX_SHELL</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Indicator that tells if the current environment was set up by
  <fo:inline font-weight="bold">nix-shell</fo:inline>.  Since Nix 2.0 the values are
  <fo:inline font-family="monospace">"pure"</fo:inline> and <fo:inline font-family="monospace">"impure"</fo:inline></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3430" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_PATH</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A colon-separated list of directories used to look up Nix
    expressions enclosed in angle brackets (i.e.,
    <fo:inline font-family="monospace">&lt;<fo:inline font-style="italic" font-family="monospace">path</fo:inline>&gt;</fo:inline>).  For
    instance, the value

    <fo:block id="idm3437" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
/home/eelco/Dev:/etc/nixos</fo:block>

    will cause Nix to look for paths relative to
    <fo:inline font-family="monospace">/home/eelco/Dev</fo:inline> and
    <fo:inline font-family="monospace">/etc/nixos</fo:inline>, in that order.  It is also
    possible to match paths against a prefix.  For example, the value

    <fo:block id="idm3440" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
nixpkgs=/home/eelco/Dev/nixpkgs-branch:/etc/nixos</fo:block>

    will cause Nix to search for
    <fo:inline font-family="monospace">&lt;nixpkgs/<fo:inline font-style="italic" font-family="monospace">path</fo:inline>&gt;</fo:inline> in
    <fo:inline font-family="monospace">/home/eelco/Dev/nixpkgs-branch/<fo:inline font-style="italic" font-family="monospace">path</fo:inline></fo:inline>
    and
    <fo:inline font-family="monospace">/etc/nixos/nixpkgs/<fo:inline font-style="italic" font-family="monospace">path</fo:inline></fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If a path in the Nix search path starts with
    <fo:inline font-family="monospace">http://</fo:inline> or <fo:inline font-family="monospace">https://</fo:inline>, it is
    interpreted as the URL of a tarball that will be downloaded and
    unpacked to a temporary location. The tarball must consist of a
    single top-level directory. For example, setting
    <fo:inline font-family="monospace">NIX_PATH</fo:inline> to

    <fo:block id="idm3451" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
nixpkgs=https://github.com/NixOS/nixpkgs-channels/archive/nixos-15.09.tar.gz</fo:block>

    tells Nix to download the latest revision in the Nixpkgs/NixOS
    15.09 channel.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A following shorthand can be used to refer to the official channels:
    
    <fo:block id="idm3453" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">nixpkgs=channel:nixos-15.09</fo:block>
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The search path can be extended using the <fo:inline font-family="monospace">-I</fo:inline> option, which takes precedence over
    <fo:inline font-family="monospace">NIX_PATH</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3457" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_IGNORE_SYMLINK_STORE</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Normally, the Nix store directory (typically
  <fo:inline font-family="monospace">/nix/store</fo:inline>) is not allowed to contain any
  symlink components.  This is to prevent âimpureâ builds.  Builders
  sometimes âcanonicaliseâ paths by resolving all symlink components.
  Thus, builds on different machines (with
  <fo:inline font-family="monospace">/nix/store</fo:inline> resolving to different locations)
  could yield different results.  This is generally not a problem,
  except when builds are deployed to machines where
  <fo:inline font-family="monospace">/nix/store</fo:inline> resolves differently.  If you are
  sure that youâre not going to do that, you can set
  <fo:inline font-family="monospace">NIX_IGNORE_SYMLINK_STORE</fo:inline> to <fo:inline font-family="monospace">1</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Note that if youâre symlinking the Nix store so that you can
  put it on another file system than the root file system, on Linux
  youâre better off using <fo:inline font-family="monospace">bind</fo:inline> mount points, e.g.,

  <fo:block id="idm3469" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ mkdir /nix
$ mount -o bind /mnt/otherdisk/nix /nix</fo:block>

  Consult the mount(8) manual page for details.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3473" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_STORE_DIR</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Overrides the location of the Nix store (default
  <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">prefix</fo:inline>/store</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3480" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_DATA_DIR</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Overrides the location of the Nix static data
  directory (default
  <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">prefix</fo:inline>/share</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3487" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_LOG_DIR</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Overrides the location of the Nix log directory
  (default <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">prefix</fo:inline>/var/log/nix</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3494" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_STATE_DIR</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Overrides the location of the Nix state directory
  (default <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">prefix</fo:inline>/var/nix</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3501" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_CONF_DIR</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Overrides the location of the Nix configuration
  directory (default
  <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">prefix</fo:inline>/etc/nix</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3508" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">TMPDIR</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Use the specified directory to store temporary
  files.  In particular, this includes temporary build directories;
  these can take up substantial amounts of disk space.  The default is
  <fo:inline font-family="monospace">/tmp</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3514" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_REMOTE</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This variable should be set to
  <fo:inline font-family="monospace">daemon</fo:inline> if you want to use the Nix daemon to
  execute Nix operations. This is necessary in <fo:basic-link internal-destination="ssec-multi-user"><fo:inline>multi-user Nix installations</fo:inline></fo:basic-link>.
  If the Nix daemon's Unix socket is at some non-standard path,
  this variable should be set to <fo:inline font-family="monospace">unix://path/to/socket</fo:inline>.
  Otherwise, it should be left unset.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3522" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_SHOW_STATS</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If set to <fo:inline font-family="monospace">1</fo:inline>, Nix will print some
  evaluation statistics, such as the number of values
  allocated.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3528" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_COUNT_CALLS</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If set to <fo:inline font-family="monospace">1</fo:inline>, Nix will print how
  often functions were called during Nix expression evaluation.  This
  is useful for profiling your Nix expressions.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3534" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">GC_INITIAL_HEAP_SIZE</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If Nix has been configured to use the Boehm garbage
  collector, this variable sets the initial size of the heap in bytes.
  It defaults to 384 MiB.  Setting it to a low value reduces memory
  consumption, but will increase runtime due to the overhead of
  garbage collection.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="true" master-reference="body" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Main Commands</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Main Commands</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="blank-body"><fo:block text-align="center"/></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block id="ch-main-commands"><fo:block font-family="sans-serif,Symbol,ZapfDingbats"><fo:block margin-left="0pt"><fo:block font-size="24.8832pt" font-weight="bold"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0pt" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">ChapterÂ 22.Â Main Commands</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This section lists commands and options that you can use when you
work with Nix.</fo:block><fo:block break-before="page"><fo:block id="sec-nix-env"><fo:block id="idm3548"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Name</fo:block></fo:block></fo:block></fo:block><fo:block space-after="1em">nix-env <fo:inline font-family="serif,Symbol,ZapfDingbats">â</fo:inline> manipulate or query Nix user environments</fo:block></fo:block><fo:block id="idm3551"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Synopsis</fo:block></fo:block></fo:block></fo:block><fo:block/><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-env</fo:inline>  [<fo:inline font-family="monospace">--help</fo:inline>] [<fo:inline font-family="monospace">--version</fo:inline>] [
  { <fo:inline font-family="monospace">--verbose</fo:inline>  |   <fo:inline font-family="monospace">-v</fo:inline> }
...] [
   <fo:inline font-family="monospace">--quiet</fo:inline> 
] [
    <fo:inline font-family="monospace">--no-build-output</fo:inline>  |   <fo:inline font-family="monospace">-Q</fo:inline>  
] [
  { <fo:inline font-family="monospace">--max-jobs</fo:inline>  |   <fo:inline font-family="monospace">-j</fo:inline> }
  <fo:inline font-style="italic" font-family="monospace">number</fo:inline>
] [
  <fo:inline font-family="monospace">--cores</fo:inline>
  <fo:inline font-style="italic" font-family="monospace">number</fo:inline>
] [
  <fo:inline font-family="monospace">--max-silent-time</fo:inline>
  <fo:inline font-style="italic" font-family="monospace">number</fo:inline>
] [
  <fo:inline font-family="monospace">--timeout</fo:inline>
  <fo:inline font-style="italic" font-family="monospace">number</fo:inline>
] [
    <fo:inline font-family="monospace">--keep-going</fo:inline>  |   <fo:inline font-family="monospace">-k</fo:inline>  
] [
    <fo:inline font-family="monospace">--keep-failed</fo:inline>  |   <fo:inline font-family="monospace">-K</fo:inline>  
] [<fo:inline font-family="monospace">--fallback</fo:inline>] [<fo:inline font-family="monospace">--readonly-mode</fo:inline>] [
  <fo:inline font-family="monospace">-I</fo:inline>
  <fo:inline font-style="italic" font-family="monospace">path</fo:inline>
] [
  <fo:inline font-family="monospace">--option</fo:inline>
  <fo:inline font-style="italic" font-family="monospace">name</fo:inline>
  <fo:inline font-style="italic" font-family="monospace">value</fo:inline>
]<fo:block/> [<fo:inline font-family="monospace">--arg</fo:inline> <fo:inline font-style="italic" font-family="monospace">name</fo:inline> <fo:inline font-style="italic" font-family="monospace">value</fo:inline>] [<fo:inline font-family="monospace">--argstr</fo:inline> <fo:inline font-style="italic" font-family="monospace">name</fo:inline> <fo:inline font-style="italic" font-family="monospace">value</fo:inline>] [
      { <fo:inline font-family="monospace">--file</fo:inline>  |   <fo:inline font-family="monospace">-f</fo:inline> }
      <fo:inline font-style="italic" font-family="monospace">path</fo:inline>
    ] [
      { <fo:inline font-family="monospace">--profile</fo:inline>  |   <fo:inline font-family="monospace">-p</fo:inline> }
      <fo:inline font-style="italic" font-family="monospace">path</fo:inline>
    ] [
       <fo:inline font-family="monospace">--system-filter</fo:inline> 
      <fo:inline font-style="italic" font-family="monospace">system</fo:inline>
    ] [<fo:inline font-family="monospace">--dry-run</fo:inline>]  <fo:inline font-style="italic" font-family="monospace">operation</fo:inline>  [<fo:inline font-style="italic" font-family="monospace">options</fo:inline>...] [<fo:inline font-style="italic" font-family="monospace">arguments</fo:inline>...]</fo:block></fo:block><fo:block id="idm3647"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Description</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The command <fo:inline font-weight="bold">nix-env</fo:inline> is used to manipulate Nix
user environments.  User environments are sets of software packages
available to a user at some point in time.  In other words, they are a
synthesised view of the programs available in the Nix store.  There
may be many user environments: different users can have different
environments, and individual users can switch between different
environments.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-env</fo:inline> takes exactly one
<fo:inline font-style="italic">operation</fo:inline> flag which indicates the subcommand to
be performed.  These are documented below.</fo:block></fo:block><fo:block id="idm3654"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Selectors</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Several commands, such as <fo:inline font-weight="bold">nix-env -q</fo:inline> and
<fo:inline font-weight="bold">nix-env -i</fo:inline>, take a list of arguments that specify
the packages on which to operate. These are extended regular
expressions that must match the entire name of the package. (For
details on regular expressions, see
regex(7).)
The match is case-sensitive. The regular expression can optionally be
followed by a dash and a version number; if omitted, any version of
the package will match.  Here are some examples:

<fo:list-block id="idm3662" provisional-distance-between-starts="24em * 0.60+1em" provisional-label-separation="1em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em"><fo:list-item id="idm3663" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">firefox</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Matches the package name
    <fo:inline font-family="monospace">firefox</fo:inline> and any version.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3669" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">firefox-32.0</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Matches the package name
    <fo:inline font-family="monospace">firefox</fo:inline> and version
    <fo:inline font-family="monospace">32.0</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3676" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">gtk\\+</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Matches the package name
    <fo:inline font-family="monospace">gtk+</fo:inline>. The <fo:inline font-family="monospace">+</fo:inline> character must
    be escaped using a backslash to prevent it from being interpreted
    as a quantifier, and the backslash must be escaped in turn with
    another backslash to ensure that the shell passes it
    on.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3683" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">.\*</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Matches any package name. This is the default for
    most commands.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3688" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">'.*zip.*'</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Matches any package name containing the string
    <fo:inline font-family="monospace">zip</fo:inline>. Note the dots: <fo:inline font-family="monospace">'*zip*'</fo:inline>
    does not work, because in a regular expression, the character
    <fo:inline font-family="monospace">*</fo:inline> is interpreted as a
    quantifier.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3696" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">'.*(firefox|chromium).*'</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Matches any package name containing the strings
    <fo:inline font-family="monospace">firefox</fo:inline> or
    <fo:inline font-family="monospace">chromium</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block>

</fo:block></fo:block><fo:block id="idm3703"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Common options</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This section lists the options that are common to all
operations.  These options are allowed for every subcommand, though
they may not always have an effect.  <fo:inline>See
also <fo:basic-link internal-destination="sec-common-options"><fo:inline>ChapterÂ 20, <fo:inline font-style="italic">Common Options</fo:inline></fo:inline></fo:basic-link>.</fo:inline></fo:block><fo:list-block id="idm3708" provisional-distance-between-starts="22em * 0.60+1em" provisional-label-separation="1em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em"><fo:list-item id="idm3709" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--file</fo:inline> / <fo:inline font-family="monospace">-f</fo:inline> <fo:inline font-style="italic" font-family="monospace">path</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Specifies the Nix expression (designated below as
    the <fo:inline font-style="italic">active Nix expression</fo:inline>) used by the
    <fo:inline font-family="monospace">--install</fo:inline>, <fo:inline font-family="monospace">--upgrade</fo:inline>, and
    <fo:inline font-family="monospace">--query --available</fo:inline> operations to obtain
    derivations.  The default is
    <fo:inline font-family="monospace">~/.nix-defexpr</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If the argument starts with <fo:inline font-family="monospace">http://</fo:inline> or
    <fo:inline font-family="monospace">https://</fo:inline>, it is interpreted as the URL of a
    tarball that will be downloaded and unpacked to a temporary
    location. The tarball must include a single top-level directory
    containing at least a file named <fo:inline font-family="monospace">default.nix</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3725" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--profile</fo:inline> / <fo:inline font-family="monospace">-p</fo:inline> <fo:inline font-style="italic" font-family="monospace">path</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Specifies the profile to be used by those
    operations that operate on a profile (designated below as the
    <fo:inline font-style="italic">active profile</fo:inline>).  A profile is a sequence of
    user environments called <fo:inline font-style="italic">generations</fo:inline>, one of
    which is the <fo:inline font-style="italic">current
    generation</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3735" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--dry-run</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">For the <fo:inline font-family="monospace">--install</fo:inline>,
    <fo:inline font-family="monospace">--upgrade</fo:inline>, <fo:inline font-family="monospace">--uninstall</fo:inline>,
    <fo:inline font-family="monospace">--switch-generation</fo:inline>,
    <fo:inline font-family="monospace">--delete-generations</fo:inline> and
    <fo:inline font-family="monospace">--rollback</fo:inline> operations, this flag will cause
    <fo:inline font-weight="bold">nix-env</fo:inline> to print what
    <fo:inline font-style="italic">would</fo:inline> be done if this flag had not been
    specified, without actually doing it.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">--dry-run</fo:inline> also prints out which paths will
    be <fo:basic-link internal-destination="gloss-substitute"><fo:inline>substituted</fo:inline></fo:basic-link> (i.e.,
    downloaded) and which paths will be built from source (because no
    substitute is available).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3751" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--system-filter</fo:inline> <fo:inline font-style="italic" font-family="monospace">system</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">By default, operations such as <fo:inline font-family="monospace">--query
    --available</fo:inline> show derivations matching any platform.  This
    option allows you to use derivations for the specified platform
    <fo:inline font-style="italic" font-family="monospace">system</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:list-block id="idm3759" provisional-distance-between-starts="22em * 0.60+1em" provisional-label-separation="1em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em"><fo:list-item id="idm3760" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--help</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Prints out a summary of the command syntax and
  exits.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3765" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--version</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Prints out the Nix version number on standard output
  and exits.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3770" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--verbose</fo:inline> / <fo:inline font-family="monospace">-v</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Increases the level of verbosity of diagnostic messages
  printed on standard error.  For each Nix operation, the information
  printed on standard output is well-defined; any diagnostic
  information is printed on standard error, never on standard
  output.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This option may be specified repeatedly.  Currently, the
  following verbosity levels exist:</fo:block><fo:list-block id="idm3777" provisional-distance-between-starts="1em * 0.60+1em" provisional-label-separation="1em"><fo:list-item id="idm3778" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline>0</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">âErrors onlyâ: only print messages
    explaining why the Nix invocation failed.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3782" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline>1</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">âInformationalâ: print
    <fo:inline font-style="italic">useful</fo:inline> messages about what Nix is doing.
    This is the default.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3787" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline>2</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">âTalkativeâ: print more informational
    messages.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3791" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline>3</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">âChattyâ: print even more
    informational messages.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3795" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline>4</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">âDebugâ: print debug
    information.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3799" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline>5</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">âVomitâ: print vast amounts of debug
    information.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3803" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--quiet</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Decreases the level of verbosity of diagnostic messages
  printed on standard error.  This is the inverse option to
  <fo:inline font-family="monospace">-v</fo:inline> / <fo:inline font-family="monospace">--verbose</fo:inline>.
  </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This option may be specified repeatedly.  See the previous
  verbosity levels list.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3811" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--no-build-output</fo:inline> / <fo:inline font-family="monospace">-Q</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">By default, output written by builders to standard
  output and standard error is echoed to the Nix command's standard
  error.  This option suppresses this behaviour.  Note that the
  builder's standard output and error are always written to a log file
  in
  <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">prefix</fo:inline>/nix/var/log/nix</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3819" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--max-jobs</fo:inline> / <fo:inline font-family="monospace">-j</fo:inline>
<fo:inline font-style="italic" font-family="monospace">number</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Sets the maximum number of build jobs that Nix will
  perform in parallel to the specified number.  Specify
  <fo:inline font-family="monospace">auto</fo:inline> to use the number of CPUs in the system.
  The default is specified by the <fo:basic-link internal-destination="conf-max-jobs"><fo:inline><fo:inline font-family="monospace">max-jobs</fo:inline></fo:inline></fo:basic-link>
  configuration setting, which itself defaults to
  <fo:inline font-family="monospace">1</fo:inline>.  A higher value is useful on SMP systems or to
  exploit I/O latency.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"> Setting it to <fo:inline font-family="monospace">0</fo:inline> disallows building on the local
  machine, which is useful when you want builds to happen only on remote
  builders.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3832" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--cores</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Sets the value of the <fo:inline font-family="monospace">NIX_BUILD_CORES</fo:inline>
  environment variable in the invocation of builders.  Builders can
  use this variable at their discretion to control the maximum amount
  of parallelism.  For instance, in Nixpkgs, if the derivation
  attribute <fo:inline font-family="monospace">enableParallelBuilding</fo:inline> is set to
  <fo:inline font-family="monospace">true</fo:inline>, the builder passes the
  <fo:inline font-family="monospace">-j<fo:inline font-style="italic" font-family="monospace">N</fo:inline></fo:inline> flag to GNU Make.
  It defaults to the value of the <fo:basic-link internal-destination="conf-cores"><fo:inline><fo:inline font-family="monospace">cores</fo:inline></fo:inline></fo:basic-link>
  configuration setting, if set, or <fo:inline font-family="monospace">1</fo:inline> otherwise.
  The value <fo:inline font-family="monospace">0</fo:inline> means that the builder should use all
  available CPU cores in the system.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3846" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--max-silent-time</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Sets the maximum number of seconds that a builder
  can go without producing any data on standard output or standard
  error.  The default is specified by the <fo:basic-link internal-destination="conf-max-silent-time"><fo:inline><fo:inline font-family="monospace">max-silent-time</fo:inline></fo:inline></fo:basic-link>
  configuration setting.  <fo:inline font-family="monospace">0</fo:inline> means no
  time-out.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3854" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--timeout</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Sets the maximum number of seconds that a builder
  can run.  The default is specified by the <fo:basic-link internal-destination="conf-timeout"><fo:inline><fo:inline font-family="monospace">timeout</fo:inline></fo:inline></fo:basic-link>
  configuration setting.  <fo:inline font-family="monospace">0</fo:inline> means no
  timeout.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3862" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--keep-going</fo:inline> / <fo:inline font-family="monospace">-k</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Keep going in case of failed builds, to the
  greatest extent possible.  That is, if building an input of some
  derivation fails, Nix will still build the other inputs, but not the
  derivation itself.  Without this option, Nix stops if any build
  fails (except for builds of substitutes), possibly killing builds in
  progress (in case of parallel or distributed builds).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3868" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--keep-failed</fo:inline> / <fo:inline font-family="monospace">-K</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Specifies that in case of a build failure, the
  temporary directory (usually in <fo:inline font-family="monospace">/tmp</fo:inline>) in which
  the build takes place should not be deleted.  The path of the build
  directory is printed as an informational message.
    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3875" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--fallback</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Whenever Nix attempts to build a derivation for which
  substitutes are known for each output path, but realising the output
  paths through the substitutes fails, fall back on building the
  derivation.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The most common scenario in which this is useful is when we
  have registered substitutes in order to perform binary distribution
  from, say, a network repository.  If the repository is down, the
  realisation of the derivation will fail.  When this option is
  specified, Nix will build the derivation instead.  Thus,
  installation from binaries falls back on installation from source.
  This option is not the default since it is generally not desirable
  for a transient failure in obtaining the substitutes to lead to a
  full build from source (with the related consumption of
  resources).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3881" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--no-build-hook</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Disables the build hook mechanism.  This allows to ignore remote
  builders if they are setup on the machine.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">It's useful in cases where the bandwidth between the client and the
  remote builder is too low.  In that case it can take more time to upload the
  sources to the remote builder and fetch back the result than to do the
  computation locally.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3887" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--readonly-mode</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">When this option is used, no attempt is made to open
  the Nix database.  Most Nix operations do need database access, so
  those operations will fail.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3892" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--arg</fo:inline> <fo:inline font-style="italic" font-family="monospace">name</fo:inline> <fo:inline font-style="italic" font-family="monospace">value</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This option is accepted by
  <fo:inline font-weight="bold">nix-env</fo:inline>, <fo:inline font-weight="bold">nix-instantiate</fo:inline> and
  <fo:inline font-weight="bold">nix-build</fo:inline>.  When evaluating Nix expressions, the
  expression evaluator will automatically try to call functions that
  it encounters.  It can automatically call functions for which every
  argument has a <fo:basic-link internal-destination="ss-functions"><fo:inline>default value</fo:inline></fo:basic-link>
  (e.g., <fo:inline font-family="monospace">{ <fo:inline font-style="italic" font-family="monospace">argName</fo:inline> ?
  <fo:inline font-style="italic" font-family="monospace">defaultValue</fo:inline> }:
  <fo:inline font-style="italic" font-family="monospace">...</fo:inline></fo:inline>).  With
  <fo:inline font-family="monospace">--arg</fo:inline>, you can also call functions that have
  arguments without a default value (or override a default value).
  That is, if the evaluator encounters a function with an argument
  named <fo:inline font-style="italic" font-family="monospace">name</fo:inline>, it will call it with value
  <fo:inline font-style="italic" font-family="monospace">value</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">For instance, the top-level <fo:inline font-family="monospace">default.nix</fo:inline> in
  Nixpkgs is actually a function:

<fo:block id="idm3912" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
{ # The system (e.g., `i686-linux') for which to build the packages.
  system ? builtins.currentSystem
  <fo:inline font-style="italic" font-family="monospace">...</fo:inline>
}: <fo:inline font-style="italic" font-family="monospace">...</fo:inline></fo:block>

  So if you call this Nix expression (e.g., when you do
  <fo:inline font-family="monospace">nix-env -i <fo:inline font-style="italic" font-family="monospace">pkgname</fo:inline></fo:inline>),
  the function will be called automatically using the value <fo:basic-link internal-destination="builtin-currentSystem"><fo:inline><fo:inline font-family="monospace">builtins.currentSystem</fo:inline></fo:inline></fo:basic-link>
  for the <fo:inline font-family="monospace">system</fo:inline> argument.  You can override this
  using <fo:inline font-family="monospace">--arg</fo:inline>, e.g., <fo:inline font-family="monospace">nix-env -i
  <fo:inline font-style="italic" font-family="monospace">pkgname</fo:inline> --arg system
  \"i686-freebsd\"</fo:inline>.  (Note that since the argument is a Nix
  string literal, you have to escape the quotes.)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3923" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--argstr</fo:inline> <fo:inline font-style="italic" font-family="monospace">name</fo:inline> <fo:inline font-style="italic" font-family="monospace">value</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This option is like <fo:inline font-family="monospace">--arg</fo:inline>, only the
  value is not a Nix expression but a string.  So instead of
  <fo:inline font-family="monospace">--arg system \"i686-linux\"</fo:inline> (the outer quotes are
  to keep the shell happy) you can say <fo:inline font-family="monospace">--argstr system
  i686-linux</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3933" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--attr</fo:inline> / <fo:inline font-family="monospace">-A</fo:inline>
<fo:inline font-style="italic" font-family="monospace">attrPath</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Select an attribute from the top-level Nix
  expression being evaluated.  (<fo:inline font-weight="bold">nix-env</fo:inline>,
  <fo:inline font-weight="bold">nix-instantiate</fo:inline>, <fo:inline font-weight="bold">nix-build</fo:inline> and
  <fo:inline font-weight="bold">nix-shell</fo:inline> only.)  The <fo:inline font-style="italic">attribute
  path</fo:inline> <fo:inline font-style="italic" font-family="monospace">attrPath</fo:inline> is a sequence of
  attribute names separated by dots.  For instance, given a top-level
  Nix expression <fo:inline font-style="italic" font-family="monospace">e</fo:inline>, the attribute path
  <fo:inline font-family="monospace">xorg.xorgserver</fo:inline> would cause the expression
  <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">e</fo:inline>.xorg.xorgserver</fo:inline> to
  be used.  See <fo:basic-link internal-destination="refsec-nix-env-install-examples"><fo:inline><fo:inline font-weight="bold">nix-env
  --install</fo:inline></fo:inline></fo:basic-link> for some concrete examples.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In addition to attribute names, you can also specify array
  indices.  For instance, the attribute path
  <fo:inline font-family="monospace">foo.3.bar</fo:inline> selects the <fo:inline font-family="monospace">bar</fo:inline>
  attribute of the fourth element of the array in the
  <fo:inline font-family="monospace">foo</fo:inline> attribute of the top-level
  expression.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3956" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--expr</fo:inline> / <fo:inline font-family="monospace">-E</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Interpret the command line arguments as a list of
  Nix expressions to be parsed and evaluated, rather than as a list
  of file names of Nix expressions.
  (<fo:inline font-weight="bold">nix-instantiate</fo:inline>, <fo:inline font-weight="bold">nix-build</fo:inline>
  and <fo:inline font-weight="bold">nix-shell</fo:inline> only.)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3965" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">-I</fo:inline> <fo:inline font-style="italic" font-family="monospace">path</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Add a path to the Nix expression search path.  This
  option may be given multiple times.  See the <fo:inline font-family="monospace">NIX_PATH</fo:inline> environment variable for
  information on the semantics of the Nix search path.  Paths added
  through <fo:inline font-family="monospace">-I</fo:inline> take precedence over
  <fo:inline font-family="monospace">NIX_PATH</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3974" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--option</fo:inline> <fo:inline font-style="italic" font-family="monospace">name</fo:inline> <fo:inline font-style="italic" font-family="monospace">value</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Set the Nix configuration option
  <fo:inline font-style="italic" font-family="monospace">name</fo:inline> to <fo:inline font-style="italic" font-family="monospace">value</fo:inline>.
  This overrides settings in the Nix configuration file (see
  nix.conf(5)).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm3986" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--repair</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Fix corrupted or missing store paths by
  redownloading or rebuilding them.  Note that this is slow because it
  requires computing a cryptographic hash of the contents of every
  path in the closure of the build.  Also note the warning under
  <fo:inline font-weight="bold">nix-store --repair-path</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="idm3992"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Files</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:list-block id="idm3994" provisional-distance-between-starts="14em * 0.60+1em" provisional-label-separation="1em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em"><fo:list-item id="idm3995" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">~/.nix-defexpr</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The source for the default Nix
    expressions used by the <fo:inline font-family="monospace">--install</fo:inline>,
    <fo:inline font-family="monospace">--upgrade</fo:inline>, and <fo:inline font-family="monospace">--query
    --available</fo:inline> operations to obtain derivations. The
    <fo:inline font-family="monospace">--file</fo:inline> option may be used to override this
    default.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If <fo:inline font-family="monospace">~/.nix-defexpr</fo:inline> is a file,
    it is loaded as a Nix expression. If the expression
    is a set, it is used as the default Nix expression.
    If the expression is a function, an empty set is passed
    as argument and the return value is used as
    the default Nix expression.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If <fo:inline font-family="monospace">~/.nix-defexpr</fo:inline> is a directory
    containing a <fo:inline font-family="monospace">default.nix</fo:inline> file, that file
    is loaded as in the above paragraph.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If <fo:inline font-family="monospace">~/.nix-defexpr</fo:inline> is a directory without
    a <fo:inline font-family="monospace">default.nix</fo:inline> file, then its contents
    (both files and subdirectories) are loaded as Nix expressions.
    The expressions are combined into a single set, each expression
    under an attribute with the same name as the original file
    or subdirectory.
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">For example, if <fo:inline font-family="monospace">~/.nix-defexpr</fo:inline> contains
    two files, <fo:inline font-family="monospace">foo.nix</fo:inline> and <fo:inline font-family="monospace">bar.nix</fo:inline>,
    then the default Nix expression will essentially be

<fo:block id="idm4016" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
{
  foo = import ~/.nix-defexpr/foo.nix;
  bar = import ~/.nix-defexpr/bar.nix;
}</fo:block>

    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The file <fo:inline font-family="monospace">manifest.nix</fo:inline> is always ignored.
    Subdirectories without a <fo:inline font-family="monospace">default.nix</fo:inline> file
    are traversed recursively in search of more Nix expressions,
    but the names of these intermediate directories are not
    added to the attribute paths of the default Nix expression.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The command <fo:inline font-weight="bold">nix-channel</fo:inline> places symlinks
    to the downloaded Nix expressions from each subscribed channel in
    this directory.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm4022" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">~/.nix-profile</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A symbolic link to the user's current profile.  By
    default, this symlink points to
    <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">prefix</fo:inline>/var/nix/profiles/default</fo:inline>.
    The <fo:inline font-family="monospace">PATH</fo:inline> environment variable should include
    <fo:inline font-family="monospace">~/.nix-profile/bin</fo:inline> for the user environment
    to be visible to the user.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="rsec-nix-env-install"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Operation <fo:inline font-family="monospace">--install</fo:inline></fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="idm4034"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Synopsis</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-env</fo:inline>  { <fo:inline font-family="monospace">--install</fo:inline>  |   <fo:inline font-family="monospace">-i</fo:inline> } [
    { <fo:inline font-family="monospace">--prebuilt-only</fo:inline>  |   <fo:inline font-family="monospace">-b</fo:inline> }
  ] [
    { <fo:inline font-family="monospace">--attr</fo:inline>  |   <fo:inline font-family="monospace">-A</fo:inline> }
  ] [<fo:inline font-family="monospace">--from-expression</fo:inline>] [<fo:inline font-family="monospace">-E</fo:inline>] [<fo:inline font-family="monospace">--from-profile</fo:inline> <fo:inline font-style="italic" font-family="monospace">path</fo:inline>] [ <fo:inline font-family="monospace">--preserve-installed</fo:inline>  |   <fo:inline font-family="monospace">-P</fo:inline> ] [ <fo:inline font-family="monospace">--remove-all</fo:inline>  |   <fo:inline font-family="monospace">-r</fo:inline> ]  <fo:inline font-style="italic" font-family="monospace">args</fo:inline>... </fo:block></fo:block><fo:block id="idm4074"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Description</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The install operation creates a new user environment, based on
the current generation of the active profile, to which a set of store
paths described by <fo:inline font-style="italic" font-family="monospace">args</fo:inline> is added.  The
arguments <fo:inline font-style="italic" font-family="monospace">args</fo:inline> map to store paths in a
number of possible ways:

<fo:list-block id="idm4079" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm4080" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">By default, <fo:inline font-style="italic" font-family="monospace">args</fo:inline> is a set
  of derivation names denoting derivations in the active Nix
  expression.  These are realised, and the resulting output paths are
  installed.  Currently installed derivations with a name equal to the
  name of a derivation being added are removed unless the option
  <fo:inline font-family="monospace">--preserve-installed</fo:inline> is
  specified.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If there are multiple derivations matching a name in
  <fo:inline font-style="italic" font-family="monospace">args</fo:inline> that have the same name (e.g.,
  <fo:inline font-family="monospace">gcc-3.3.6</fo:inline> and <fo:inline font-family="monospace">gcc-4.1.1</fo:inline>), then
  the derivation with the highest <fo:inline font-style="italic">priority</fo:inline> is
  used.  A derivation can define a priority by declaring the
  <fo:inline font-family="monospace">meta.priority</fo:inline> attribute.  This attribute should
  be a number, with a higher value denoting a lower priority.  The
  default priority is <fo:inline font-family="monospace">0</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If there are multiple matching derivations with the same
  priority, then the derivation with the highest version will be
  installed.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You can force the installation of multiple derivations with
  the same name by being specific about the versions.  For instance,
  <fo:inline font-family="monospace">nix-env -i gcc-3.3.6 gcc-4.1.1</fo:inline> will install both
  version of GCC (and will probably cause a user environment
  conflict!).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm4094" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If <fo:inline><fo:inline font-family="monospace">--attr</fo:inline></fo:inline>
  (<fo:inline font-family="monospace">-A</fo:inline>) is specified, the arguments are
  <fo:inline font-style="italic">attribute paths</fo:inline> that select attributes from the
  top-level Nix expression.  This is faster than using derivation
  names and unambiguous.  To find out the attribute paths of available
  packages, use <fo:inline font-family="monospace">nix-env -qaP</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm4101" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If <fo:inline font-family="monospace">--from-profile</fo:inline>
  <fo:inline font-style="italic" font-family="monospace">path</fo:inline> is given,
  <fo:inline font-style="italic" font-family="monospace">args</fo:inline> is a set of names denoting installed
  store paths in the profile <fo:inline font-style="italic" font-family="monospace">path</fo:inline>.  This is
  an easy way to copy user environment elements from one profile to
  another.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm4107" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If <fo:inline font-family="monospace">--from-expression</fo:inline> is given,
  <fo:inline font-style="italic" font-family="monospace">args</fo:inline> are Nix <fo:basic-link internal-destination="ss-functions"><fo:inline>functions</fo:inline></fo:basic-link> that are called with the
  active Nix expression as their single argument.  The derivations
  returned by those function calls are installed.  This allows
  derivations to be specified in an unambiguous way, which is necessary
  if there are multiple derivations with the same
  name.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm4112" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If <fo:inline font-style="italic" font-family="monospace">args</fo:inline> are store
  derivations, then these are <fo:basic-link internal-destination="rsec-nix-store-realise"><fo:inline>realised</fo:inline></fo:basic-link>, and the resulting
  output paths are installed.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm4116" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If <fo:inline font-style="italic" font-family="monospace">args</fo:inline> are store paths
  that are not store derivations, then these are <fo:basic-link internal-destination="rsec-nix-store-realise"><fo:inline>realised</fo:inline></fo:basic-link> and
  installed.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm4120" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">By default all outputs are installed for each derivation.
  That can be reduced by setting <fo:inline font-family="monospace">meta.outputsToInstall</fo:inline>.
  </fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block>

</fo:block></fo:block><fo:block id="idm4123"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Flags</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:list-block id="idm4125" provisional-distance-between-starts="22em * 0.60+1em" provisional-label-separation="1em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em"><fo:list-item id="idm4126" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--prebuilt-only</fo:inline> / <fo:inline font-family="monospace">-b</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Use only derivations for which a substitute is
    registered, i.e., there is a pre-built binary available that can
    be downloaded in lieu of building the derivation.  Thus, no
    packages will be built from source.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm4132" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--preserve-installed</fo:inline></fo:inline><fo:inline>, </fo:inline><fo:inline><fo:inline font-family="monospace">-P</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Do not remove derivations with a name matching one
    of the derivations being installed.  Usually, trying to have two
    versions of the same package installed in the same generation of a
    profile will lead to an error in building the generation, due to
    file name clashes between the two versions.  However, this is not
    the case for all packages.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm4139" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--remove-all</fo:inline></fo:inline><fo:inline>, </fo:inline><fo:inline><fo:inline font-family="monospace">-r</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Remove all previously installed packages first.
    This is equivalent to running <fo:inline font-family="monospace">nix-env -e '.*'</fo:inline>
    first, except that everything happens in a single
    transaction.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="refsec-nix-env-install-examples"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Examples</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To install a specific version of <fo:inline font-weight="bold">gcc</fo:inline> from the
active Nix expression:

<fo:block id="idm4151" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env --install gcc-3.3.2
installing `gcc-3.3.2'
uninstalling `gcc-3.1'</fo:block>

Note the previously installed version is removed, since
<fo:inline font-family="monospace">--preserve-installed</fo:inline> was not specified.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To install an arbitrary version:

<fo:block id="idm4154" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env --install gcc
installing `gcc-3.3.2'</fo:block>

</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To install using a specific attribute:

<fo:block id="idm4156" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env -i -A gcc40mips
$ nix-env -i -A xorg.xorgserver</fo:block>

</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To install all derivations in the Nix expression <fo:inline font-family="monospace">foo.nix</fo:inline>:

<fo:block id="idm4159" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env -f ~/foo.nix -i '.*'</fo:block>

</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To copy the store path with symbolic name <fo:inline font-family="monospace">gcc</fo:inline>
from another profile:

<fo:block id="idm4162" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env -i --from-profile /nix/var/nix/profiles/foo gcc</fo:block>

</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To install a specific store derivation (typically created by
<fo:inline font-weight="bold">nix-instantiate</fo:inline>):

<fo:block id="idm4165" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env -i /nix/store/fibjb1bfbpm5mrsxc4mh2d8n37sxh91i-gcc-3.4.3.drv</fo:block>

</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To install a specific output path:

<fo:block id="idm4167" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env -i /nix/store/y3cgx0xj1p4iv9x0pnnmdhr8iyg741vk-gcc-3.4.3</fo:block>

</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To install from a Nix expression specified on the command-line:

<fo:block id="idm4169" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env -f ./foo.nix -i -E \
    'f: (f {system = "i686-linux";}).subversionWithJava'</fo:block>

I.e., this evaluates to <fo:inline font-family="monospace">(f: (f {system =
"i686-linux";}).subversionWithJava) (import ./foo.nix)</fo:inline>, thus
selecting the <fo:inline font-family="monospace">subversionWithJava</fo:inline> attribute from the
set returned by calling the function defined in
<fo:inline font-family="monospace">./foo.nix</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A dry-run tells you which paths will be downloaded or built from
source:

<fo:block id="idm4174" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env -f '&lt;nixpkgs&gt;' -iA hello --dry-run
(dry run; not doing anything)
installing âhello-2.10â
these paths will be fetched (0.04 MiB download, 0.19 MiB unpacked):
  /nix/store/wkhdf9jinag5750mqlax6z2zbwhqb76n-hello-2.10
  <fo:inline font-style="italic" font-family="monospace">...</fo:inline></fo:block>

</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To install Firefox from the latest revision in the Nixpkgs/NixOS
14.12 channel:

<fo:block id="idm4177" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env -f https://github.com/NixOS/nixpkgs-channels/archive/nixos-14.12.tar.gz -iA firefox
</fo:block>

(The GitHub repository <fo:inline font-family="monospace">nixpkgs-channels</fo:inline> is updated
automatically from the main <fo:inline font-family="monospace">nixpkgs</fo:inline> repository
after certain tests have succeeded and binaries have been built and
uploaded to the binary cache at <fo:inline font-family="monospace">cache.nixos.org</fo:inline>.)</fo:block></fo:block></fo:block><fo:block id="rsec-nix-env-upgrade"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Operation <fo:inline font-family="monospace">--upgrade</fo:inline></fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="idm4184"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Synopsis</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-env</fo:inline>  { <fo:inline font-family="monospace">--upgrade</fo:inline>  |   <fo:inline font-family="monospace">-u</fo:inline> } [
    { <fo:inline font-family="monospace">--prebuilt-only</fo:inline>  |   <fo:inline font-family="monospace">-b</fo:inline> }
  ] [
    { <fo:inline font-family="monospace">--attr</fo:inline>  |   <fo:inline font-family="monospace">-A</fo:inline> }
  ] [<fo:inline font-family="monospace">--from-expression</fo:inline>] [<fo:inline font-family="monospace">-E</fo:inline>] [<fo:inline font-family="monospace">--from-profile</fo:inline> <fo:inline font-style="italic" font-family="monospace">path</fo:inline>] [ <fo:inline font-family="monospace">--lt</fo:inline>  |   <fo:inline font-family="monospace">--leq</fo:inline>  |   <fo:inline font-family="monospace">--eq</fo:inline>  |   <fo:inline font-family="monospace">--always</fo:inline> ]  <fo:inline font-style="italic" font-family="monospace">args</fo:inline>... </fo:block></fo:block><fo:block id="idm4223"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Description</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The upgrade operation creates a new user environment, based on
the current generation of the active profile, in which all store paths
are replaced for which there are newer versions in the set of paths
described by <fo:inline font-style="italic" font-family="monospace">args</fo:inline>.  Paths for which there
are no newer versions are left untouched; this is not an error.  It is
also not an error if an element of <fo:inline font-style="italic" font-family="monospace">args</fo:inline>
matches no installed derivations.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">For a description of how <fo:inline font-style="italic" font-family="monospace">args</fo:inline> is
mapped to a set of store paths, see <fo:basic-link internal-destination="rsec-nix-env-install"><fo:inline><fo:inline font-family="monospace">--install</fo:inline></fo:inline></fo:basic-link>.  If
<fo:inline font-style="italic" font-family="monospace">args</fo:inline> describes multiple store paths with
the same symbolic name, only the one with the highest version is
installed.</fo:block></fo:block><fo:block id="idm4233"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Flags</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:list-block id="idm4235" provisional-distance-between-starts="8em * 0.60+1em" provisional-label-separation="1em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em"><fo:list-item id="idm4236" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--lt</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Only upgrade a derivation to newer versions.  This
    is the default.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm4241" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--leq</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In addition to upgrading to newer versions, also
    âupgradeâ to derivations that have the same version.  Version are
    not a unique identification of a derivation, so there may be many
    derivations that have the same version.  This flag may be useful
    to force âsynchronisationâ between the installed and available
    derivations.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm4246" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--eq</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-style="italic">Only</fo:inline> âupgradeâ to derivations
    that have the same version.  This may not seem very useful, but it
    actually is, e.g., when there is a new release of Nixpkgs and you
    want to replace installed applications with the same versions
    built against newer dependencies (to reduce the number of
    dependencies floating around on your system).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm4252" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--always</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In addition to upgrading to newer versions, also
    âupgradeâ to derivations that have the same or a lower version.
    I.e., derivations may actually be downgraded depending on what is
    available in the active Nix expression.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">For the other flags, see <fo:inline font-family="monospace"><fo:basic-link internal-destination="rsec-nix-env-install">--install</fo:basic-link></fo:inline>.</fo:block></fo:block><fo:block id="idm4259"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Examples</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="idm4261" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env --upgrade gcc
upgrading `gcc-3.3.1' to `gcc-3.4'

$ nix-env -u gcc-3.3.2 --always <fo:inline font-style="italic">(switch to a specific version)</fo:inline>
upgrading `gcc-3.4' to `gcc-3.3.2'

$ nix-env --upgrade pan
<fo:inline font-style="italic">(no upgrades available, so nothing happens)</fo:inline>

$ nix-env -u <fo:inline font-style="italic">(try to upgrade everything)</fo:inline>
upgrading `hello-2.1.2' to `hello-2.1.3'
upgrading `mozilla-1.2' to `mozilla-1.4'</fo:block></fo:block><fo:block id="ssec-version-comparisons"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Versions</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The upgrade operation determines whether a derivation
<fo:inline font-family="monospace">y</fo:inline> is an upgrade of a derivation
<fo:inline font-family="monospace">x</fo:inline> by looking at their respective
<fo:inline font-family="monospace">name</fo:inline> attributes.  The names (e.g.,
<fo:inline font-family="monospace">gcc-3.3.1</fo:inline> are split into two parts: the package
name (<fo:inline font-family="monospace">gcc</fo:inline>), and the version
(<fo:inline font-family="monospace">3.3.1</fo:inline>).  The version part starts after the first
dash not followed by a letter.  <fo:inline font-family="monospace">x</fo:inline> is considered an
upgrade of <fo:inline font-family="monospace">y</fo:inline> if their package names match, and the
version of <fo:inline font-family="monospace">y</fo:inline> is higher that that of
<fo:inline font-family="monospace">x</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The versions are compared by splitting them into contiguous
components of numbers and letters.  E.g., <fo:inline font-family="monospace">3.3.1pre5</fo:inline>
is split into <fo:inline font-family="monospace">[3, 3, 1, "pre", 5]</fo:inline>.  These lists are
then compared lexicographically (from left to right).  Corresponding
components <fo:inline font-family="monospace">a</fo:inline> and <fo:inline font-family="monospace">b</fo:inline> are compared
as follows.  If they are both numbers, integer comparison is used.  If
<fo:inline font-family="monospace">a</fo:inline> is an empty string and <fo:inline font-family="monospace">b</fo:inline> is a
number, <fo:inline font-family="monospace">a</fo:inline> is considered less than
<fo:inline font-family="monospace">b</fo:inline>.  The special string component
<fo:inline font-family="monospace">pre</fo:inline> (for <fo:inline font-style="italic">pre-release</fo:inline>) is
considered to be less than other components.  String components are
considered less than number components.  Otherwise, they are compared
lexicographically (i.e., using case-sensitive string comparison).</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This is illustrated by the following examples:

<fo:block id="idm4290" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
1.0 &lt; 2.3
2.1 &lt; 2.3
2.3 = 2.3
2.5 &gt; 2.3
3.1 &gt; 2.3
2.3.1 &gt; 2.3
2.3.1 &gt; 2.3a
2.3pre1 &lt; 2.3
2.3pre3 &lt; 2.3pre12
2.3a &lt; 2.3c
2.3pre1 &lt; 2.3c
2.3pre1 &lt; 2.3q</fo:block>

</fo:block></fo:block></fo:block><fo:block id="idm4291"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Operation <fo:inline font-family="monospace">--uninstall</fo:inline></fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="idm4294"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Synopsis</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-env</fo:inline>  { <fo:inline font-family="monospace">--uninstall</fo:inline>  |   <fo:inline font-family="monospace">-e</fo:inline> }  <fo:inline font-style="italic" font-family="monospace">drvnames</fo:inline>... </fo:block></fo:block><fo:block id="idm4305"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Description</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The uninstall operation creates a new user environment, based on
the current generation of the active profile, from which the store
paths designated by the symbolic names
<fo:inline font-style="italic" font-family="monospace">names</fo:inline> are removed.</fo:block></fo:block><fo:block id="idm4309"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Examples</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="idm4311" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env --uninstall gcc
$ nix-env -e '.*' <fo:inline font-style="italic">(remove everything)</fo:inline></fo:block></fo:block></fo:block><fo:block id="rsec-nix-env-set"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Operation <fo:inline font-family="monospace">--set</fo:inline></fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="idm4316"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Synopsis</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-env</fo:inline>   <fo:inline font-family="monospace">--set</fo:inline>   <fo:inline font-style="italic" font-family="monospace">drvname</fo:inline> </fo:block></fo:block><fo:block id="idm4324"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Description</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The <fo:inline font-family="monospace">--set</fo:inline> operation modifies the current generation of a
profile so that it contains exactly the specified derivation, and nothing else.
</fo:block></fo:block><fo:block id="idm4328"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Examples</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
The following updates a profile such that its current generation will contain
just Firefox:

<fo:block id="idm4331" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env -p /nix/var/nix/profiles/browser --set firefox</fo:block>

</fo:block></fo:block></fo:block><fo:block id="rsec-nix-env-set-flag"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Operation <fo:inline font-family="monospace">--set-flag</fo:inline></fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="idm4335"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Synopsis</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-env</fo:inline>   <fo:inline font-family="monospace">--set-flag</fo:inline>   <fo:inline font-style="italic" font-family="monospace">name</fo:inline>   <fo:inline font-style="italic" font-family="monospace">value</fo:inline>   <fo:inline font-style="italic" font-family="monospace">drvnames</fo:inline>... </fo:block></fo:block><fo:block id="idm4347"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Description</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The <fo:inline font-family="monospace">--set-flag</fo:inline> operation allows meta attributes
of installed packages to be modified.  There are several attributes
that can be usefully modified, because they affect the behaviour of
<fo:inline font-weight="bold">nix-env</fo:inline> or the user environment build
script:

<fo:list-block id="idm4352" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm4353" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">priority</fo:inline> can be changed to
  resolve filename clashes.  The user environment build script uses
  the <fo:inline font-family="monospace">meta.priority</fo:inline> attribute of derivations to
  resolve filename collisions between packages.  Lower priority values
  denote a higher priority.  For instance, the GCC wrapper package and
  the Binutils package in Nixpkgs both have a file
  <fo:inline font-family="monospace">bin/ld</fo:inline>, so previously if you tried to install
  both you would get a collision.  Now, on the other hand, the GCC
  wrapper declares a higher priority than Binutils, so the formerâs
  <fo:inline font-family="monospace">bin/ld</fo:inline> is symlinked in the user
  environment.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm4359" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">keep</fo:inline> can be set to
  <fo:inline font-family="monospace">true</fo:inline> to prevent the package from being upgraded
  or replaced.  This is useful if you want to hang on to an older
  version of a package.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm4363" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">active</fo:inline> can be set to
  <fo:inline font-family="monospace">false</fo:inline> to âdisableâ the package.  That is, no
  symlinks will be generated to the files of the package, but it
  remains part of the profile (so it wonât be garbage-collected).  It
  can be set back to <fo:inline font-family="monospace">true</fo:inline> to re-enable the
  package.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block>

</fo:block></fo:block><fo:block id="idm4368"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Examples</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To prevent the currently installed Firefox from being upgraded:

<fo:block id="idm4371" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env --set-flag keep true firefox</fo:block>

After this, <fo:inline font-weight="bold">nix-env -u</fo:inline> will ignore Firefox.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To disable the currently installed Firefox, then install a new
Firefox while the old remains part of the profile:

<fo:block id="idm4374" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env -q
firefox-2.0.0.9 <fo:inline font-style="italic">(the current one)</fo:inline>

$ nix-env --preserve-installed -i firefox-2.0.0.11
installing `firefox-2.0.0.11'
building path(s) `/nix/store/myy0y59q3ig70dgq37jqwg1j0rsapzsl-user-environment'
collision between `/nix/store/<fo:inline font-style="italic" font-family="monospace">...</fo:inline>-firefox-2.0.0.11/bin/firefox'
  and `/nix/store/<fo:inline font-style="italic" font-family="monospace">...</fo:inline>-firefox-2.0.0.9/bin/firefox'.
<fo:inline font-style="italic">(i.e., canât have two active at the same time)</fo:inline>

$ nix-env --set-flag active false firefox
setting flag on `firefox-2.0.0.9'

$ nix-env --preserve-installed -i firefox-2.0.0.11
installing `firefox-2.0.0.11'

$ nix-env -q
firefox-2.0.0.11 <fo:inline font-style="italic">(the enabled one)</fo:inline>
firefox-2.0.0.9 <fo:inline font-style="italic">(the disabled one)</fo:inline></fo:block>

</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To make files from <fo:inline font-family="monospace">binutils</fo:inline> take precedence
over files from <fo:inline font-family="monospace">gcc</fo:inline>:

<fo:block id="idm4384" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env --set-flag priority 5 binutils
$ nix-env --set-flag priority 10 gcc</fo:block>

</fo:block></fo:block></fo:block><fo:block id="idm4385"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Operation <fo:inline font-family="monospace">--query</fo:inline></fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="idm4388"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Synopsis</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-env</fo:inline>  { <fo:inline font-family="monospace">--query</fo:inline>  |   <fo:inline font-family="monospace">-q</fo:inline> } [ <fo:inline font-family="monospace">--installed</fo:inline>  |   <fo:inline font-family="monospace">--available</fo:inline>  |   <fo:inline font-family="monospace">-a</fo:inline> ]<fo:block/> [
    { <fo:inline font-family="monospace">--status</fo:inline>  |   <fo:inline font-family="monospace">-s</fo:inline> }
  ] [
    { <fo:inline font-family="monospace">--attr-path</fo:inline>  |   <fo:inline font-family="monospace">-P</fo:inline> }
  ] [<fo:inline font-family="monospace">--no-name</fo:inline>] [
    { <fo:inline font-family="monospace">--compare-versions</fo:inline>  |   <fo:inline font-family="monospace">-c</fo:inline> }
  ] [<fo:inline font-family="monospace">--system</fo:inline>] [<fo:inline font-family="monospace">--drv-path</fo:inline>] [<fo:inline font-family="monospace">--out-path</fo:inline>] [<fo:inline font-family="monospace">--description</fo:inline>] [<fo:inline font-family="monospace">--meta</fo:inline>]<fo:block/> [<fo:inline font-family="monospace">--xml</fo:inline>] [<fo:inline font-family="monospace">--json</fo:inline>] [
    { <fo:inline font-family="monospace">--prebuilt-only</fo:inline>  |   <fo:inline font-family="monospace">-b</fo:inline> }
  ] [
    { <fo:inline font-family="monospace">--attr</fo:inline>  |   <fo:inline font-family="monospace">-A</fo:inline> }
    <fo:inline font-style="italic" font-family="monospace">attribute-path</fo:inline>
  ]<fo:block/>  <fo:inline font-style="italic" font-family="monospace">names</fo:inline>... </fo:block></fo:block><fo:block id="idm4456"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Description</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The query operation displays information about either the store
paths that are installed in the current generation of the active
profile (<fo:inline font-family="monospace">--installed</fo:inline>), or the derivations that are
available for installation in the active Nix expression
(<fo:inline font-family="monospace">--available</fo:inline>).  It only prints information about
derivations whose symbolic name matches one of
<fo:inline font-style="italic" font-family="monospace">names</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The derivations are sorted by their <fo:inline font-family="monospace">name</fo:inline>
attributes.</fo:block></fo:block><fo:block id="idm4464"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Source selection</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The following flags specify the set of things on which the query
operates.</fo:block><fo:list-block id="idm4467" provisional-distance-between-starts="13em * 0.60+1em" provisional-label-separation="1em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em"><fo:list-item id="idm4468" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--installed</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The query operates on the store paths that are
    installed in the current generation of the active profile.  This
    is the default.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm4473" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--available</fo:inline></fo:inline><fo:inline>, </fo:inline><fo:inline><fo:inline font-family="monospace">-a</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The query operates on the derivations that are
    available in the active Nix expression.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="idm4480"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Queries</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The following flags specify what information to display about
the selected derivations.  Multiple flags may be specified, in which
case the information is shown in the order given here.  Note that the
name of the derivation is shown unless <fo:inline font-family="monospace">--no-name</fo:inline> is
specified.</fo:block><fo:list-block id="idm4484" provisional-distance-between-starts="24em * 0.60+1em" provisional-label-separation="1em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em"><fo:list-item id="idm4485" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--xml</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Print the result in an XML representation suitable
    for automatic processing by other tools.  The root element is
    called <fo:inline font-family="monospace">items</fo:inline>, which contains a
    <fo:inline font-family="monospace">item</fo:inline> element for each available or installed
    derivation.  The fields discussed below are all stored in
    attributes of the <fo:inline font-family="monospace">item</fo:inline>
    elements.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm4493" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--json</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Print the result in a JSON representation suitable
    for automatic processing by other tools.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm4498" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--prebuilt-only</fo:inline> / <fo:inline font-family="monospace">-b</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Show only derivations for which a substitute is
    registered, i.e., there is a pre-built binary available that can
    be downloaded in lieu of building the derivation.  Thus, this
    shows all packages that probably can be installed
    quickly.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm4504" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--status</fo:inline></fo:inline><fo:inline>, </fo:inline><fo:inline><fo:inline font-family="monospace">-s</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Print the <fo:inline font-style="italic">status</fo:inline> of the
    derivation.  The status consists of three characters.  The first
    is <fo:inline font-family="monospace">I</fo:inline> or <fo:inline font-family="monospace">-</fo:inline>, indicating
    whether the derivation is currently installed in the current
    generation of the active profile.  This is by definition the case
    for <fo:inline font-family="monospace">--installed</fo:inline>, but not for
    <fo:inline font-family="monospace">--available</fo:inline>.  The second is <fo:inline font-family="monospace">P</fo:inline>
    or <fo:inline font-family="monospace">-</fo:inline>, indicating whether the derivation is
    present on the system.  This indicates whether installation of an
    available derivation will require the derivation to be built.  The
    third is <fo:inline font-family="monospace">S</fo:inline> or <fo:inline font-family="monospace">-</fo:inline>, indicating
    whether a substitute is available for the
    derivation.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm4520" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--attr-path</fo:inline></fo:inline><fo:inline>, </fo:inline><fo:inline><fo:inline font-family="monospace">-P</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Print the <fo:inline font-style="italic">attribute path</fo:inline> of
    the derivation, which can be used to unambiguously select it using
    the <fo:inline><fo:inline font-family="monospace">--attr</fo:inline> option</fo:inline>
    available in commands that install derivations like
    <fo:inline font-family="monospace">nix-env --install</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm4531" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--no-name</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Suppress printing of the <fo:inline font-family="monospace">name</fo:inline>
    attribute of each derivation.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm4537" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--compare-versions</fo:inline> /
  <fo:inline font-family="monospace">-c</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Compare installed versions to available versions,
    or vice versa (if <fo:inline font-family="monospace">--available</fo:inline> is given).  This is
    useful for quickly seeing whether upgrades for installed
    packages are available in a Nix expression.  A column is added
    with the following meaning:

    <fo:list-block id="idm4544" provisional-distance-between-starts="9em * 0.60+1em" provisional-label-separation="1em"><fo:list-item id="idm4545" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">&lt;</fo:inline> <fo:inline font-style="italic" font-family="monospace">version</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A newer version of the package is available
        or installed.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm4551" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">=</fo:inline> <fo:inline font-style="italic" font-family="monospace">version</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">At most the same version of the package is
        available or installed.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm4557" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">&gt;</fo:inline> <fo:inline font-style="italic" font-family="monospace">version</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Only older versions of the package are
        available or installed.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm4563" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">- ?</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">No version of the package is available or
        installed.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block>

    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm4568" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--system</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Print the <fo:inline font-family="monospace">system</fo:inline> attribute of
    the derivation.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm4574" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--drv-path</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Print the path of the store
    derivation.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm4579" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--out-path</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Print the output path of the
    derivation.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm4584" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--description</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Print a short (one-line) description of the
    derivation, if available.  The description is taken from the
    <fo:inline font-family="monospace">meta.description</fo:inline> attribute of the
    derivation.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm4590" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--meta</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Print all of the meta-attributes of the
    derivation.  This option is only available with
    <fo:inline font-family="monospace">--xml</fo:inline> or <fo:inline font-family="monospace">--json</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="idm4597"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Examples</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To show installed packages:

<fo:block id="idm4600" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env -q
bison-1.875c
docbook-xml-4.2
firefox-1.0.4
MPlayer-1.0pre7
ORBit2-2.8.3
<fo:inline font-style="italic" font-family="monospace">â¦</fo:inline>
</fo:block>

</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To show available packages:

<fo:block id="idm4603" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env -qa
firefox-1.0.7
GConf-2.4.0.1
MPlayer-1.0pre7
ORBit2-2.8.3
<fo:inline font-style="italic" font-family="monospace">â¦</fo:inline>
</fo:block>

</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To show the status of available packages:

<fo:block id="idm4606" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env -qas
-P- firefox-1.0.7   <fo:inline font-style="italic">(not installed but present)</fo:inline>
--S GConf-2.4.0.1   <fo:inline font-style="italic">(not present, but there is a substitute for fast installation)</fo:inline>
--S MPlayer-1.0pre3 <fo:inline font-style="italic">(i.e., this is not the installed MPlayer, even though the version is the same!)</fo:inline>
IP- ORBit2-2.8.3    <fo:inline font-style="italic">(installed and by definition present)</fo:inline>
<fo:inline font-style="italic" font-family="monospace">â¦</fo:inline>
</fo:block>

</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To show available packages in the Nix expression <fo:inline font-family="monospace">foo.nix</fo:inline>:

<fo:block id="idm4614" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env -f ./foo.nix -qa
foo-1.2.3
</fo:block>

</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To compare installed versions to whatâs available:

<fo:block id="idm4616" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env -qc
<fo:inline font-style="italic" font-family="monospace">...</fo:inline>
acrobat-reader-7.0 - ?      <fo:inline font-style="italic">(package is not available at all)</fo:inline>
autoconf-2.59      = 2.59   <fo:inline font-style="italic">(same version)</fo:inline>
firefox-1.0.4      &lt; 1.0.7  <fo:inline font-style="italic">(a more recent version is available)</fo:inline>
<fo:inline font-style="italic" font-family="monospace">...</fo:inline>
</fo:block>

</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To show all packages with â<fo:inline font-family="monospace">zip</fo:inline>â in the name:

<fo:block id="idm4624" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env -qa '.*zip.*'
bzip2-1.0.6
gzip-1.6
zip-3.0
<fo:inline font-style="italic" font-family="monospace">â¦</fo:inline>
</fo:block>

</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To show all packages with â<fo:inline font-family="monospace">firefox</fo:inline>â or
â<fo:inline font-family="monospace">chromium</fo:inline>â in the name:

<fo:block id="idm4629" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env -qa '.*(firefox|chromium).*'
chromium-37.0.2062.94
chromium-beta-38.0.2125.24
firefox-32.0.3
firefox-with-plugins-13.0.1
<fo:inline font-style="italic" font-family="monospace">â¦</fo:inline>
</fo:block>

</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To show all packages in the latest revision of the Nixpkgs
repository:

<fo:block id="idm4632" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env -f https://github.com/NixOS/nixpkgs/archive/master.tar.gz -qa
</fo:block>

</fo:block></fo:block></fo:block><fo:block id="idm4633"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Operation <fo:inline font-family="monospace">--switch-profile</fo:inline></fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="idm4636"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Synopsis</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-env</fo:inline>  { <fo:inline font-family="monospace">--switch-profile</fo:inline>  |   <fo:inline font-family="monospace">-S</fo:inline> } {<fo:inline font-style="italic" font-family="monospace">path</fo:inline>}</fo:block></fo:block><fo:block id="idm4647"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Description</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This operation makes <fo:inline font-style="italic" font-family="monospace">path</fo:inline> the current
profile for the user.  That is, the symlink
<fo:inline font-family="monospace">~/.nix-profile</fo:inline> is made to point to
<fo:inline font-style="italic" font-family="monospace">path</fo:inline>.</fo:block></fo:block><fo:block id="idm4653"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Examples</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="idm4655" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env -S ~/my-profile</fo:block></fo:block></fo:block><fo:block id="idm4656"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Operation <fo:inline font-family="monospace">--list-generations</fo:inline></fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="idm4659"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Synopsis</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-env</fo:inline>   <fo:inline font-family="monospace">--list-generations</fo:inline> </fo:block></fo:block><fo:block id="idm4665"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Description</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This operation print a list of all the currently existing
generations for the active profile.  These may be switched to using
the <fo:inline font-family="monospace">--switch-generation</fo:inline> operation.  It also prints
the creation date of the generation, and indicates the current
generation.</fo:block></fo:block><fo:block id="idm4669"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Examples</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="idm4671" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env --list-generations
  95   2004-02-06 11:48:24
  96   2004-02-06 11:49:01
  97   2004-02-06 16:22:45
  98   2004-02-06 16:24:33   (current)</fo:block></fo:block></fo:block><fo:block id="idm4672"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Operation <fo:inline font-family="monospace">--delete-generations</fo:inline></fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="idm4675"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Synopsis</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-env</fo:inline>   <fo:inline font-family="monospace">--delete-generations</fo:inline>   <fo:inline font-style="italic" font-family="monospace">generations</fo:inline>... </fo:block></fo:block><fo:block id="idm4683"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Description</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This operation deletes the specified generations of the current
profile.  The generations can be a list of generation numbers, the
special value <fo:inline font-family="monospace">old</fo:inline> to delete all non-current
generations,  a value such as <fo:inline font-family="monospace">30d</fo:inline> to delete all
generations older than the specified number of days (except for the
generation that was active at that point in time), or a value such as
<fo:inline font-family="monospace">+5</fo:inline> to keep the last <fo:inline font-family="monospace">5</fo:inline> generations
ignoring any newer than current, e.g., if <fo:inline font-family="monospace">30</fo:inline> is the current
generation <fo:inline font-family="monospace">+5</fo:inline> will delete generation <fo:inline font-family="monospace">25</fo:inline>
and all older generations.
Periodically deleting old generations is important to make garbage collection
effective.</fo:block></fo:block><fo:block id="idm4693"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Examples</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="idm4695" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env --delete-generations 3 4 8

$ nix-env --delete-generations +5

$ nix-env --delete-generations 30d

$ nix-env -p other_profile --delete-generations old</fo:block></fo:block></fo:block><fo:block id="idm4696"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Operation <fo:inline font-family="monospace">--switch-generation</fo:inline></fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="idm4699"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Synopsis</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-env</fo:inline>  { <fo:inline font-family="monospace">--switch-generation</fo:inline>  |   <fo:inline font-family="monospace">-G</fo:inline> } {<fo:inline font-style="italic" font-family="monospace">generation</fo:inline>}</fo:block></fo:block><fo:block id="idm4710"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Description</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This operation makes generation number
<fo:inline font-style="italic" font-family="monospace">generation</fo:inline> the current generation of the
active profile.  That is, if the
<fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">profile</fo:inline></fo:inline> is the path to
the active profile, then the symlink
<fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">profile</fo:inline></fo:inline> is made to
point to
<fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">profile</fo:inline>-<fo:inline font-style="italic" font-family="monospace">generation</fo:inline>-link</fo:inline>,
which is in turn a symlink to the actual user environment in the Nix
store.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Switching will fail if the specified generation does not exist.</fo:block></fo:block><fo:block id="idm4722"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Examples</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="idm4724" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env -G 42
switching from generation 50 to 42</fo:block></fo:block></fo:block><fo:block id="idm4725"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Operation <fo:inline font-family="monospace">--rollback</fo:inline></fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="idm4728"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Synopsis</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-env</fo:inline>   <fo:inline font-family="monospace">--rollback</fo:inline> </fo:block></fo:block><fo:block id="idm4734"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Description</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This operation switches to the âpreviousâ generation of the
active profile, that is, the highest numbered generation lower than
the current generation, if it exists.  It is just a convenience
wrapper around <fo:inline font-family="monospace">--list-generations</fo:inline> and
<fo:inline font-family="monospace">--switch-generation</fo:inline>.</fo:block></fo:block><fo:block id="idm4739"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Examples</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="idm4741" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env --rollback
switching from generation 92 to 91

$ nix-env --rollback
error: no generation older than the current (91) exists</fo:block></fo:block></fo:block><fo:block id="idm4742"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Environment variables</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:list-block id="idm4744" provisional-distance-between-starts="24em * 0.60+1em" provisional-label-separation="1em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em"><fo:list-item id="idm4745" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_PROFILE</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Location of the Nix profile.  Defaults to the
    target of the symlink <fo:inline font-family="monospace">~/.nix-profile</fo:inline>, if it
    exists, or <fo:inline font-family="monospace">/nix/var/nix/profiles/default</fo:inline>
    otherwise.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm4752" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">IN_NIX_SHELL</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Indicator that tells if the current environment was set up by
  <fo:inline font-weight="bold">nix-shell</fo:inline>.  Since Nix 2.0 the values are
  <fo:inline font-family="monospace">"pure"</fo:inline> and <fo:inline font-family="monospace">"impure"</fo:inline></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm4760" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_PATH</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A colon-separated list of directories used to look up Nix
    expressions enclosed in angle brackets (i.e.,
    <fo:inline font-family="monospace">&lt;<fo:inline font-style="italic" font-family="monospace">path</fo:inline>&gt;</fo:inline>).  For
    instance, the value

    <fo:block id="idm4767" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
/home/eelco/Dev:/etc/nixos</fo:block>

    will cause Nix to look for paths relative to
    <fo:inline font-family="monospace">/home/eelco/Dev</fo:inline> and
    <fo:inline font-family="monospace">/etc/nixos</fo:inline>, in that order.  It is also
    possible to match paths against a prefix.  For example, the value

    <fo:block id="idm4770" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
nixpkgs=/home/eelco/Dev/nixpkgs-branch:/etc/nixos</fo:block>

    will cause Nix to search for
    <fo:inline font-family="monospace">&lt;nixpkgs/<fo:inline font-style="italic" font-family="monospace">path</fo:inline>&gt;</fo:inline> in
    <fo:inline font-family="monospace">/home/eelco/Dev/nixpkgs-branch/<fo:inline font-style="italic" font-family="monospace">path</fo:inline></fo:inline>
    and
    <fo:inline font-family="monospace">/etc/nixos/nixpkgs/<fo:inline font-style="italic" font-family="monospace">path</fo:inline></fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If a path in the Nix search path starts with
    <fo:inline font-family="monospace">http://</fo:inline> or <fo:inline font-family="monospace">https://</fo:inline>, it is
    interpreted as the URL of a tarball that will be downloaded and
    unpacked to a temporary location. The tarball must consist of a
    single top-level directory. For example, setting
    <fo:inline font-family="monospace">NIX_PATH</fo:inline> to

    <fo:block id="idm4781" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
nixpkgs=https://github.com/NixOS/nixpkgs-channels/archive/nixos-15.09.tar.gz</fo:block>

    tells Nix to download the latest revision in the Nixpkgs/NixOS
    15.09 channel.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A following shorthand can be used to refer to the official channels:
    
    <fo:block id="idm4783" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">nixpkgs=channel:nixos-15.09</fo:block>
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The search path can be extended using the <fo:inline font-family="monospace">-I</fo:inline> option, which takes precedence over
    <fo:inline font-family="monospace">NIX_PATH</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm4787" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_IGNORE_SYMLINK_STORE</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Normally, the Nix store directory (typically
  <fo:inline font-family="monospace">/nix/store</fo:inline>) is not allowed to contain any
  symlink components.  This is to prevent âimpureâ builds.  Builders
  sometimes âcanonicaliseâ paths by resolving all symlink components.
  Thus, builds on different machines (with
  <fo:inline font-family="monospace">/nix/store</fo:inline> resolving to different locations)
  could yield different results.  This is generally not a problem,
  except when builds are deployed to machines where
  <fo:inline font-family="monospace">/nix/store</fo:inline> resolves differently.  If you are
  sure that youâre not going to do that, you can set
  <fo:inline font-family="monospace">NIX_IGNORE_SYMLINK_STORE</fo:inline> to <fo:inline font-family="monospace">1</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Note that if youâre symlinking the Nix store so that you can
  put it on another file system than the root file system, on Linux
  youâre better off using <fo:inline font-family="monospace">bind</fo:inline> mount points, e.g.,

  <fo:block id="idm4799" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ mkdir /nix
$ mount -o bind /mnt/otherdisk/nix /nix</fo:block>

  Consult the mount(8) manual page for details.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm4803" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_STORE_DIR</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Overrides the location of the Nix store (default
  <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">prefix</fo:inline>/store</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm4810" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_DATA_DIR</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Overrides the location of the Nix static data
  directory (default
  <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">prefix</fo:inline>/share</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm4817" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_LOG_DIR</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Overrides the location of the Nix log directory
  (default <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">prefix</fo:inline>/var/log/nix</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm4824" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_STATE_DIR</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Overrides the location of the Nix state directory
  (default <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">prefix</fo:inline>/var/nix</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm4831" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_CONF_DIR</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Overrides the location of the Nix configuration
  directory (default
  <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">prefix</fo:inline>/etc/nix</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm4838" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">TMPDIR</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Use the specified directory to store temporary
  files.  In particular, this includes temporary build directories;
  these can take up substantial amounts of disk space.  The default is
  <fo:inline font-family="monospace">/tmp</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm4844" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_REMOTE</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This variable should be set to
  <fo:inline font-family="monospace">daemon</fo:inline> if you want to use the Nix daemon to
  execute Nix operations. This is necessary in <fo:basic-link internal-destination="ssec-multi-user"><fo:inline>multi-user Nix installations</fo:inline></fo:basic-link>.
  If the Nix daemon's Unix socket is at some non-standard path,
  this variable should be set to <fo:inline font-family="monospace">unix://path/to/socket</fo:inline>.
  Otherwise, it should be left unset.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm4852" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_SHOW_STATS</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If set to <fo:inline font-family="monospace">1</fo:inline>, Nix will print some
  evaluation statistics, such as the number of values
  allocated.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm4858" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_COUNT_CALLS</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If set to <fo:inline font-family="monospace">1</fo:inline>, Nix will print how
  often functions were called during Nix expression evaluation.  This
  is useful for profiling your Nix expressions.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm4864" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">GC_INITIAL_HEAP_SIZE</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If Nix has been configured to use the Boehm garbage
  collector, this variable sets the initial size of the heap in bytes.
  It defaults to 384 MiB.  Setting it to a low value reduces memory
  consumption, but will increase runtime due to the overhead of
  garbage collection.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block></fo:block></fo:block><fo:block break-before="page"><fo:block id="sec-nix-build"><fo:block id="idm4875"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Name</fo:block></fo:block></fo:block></fo:block><fo:block space-after="1em">nix-build <fo:inline font-family="serif,Symbol,ZapfDingbats">â</fo:inline> build a Nix expression</fo:block></fo:block><fo:block id="idm4878"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Synopsis</fo:block></fo:block></fo:block></fo:block><fo:block/><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-build</fo:inline>  [<fo:inline font-family="monospace">--help</fo:inline>] [<fo:inline font-family="monospace">--version</fo:inline>] [
  { <fo:inline font-family="monospace">--verbose</fo:inline>  |   <fo:inline font-family="monospace">-v</fo:inline> }
...] [
   <fo:inline font-family="monospace">--quiet</fo:inline> 
] [
    <fo:inline font-family="monospace">--no-build-output</fo:inline>  |   <fo:inline font-family="monospace">-Q</fo:inline>  
] [
  { <fo:inline font-family="monospace">--max-jobs</fo:inline>  |   <fo:inline font-family="monospace">-j</fo:inline> }
  <fo:inline font-style="italic" font-family="monospace">number</fo:inline>
] [
  <fo:inline font-family="monospace">--cores</fo:inline>
  <fo:inline font-style="italic" font-family="monospace">number</fo:inline>
] [
  <fo:inline font-family="monospace">--max-silent-time</fo:inline>
  <fo:inline font-style="italic" font-family="monospace">number</fo:inline>
] [
  <fo:inline font-family="monospace">--timeout</fo:inline>
  <fo:inline font-style="italic" font-family="monospace">number</fo:inline>
] [
    <fo:inline font-family="monospace">--keep-going</fo:inline>  |   <fo:inline font-family="monospace">-k</fo:inline>  
] [
    <fo:inline font-family="monospace">--keep-failed</fo:inline>  |   <fo:inline font-family="monospace">-K</fo:inline>  
] [<fo:inline font-family="monospace">--fallback</fo:inline>] [<fo:inline font-family="monospace">--readonly-mode</fo:inline>] [
  <fo:inline font-family="monospace">-I</fo:inline>
  <fo:inline font-style="italic" font-family="monospace">path</fo:inline>
] [
  <fo:inline font-family="monospace">--option</fo:inline>
  <fo:inline font-style="italic" font-family="monospace">name</fo:inline>
  <fo:inline font-style="italic" font-family="monospace">value</fo:inline>
]<fo:block/> [<fo:inline font-family="monospace">--arg</fo:inline> <fo:inline font-style="italic" font-family="monospace">name</fo:inline> <fo:inline font-style="italic" font-family="monospace">value</fo:inline>] [<fo:inline font-family="monospace">--argstr</fo:inline> <fo:inline font-style="italic" font-family="monospace">name</fo:inline> <fo:inline font-style="italic" font-family="monospace">value</fo:inline>] [
      { <fo:inline font-family="monospace">--attr</fo:inline>  |   <fo:inline font-family="monospace">-A</fo:inline> }
      <fo:inline font-style="italic" font-family="monospace">attrPath</fo:inline>
    ] [<fo:inline font-family="monospace">--no-out-link</fo:inline>] [<fo:inline font-family="monospace">--dry-run</fo:inline>] [
      { <fo:inline font-family="monospace">--out-link</fo:inline>  |   <fo:inline font-family="monospace">-o</fo:inline> }
      <fo:inline font-style="italic" font-family="monospace">outlink</fo:inline>
    ]  <fo:inline font-style="italic" font-family="monospace">paths</fo:inline>... </fo:block></fo:block><fo:block id="idm4968"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Description</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The <fo:inline font-weight="bold">nix-build</fo:inline> command builds the derivations
described by the Nix expressions in <fo:inline font-style="italic" font-family="monospace">paths</fo:inline>.
If the build succeeds, it places a symlink to the result in the
current directory.  The symlink is called <fo:inline font-family="monospace">result</fo:inline>.
If there are multiple Nix expressions, or the Nix expressions evaluate
to multiple derivations, multiple sequentially numbered symlinks are
created (<fo:inline font-family="monospace">result</fo:inline>, <fo:inline font-family="monospace">result-2</fo:inline>,
and so on).</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If no <fo:inline font-style="italic" font-family="monospace">paths</fo:inline> are specified, then
<fo:inline font-weight="bold">nix-build</fo:inline> will use <fo:inline font-family="monospace">default.nix</fo:inline>
in the current directory, if it exists.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If an element of <fo:inline font-style="italic" font-family="monospace">paths</fo:inline> starts with
<fo:inline font-family="monospace">http://</fo:inline> or <fo:inline font-family="monospace">https://</fo:inline>, it is
interpreted as the URL of a tarball that will be downloaded and
unpacked to a temporary location. The tarball must include a single
top-level directory containing at least a file named
<fo:inline font-family="monospace">default.nix</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-build</fo:inline> is essentially a wrapper around
<fo:basic-link internal-destination="sec-nix-instantiate"><fo:inline><fo:inline font-weight="bold">nix-instantiate</fo:inline></fo:inline></fo:basic-link>
(to translate a high-level Nix expression to a low-level store
derivation) and <fo:basic-link internal-destination="rsec-nix-store-realise"><fo:inline><fo:inline font-weight="bold">nix-store
--realise</fo:inline></fo:inline></fo:basic-link> (to build the store derivation).</fo:block><fo:block id="idm4991" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" margin-left="0.25in" margin-right="0.25in"><fo:block keep-with-next.within-column="always" font-size="14pt" font-weight="bold" hyphenate="false">Warning</fo:block><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The result of the build is automatically registered as
a root of the Nix garbage collector.  This root disappears
automatically when the <fo:inline font-family="monospace">result</fo:inline> symlink is deleted
or renamed.  So donât rename the symlink.</fo:block></fo:block></fo:block></fo:block><fo:block id="idm4994"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Options</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">All options not listed here are passed to <fo:inline font-weight="bold">nix-store
--realise</fo:inline>, except for <fo:inline font-family="monospace">--arg</fo:inline> and
<fo:inline font-family="monospace">--attr</fo:inline> / <fo:inline font-family="monospace">-A</fo:inline> which are passed to
<fo:inline font-weight="bold">nix-instantiate</fo:inline>.  <fo:inline>See
also <fo:basic-link internal-destination="sec-common-options"><fo:inline>ChapterÂ 20, <fo:inline font-style="italic">Common Options</fo:inline></fo:inline></fo:basic-link>.</fo:inline></fo:block><fo:list-block id="idm5004" provisional-distance-between-starts="24em * 0.60+1em" provisional-label-separation="1em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em"><fo:list-item id="idm5005" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--no-out-link</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Do not create a symlink to the output path.  Note
    that as a result the output does not become a root of the garbage
    collector, and so might be deleted by <fo:inline font-weight="bold">nix-store
    --gc</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5011" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--dry-run</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Show what store paths would be built or downloaded</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="opt-out-link" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--out-link</fo:inline> /
  <fo:inline font-family="monospace">-o</fo:inline> <fo:inline font-style="italic" font-family="monospace">outlink</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Change the name of the symlink to the output path
    created from <fo:inline font-family="monospace">result</fo:inline> to
    <fo:inline font-style="italic" font-family="monospace">outlink</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The following common options are supported:</fo:block><fo:list-block id="idm5026" provisional-distance-between-starts="22em * 0.60+1em" provisional-label-separation="1em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em"><fo:list-item id="idm5027" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--help</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Prints out a summary of the command syntax and
  exits.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5032" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--version</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Prints out the Nix version number on standard output
  and exits.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5037" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--verbose</fo:inline> / <fo:inline font-family="monospace">-v</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Increases the level of verbosity of diagnostic messages
  printed on standard error.  For each Nix operation, the information
  printed on standard output is well-defined; any diagnostic
  information is printed on standard error, never on standard
  output.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This option may be specified repeatedly.  Currently, the
  following verbosity levels exist:</fo:block><fo:list-block id="idm5044" provisional-distance-between-starts="1em * 0.60+1em" provisional-label-separation="1em"><fo:list-item id="idm5045" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline>0</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">âErrors onlyâ: only print messages
    explaining why the Nix invocation failed.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5049" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline>1</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">âInformationalâ: print
    <fo:inline font-style="italic">useful</fo:inline> messages about what Nix is doing.
    This is the default.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5054" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline>2</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">âTalkativeâ: print more informational
    messages.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5058" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline>3</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">âChattyâ: print even more
    informational messages.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5062" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline>4</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">âDebugâ: print debug
    information.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5066" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline>5</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">âVomitâ: print vast amounts of debug
    information.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5070" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--quiet</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Decreases the level of verbosity of diagnostic messages
  printed on standard error.  This is the inverse option to
  <fo:inline font-family="monospace">-v</fo:inline> / <fo:inline font-family="monospace">--verbose</fo:inline>.
  </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This option may be specified repeatedly.  See the previous
  verbosity levels list.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5078" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--no-build-output</fo:inline> / <fo:inline font-family="monospace">-Q</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">By default, output written by builders to standard
  output and standard error is echoed to the Nix command's standard
  error.  This option suppresses this behaviour.  Note that the
  builder's standard output and error are always written to a log file
  in
  <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">prefix</fo:inline>/nix/var/log/nix</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5086" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--max-jobs</fo:inline> / <fo:inline font-family="monospace">-j</fo:inline>
<fo:inline font-style="italic" font-family="monospace">number</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Sets the maximum number of build jobs that Nix will
  perform in parallel to the specified number.  Specify
  <fo:inline font-family="monospace">auto</fo:inline> to use the number of CPUs in the system.
  The default is specified by the <fo:basic-link internal-destination="conf-max-jobs"><fo:inline><fo:inline font-family="monospace">max-jobs</fo:inline></fo:inline></fo:basic-link>
  configuration setting, which itself defaults to
  <fo:inline font-family="monospace">1</fo:inline>.  A higher value is useful on SMP systems or to
  exploit I/O latency.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"> Setting it to <fo:inline font-family="monospace">0</fo:inline> disallows building on the local
  machine, which is useful when you want builds to happen only on remote
  builders.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5099" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--cores</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Sets the value of the <fo:inline font-family="monospace">NIX_BUILD_CORES</fo:inline>
  environment variable in the invocation of builders.  Builders can
  use this variable at their discretion to control the maximum amount
  of parallelism.  For instance, in Nixpkgs, if the derivation
  attribute <fo:inline font-family="monospace">enableParallelBuilding</fo:inline> is set to
  <fo:inline font-family="monospace">true</fo:inline>, the builder passes the
  <fo:inline font-family="monospace">-j<fo:inline font-style="italic" font-family="monospace">N</fo:inline></fo:inline> flag to GNU Make.
  It defaults to the value of the <fo:basic-link internal-destination="conf-cores"><fo:inline><fo:inline font-family="monospace">cores</fo:inline></fo:inline></fo:basic-link>
  configuration setting, if set, or <fo:inline font-family="monospace">1</fo:inline> otherwise.
  The value <fo:inline font-family="monospace">0</fo:inline> means that the builder should use all
  available CPU cores in the system.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5113" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--max-silent-time</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Sets the maximum number of seconds that a builder
  can go without producing any data on standard output or standard
  error.  The default is specified by the <fo:basic-link internal-destination="conf-max-silent-time"><fo:inline><fo:inline font-family="monospace">max-silent-time</fo:inline></fo:inline></fo:basic-link>
  configuration setting.  <fo:inline font-family="monospace">0</fo:inline> means no
  time-out.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5121" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--timeout</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Sets the maximum number of seconds that a builder
  can run.  The default is specified by the <fo:basic-link internal-destination="conf-timeout"><fo:inline><fo:inline font-family="monospace">timeout</fo:inline></fo:inline></fo:basic-link>
  configuration setting.  <fo:inline font-family="monospace">0</fo:inline> means no
  timeout.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5129" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--keep-going</fo:inline> / <fo:inline font-family="monospace">-k</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Keep going in case of failed builds, to the
  greatest extent possible.  That is, if building an input of some
  derivation fails, Nix will still build the other inputs, but not the
  derivation itself.  Without this option, Nix stops if any build
  fails (except for builds of substitutes), possibly killing builds in
  progress (in case of parallel or distributed builds).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5135" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--keep-failed</fo:inline> / <fo:inline font-family="monospace">-K</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Specifies that in case of a build failure, the
  temporary directory (usually in <fo:inline font-family="monospace">/tmp</fo:inline>) in which
  the build takes place should not be deleted.  The path of the build
  directory is printed as an informational message.
    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5142" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--fallback</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Whenever Nix attempts to build a derivation for which
  substitutes are known for each output path, but realising the output
  paths through the substitutes fails, fall back on building the
  derivation.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The most common scenario in which this is useful is when we
  have registered substitutes in order to perform binary distribution
  from, say, a network repository.  If the repository is down, the
  realisation of the derivation will fail.  When this option is
  specified, Nix will build the derivation instead.  Thus,
  installation from binaries falls back on installation from source.
  This option is not the default since it is generally not desirable
  for a transient failure in obtaining the substitutes to lead to a
  full build from source (with the related consumption of
  resources).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5148" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--no-build-hook</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Disables the build hook mechanism.  This allows to ignore remote
  builders if they are setup on the machine.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">It's useful in cases where the bandwidth between the client and the
  remote builder is too low.  In that case it can take more time to upload the
  sources to the remote builder and fetch back the result than to do the
  computation locally.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5154" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--readonly-mode</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">When this option is used, no attempt is made to open
  the Nix database.  Most Nix operations do need database access, so
  those operations will fail.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5159" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--arg</fo:inline> <fo:inline font-style="italic" font-family="monospace">name</fo:inline> <fo:inline font-style="italic" font-family="monospace">value</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This option is accepted by
  <fo:inline font-weight="bold">nix-env</fo:inline>, <fo:inline font-weight="bold">nix-instantiate</fo:inline> and
  <fo:inline font-weight="bold">nix-build</fo:inline>.  When evaluating Nix expressions, the
  expression evaluator will automatically try to call functions that
  it encounters.  It can automatically call functions for which every
  argument has a <fo:basic-link internal-destination="ss-functions"><fo:inline>default value</fo:inline></fo:basic-link>
  (e.g., <fo:inline font-family="monospace">{ <fo:inline font-style="italic" font-family="monospace">argName</fo:inline> ?
  <fo:inline font-style="italic" font-family="monospace">defaultValue</fo:inline> }:
  <fo:inline font-style="italic" font-family="monospace">...</fo:inline></fo:inline>).  With
  <fo:inline font-family="monospace">--arg</fo:inline>, you can also call functions that have
  arguments without a default value (or override a default value).
  That is, if the evaluator encounters a function with an argument
  named <fo:inline font-style="italic" font-family="monospace">name</fo:inline>, it will call it with value
  <fo:inline font-style="italic" font-family="monospace">value</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">For instance, the top-level <fo:inline font-family="monospace">default.nix</fo:inline> in
  Nixpkgs is actually a function:

<fo:block id="idm5179" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
{ # The system (e.g., `i686-linux') for which to build the packages.
  system ? builtins.currentSystem
  <fo:inline font-style="italic" font-family="monospace">...</fo:inline>
}: <fo:inline font-style="italic" font-family="monospace">...</fo:inline></fo:block>

  So if you call this Nix expression (e.g., when you do
  <fo:inline font-family="monospace">nix-env -i <fo:inline font-style="italic" font-family="monospace">pkgname</fo:inline></fo:inline>),
  the function will be called automatically using the value <fo:basic-link internal-destination="builtin-currentSystem"><fo:inline><fo:inline font-family="monospace">builtins.currentSystem</fo:inline></fo:inline></fo:basic-link>
  for the <fo:inline font-family="monospace">system</fo:inline> argument.  You can override this
  using <fo:inline font-family="monospace">--arg</fo:inline>, e.g., <fo:inline font-family="monospace">nix-env -i
  <fo:inline font-style="italic" font-family="monospace">pkgname</fo:inline> --arg system
  \"i686-freebsd\"</fo:inline>.  (Note that since the argument is a Nix
  string literal, you have to escape the quotes.)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5190" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--argstr</fo:inline> <fo:inline font-style="italic" font-family="monospace">name</fo:inline> <fo:inline font-style="italic" font-family="monospace">value</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This option is like <fo:inline font-family="monospace">--arg</fo:inline>, only the
  value is not a Nix expression but a string.  So instead of
  <fo:inline font-family="monospace">--arg system \"i686-linux\"</fo:inline> (the outer quotes are
  to keep the shell happy) you can say <fo:inline font-family="monospace">--argstr system
  i686-linux</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5200" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--attr</fo:inline> / <fo:inline font-family="monospace">-A</fo:inline>
<fo:inline font-style="italic" font-family="monospace">attrPath</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Select an attribute from the top-level Nix
  expression being evaluated.  (<fo:inline font-weight="bold">nix-env</fo:inline>,
  <fo:inline font-weight="bold">nix-instantiate</fo:inline>, <fo:inline font-weight="bold">nix-build</fo:inline> and
  <fo:inline font-weight="bold">nix-shell</fo:inline> only.)  The <fo:inline font-style="italic">attribute
  path</fo:inline> <fo:inline font-style="italic" font-family="monospace">attrPath</fo:inline> is a sequence of
  attribute names separated by dots.  For instance, given a top-level
  Nix expression <fo:inline font-style="italic" font-family="monospace">e</fo:inline>, the attribute path
  <fo:inline font-family="monospace">xorg.xorgserver</fo:inline> would cause the expression
  <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">e</fo:inline>.xorg.xorgserver</fo:inline> to
  be used.  See <fo:basic-link internal-destination="refsec-nix-env-install-examples"><fo:inline><fo:inline font-weight="bold">nix-env
  --install</fo:inline></fo:inline></fo:basic-link> for some concrete examples.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In addition to attribute names, you can also specify array
  indices.  For instance, the attribute path
  <fo:inline font-family="monospace">foo.3.bar</fo:inline> selects the <fo:inline font-family="monospace">bar</fo:inline>
  attribute of the fourth element of the array in the
  <fo:inline font-family="monospace">foo</fo:inline> attribute of the top-level
  expression.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5223" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--expr</fo:inline> / <fo:inline font-family="monospace">-E</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Interpret the command line arguments as a list of
  Nix expressions to be parsed and evaluated, rather than as a list
  of file names of Nix expressions.
  (<fo:inline font-weight="bold">nix-instantiate</fo:inline>, <fo:inline font-weight="bold">nix-build</fo:inline>
  and <fo:inline font-weight="bold">nix-shell</fo:inline> only.)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5232" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">-I</fo:inline> <fo:inline font-style="italic" font-family="monospace">path</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Add a path to the Nix expression search path.  This
  option may be given multiple times.  See the <fo:inline font-family="monospace">NIX_PATH</fo:inline> environment variable for
  information on the semantics of the Nix search path.  Paths added
  through <fo:inline font-family="monospace">-I</fo:inline> take precedence over
  <fo:inline font-family="monospace">NIX_PATH</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5241" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--option</fo:inline> <fo:inline font-style="italic" font-family="monospace">name</fo:inline> <fo:inline font-style="italic" font-family="monospace">value</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Set the Nix configuration option
  <fo:inline font-style="italic" font-family="monospace">name</fo:inline> to <fo:inline font-style="italic" font-family="monospace">value</fo:inline>.
  This overrides settings in the Nix configuration file (see
  nix.conf(5)).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5253" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--repair</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Fix corrupted or missing store paths by
  redownloading or rebuilding them.  Note that this is slow because it
  requires computing a cryptographic hash of the contents of every
  path in the closure of the build.  Also note the warning under
  <fo:inline font-weight="bold">nix-store --repair-path</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="idm5259"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Examples</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="idm5261" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-build '&lt;nixpkgs&gt;' -A firefox
store derivation is /nix/store/qybprl8sz2lc...-firefox-1.5.0.7.drv
/nix/store/d18hyl92g30l...-firefox-1.5.0.7

$ ls -l result
lrwxrwxrwx  <fo:inline font-style="italic" font-family="monospace">...</fo:inline>  result -&gt; /nix/store/d18hyl92g30l...-firefox-1.5.0.7

$ ls ./result/bin/
firefox  firefox-config</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If a derivation has multiple outputs,
<fo:inline font-weight="bold">nix-build</fo:inline> will build the default (first) output.
You can also build all outputs:
<fo:block id="idm5265" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-build '&lt;nixpkgs&gt;' -A openssl.all
</fo:block>
This will create a symlink for each output named
<fo:inline font-family="monospace">result-<fo:inline font-style="italic" font-family="monospace">outputname</fo:inline></fo:inline>.
The suffix is omitted if the output name is <fo:inline font-family="monospace">out</fo:inline>.
So if <fo:inline font-family="monospace">openssl</fo:inline> has outputs <fo:inline font-family="monospace">out</fo:inline>,
<fo:inline font-family="monospace">bin</fo:inline> and <fo:inline font-family="monospace">man</fo:inline>,
<fo:inline font-weight="bold">nix-build</fo:inline> will create symlinks
<fo:inline font-family="monospace">result</fo:inline>, <fo:inline font-family="monospace">result-bin</fo:inline> and
<fo:inline font-family="monospace">result-man</fo:inline>.  Itâs also possible to build a specific
output:
<fo:block id="idm5277" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-build '&lt;nixpkgs&gt;' -A openssl.man
</fo:block>
This will create a symlink <fo:inline font-family="monospace">result-man</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Build a Nix expression given on the command line:

<fo:block id="idm5280" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-build -E 'with import &lt;nixpkgs&gt; { }; runCommand "foo" { } "echo bar &gt; $out"'
$ cat ./result
bar
</fo:block>

</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Build the GNU Hello package from the latest revision of the
master branch of Nixpkgs:

<fo:block id="idm5282" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-build https://github.com/NixOS/nixpkgs/archive/master.tar.gz -A hello
</fo:block>

</fo:block></fo:block><fo:block id="idm5283"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Environment variables</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:list-block id="idm5285" provisional-distance-between-starts="24em * 0.60+1em" provisional-label-separation="1em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em"><fo:list-item id="idm5286" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">IN_NIX_SHELL</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Indicator that tells if the current environment was set up by
  <fo:inline font-weight="bold">nix-shell</fo:inline>.  Since Nix 2.0 the values are
  <fo:inline font-family="monospace">"pure"</fo:inline> and <fo:inline font-family="monospace">"impure"</fo:inline></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5294" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_PATH</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A colon-separated list of directories used to look up Nix
    expressions enclosed in angle brackets (i.e.,
    <fo:inline font-family="monospace">&lt;<fo:inline font-style="italic" font-family="monospace">path</fo:inline>&gt;</fo:inline>).  For
    instance, the value

    <fo:block id="idm5301" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
/home/eelco/Dev:/etc/nixos</fo:block>

    will cause Nix to look for paths relative to
    <fo:inline font-family="monospace">/home/eelco/Dev</fo:inline> and
    <fo:inline font-family="monospace">/etc/nixos</fo:inline>, in that order.  It is also
    possible to match paths against a prefix.  For example, the value

    <fo:block id="idm5304" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
nixpkgs=/home/eelco/Dev/nixpkgs-branch:/etc/nixos</fo:block>

    will cause Nix to search for
    <fo:inline font-family="monospace">&lt;nixpkgs/<fo:inline font-style="italic" font-family="monospace">path</fo:inline>&gt;</fo:inline> in
    <fo:inline font-family="monospace">/home/eelco/Dev/nixpkgs-branch/<fo:inline font-style="italic" font-family="monospace">path</fo:inline></fo:inline>
    and
    <fo:inline font-family="monospace">/etc/nixos/nixpkgs/<fo:inline font-style="italic" font-family="monospace">path</fo:inline></fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If a path in the Nix search path starts with
    <fo:inline font-family="monospace">http://</fo:inline> or <fo:inline font-family="monospace">https://</fo:inline>, it is
    interpreted as the URL of a tarball that will be downloaded and
    unpacked to a temporary location. The tarball must consist of a
    single top-level directory. For example, setting
    <fo:inline font-family="monospace">NIX_PATH</fo:inline> to

    <fo:block id="idm5315" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
nixpkgs=https://github.com/NixOS/nixpkgs-channels/archive/nixos-15.09.tar.gz</fo:block>

    tells Nix to download the latest revision in the Nixpkgs/NixOS
    15.09 channel.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A following shorthand can be used to refer to the official channels:
    
    <fo:block id="idm5317" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">nixpkgs=channel:nixos-15.09</fo:block>
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The search path can be extended using the <fo:inline font-family="monospace">-I</fo:inline> option, which takes precedence over
    <fo:inline font-family="monospace">NIX_PATH</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5321" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_IGNORE_SYMLINK_STORE</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Normally, the Nix store directory (typically
  <fo:inline font-family="monospace">/nix/store</fo:inline>) is not allowed to contain any
  symlink components.  This is to prevent âimpureâ builds.  Builders
  sometimes âcanonicaliseâ paths by resolving all symlink components.
  Thus, builds on different machines (with
  <fo:inline font-family="monospace">/nix/store</fo:inline> resolving to different locations)
  could yield different results.  This is generally not a problem,
  except when builds are deployed to machines where
  <fo:inline font-family="monospace">/nix/store</fo:inline> resolves differently.  If you are
  sure that youâre not going to do that, you can set
  <fo:inline font-family="monospace">NIX_IGNORE_SYMLINK_STORE</fo:inline> to <fo:inline font-family="monospace">1</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Note that if youâre symlinking the Nix store so that you can
  put it on another file system than the root file system, on Linux
  youâre better off using <fo:inline font-family="monospace">bind</fo:inline> mount points, e.g.,

  <fo:block id="idm5333" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ mkdir /nix
$ mount -o bind /mnt/otherdisk/nix /nix</fo:block>

  Consult the mount(8) manual page for details.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5337" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_STORE_DIR</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Overrides the location of the Nix store (default
  <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">prefix</fo:inline>/store</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5344" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_DATA_DIR</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Overrides the location of the Nix static data
  directory (default
  <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">prefix</fo:inline>/share</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5351" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_LOG_DIR</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Overrides the location of the Nix log directory
  (default <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">prefix</fo:inline>/var/log/nix</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5358" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_STATE_DIR</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Overrides the location of the Nix state directory
  (default <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">prefix</fo:inline>/var/nix</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5365" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_CONF_DIR</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Overrides the location of the Nix configuration
  directory (default
  <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">prefix</fo:inline>/etc/nix</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5372" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">TMPDIR</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Use the specified directory to store temporary
  files.  In particular, this includes temporary build directories;
  these can take up substantial amounts of disk space.  The default is
  <fo:inline font-family="monospace">/tmp</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5378" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_REMOTE</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This variable should be set to
  <fo:inline font-family="monospace">daemon</fo:inline> if you want to use the Nix daemon to
  execute Nix operations. This is necessary in <fo:basic-link internal-destination="ssec-multi-user"><fo:inline>multi-user Nix installations</fo:inline></fo:basic-link>.
  If the Nix daemon's Unix socket is at some non-standard path,
  this variable should be set to <fo:inline font-family="monospace">unix://path/to/socket</fo:inline>.
  Otherwise, it should be left unset.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5386" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_SHOW_STATS</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If set to <fo:inline font-family="monospace">1</fo:inline>, Nix will print some
  evaluation statistics, such as the number of values
  allocated.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5392" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_COUNT_CALLS</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If set to <fo:inline font-family="monospace">1</fo:inline>, Nix will print how
  often functions were called during Nix expression evaluation.  This
  is useful for profiling your Nix expressions.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5398" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">GC_INITIAL_HEAP_SIZE</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If Nix has been configured to use the Boehm garbage
  collector, this variable sets the initial size of the heap in bytes.
  It defaults to 384 MiB.  Setting it to a low value reduces memory
  consumption, but will increase runtime due to the overhead of
  garbage collection.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block></fo:block></fo:block><fo:block break-before="page"><fo:block id="sec-nix-shell"><fo:block id="idm5409"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Name</fo:block></fo:block></fo:block></fo:block><fo:block space-after="1em">nix-shell <fo:inline font-family="serif,Symbol,ZapfDingbats">â</fo:inline> start an interactive shell based on a Nix expression</fo:block></fo:block><fo:block id="idm5412"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Synopsis</fo:block></fo:block></fo:block></fo:block><fo:block/><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-shell</fo:inline>  [<fo:inline font-family="monospace">--arg</fo:inline> <fo:inline font-style="italic" font-family="monospace">name</fo:inline> <fo:inline font-style="italic" font-family="monospace">value</fo:inline>] [<fo:inline font-family="monospace">--argstr</fo:inline> <fo:inline font-style="italic" font-family="monospace">name</fo:inline> <fo:inline font-style="italic" font-family="monospace">value</fo:inline>] [
      { <fo:inline font-family="monospace">--attr</fo:inline>  |   <fo:inline font-family="monospace">-A</fo:inline> }
      <fo:inline font-style="italic" font-family="monospace">attrPath</fo:inline>
    ] [<fo:inline font-family="monospace">--command</fo:inline> <fo:inline font-style="italic" font-family="monospace">cmd</fo:inline>] [<fo:inline font-family="monospace">--run</fo:inline> <fo:inline font-style="italic" font-family="monospace">cmd</fo:inline>] [<fo:inline font-family="monospace">--exclude</fo:inline> <fo:inline font-style="italic" font-family="monospace">regexp</fo:inline>] [<fo:inline font-family="monospace">--pure</fo:inline>] [<fo:inline font-family="monospace">--keep</fo:inline> <fo:inline font-style="italic" font-family="monospace">name</fo:inline>] { 
        { <fo:inline font-family="monospace">--packages</fo:inline>  |   <fo:inline font-family="monospace">-p</fo:inline> }
          <fo:inline font-style="italic" font-family="monospace">packages</fo:inline>... 
        |  [<fo:inline font-style="italic" font-family="monospace">path</fo:inline>]}</fo:block></fo:block><fo:block id="idm5455"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Description</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The command <fo:inline font-weight="bold">nix-shell</fo:inline> will build the
dependencies of the specified derivation, but not the derivation
itself.  It will then start an interactive shell in which all
environment variables defined by the derivation
<fo:inline font-style="italic" font-family="monospace">path</fo:inline> have been set to their corresponding
values, and the script <fo:inline font-family="monospace">$stdenv/setup</fo:inline> has been
sourced.  This is useful for reproducing the environment of a
derivation for development.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If <fo:inline font-style="italic" font-family="monospace">path</fo:inline> is not given,
<fo:inline font-weight="bold">nix-shell</fo:inline> defaults to
<fo:inline font-family="monospace">shell.nix</fo:inline> if it exists, and
<fo:inline font-family="monospace">default.nix</fo:inline> otherwise.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If <fo:inline font-style="italic" font-family="monospace">path</fo:inline> starts with
<fo:inline font-family="monospace">http://</fo:inline> or <fo:inline font-family="monospace">https://</fo:inline>, it is
interpreted as the URL of a tarball that will be downloaded and
unpacked to a temporary location. The tarball must include a single
top-level directory containing at least a file named
<fo:inline font-family="monospace">default.nix</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If the derivation defines the variable
<fo:inline font-family="monospace">shellHook</fo:inline>, it will be evaluated after
<fo:inline font-family="monospace">$stdenv/setup</fo:inline> has been sourced.  Since this hook is
not executed by regular Nix builds, it allows you to perform
initialisation specific to <fo:inline font-weight="bold">nix-shell</fo:inline>.  For example,
the derivation attribute

<fo:block id="idm5475" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
shellHook =
  ''
    echo "Hello shell"
  '';
</fo:block>

will cause <fo:inline font-weight="bold">nix-shell</fo:inline> to print <fo:inline font-family="monospace">Hello shell</fo:inline>.</fo:block></fo:block><fo:block id="idm5478"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Options</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">All options not listed here are passed to <fo:inline font-weight="bold">nix-store
--realise</fo:inline>, except for <fo:inline font-family="monospace">--arg</fo:inline> and
<fo:inline font-family="monospace">--attr</fo:inline> / <fo:inline font-family="monospace">-A</fo:inline> which are passed to
<fo:inline font-weight="bold">nix-instantiate</fo:inline>.  <fo:inline>See
also <fo:basic-link internal-destination="sec-common-options"><fo:inline>ChapterÂ 20, <fo:inline font-style="italic">Common Options</fo:inline></fo:inline></fo:basic-link>.</fo:inline></fo:block><fo:list-block id="idm5488" provisional-distance-between-starts="24em * 0.60+1em" provisional-label-separation="1em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em"><fo:list-item id="idm5489" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--command</fo:inline> <fo:inline font-style="italic" font-family="monospace">cmd</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In the environment of the derivation, run the
    shell command <fo:inline font-style="italic" font-family="monospace">cmd</fo:inline>. This command is
    executed in an interactive shell. (Use <fo:inline font-family="monospace">--run</fo:inline> to
    use a non-interactive shell instead.) However, a call to
    <fo:inline font-family="monospace">exit</fo:inline> is implicitly added to the command, so the
    shell will exit after running the command. To prevent this, add
    <fo:inline font-family="monospace">return</fo:inline> at the end; e.g. <fo:inline font-family="monospace">--command
    "echo Hello; return"</fo:inline> will print <fo:inline font-family="monospace">Hello</fo:inline>
    and then drop you into the interactive shell. This can be useful
    for doing any additional initialisation.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5501" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--run</fo:inline> <fo:inline font-style="italic" font-family="monospace">cmd</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Like <fo:inline font-family="monospace">--command</fo:inline>, but executes the
    command in a non-interactive shell. This means (among other
    things) that if you hit Ctrl-C while the command is running, the
    shell exits.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5508" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--exclude</fo:inline> <fo:inline font-style="italic" font-family="monospace">regexp</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Do not build any dependencies whose store path
    matches the regular expression <fo:inline font-style="italic" font-family="monospace">regexp</fo:inline>.
    This option may be specified multiple times.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5515" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--pure</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If this flag is specified, the environment is
    almost entirely cleared before the interactive shell is started,
    so you get an environment that more closely corresponds to the
    ârealâ Nix build.  A few variables, in particular
    <fo:inline font-family="monospace">HOME</fo:inline>, <fo:inline font-family="monospace">USER</fo:inline> and
    <fo:inline font-family="monospace">DISPLAY</fo:inline>, are retained.  Note that
    <fo:inline font-family="monospace">~/.bashrc</fo:inline> and (depending on your Bash
    installation) <fo:inline font-family="monospace">/etc/bashrc</fo:inline> are still sourced,
    so any variables set there will affect the interactive
    shell.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5525" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--packages</fo:inline> / <fo:inline font-family="monospace">-p</fo:inline> <fo:inline font-style="italic" font-family="monospace">packages</fo:inline>â¦</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Set up an environment in which the specified
    packages are present.  The command line arguments are interpreted
    as attribute names inside the Nix Packages collection.  Thus,
    <fo:inline font-family="monospace">nix-shell -p libjpeg openjdk</fo:inline> will start a shell
    in which the packages denoted by the attribute names
    <fo:inline font-family="monospace">libjpeg</fo:inline> and <fo:inline font-family="monospace">openjdk</fo:inline> are
    present.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5535" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">-i</fo:inline> <fo:inline font-style="italic" font-family="monospace">interpreter</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The chained script interpreter to be invoked by
    <fo:inline font-weight="bold">nix-shell</fo:inline>. Only applicable in
    <fo:inline font-family="monospace">#!</fo:inline>-scripts (described <fo:basic-link internal-destination="ssec-nix-shell-shebang"><fo:inline>below</fo:inline></fo:basic-link>).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5544" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--keep</fo:inline> <fo:inline font-style="italic" font-family="monospace">name</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">When a <fo:inline font-family="monospace">--pure</fo:inline> shell is started,
    keep the listed environment variables.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The following common options are supported:</fo:block><fo:list-block id="idm5552" provisional-distance-between-starts="22em * 0.60+1em" provisional-label-separation="1em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em"><fo:list-item id="idm5553" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--help</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Prints out a summary of the command syntax and
  exits.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5558" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--version</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Prints out the Nix version number on standard output
  and exits.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5563" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--verbose</fo:inline> / <fo:inline font-family="monospace">-v</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Increases the level of verbosity of diagnostic messages
  printed on standard error.  For each Nix operation, the information
  printed on standard output is well-defined; any diagnostic
  information is printed on standard error, never on standard
  output.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This option may be specified repeatedly.  Currently, the
  following verbosity levels exist:</fo:block><fo:list-block id="idm5570" provisional-distance-between-starts="1em * 0.60+1em" provisional-label-separation="1em"><fo:list-item id="idm5571" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline>0</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">âErrors onlyâ: only print messages
    explaining why the Nix invocation failed.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5575" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline>1</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">âInformationalâ: print
    <fo:inline font-style="italic">useful</fo:inline> messages about what Nix is doing.
    This is the default.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5580" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline>2</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">âTalkativeâ: print more informational
    messages.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5584" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline>3</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">âChattyâ: print even more
    informational messages.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5588" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline>4</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">âDebugâ: print debug
    information.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5592" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline>5</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">âVomitâ: print vast amounts of debug
    information.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5596" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--quiet</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Decreases the level of verbosity of diagnostic messages
  printed on standard error.  This is the inverse option to
  <fo:inline font-family="monospace">-v</fo:inline> / <fo:inline font-family="monospace">--verbose</fo:inline>.
  </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This option may be specified repeatedly.  See the previous
  verbosity levels list.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5604" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--no-build-output</fo:inline> / <fo:inline font-family="monospace">-Q</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">By default, output written by builders to standard
  output and standard error is echoed to the Nix command's standard
  error.  This option suppresses this behaviour.  Note that the
  builder's standard output and error are always written to a log file
  in
  <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">prefix</fo:inline>/nix/var/log/nix</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5612" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--max-jobs</fo:inline> / <fo:inline font-family="monospace">-j</fo:inline>
<fo:inline font-style="italic" font-family="monospace">number</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Sets the maximum number of build jobs that Nix will
  perform in parallel to the specified number.  Specify
  <fo:inline font-family="monospace">auto</fo:inline> to use the number of CPUs in the system.
  The default is specified by the <fo:basic-link internal-destination="conf-max-jobs"><fo:inline><fo:inline font-family="monospace">max-jobs</fo:inline></fo:inline></fo:basic-link>
  configuration setting, which itself defaults to
  <fo:inline font-family="monospace">1</fo:inline>.  A higher value is useful on SMP systems or to
  exploit I/O latency.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"> Setting it to <fo:inline font-family="monospace">0</fo:inline> disallows building on the local
  machine, which is useful when you want builds to happen only on remote
  builders.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5625" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--cores</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Sets the value of the <fo:inline font-family="monospace">NIX_BUILD_CORES</fo:inline>
  environment variable in the invocation of builders.  Builders can
  use this variable at their discretion to control the maximum amount
  of parallelism.  For instance, in Nixpkgs, if the derivation
  attribute <fo:inline font-family="monospace">enableParallelBuilding</fo:inline> is set to
  <fo:inline font-family="monospace">true</fo:inline>, the builder passes the
  <fo:inline font-family="monospace">-j<fo:inline font-style="italic" font-family="monospace">N</fo:inline></fo:inline> flag to GNU Make.
  It defaults to the value of the <fo:basic-link internal-destination="conf-cores"><fo:inline><fo:inline font-family="monospace">cores</fo:inline></fo:inline></fo:basic-link>
  configuration setting, if set, or <fo:inline font-family="monospace">1</fo:inline> otherwise.
  The value <fo:inline font-family="monospace">0</fo:inline> means that the builder should use all
  available CPU cores in the system.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5639" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--max-silent-time</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Sets the maximum number of seconds that a builder
  can go without producing any data on standard output or standard
  error.  The default is specified by the <fo:basic-link internal-destination="conf-max-silent-time"><fo:inline><fo:inline font-family="monospace">max-silent-time</fo:inline></fo:inline></fo:basic-link>
  configuration setting.  <fo:inline font-family="monospace">0</fo:inline> means no
  time-out.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5647" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--timeout</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Sets the maximum number of seconds that a builder
  can run.  The default is specified by the <fo:basic-link internal-destination="conf-timeout"><fo:inline><fo:inline font-family="monospace">timeout</fo:inline></fo:inline></fo:basic-link>
  configuration setting.  <fo:inline font-family="monospace">0</fo:inline> means no
  timeout.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5655" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--keep-going</fo:inline> / <fo:inline font-family="monospace">-k</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Keep going in case of failed builds, to the
  greatest extent possible.  That is, if building an input of some
  derivation fails, Nix will still build the other inputs, but not the
  derivation itself.  Without this option, Nix stops if any build
  fails (except for builds of substitutes), possibly killing builds in
  progress (in case of parallel or distributed builds).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5661" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--keep-failed</fo:inline> / <fo:inline font-family="monospace">-K</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Specifies that in case of a build failure, the
  temporary directory (usually in <fo:inline font-family="monospace">/tmp</fo:inline>) in which
  the build takes place should not be deleted.  The path of the build
  directory is printed as an informational message.
    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5668" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--fallback</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Whenever Nix attempts to build a derivation for which
  substitutes are known for each output path, but realising the output
  paths through the substitutes fails, fall back on building the
  derivation.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The most common scenario in which this is useful is when we
  have registered substitutes in order to perform binary distribution
  from, say, a network repository.  If the repository is down, the
  realisation of the derivation will fail.  When this option is
  specified, Nix will build the derivation instead.  Thus,
  installation from binaries falls back on installation from source.
  This option is not the default since it is generally not desirable
  for a transient failure in obtaining the substitutes to lead to a
  full build from source (with the related consumption of
  resources).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5674" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--no-build-hook</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Disables the build hook mechanism.  This allows to ignore remote
  builders if they are setup on the machine.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">It's useful in cases where the bandwidth between the client and the
  remote builder is too low.  In that case it can take more time to upload the
  sources to the remote builder and fetch back the result than to do the
  computation locally.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5680" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--readonly-mode</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">When this option is used, no attempt is made to open
  the Nix database.  Most Nix operations do need database access, so
  those operations will fail.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5685" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--arg</fo:inline> <fo:inline font-style="italic" font-family="monospace">name</fo:inline> <fo:inline font-style="italic" font-family="monospace">value</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This option is accepted by
  <fo:inline font-weight="bold">nix-env</fo:inline>, <fo:inline font-weight="bold">nix-instantiate</fo:inline> and
  <fo:inline font-weight="bold">nix-build</fo:inline>.  When evaluating Nix expressions, the
  expression evaluator will automatically try to call functions that
  it encounters.  It can automatically call functions for which every
  argument has a <fo:basic-link internal-destination="ss-functions"><fo:inline>default value</fo:inline></fo:basic-link>
  (e.g., <fo:inline font-family="monospace">{ <fo:inline font-style="italic" font-family="monospace">argName</fo:inline> ?
  <fo:inline font-style="italic" font-family="monospace">defaultValue</fo:inline> }:
  <fo:inline font-style="italic" font-family="monospace">...</fo:inline></fo:inline>).  With
  <fo:inline font-family="monospace">--arg</fo:inline>, you can also call functions that have
  arguments without a default value (or override a default value).
  That is, if the evaluator encounters a function with an argument
  named <fo:inline font-style="italic" font-family="monospace">name</fo:inline>, it will call it with value
  <fo:inline font-style="italic" font-family="monospace">value</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">For instance, the top-level <fo:inline font-family="monospace">default.nix</fo:inline> in
  Nixpkgs is actually a function:

<fo:block id="idm5705" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
{ # The system (e.g., `i686-linux') for which to build the packages.
  system ? builtins.currentSystem
  <fo:inline font-style="italic" font-family="monospace">...</fo:inline>
}: <fo:inline font-style="italic" font-family="monospace">...</fo:inline></fo:block>

  So if you call this Nix expression (e.g., when you do
  <fo:inline font-family="monospace">nix-env -i <fo:inline font-style="italic" font-family="monospace">pkgname</fo:inline></fo:inline>),
  the function will be called automatically using the value <fo:basic-link internal-destination="builtin-currentSystem"><fo:inline><fo:inline font-family="monospace">builtins.currentSystem</fo:inline></fo:inline></fo:basic-link>
  for the <fo:inline font-family="monospace">system</fo:inline> argument.  You can override this
  using <fo:inline font-family="monospace">--arg</fo:inline>, e.g., <fo:inline font-family="monospace">nix-env -i
  <fo:inline font-style="italic" font-family="monospace">pkgname</fo:inline> --arg system
  \"i686-freebsd\"</fo:inline>.  (Note that since the argument is a Nix
  string literal, you have to escape the quotes.)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5716" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--argstr</fo:inline> <fo:inline font-style="italic" font-family="monospace">name</fo:inline> <fo:inline font-style="italic" font-family="monospace">value</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This option is like <fo:inline font-family="monospace">--arg</fo:inline>, only the
  value is not a Nix expression but a string.  So instead of
  <fo:inline font-family="monospace">--arg system \"i686-linux\"</fo:inline> (the outer quotes are
  to keep the shell happy) you can say <fo:inline font-family="monospace">--argstr system
  i686-linux</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5726" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--attr</fo:inline> / <fo:inline font-family="monospace">-A</fo:inline>
<fo:inline font-style="italic" font-family="monospace">attrPath</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Select an attribute from the top-level Nix
  expression being evaluated.  (<fo:inline font-weight="bold">nix-env</fo:inline>,
  <fo:inline font-weight="bold">nix-instantiate</fo:inline>, <fo:inline font-weight="bold">nix-build</fo:inline> and
  <fo:inline font-weight="bold">nix-shell</fo:inline> only.)  The <fo:inline font-style="italic">attribute
  path</fo:inline> <fo:inline font-style="italic" font-family="monospace">attrPath</fo:inline> is a sequence of
  attribute names separated by dots.  For instance, given a top-level
  Nix expression <fo:inline font-style="italic" font-family="monospace">e</fo:inline>, the attribute path
  <fo:inline font-family="monospace">xorg.xorgserver</fo:inline> would cause the expression
  <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">e</fo:inline>.xorg.xorgserver</fo:inline> to
  be used.  See <fo:basic-link internal-destination="refsec-nix-env-install-examples"><fo:inline><fo:inline font-weight="bold">nix-env
  --install</fo:inline></fo:inline></fo:basic-link> for some concrete examples.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In addition to attribute names, you can also specify array
  indices.  For instance, the attribute path
  <fo:inline font-family="monospace">foo.3.bar</fo:inline> selects the <fo:inline font-family="monospace">bar</fo:inline>
  attribute of the fourth element of the array in the
  <fo:inline font-family="monospace">foo</fo:inline> attribute of the top-level
  expression.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5749" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--expr</fo:inline> / <fo:inline font-family="monospace">-E</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Interpret the command line arguments as a list of
  Nix expressions to be parsed and evaluated, rather than as a list
  of file names of Nix expressions.
  (<fo:inline font-weight="bold">nix-instantiate</fo:inline>, <fo:inline font-weight="bold">nix-build</fo:inline>
  and <fo:inline font-weight="bold">nix-shell</fo:inline> only.)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5758" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">-I</fo:inline> <fo:inline font-style="italic" font-family="monospace">path</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Add a path to the Nix expression search path.  This
  option may be given multiple times.  See the <fo:inline font-family="monospace">NIX_PATH</fo:inline> environment variable for
  information on the semantics of the Nix search path.  Paths added
  through <fo:inline font-family="monospace">-I</fo:inline> take precedence over
  <fo:inline font-family="monospace">NIX_PATH</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5767" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--option</fo:inline> <fo:inline font-style="italic" font-family="monospace">name</fo:inline> <fo:inline font-style="italic" font-family="monospace">value</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Set the Nix configuration option
  <fo:inline font-style="italic" font-family="monospace">name</fo:inline> to <fo:inline font-style="italic" font-family="monospace">value</fo:inline>.
  This overrides settings in the Nix configuration file (see
  nix.conf(5)).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5779" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--repair</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Fix corrupted or missing store paths by
  redownloading or rebuilding them.  Note that this is slow because it
  requires computing a cryptographic hash of the contents of every
  path in the closure of the build.  Also note the warning under
  <fo:inline font-weight="bold">nix-store --repair-path</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="idm5785"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Environment variables</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:list-block id="idm5787" provisional-distance-between-starts="15em * 0.60+1em" provisional-label-separation="1em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em"><fo:list-item id="idm5788" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_BUILD_SHELL</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Shell used to start the interactive environment. 
    Defaults to the <fo:inline font-weight="bold">bash</fo:inline> found in <fo:inline font-family="monospace">PATH</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="idm5795"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Examples</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To build the dependencies of the package Pan, and start an
interactive shell in which to build it:

<fo:block id="idm5798" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-shell '&lt;nixpkgs&gt;' -A pan
[nix-shell]$ unpackPhase
[nix-shell]$ cd pan-*
[nix-shell]$ configurePhase
[nix-shell]$ buildPhase
[nix-shell]$ ./pan/gui/pan
</fo:block>

To clear the environment first, and do some additional automatic
initialisation of the interactive shell:

<fo:block id="idm5799" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-shell '&lt;nixpkgs&gt;' -A pan --pure \
    --command 'export NIX_DEBUG=1; export NIX_CORES=8; return'
</fo:block>

Nix expressions can also be given on the command line.  For instance,
the following starts a shell containing the packages
<fo:inline font-family="monospace">sqlite</fo:inline> and <fo:inline font-family="monospace">libX11</fo:inline>:

<fo:block id="idm5802" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-shell -E 'with import &lt;nixpkgs&gt; { }; runCommand "dummy" { buildInputs = [ sqlite xorg.libX11 ]; } ""'
</fo:block>

A shorter way to do the same is:

<fo:block id="idm5803" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-shell -p sqlite xorg.libX11
[nix-shell]$ echo $NIX_LDFLAGS
â¦ -L/nix/store/j1zg5vâ¦-sqlite-3.8.0.2/lib -L/nix/store/0gmcz9â¦-libX11-1.6.1/lib â¦
</fo:block>

The <fo:inline font-weight="bold">-p</fo:inline> flag looks up Nixpkgs in the Nix search
path. You can override it by passing <fo:inline font-family="monospace">-I</fo:inline> or setting
<fo:inline font-family="monospace">NIX_PATH</fo:inline>. For example, the following gives you a shell
containing the Pan package from a specific revision of Nixpkgs:

<fo:block id="idm5807" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-shell -p pan -I nixpkgs=https://github.com/NixOS/nixpkgs-channels/archive/8a3eea054838b55aca962c3fbde9c83c102b8bf2.tar.gz

[nix-shell:~]$ pan --version
Pan 0.139
</fo:block>

</fo:block></fo:block><fo:block id="ssec-nix-shell-shebang"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Use as a <fo:inline font-family="monospace">#!</fo:inline>-interpreter</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You can use <fo:inline font-weight="bold">nix-shell</fo:inline> as a script interpreter
to allow scripts written in arbitrary languages to obtain their own
dependencies via Nix. This is done by starting the script with the
following lines:

<fo:block id="idm5813" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
#! /usr/bin/env nix-shell
#! nix-shell -i <fo:inline font-style="italic" font-family="monospace">real-interpreter</fo:inline> -p <fo:inline font-style="italic" font-family="monospace">packages</fo:inline>
</fo:block>

where <fo:inline font-style="italic" font-family="monospace">real-interpreter</fo:inline> is the ârealâ script
interpreter that will be invoked by <fo:inline font-weight="bold">nix-shell</fo:inline> after
it has obtained the dependencies and initialised the environment, and
<fo:inline font-style="italic" font-family="monospace">packages</fo:inline> are the attribute names of the
dependencies in Nixpkgs.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The lines starting with <fo:inline font-family="monospace">#! nix-shell</fo:inline> specify
<fo:inline font-weight="bold">nix-shell</fo:inline> options (see above). Note that you cannot
write <fo:inline font-family="monospace">#! /usr/bin/env nix-shell -i ...</fo:inline> because
many operating systems only allow one argument in
<fo:inline font-family="monospace">#!</fo:inline> lines.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">For example, here is a Python script that depends on Python and
the <fo:inline font-family="monospace">prettytable</fo:inline> package:

<fo:block id="idm5826" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
#! /usr/bin/env nix-shell
#! nix-shell -i python -p python pythonPackages.prettytable

import prettytable

# Print a simple table.
t = prettytable.PrettyTable(["N", "N^2"])
for n in range(1, 10): t.add_row([n, n * n])
print t
</fo:block>

</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Similarly, the following is a Perl script that specifies that it
requires Perl and the <fo:inline font-family="monospace">HTML::TokeParser::Simple</fo:inline> and
<fo:inline font-family="monospace">LWP</fo:inline> packages:

<fo:block id="idm5830" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
#! /usr/bin/env nix-shell
#! nix-shell -i perl -p perl perlPackages.HTMLTokeParserSimple perlPackages.LWP

use HTML::TokeParser::Simple;

# Fetch nixos.org and print all hrefs.
my $p = HTML::TokeParser::Simple-&gt;new(url =&gt; 'http://nixos.org/');

while (my $token = $p-&gt;get_tag("a")) {
    my $href = $token-&gt;get_attr("href");
    print "$href\n" if $href;
}
</fo:block>

</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Sometimes you need to pass a simple Nix expression to customize
a package like Terraform:

<fo:block id="idm5832" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
#! /usr/bin/env nix-shell
#! nix-shell -i bash -p "terraform.withPlugins (plugins: [ plugins.openstack ])"

terraform apply
</fo:block>

<fo:block id="idm5833" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" margin-left="0.25in" margin-right="0.25in"><fo:block keep-with-next.within-column="always" font-size="14pt" font-weight="bold" hyphenate="false">Note</fo:block><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You must use double quotes (<fo:inline font-family="monospace">"</fo:inline>) when
passing a simple Nix expression in a nix-shell shebang.</fo:block></fo:block></fo:block>
</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Finally, using the merging of multiple nix-shell shebangs the
following Haskell script uses a specific branch of Nixpkgs/NixOS (the
18.03 stable branch):

<fo:block id="idm5837" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
#! /usr/bin/env nix-shell
#! nix-shell -i runghc -p "haskellPackages.ghcWithPackages (ps: [ps.HTTP ps.tagsoup])"
#! nix-shell -I nixpkgs=https://github.com/NixOS/nixpkgs-channels/archive/nixos-18.03.tar.gz

import Network.HTTP
import Text.HTML.TagSoup

-- Fetch nixos.org and print all hrefs.
main = do
  resp &lt;- Network.HTTP.simpleHTTP (getRequest "http://nixos.org/")
  body &lt;- getResponseBody resp
  let tags = filter (isTagOpenName "a") $ parseTags body
  let tags' = map (fromAttrib "href") tags
  mapM_ putStrLn $ filter (/= "") tags'
</fo:block>

If you want to be even more precise, you can specify a specific
revision of Nixpkgs:

<fo:block id="idm5838" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
#! nix-shell -I nixpkgs=https://github.com/NixOS/nixpkgs-channels/archive/0672315759b3e15e2121365f067c1c8c56bb4722.tar.gz
</fo:block>

</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The examples above all used <fo:inline font-family="monospace">-p</fo:inline> to get
dependencies from Nixpkgs. You can also use a Nix expression to build
your own dependencies. For example, the Python example could have been
written as:

<fo:block id="idm5841" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
#! /usr/bin/env nix-shell
#! nix-shell deps.nix -i python
</fo:block>

where the file <fo:inline font-family="monospace">deps.nix</fo:inline> in the same directory
as the <fo:inline font-family="monospace">#!</fo:inline>-script contains:

<fo:block id="idm5844" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
with import &lt;nixpkgs&gt; {};

runCommand "dummy" { buildInputs = [ python pythonPackages.prettytable ]; } ""
</fo:block>

</fo:block></fo:block><fo:block id="idm5845"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Environment variables</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:list-block id="idm5847" provisional-distance-between-starts="24em * 0.60+1em" provisional-label-separation="1em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em"><fo:list-item id="idm5848" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">IN_NIX_SHELL</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Indicator that tells if the current environment was set up by
  <fo:inline font-weight="bold">nix-shell</fo:inline>.  Since Nix 2.0 the values are
  <fo:inline font-family="monospace">"pure"</fo:inline> and <fo:inline font-family="monospace">"impure"</fo:inline></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5856" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_PATH</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A colon-separated list of directories used to look up Nix
    expressions enclosed in angle brackets (i.e.,
    <fo:inline font-family="monospace">&lt;<fo:inline font-style="italic" font-family="monospace">path</fo:inline>&gt;</fo:inline>).  For
    instance, the value

    <fo:block id="idm5863" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
/home/eelco/Dev:/etc/nixos</fo:block>

    will cause Nix to look for paths relative to
    <fo:inline font-family="monospace">/home/eelco/Dev</fo:inline> and
    <fo:inline font-family="monospace">/etc/nixos</fo:inline>, in that order.  It is also
    possible to match paths against a prefix.  For example, the value

    <fo:block id="idm5866" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
nixpkgs=/home/eelco/Dev/nixpkgs-branch:/etc/nixos</fo:block>

    will cause Nix to search for
    <fo:inline font-family="monospace">&lt;nixpkgs/<fo:inline font-style="italic" font-family="monospace">path</fo:inline>&gt;</fo:inline> in
    <fo:inline font-family="monospace">/home/eelco/Dev/nixpkgs-branch/<fo:inline font-style="italic" font-family="monospace">path</fo:inline></fo:inline>
    and
    <fo:inline font-family="monospace">/etc/nixos/nixpkgs/<fo:inline font-style="italic" font-family="monospace">path</fo:inline></fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If a path in the Nix search path starts with
    <fo:inline font-family="monospace">http://</fo:inline> or <fo:inline font-family="monospace">https://</fo:inline>, it is
    interpreted as the URL of a tarball that will be downloaded and
    unpacked to a temporary location. The tarball must consist of a
    single top-level directory. For example, setting
    <fo:inline font-family="monospace">NIX_PATH</fo:inline> to

    <fo:block id="idm5877" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
nixpkgs=https://github.com/NixOS/nixpkgs-channels/archive/nixos-15.09.tar.gz</fo:block>

    tells Nix to download the latest revision in the Nixpkgs/NixOS
    15.09 channel.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A following shorthand can be used to refer to the official channels:
    
    <fo:block id="idm5879" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">nixpkgs=channel:nixos-15.09</fo:block>
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The search path can be extended using the <fo:inline font-family="monospace">-I</fo:inline> option, which takes precedence over
    <fo:inline font-family="monospace">NIX_PATH</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5883" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_IGNORE_SYMLINK_STORE</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Normally, the Nix store directory (typically
  <fo:inline font-family="monospace">/nix/store</fo:inline>) is not allowed to contain any
  symlink components.  This is to prevent âimpureâ builds.  Builders
  sometimes âcanonicaliseâ paths by resolving all symlink components.
  Thus, builds on different machines (with
  <fo:inline font-family="monospace">/nix/store</fo:inline> resolving to different locations)
  could yield different results.  This is generally not a problem,
  except when builds are deployed to machines where
  <fo:inline font-family="monospace">/nix/store</fo:inline> resolves differently.  If you are
  sure that youâre not going to do that, you can set
  <fo:inline font-family="monospace">NIX_IGNORE_SYMLINK_STORE</fo:inline> to <fo:inline font-family="monospace">1</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Note that if youâre symlinking the Nix store so that you can
  put it on another file system than the root file system, on Linux
  youâre better off using <fo:inline font-family="monospace">bind</fo:inline> mount points, e.g.,

  <fo:block id="idm5895" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ mkdir /nix
$ mount -o bind /mnt/otherdisk/nix /nix</fo:block>

  Consult the mount(8) manual page for details.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5899" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_STORE_DIR</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Overrides the location of the Nix store (default
  <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">prefix</fo:inline>/store</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5906" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_DATA_DIR</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Overrides the location of the Nix static data
  directory (default
  <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">prefix</fo:inline>/share</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5913" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_LOG_DIR</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Overrides the location of the Nix log directory
  (default <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">prefix</fo:inline>/var/log/nix</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5920" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_STATE_DIR</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Overrides the location of the Nix state directory
  (default <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">prefix</fo:inline>/var/nix</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5927" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_CONF_DIR</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Overrides the location of the Nix configuration
  directory (default
  <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">prefix</fo:inline>/etc/nix</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5934" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">TMPDIR</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Use the specified directory to store temporary
  files.  In particular, this includes temporary build directories;
  these can take up substantial amounts of disk space.  The default is
  <fo:inline font-family="monospace">/tmp</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5940" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_REMOTE</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This variable should be set to
  <fo:inline font-family="monospace">daemon</fo:inline> if you want to use the Nix daemon to
  execute Nix operations. This is necessary in <fo:basic-link internal-destination="ssec-multi-user"><fo:inline>multi-user Nix installations</fo:inline></fo:basic-link>.
  If the Nix daemon's Unix socket is at some non-standard path,
  this variable should be set to <fo:inline font-family="monospace">unix://path/to/socket</fo:inline>.
  Otherwise, it should be left unset.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5948" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_SHOW_STATS</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If set to <fo:inline font-family="monospace">1</fo:inline>, Nix will print some
  evaluation statistics, such as the number of values
  allocated.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5954" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_COUNT_CALLS</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If set to <fo:inline font-family="monospace">1</fo:inline>, Nix will print how
  often functions were called during Nix expression evaluation.  This
  is useful for profiling your Nix expressions.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm5960" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">GC_INITIAL_HEAP_SIZE</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If Nix has been configured to use the Boehm garbage
  collector, this variable sets the initial size of the heap in bytes.
  It defaults to 384 MiB.  Setting it to a low value reduces memory
  consumption, but will increase runtime due to the overhead of
  garbage collection.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block></fo:block></fo:block><fo:block break-before="page"><fo:block id="sec-nix-store"><fo:block id="idm5971"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Name</fo:block></fo:block></fo:block></fo:block><fo:block space-after="1em">nix-store <fo:inline font-family="serif,Symbol,ZapfDingbats">â</fo:inline> manipulate or query the Nix store</fo:block></fo:block><fo:block id="idm5974"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Synopsis</fo:block></fo:block></fo:block></fo:block><fo:block/><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-store</fo:inline>  [<fo:inline font-family="monospace">--help</fo:inline>] [<fo:inline font-family="monospace">--version</fo:inline>] [
  { <fo:inline font-family="monospace">--verbose</fo:inline>  |   <fo:inline font-family="monospace">-v</fo:inline> }
...] [
   <fo:inline font-family="monospace">--quiet</fo:inline> 
] [
    <fo:inline font-family="monospace">--no-build-output</fo:inline>  |   <fo:inline font-family="monospace">-Q</fo:inline>  
] [
  { <fo:inline font-family="monospace">--max-jobs</fo:inline>  |   <fo:inline font-family="monospace">-j</fo:inline> }
  <fo:inline font-style="italic" font-family="monospace">number</fo:inline>
] [
  <fo:inline font-family="monospace">--cores</fo:inline>
  <fo:inline font-style="italic" font-family="monospace">number</fo:inline>
] [
  <fo:inline font-family="monospace">--max-silent-time</fo:inline>
  <fo:inline font-style="italic" font-family="monospace">number</fo:inline>
] [
  <fo:inline font-family="monospace">--timeout</fo:inline>
  <fo:inline font-style="italic" font-family="monospace">number</fo:inline>
] [
    <fo:inline font-family="monospace">--keep-going</fo:inline>  |   <fo:inline font-family="monospace">-k</fo:inline>  
] [
    <fo:inline font-family="monospace">--keep-failed</fo:inline>  |   <fo:inline font-family="monospace">-K</fo:inline>  
] [<fo:inline font-family="monospace">--fallback</fo:inline>] [<fo:inline font-family="monospace">--readonly-mode</fo:inline>] [
  <fo:inline font-family="monospace">-I</fo:inline>
  <fo:inline font-style="italic" font-family="monospace">path</fo:inline>
] [
  <fo:inline font-family="monospace">--option</fo:inline>
  <fo:inline font-style="italic" font-family="monospace">name</fo:inline>
  <fo:inline font-style="italic" font-family="monospace">value</fo:inline>
]<fo:block/> [<fo:inline font-family="monospace">--add-root</fo:inline> <fo:inline font-style="italic" font-family="monospace">path</fo:inline>] [<fo:inline font-family="monospace">--indirect</fo:inline>]  <fo:inline font-style="italic" font-family="monospace">operation</fo:inline>  [<fo:inline font-style="italic" font-family="monospace">options</fo:inline>...] [<fo:inline font-style="italic" font-family="monospace">arguments</fo:inline>...]</fo:block></fo:block><fo:block id="idm6047"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Description</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The command <fo:inline font-weight="bold">nix-store</fo:inline> performs primitive
operations on the Nix store.  You generally do not need to run this
command manually.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-store</fo:inline> takes exactly one
<fo:inline font-style="italic">operation</fo:inline> flag which indicates the subcommand to
be performed.  These are documented below.</fo:block></fo:block><fo:block id="idm6054"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Common options</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This section lists the options that are common to all
operations.  These options are allowed for every subcommand, though
they may not always have an effect.  <fo:inline>See
also <fo:basic-link internal-destination="sec-common-options"><fo:inline>ChapterÂ 20, <fo:inline font-style="italic">Common Options</fo:inline></fo:inline></fo:basic-link> for a list of common
options.</fo:inline></fo:block><fo:list-block id="idm6059" provisional-distance-between-starts="15em * 0.60+1em" provisional-label-separation="1em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em"><fo:list-item id="opt-add-root" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--add-root</fo:inline> <fo:inline font-style="italic" font-family="monospace">path</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Causes the result of a realisation
    (<fo:inline font-family="monospace">--realise</fo:inline> and <fo:inline font-family="monospace">--force-realise</fo:inline>)
    to be registered as a root of the garbage collector<fo:inline> (see <fo:basic-link internal-destination="ssec-gc-roots"><fo:inline>the section called âGarbage Collector Rootsâ</fo:inline></fo:basic-link>)</fo:inline>.  The root is stored in
    <fo:inline font-style="italic" font-family="monospace">path</fo:inline>, which must be inside a directory
    that is scanned for roots by the garbage collector (i.e.,
    typically in a subdirectory of
    <fo:inline font-family="monospace">/nix/var/nix/gcroots/</fo:inline>)
    <fo:inline font-style="italic">unless</fo:inline> the <fo:inline font-family="monospace">--indirect</fo:inline> flag
    is used.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If there are multiple results, then multiple symlinks will
    be created by sequentially numbering symlinks beyond the first one
    (e.g., <fo:inline font-family="monospace">foo</fo:inline>, <fo:inline font-family="monospace">foo-2</fo:inline>,
    <fo:inline font-family="monospace">foo-3</fo:inline>, and so on).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm6078" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--indirect</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In conjunction with <fo:inline font-family="monospace">--add-root</fo:inline>, this option
    allows roots to be stored <fo:inline font-style="italic">outside</fo:inline> of the GC
    roots directory.  This is useful for commands such as
    <fo:inline font-weight="bold">nix-build</fo:inline> that place a symlink to the build
    result in the current directory; such a build result should not be
    garbage-collected unless the symlink is removed.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The <fo:inline font-family="monospace">--indirect</fo:inline> flag causes a uniquely named
    symlink to <fo:inline font-style="italic" font-family="monospace">path</fo:inline> to be stored in
    <fo:inline font-family="monospace">/nix/var/nix/gcroots/auto/</fo:inline>.  For instance,

    <fo:block id="idm6090" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-store --add-root /home/eelco/bla/result --indirect -r <fo:inline font-style="italic" font-family="monospace">...</fo:inline>

$ ls -l /nix/var/nix/gcroots/auto
lrwxrwxrwx    1 ... 2005-03-13 21:10 dn54lcypm8f8... -&gt; /home/eelco/bla/result

$ ls -l /home/eelco/bla/result
lrwxrwxrwx    1 ... 2005-03-13 21:10 /home/eelco/bla/result -&gt; /nix/store/1r11343n6qd4...-f-spot-0.0.10</fo:block>

    Thus, when <fo:inline font-family="monospace">/home/eelco/bla/result</fo:inline> is removed,
    the GC root in the <fo:inline font-family="monospace">auto</fo:inline> directory becomes a
    dangling symlink and will be ignored by the collector.</fo:block><fo:block id="idm6094" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" margin-left="0.25in" margin-right="0.25in"><fo:block keep-with-next.within-column="always" font-size="14pt" font-weight="bold" hyphenate="false">Warning</fo:block><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Note that it is not possible to move or rename
    indirect GC roots, since the symlink in the
    <fo:inline font-family="monospace">auto</fo:inline> directory will still point to the old
    location.</fo:block></fo:block></fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:list-block id="idm6097" provisional-distance-between-starts="22em * 0.60+1em" provisional-label-separation="1em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em"><fo:list-item id="idm6098" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--help</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Prints out a summary of the command syntax and
  exits.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm6103" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--version</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Prints out the Nix version number on standard output
  and exits.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm6108" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--verbose</fo:inline> / <fo:inline font-family="monospace">-v</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Increases the level of verbosity of diagnostic messages
  printed on standard error.  For each Nix operation, the information
  printed on standard output is well-defined; any diagnostic
  information is printed on standard error, never on standard
  output.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This option may be specified repeatedly.  Currently, the
  following verbosity levels exist:</fo:block><fo:list-block id="idm6115" provisional-distance-between-starts="1em * 0.60+1em" provisional-label-separation="1em"><fo:list-item id="idm6116" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline>0</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">âErrors onlyâ: only print messages
    explaining why the Nix invocation failed.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm6120" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline>1</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">âInformationalâ: print
    <fo:inline font-style="italic">useful</fo:inline> messages about what Nix is doing.
    This is the default.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm6125" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline>2</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">âTalkativeâ: print more informational
    messages.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm6129" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline>3</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">âChattyâ: print even more
    informational messages.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm6133" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline>4</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">âDebugâ: print debug
    information.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm6137" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline>5</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">âVomitâ: print vast amounts of debug
    information.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm6141" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--quiet</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Decreases the level of verbosity of diagnostic messages
  printed on standard error.  This is the inverse option to
  <fo:inline font-family="monospace">-v</fo:inline> / <fo:inline font-family="monospace">--verbose</fo:inline>.
  </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This option may be specified repeatedly.  See the previous
  verbosity levels list.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm6149" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--no-build-output</fo:inline> / <fo:inline font-family="monospace">-Q</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">By default, output written by builders to standard
  output and standard error is echoed to the Nix command's standard
  error.  This option suppresses this behaviour.  Note that the
  builder's standard output and error are always written to a log file
  in
  <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">prefix</fo:inline>/nix/var/log/nix</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm6157" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--max-jobs</fo:inline> / <fo:inline font-family="monospace">-j</fo:inline>
<fo:inline font-style="italic" font-family="monospace">number</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Sets the maximum number of build jobs that Nix will
  perform in parallel to the specified number.  Specify
  <fo:inline font-family="monospace">auto</fo:inline> to use the number of CPUs in the system.
  The default is specified by the <fo:basic-link internal-destination="conf-max-jobs"><fo:inline><fo:inline font-family="monospace">max-jobs</fo:inline></fo:inline></fo:basic-link>
  configuration setting, which itself defaults to
  <fo:inline font-family="monospace">1</fo:inline>.  A higher value is useful on SMP systems or to
  exploit I/O latency.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"> Setting it to <fo:inline font-family="monospace">0</fo:inline> disallows building on the local
  machine, which is useful when you want builds to happen only on remote
  builders.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm6170" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--cores</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Sets the value of the <fo:inline font-family="monospace">NIX_BUILD_CORES</fo:inline>
  environment variable in the invocation of builders.  Builders can
  use this variable at their discretion to control the maximum amount
  of parallelism.  For instance, in Nixpkgs, if the derivation
  attribute <fo:inline font-family="monospace">enableParallelBuilding</fo:inline> is set to
  <fo:inline font-family="monospace">true</fo:inline>, the builder passes the
  <fo:inline font-family="monospace">-j<fo:inline font-style="italic" font-family="monospace">N</fo:inline></fo:inline> flag to GNU Make.
  It defaults to the value of the <fo:basic-link internal-destination="conf-cores"><fo:inline><fo:inline font-family="monospace">cores</fo:inline></fo:inline></fo:basic-link>
  configuration setting, if set, or <fo:inline font-family="monospace">1</fo:inline> otherwise.
  The value <fo:inline font-family="monospace">0</fo:inline> means that the builder should use all
  available CPU cores in the system.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm6184" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--max-silent-time</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Sets the maximum number of seconds that a builder
  can go without producing any data on standard output or standard
  error.  The default is specified by the <fo:basic-link internal-destination="conf-max-silent-time"><fo:inline><fo:inline font-family="monospace">max-silent-time</fo:inline></fo:inline></fo:basic-link>
  configuration setting.  <fo:inline font-family="monospace">0</fo:inline> means no
  time-out.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm6192" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--timeout</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Sets the maximum number of seconds that a builder
  can run.  The default is specified by the <fo:basic-link internal-destination="conf-timeout"><fo:inline><fo:inline font-family="monospace">timeout</fo:inline></fo:inline></fo:basic-link>
  configuration setting.  <fo:inline font-family="monospace">0</fo:inline> means no
  timeout.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm6200" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--keep-going</fo:inline> / <fo:inline font-family="monospace">-k</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Keep going in case of failed builds, to the
  greatest extent possible.  That is, if building an input of some
  derivation fails, Nix will still build the other inputs, but not the
  derivation itself.  Without this option, Nix stops if any build
  fails (except for builds of substitutes), possibly killing builds in
  progress (in case of parallel or distributed builds).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm6206" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--keep-failed</fo:inline> / <fo:inline font-family="monospace">-K</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Specifies that in case of a build failure, the
  temporary directory (usually in <fo:inline font-family="monospace">/tmp</fo:inline>) in which
  the build takes place should not be deleted.  The path of the build
  directory is printed as an informational message.
    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm6213" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--fallback</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Whenever Nix attempts to build a derivation for which
  substitutes are known for each output path, but realising the output
  paths through the substitutes fails, fall back on building the
  derivation.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The most common scenario in which this is useful is when we
  have registered substitutes in order to perform binary distribution
  from, say, a network repository.  If the repository is down, the
  realisation of the derivation will fail.  When this option is
  specified, Nix will build the derivation instead.  Thus,
  installation from binaries falls back on installation from source.
  This option is not the default since it is generally not desirable
  for a transient failure in obtaining the substitutes to lead to a
  full build from source (with the related consumption of
  resources).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm6219" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--no-build-hook</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Disables the build hook mechanism.  This allows to ignore remote
  builders if they are setup on the machine.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">It's useful in cases where the bandwidth between the client and the
  remote builder is too low.  In that case it can take more time to upload the
  sources to the remote builder and fetch back the result than to do the
  computation locally.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm6225" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--readonly-mode</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">When this option is used, no attempt is made to open
  the Nix database.  Most Nix operations do need database access, so
  those operations will fail.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm6230" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--arg</fo:inline> <fo:inline font-style="italic" font-family="monospace">name</fo:inline> <fo:inline font-style="italic" font-family="monospace">value</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This option is accepted by
  <fo:inline font-weight="bold">nix-env</fo:inline>, <fo:inline font-weight="bold">nix-instantiate</fo:inline> and
  <fo:inline font-weight="bold">nix-build</fo:inline>.  When evaluating Nix expressions, the
  expression evaluator will automatically try to call functions that
  it encounters.  It can automatically call functions for which every
  argument has a <fo:basic-link internal-destination="ss-functions"><fo:inline>default value</fo:inline></fo:basic-link>
  (e.g., <fo:inline font-family="monospace">{ <fo:inline font-style="italic" font-family="monospace">argName</fo:inline> ?
  <fo:inline font-style="italic" font-family="monospace">defaultValue</fo:inline> }:
  <fo:inline font-style="italic" font-family="monospace">...</fo:inline></fo:inline>).  With
  <fo:inline font-family="monospace">--arg</fo:inline>, you can also call functions that have
  arguments without a default value (or override a default value).
  That is, if the evaluator encounters a function with an argument
  named <fo:inline font-style="italic" font-family="monospace">name</fo:inline>, it will call it with value
  <fo:inline font-style="italic" font-family="monospace">value</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">For instance, the top-level <fo:inline font-family="monospace">default.nix</fo:inline> in
  Nixpkgs is actually a function:

<fo:block id="idm6250" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
{ # The system (e.g., `i686-linux') for which to build the packages.
  system ? builtins.currentSystem
  <fo:inline font-style="italic" font-family="monospace">...</fo:inline>
}: <fo:inline font-style="italic" font-family="monospace">...</fo:inline></fo:block>

  So if you call this Nix expression (e.g., when you do
  <fo:inline font-family="monospace">nix-env -i <fo:inline font-style="italic" font-family="monospace">pkgname</fo:inline></fo:inline>),
  the function will be called automatically using the value <fo:basic-link internal-destination="builtin-currentSystem"><fo:inline><fo:inline font-family="monospace">builtins.currentSystem</fo:inline></fo:inline></fo:basic-link>
  for the <fo:inline font-family="monospace">system</fo:inline> argument.  You can override this
  using <fo:inline font-family="monospace">--arg</fo:inline>, e.g., <fo:inline font-family="monospace">nix-env -i
  <fo:inline font-style="italic" font-family="monospace">pkgname</fo:inline> --arg system
  \"i686-freebsd\"</fo:inline>.  (Note that since the argument is a Nix
  string literal, you have to escape the quotes.)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm6261" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--argstr</fo:inline> <fo:inline font-style="italic" font-family="monospace">name</fo:inline> <fo:inline font-style="italic" font-family="monospace">value</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This option is like <fo:inline font-family="monospace">--arg</fo:inline>, only the
  value is not a Nix expression but a string.  So instead of
  <fo:inline font-family="monospace">--arg system \"i686-linux\"</fo:inline> (the outer quotes are
  to keep the shell happy) you can say <fo:inline font-family="monospace">--argstr system
  i686-linux</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm6271" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--attr</fo:inline> / <fo:inline font-family="monospace">-A</fo:inline>
<fo:inline font-style="italic" font-family="monospace">attrPath</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Select an attribute from the top-level Nix
  expression being evaluated.  (<fo:inline font-weight="bold">nix-env</fo:inline>,
  <fo:inline font-weight="bold">nix-instantiate</fo:inline>, <fo:inline font-weight="bold">nix-build</fo:inline> and
  <fo:inline font-weight="bold">nix-shell</fo:inline> only.)  The <fo:inline font-style="italic">attribute
  path</fo:inline> <fo:inline font-style="italic" font-family="monospace">attrPath</fo:inline> is a sequence of
  attribute names separated by dots.  For instance, given a top-level
  Nix expression <fo:inline font-style="italic" font-family="monospace">e</fo:inline>, the attribute path
  <fo:inline font-family="monospace">xorg.xorgserver</fo:inline> would cause the expression
  <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">e</fo:inline>.xorg.xorgserver</fo:inline> to
  be used.  See <fo:basic-link internal-destination="refsec-nix-env-install-examples"><fo:inline><fo:inline font-weight="bold">nix-env
  --install</fo:inline></fo:inline></fo:basic-link> for some concrete examples.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In addition to attribute names, you can also specify array
  indices.  For instance, the attribute path
  <fo:inline font-family="monospace">foo.3.bar</fo:inline> selects the <fo:inline font-family="monospace">bar</fo:inline>
  attribute of the fourth element of the array in the
  <fo:inline font-family="monospace">foo</fo:inline> attribute of the top-level
  expression.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm6294" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--expr</fo:inline> / <fo:inline font-family="monospace">-E</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Interpret the command line arguments as a list of
  Nix expressions to be parsed and evaluated, rather than as a list
  of file names of Nix expressions.
  (<fo:inline font-weight="bold">nix-instantiate</fo:inline>, <fo:inline font-weight="bold">nix-build</fo:inline>
  and <fo:inline font-weight="bold">nix-shell</fo:inline> only.)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm6303" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">-I</fo:inline> <fo:inline font-style="italic" font-family="monospace">path</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Add a path to the Nix expression search path.  This
  option may be given multiple times.  See the <fo:inline font-family="monospace">NIX_PATH</fo:inline> environment variable for
  information on the semantics of the Nix search path.  Paths added
  through <fo:inline font-family="monospace">-I</fo:inline> take precedence over
  <fo:inline font-family="monospace">NIX_PATH</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm6312" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--option</fo:inline> <fo:inline font-style="italic" font-family="monospace">name</fo:inline> <fo:inline font-style="italic" font-family="monospace">value</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Set the Nix configuration option
  <fo:inline font-style="italic" font-family="monospace">name</fo:inline> to <fo:inline font-style="italic" font-family="monospace">value</fo:inline>.
  This overrides settings in the Nix configuration file (see
  nix.conf(5)).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm6324" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--repair</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Fix corrupted or missing store paths by
  redownloading or rebuilding them.  Note that this is slow because it
  requires computing a cryptographic hash of the contents of every
  path in the closure of the build.  Also note the warning under
  <fo:inline font-weight="bold">nix-store --repair-path</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="rsec-nix-store-realise"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Operation <fo:inline font-family="monospace">--realise</fo:inline></fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="idm6333"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Synopsis</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-store</fo:inline>  { <fo:inline font-family="monospace">--realise</fo:inline>  |   <fo:inline font-family="monospace">-r</fo:inline> }  <fo:inline font-style="italic" font-family="monospace">paths</fo:inline>...  [<fo:inline font-family="monospace">--dry-run</fo:inline>]</fo:block></fo:block><fo:block id="idm6346"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Description</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The operation <fo:inline font-family="monospace">--realise</fo:inline> essentially âbuildsâ
the specified store paths.  Realisation is a somewhat overloaded term:

<fo:list-block id="idm6350" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm6351" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If the store path is a
  <fo:inline font-style="italic">derivation</fo:inline>, realisation ensures that the output
  paths of the derivation are <fo:basic-link internal-destination="gloss-validity"><fo:inline>valid</fo:inline></fo:basic-link> (i.e., the output path and its
  closure exist in the file system).  This can be done in several
  ways.  First, it is possible that the outputs are already valid, in
  which case we are done immediately.  Otherwise, there may be <fo:basic-link internal-destination="gloss-substitute"><fo:inline>substitutes</fo:inline></fo:basic-link> that produce the
  outputs (e.g., by downloading them).  Finally, the outputs can be
  produced by performing the build action described by the
  derivation.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm6356" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If the store path is not a derivation, realisation
  ensures that the specified path is valid (i.e., it and its closure
  exist in the file system).  If the path is already valid, we are
  done immediately.  Otherwise, the path and any missing paths in its
  closure may be produced through substitutes.  If there are no
  (successful) subsitutes, realisation fails.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block>

</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The output path of each derivation is printed on standard
output.  (For non-derivations argument, the argument itself is
printed.)</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The following flags are available:</fo:block><fo:list-block id="idm6360" provisional-distance-between-starts="16em * 0.60+1em" provisional-label-separation="1em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em"><fo:list-item id="idm6361" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--dry-run</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Print on standard error a description of what
    packages would be built or downloaded, without actually performing
    the operation.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm6366" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--ignore-unknown</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If a non-derivation path does not have a
    substitute, then silently ignore it.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm6371" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--check</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This option allows you to check whether a
    derivation is deterministic. It rebuilds the specified derivation
    and checks whether the result is bitwise-identical with the
    existing outputs, printing an error if thatâs not the case. The
    outputs of the specified derivation must already exist. When used
    with <fo:inline font-family="monospace">-K</fo:inline>, if an output path is not identical to
    the corresponding output from the previous build, the new output
    path is left in
    <fo:inline font-family="monospace">/nix/store/<fo:inline font-style="italic" font-family="monospace">name</fo:inline>.check.</fo:inline></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">See also the <fo:inline font-family="monospace">build-repeat</fo:inline> configuration
    option, which repeats a derivation a number of times and prevents
    its outputs from being registered as âvalidâ in the Nix store
    unless they are identical.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Special exit codes:</fo:block><fo:list-block id="idm6382" provisional-distance-between-starts="3em * 0.60+1em" provisional-label-separation="1em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em"><fo:list-item id="idm6383" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">100</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Generic build failure, the builder process
    returned with a non-zero exit code.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm6388" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">101</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Build timeout, the build was aborted because it
    did not complete within the specified <fo:basic-link internal-destination="conf-timeout"><fo:inline><fo:inline font-family="monospace">timeout</fo:inline></fo:inline></fo:basic-link>.
    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm6395" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">102</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Hash mismatch, the build output was rejected
    because it does not match the specified <fo:basic-link internal-destination="fixed-output-drvs"><fo:inline><fo:inline font-family="monospace">outputHash</fo:inline></fo:inline></fo:basic-link>.
    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm6402" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">104</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Not deterministic, the build succeeded in check
    mode but the resulting output is not binary reproducable.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">With the <fo:inline font-family="monospace">--keep-going</fo:inline> flag it's possible for
multiple failures to occur, in this case the 1xx status codes are or combined
using binary or. <fo:block id="idm6409" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
1100100
   ^^^^
   |||`- timeout
   ||`-- output hash mismatch
   |`--- build failure
   `---- not deterministic
</fo:block></fo:block></fo:block><fo:block id="idm6410"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Examples</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This operation is typically used to build store derivations
produced by <fo:basic-link internal-destination="sec-nix-instantiate"><fo:inline><fo:inline font-weight="bold">nix-instantiate</fo:inline></fo:inline></fo:basic-link>:

<fo:block id="idm6415" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-store -r $(nix-instantiate ./test.nix)
/nix/store/31axcgrlbfsxzmfff1gyj1bf62hvkby2-aterm-2.3.1</fo:block>

This is essentially what <fo:basic-link internal-destination="sec-nix-build"><fo:inline><fo:inline font-weight="bold">nix-build</fo:inline></fo:inline></fo:basic-link> does.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To test whether a previously-built derivation is deterministic:

<fo:block id="idm6419" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-build '&lt;nixpkgs&gt;' -A hello --check -K
</fo:block>

</fo:block></fo:block></fo:block><fo:block id="rsec-nix-store-serve"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Operation <fo:inline font-family="monospace">--serve</fo:inline></fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="idm6423"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Synopsis</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-store</fo:inline>   <fo:inline font-family="monospace">--serve</fo:inline>  [<fo:inline font-family="monospace">--write</fo:inline>]</fo:block></fo:block><fo:block id="idm6431"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Description</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The operation <fo:inline font-family="monospace">--serve</fo:inline> provides access to
the Nix store over stdin and stdout, and is intended to be used
as a means of providing Nix store access to a restricted ssh user.
</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The following flags are available:</fo:block><fo:list-block id="idm6436" provisional-distance-between-starts="7em * 0.60+1em" provisional-label-separation="1em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em"><fo:list-item id="idm6437" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--write</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Allow the connected client to request the realization
    of derivations. In effect, this can be used to make the host act
    as a remote builder.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="idm6442"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Examples</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To turn a host into a build server, the
<fo:inline font-family="monospace">authorized_keys</fo:inline> file can be used to provide build
access to a given SSH public key:

<fo:block id="idm6446" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ cat &lt;&lt;EOF &gt;&gt;/root/.ssh/authorized_keys
command="nice -n20 nix-store --serve --write" ssh-rsa AAAAB3NzaC1yc2EAAAA...
EOF
</fo:block>

</fo:block></fo:block></fo:block><fo:block id="rsec-nix-store-gc"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Operation <fo:inline font-family="monospace">--gc</fo:inline></fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="idm6450"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Synopsis</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-store</fo:inline>   <fo:inline font-family="monospace">--gc</fo:inline>  [ <fo:inline font-family="monospace">--print-roots</fo:inline>  |   <fo:inline font-family="monospace">--print-live</fo:inline>  |   <fo:inline font-family="monospace">--print-dead</fo:inline>  |   <fo:inline font-family="monospace">--delete</fo:inline> ] [<fo:inline font-family="monospace">--max-freed</fo:inline> <fo:inline font-style="italic" font-family="monospace">bytes</fo:inline>]</fo:block></fo:block><fo:block id="idm6468"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Description</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Without additional flags, the operation <fo:inline font-family="monospace">--gc</fo:inline>
performs a garbage collection on the Nix store.  That is, all paths in
the Nix store not reachable via file system references from a set of
ârootsâ, are deleted.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The following suboperations may be specified:</fo:block><fo:list-block id="idm6473" provisional-distance-between-starts="13em * 0.60+1em" provisional-label-separation="1em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em"><fo:list-item id="idm6474" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--print-roots</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This operation prints on standard output the set
    of roots used by the garbage collector.  What constitutes a root
    is described in <fo:basic-link internal-destination="ssec-gc-roots"><fo:inline>the section called âGarbage Collector Rootsâ</fo:inline></fo:basic-link>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm6480" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--print-live</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This operation prints on standard output the set
    of âliveâ store paths, which are all the store paths reachable
    from the roots.  Live paths should never be deleted, since that
    would break consistency â it would become possible that
    applications are installed that reference things that are no
    longer present in the store.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm6485" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--print-dead</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This operation prints out on standard output the
    set of âdeadâ store paths, which is just the opposite of the set
    of live paths: any path in the store that is not live (with
    respect to the roots) is dead.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm6490" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--delete</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This operation performs an actual garbage
    collection.  All dead paths are removed from the
    store.  This is the default.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">By default, all unreachable paths are deleted.  The following
options control what gets deleted and in what order:

<fo:list-block id="idm6496" provisional-distance-between-starts="17em * 0.60+1em" provisional-label-separation="1em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em"><fo:list-item id="idm6497" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--max-freed</fo:inline> <fo:inline font-style="italic" font-family="monospace">bytes</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Keep deleting paths until at least
    <fo:inline font-style="italic" font-family="monospace">bytes</fo:inline> bytes have been deleted, then
    stop.  The argument <fo:inline font-style="italic" font-family="monospace">bytes</fo:inline> can be
    followed by the multiplicative suffix <fo:inline font-family="monospace">K</fo:inline>,
    <fo:inline font-family="monospace">M</fo:inline>, <fo:inline font-family="monospace">G</fo:inline> or
    <fo:inline font-family="monospace">T</fo:inline>, denoting KiB, MiB, GiB or TiB
    units.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block>

</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The behaviour of the collector is also influenced by the <fo:basic-link internal-destination="conf-keep-outputs"><fo:inline><fo:inline font-family="monospace">keep-outputs</fo:inline></fo:inline></fo:basic-link>
and <fo:basic-link internal-destination="conf-keep-derivations"><fo:inline><fo:inline font-family="monospace">keep-derivations</fo:inline></fo:inline></fo:basic-link>
variables in the Nix configuration file.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">With <fo:inline font-family="monospace">--delete</fo:inline>, the collector prints the total
number of freed bytes when it finishes (or when it is interrupted).
With <fo:inline font-family="monospace">--print-dead</fo:inline>, it prints the number of bytes that
would be freed.</fo:block></fo:block><fo:block id="idm6517"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Examples</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To delete all unreachable paths, just do:

<fo:block id="idm6520" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-store --gc
deleting `/nix/store/kq82idx6g0nyzsp2s14gfsc38npai7lf-cairo-1.0.4.tar.gz.drv'
<fo:inline font-style="italic" font-family="monospace">...</fo:inline>
8825586 bytes freed (8.42 MiB)</fo:block>

</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To delete at least 100 MiBs of unreachable paths:

<fo:block id="idm6523" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-store --gc --max-freed $((100 * 1024 * 1024))</fo:block>

</fo:block></fo:block></fo:block><fo:block id="idm6524"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Operation <fo:inline font-family="monospace">--delete</fo:inline></fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="idm6527"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Synopsis</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-store</fo:inline>   <fo:inline font-family="monospace">--delete</fo:inline>  [<fo:inline font-family="monospace">--ignore-liveness</fo:inline>]  <fo:inline font-style="italic" font-family="monospace">paths</fo:inline>... </fo:block></fo:block><fo:block id="idm6537"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Description</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The operation <fo:inline font-family="monospace">--delete</fo:inline> deletes the store paths
<fo:inline font-style="italic" font-family="monospace">paths</fo:inline> from the Nix store, but only if it is
safe to do so; that is, when the path is not reachable from a root of
the garbage collector.  This means that you can only delete paths that
would also be deleted by <fo:inline font-family="monospace">nix-store --gc</fo:inline>.  Thus,
<fo:inline font-family="monospace">--delete</fo:inline> is a more targeted version of
<fo:inline font-family="monospace">--gc</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">With the option <fo:inline font-family="monospace">--ignore-liveness</fo:inline>, reachability
from the roots is ignored.  However, the path still wonât be deleted
if there are other paths in the store that refer to it (i.e., depend
on it).</fo:block></fo:block><fo:block id="idm6547"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Example</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="idm6549" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-store --delete /nix/store/zq0h41l75vlb4z45kzgjjmsjxvcv1qk7-mesa-6.4
0 bytes freed (0.00 MiB)
error: cannot delete path `/nix/store/zq0h41l75vlb4z45kzgjjmsjxvcv1qk7-mesa-6.4' since it is still alive</fo:block></fo:block></fo:block><fo:block id="refsec-nix-store-query"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Operation <fo:inline font-family="monospace">--query</fo:inline></fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="idm6553"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Synopsis</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-store</fo:inline>  { <fo:inline font-family="monospace">--query</fo:inline>  |   <fo:inline font-family="monospace">-q</fo:inline> } { <fo:inline font-family="monospace">--outputs</fo:inline>  |   <fo:inline font-family="monospace">--requisites</fo:inline>  |   <fo:inline font-family="monospace">-R</fo:inline>  |   <fo:inline font-family="monospace">--references</fo:inline>  |   <fo:inline font-family="monospace">--referrers</fo:inline>  |   <fo:inline font-family="monospace">--referrers-closure</fo:inline>  |   <fo:inline font-family="monospace">--deriver</fo:inline>  |   <fo:inline font-family="monospace">-d</fo:inline>  |   <fo:inline font-family="monospace">--graph</fo:inline>  |   <fo:inline font-family="monospace">--tree</fo:inline>  |   <fo:inline font-family="monospace">--binding</fo:inline> <fo:inline font-style="italic" font-family="monospace">name</fo:inline>  |   <fo:inline font-family="monospace">-b</fo:inline> <fo:inline font-style="italic" font-family="monospace">name</fo:inline>  |   <fo:inline font-family="monospace">--hash</fo:inline>  |   <fo:inline font-family="monospace">--size</fo:inline>  |   <fo:inline font-family="monospace">--roots</fo:inline> } [<fo:inline font-family="monospace">--use-output</fo:inline>] [<fo:inline font-family="monospace">-u</fo:inline>] [<fo:inline font-family="monospace">--force-realise</fo:inline>] [<fo:inline font-family="monospace">-f</fo:inline>]  <fo:inline font-style="italic" font-family="monospace">paths</fo:inline>... </fo:block></fo:block><fo:block id="idm6605"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Description</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The operation <fo:inline font-family="monospace">--query</fo:inline> displays various bits of
information about the store paths .  The queries are described below.  At
most one query can be specified.  The default query is
<fo:inline font-family="monospace">--outputs</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The paths <fo:inline font-style="italic" font-family="monospace">paths</fo:inline> may also be symlinks
from outside of the Nix store, to the Nix store.  In that case, the
query is applied to the target of the symlink.</fo:block></fo:block><fo:block id="idm6612"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Common query options</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:list-block id="idm6614" provisional-distance-between-starts="17em * 0.60+1em" provisional-label-separation="1em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em"><fo:list-item id="idm6615" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--use-output</fo:inline></fo:inline><fo:inline>, </fo:inline><fo:inline><fo:inline font-family="monospace">-u</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">For each argument to the query that is a store
    derivation, apply the query to the output path of the derivation
    instead.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm6622" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--force-realise</fo:inline></fo:inline><fo:inline>, </fo:inline><fo:inline><fo:inline font-family="monospace">-f</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Realise each argument to the query first (see
    <fo:basic-link internal-destination="rsec-nix-store-realise"><fo:inline><fo:inline font-weight="bold">nix-store
    --realise</fo:inline></fo:inline></fo:basic-link>).</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="nixref-queries"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Queries</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:list-block id="idm6633" provisional-distance-between-starts="19em * 0.60+1em" provisional-label-separation="1em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em"><fo:list-item id="idm6634" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--outputs</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Prints out the <fo:basic-link internal-destination="gloss-output-path"><fo:inline>output paths</fo:inline></fo:basic-link> of the store
    derivations <fo:inline font-style="italic" font-family="monospace">paths</fo:inline>.  These are the paths
    that will be produced when the derivation is
    built.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm6641" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--requisites</fo:inline></fo:inline><fo:inline>, </fo:inline><fo:inline><fo:inline font-family="monospace">-R</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Prints out the <fo:basic-link internal-destination="gloss-closure"><fo:inline>closure</fo:inline></fo:basic-link> of the store path
    <fo:inline font-style="italic" font-family="monospace">paths</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This query has one option:</fo:block><fo:list-block id="idm6651" provisional-distance-between-starts="17em * 0.60+1em" provisional-label-separation="1em"><fo:list-item id="idm6652" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--include-outputs</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Also include the output path of store
        derivations, and their closures.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This query can be used to implement various kinds of
    deployment.  A <fo:inline font-style="italic">source deployment</fo:inline> is obtained
    by distributing the closure of a store derivation.  A
    <fo:inline font-style="italic">binary deployment</fo:inline> is obtained by distributing
    the closure of an output path.  A <fo:inline font-style="italic">cache
    deployment</fo:inline> (combined source/binary deployment,
    including binaries of build-time-only dependencies) is obtained by
    distributing the closure of a store derivation and specifying the
    option <fo:inline font-family="monospace">--include-outputs</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm6662" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--references</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Prints the set of <fo:basic-link internal-destination="gloss-reference"><fo:inline>references</fo:inline></fo:basic-link> of the store paths
    <fo:inline font-style="italic" font-family="monospace">paths</fo:inline>, that is, their immediate
    dependencies.  (For <fo:inline font-style="italic">all</fo:inline> dependencies, use
    <fo:inline font-family="monospace">--requisites</fo:inline>.)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm6671" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--referrers</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Prints the set of <fo:inline font-style="italic">referrers</fo:inline> of
    the store paths <fo:inline font-style="italic" font-family="monospace">paths</fo:inline>, that is, the
    store paths currently existing in the Nix store that refer to one
    of <fo:inline font-style="italic" font-family="monospace">paths</fo:inline>.  Note that contrary to the
    references, the set of referrers is not constant; it can change as
    store paths are added or removed.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm6679" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--referrers-closure</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Prints the closure of the set of store paths
    <fo:inline font-style="italic" font-family="monospace">paths</fo:inline> under the referrers relation; that
    is, all store paths that directly or indirectly refer to one of
    <fo:inline font-style="italic" font-family="monospace">paths</fo:inline>.  These are all the path currently
    in the Nix store that are dependent on
    <fo:inline font-style="italic" font-family="monospace">paths</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm6687" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--deriver</fo:inline></fo:inline><fo:inline>, </fo:inline><fo:inline><fo:inline font-family="monospace">-d</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Prints the <fo:basic-link internal-destination="gloss-deriver"><fo:inline>deriver</fo:inline></fo:basic-link> of the store paths
    <fo:inline font-style="italic" font-family="monospace">paths</fo:inline>.  If the path has no deriver
    (e.g., if it is a source file), or if the deriver is not known
    (e.g., in the case of a binary-only deployment), the string
    <fo:inline font-family="monospace">unknown-deriver</fo:inline> is printed.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm6697" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--graph</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Prints the references graph of the store paths
    <fo:inline font-style="italic" font-family="monospace">paths</fo:inline> in the format of the
    <fo:inline font-weight="bold">dot</fo:inline> tool of AT&amp;T's <fo:basic-link external-destination="url(http://www.graphviz.org/)"><fo:inline>Graphviz package</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(http://www.graphviz.org/)">http://www.graphviz.org/</fo:basic-link>]</fo:inline>.
    This can be used to visualise dependency graphs.  To obtain a
    build-time dependency graph, apply this to a store derivation.  To
    obtain a runtime dependency graph, apply it to an output
    path.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm6705" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--tree</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Prints the references graph of the store paths
    <fo:inline font-style="italic" font-family="monospace">paths</fo:inline> as a nested ASCII tree.
    References are ordered by descending closure size; this tends to
    flatten the tree, making it more readable.  The query only
    recurses into a store path when it is first encountered; this
    prevents a blowup of the tree representation of the
    graph.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm6711" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--graphml</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Prints the references graph of the store paths
    <fo:inline font-style="italic" font-family="monospace">paths</fo:inline> in the <fo:basic-link external-destination="url(http://graphml.graphdrawing.org/)"><fo:inline>GraphML</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(http://graphml.graphdrawing.org/)">http://graphml.graphdrawing.org/</fo:basic-link>]</fo:inline> file format.
    This can be used to visualise dependency graphs. To obtain a
    build-time dependency graph, apply this to a store derivation. To
    obtain a runtime dependency graph, apply it to an output
    path.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm6718" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--binding</fo:inline> <fo:inline font-style="italic" font-family="monospace">name</fo:inline></fo:inline><fo:inline>, </fo:inline><fo:inline><fo:inline font-family="monospace">-b</fo:inline> <fo:inline font-style="italic" font-family="monospace">name</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Prints the value of the attribute
    <fo:inline font-style="italic" font-family="monospace">name</fo:inline> (i.e., environment variable) of
    the store derivations <fo:inline font-style="italic" font-family="monospace">paths</fo:inline>.  It is an
    error for a derivation to not have the specified
    attribute.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm6729" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--hash</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Prints the SHA-256 hash of the contents of the
    store paths <fo:inline font-style="italic" font-family="monospace">paths</fo:inline> (that is, the hash of
    the output of <fo:inline font-weight="bold">nix-store --dump</fo:inline> on the given
    paths).  Since the hash is stored in the Nix database, this is a
    fast operation.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm6736" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--size</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Prints the size in bytes of the contents of the
    store paths <fo:inline font-style="italic" font-family="monospace">paths</fo:inline> â to be precise, the
    size of the output of <fo:inline font-weight="bold">nix-store --dump</fo:inline> on the
    given paths.  Note that the actual disk space required by the
    store paths may be higher, especially on filesystems with large
    cluster sizes.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm6743" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--roots</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Prints the garbage collector roots that point,
    directly or indirectly, at the store paths
    <fo:inline font-style="italic" font-family="monospace">paths</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="idm6749"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Examples</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Print the closure (runtime dependencies) of the
<fo:inline font-weight="bold">svn</fo:inline> program in the current user environment:

<fo:block id="idm6753" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-store -qR $(which svn)
/nix/store/5mbglq5ldqld8sj57273aljwkfvj22mc-subversion-1.1.4
/nix/store/9lz9yc6zgmc0vlqmn2ipcpkjlmbi51vv-glibc-2.3.4
<fo:inline font-style="italic" font-family="monospace">...</fo:inline></fo:block>

</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Print the build-time dependencies of <fo:inline font-weight="bold">svn</fo:inline>:

<fo:block id="idm6757" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-store -qR $(nix-store -qd $(which svn))
/nix/store/02iizgn86m42q905rddvg4ja975bk2i4-grep-2.5.1.tar.bz2.drv
/nix/store/07a2bzxmzwz5hp58nf03pahrv2ygwgs3-gcc-wrapper.sh
/nix/store/0ma7c9wsbaxahwwl04gbw3fcd806ski4-glibc-2.3.4.drv
<fo:inline font-style="italic" font-family="monospace">... lots of other paths ...</fo:inline></fo:block>

The difference with the previous example is that we ask the closure of
the derivation (<fo:inline font-family="monospace">-qd</fo:inline>), not the closure of the output
path that contains <fo:inline font-weight="bold">svn</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Show the build-time dependencies as a tree:

<fo:block id="idm6762" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-store -q --tree $(nix-store -qd $(which svn))
/nix/store/7i5082kfb6yjbqdbiwdhhza0am2xvh6c-subversion-1.1.4.drv
+---/nix/store/d8afh10z72n8l1cr5w42366abiblgn54-builder.sh
+---/nix/store/fmzxmpjx2lh849ph0l36snfj9zdibw67-bash-3.0.drv
|   +---/nix/store/570hmhmx3v57605cqg9yfvvyh0nnb8k8-bash
|   +---/nix/store/p3srsbd8dx44v2pg6nbnszab5mcwx03v-builder.sh
<fo:inline font-style="italic" font-family="monospace">...</fo:inline></fo:block>

</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Show all paths that depend on the same OpenSSL library as
<fo:inline font-weight="bold">svn</fo:inline>:

<fo:block id="idm6766" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-store -q --referrers $(nix-store -q --binding openssl $(nix-store -qd $(which svn)))
/nix/store/23ny9l9wixx21632y2wi4p585qhva1q8-sylpheed-1.0.0
/nix/store/5mbglq5ldqld8sj57273aljwkfvj22mc-subversion-1.1.4
/nix/store/dpmvp969yhdqs7lm2r1a3gng7pyq6vy4-subversion-1.1.3
/nix/store/l51240xqsgg8a7yrbqdx1rfzyv6l26fx-lynx-2.8.5</fo:block>

</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Show all paths that directly or indirectly depend on the Glibc
(C library) used by <fo:inline font-weight="bold">svn</fo:inline>:

<fo:block id="idm6769" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-store -q --referrers-closure $(ldd $(which svn) | grep /libc.so | awk '{print $3}')
/nix/store/034a6h4vpz9kds5r6kzb9lhh81mscw43-libgnomeprintui-2.8.2
/nix/store/15l3yi0d45prm7a82pcrknxdh6nzmxza-gawk-3.1.4
<fo:inline font-style="italic" font-family="monospace">...</fo:inline></fo:block>

Note that <fo:inline font-weight="bold">ldd</fo:inline> is a command that prints out the
dynamic libraries used by an ELF executable.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Make a picture of the runtime dependency graph of the current
user environment:

<fo:block id="idm6773" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-store -q --graph ~/.nix-profile | dot -Tps &gt; graph.ps
$ gv graph.ps</fo:block>

</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Show every garbage collector root that points to a store path
that depends on <fo:inline font-weight="bold">svn</fo:inline>:

<fo:block id="idm6776" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-store -q --roots $(which svn)
/nix/var/nix/profiles/default-81-link
/nix/var/nix/profiles/default-82-link
/nix/var/nix/profiles/per-user/eelco/profile-97-link
</fo:block>

</fo:block></fo:block></fo:block><fo:block id="idm6777"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Operation <fo:inline font-family="monospace">--add</fo:inline></fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="idm6780"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Synopsis</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-store</fo:inline>   <fo:inline font-family="monospace">--add</fo:inline>   <fo:inline font-style="italic" font-family="monospace">paths</fo:inline>... </fo:block></fo:block><fo:block id="idm6788"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Description</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The operation <fo:inline font-family="monospace">--add</fo:inline> adds the specified paths to
the Nix store.  It prints the resulting paths in the Nix store on
standard output.</fo:block></fo:block><fo:block id="idm6792"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Example</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="idm6794" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-store --add ./foo.c
/nix/store/m7lrha58ph6rcnv109yzx1nk1cj7k7zf-foo.c</fo:block></fo:block></fo:block><fo:block id="idm6795"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Operation <fo:inline font-family="monospace">--add-fixed</fo:inline></fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="idm6798"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Synopsis</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-store</fo:inline>  [<fo:inline font-family="monospace">--recursive</fo:inline>]  <fo:inline font-family="monospace">--add-fixed</fo:inline>   <fo:inline font-style="italic" font-family="monospace">algorithm</fo:inline>   <fo:inline font-style="italic" font-family="monospace">paths</fo:inline>... </fo:block></fo:block><fo:block id="idm6810"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Description</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The operation <fo:inline font-family="monospace">--add-fixed</fo:inline> adds the specified paths to
the Nix store.  Unlike <fo:inline font-family="monospace">--add</fo:inline> paths are registered using the
specified hashing algorithm, resulting in the same output path as a fixed output
derivation.  This can be used for sources that are not available from a public
url or broke since the download expression was written.
</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This operation has the following options:

<fo:list-block id="idm6816" provisional-distance-between-starts="11em * 0.60+1em" provisional-label-separation="1em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em"><fo:list-item id="idm6817" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--recursive</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      Use recursive instead of flat hashing mode, used when adding directories
      to the store.
    </fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block>

</fo:block></fo:block><fo:block id="idm6822"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Example</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="idm6824" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-store --add-fixed sha256 ./hello-2.10.tar.gz
/nix/store/3x7dwzq014bblazs7kq20p9hyzz0qh8g-hello-2.10.tar.gz</fo:block></fo:block></fo:block><fo:block id="refsec-nix-store-verify"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Operation <fo:inline font-family="monospace">--verify</fo:inline></fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="idm6828"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Synopsis</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-store</fo:inline>   <fo:inline font-family="monospace">--verify</fo:inline>  [<fo:inline font-family="monospace">--check-contents</fo:inline>] [<fo:inline font-family="monospace">--repair</fo:inline>]</fo:block></fo:block><fo:block id="idm6838"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Description</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The operation <fo:inline font-family="monospace">--verify</fo:inline> verifies the internal
consistency of the Nix database, and the consistency between the Nix
database and the Nix store.  Any inconsistencies encountered are
automatically repaired.  Inconsistencies are generally the result of
the Nix store or database being modified by non-Nix tools, or of bugs
in Nix itself.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This operation has the following options:

<fo:list-block id="idm6843" provisional-distance-between-starts="16em * 0.60+1em" provisional-label-separation="1em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em"><fo:list-item id="idm6844" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--check-contents</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Checks that the contents of every valid store path
    has not been altered by computing a SHA-256 hash of the contents
    and comparing it with the hash stored in the Nix database at build
    time.  Paths that have been modified are printed out.  For large
    stores, <fo:inline font-family="monospace">--check-contents</fo:inline> is obviously quite
    slow.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm6850" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--repair</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If any valid path is missing from the store, or
    (if <fo:inline font-family="monospace">--check-contents</fo:inline> is given) the contents of a
    valid path has been modified, then try to repair the path by
    redownloading it.  See <fo:inline font-weight="bold">nix-store --repair-path</fo:inline>
    for details.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block>

</fo:block></fo:block></fo:block><fo:block id="idm6857"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Operation <fo:inline font-family="monospace">--verify-path</fo:inline></fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="idm6860"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Synopsis</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-store</fo:inline>   <fo:inline font-family="monospace">--verify-path</fo:inline>   <fo:inline font-style="italic" font-family="monospace">paths</fo:inline>... </fo:block></fo:block><fo:block id="idm6868"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Description</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The operation <fo:inline font-family="monospace">--verify-path</fo:inline> compares the
contents of the given store paths to their cryptographic hashes stored
in Nixâs database.  For every changed path, it prints a warning
message.  The exit status is 0 if no path has changed, and 1
otherwise.</fo:block></fo:block><fo:block id="idm6872"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Example</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To verify the integrity of the <fo:inline font-weight="bold">svn</fo:inline> command and all its dependencies:

<fo:block id="idm6876" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-store --verify-path $(nix-store -qR $(which svn))
</fo:block>

</fo:block></fo:block></fo:block><fo:block id="idm6877"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Operation <fo:inline font-family="monospace">--repair-path</fo:inline></fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="idm6880"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Synopsis</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-store</fo:inline>   <fo:inline font-family="monospace">--repair-path</fo:inline>   <fo:inline font-style="italic" font-family="monospace">paths</fo:inline>... </fo:block></fo:block><fo:block id="idm6888"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Description</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The operation <fo:inline font-family="monospace">--repair-path</fo:inline> attempts to
ârepairâ the specified paths by redownloading them using the available
substituters.  If no substitutes are available, then repair is not
possible.</fo:block><fo:block id="idm6892" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" margin-left="0.25in" margin-right="0.25in"><fo:block keep-with-next.within-column="always" font-size="14pt" font-weight="bold" hyphenate="false">Warning</fo:block><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">During repair, there is a very small time window during
which the old path (if it exists) is moved out of the way and replaced
with the new path.  If repair is interrupted in between, then the
system may be left in a broken state (e.g., if the path contains a
critical system component like the GNU C Library).</fo:block></fo:block></fo:block></fo:block><fo:block id="idm6894"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Example</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="idm6896" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-store --verify-path /nix/store/dj7a81wsm1ijwwpkks3725661h3263p5-glibc-2.13
path `/nix/store/dj7a81wsm1ijwwpkks3725661h3263p5-glibc-2.13' was modified!
  expected hash `2db57715ae90b7e31ff1f2ecb8c12ec1cc43da920efcbe3b22763f36a1861588',
  got `481c5aa5483ebc97c20457bb8bca24deea56550d3985cda0027f67fe54b808e4'

$ nix-store --repair-path /nix/store/dj7a81wsm1ijwwpkks3725661h3263p5-glibc-2.13
fetching path `/nix/store/d7a81wsm1ijwwpkks3725661h3263p5-glibc-2.13'...
â¦
</fo:block></fo:block></fo:block><fo:block id="refsec-nix-store-dump"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Operation <fo:inline font-family="monospace">--dump</fo:inline></fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="idm6900"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Synopsis</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-store</fo:inline>   <fo:inline font-family="monospace">--dump</fo:inline>   <fo:inline font-style="italic" font-family="monospace">path</fo:inline> </fo:block></fo:block><fo:block id="idm6908"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Description</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The operation <fo:inline font-family="monospace">--dump</fo:inline> produces a NAR (Nix
ARchive) file containing the contents of the file system tree rooted
at <fo:inline font-style="italic" font-family="monospace">path</fo:inline>.  The archive is written to
standard output.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A NAR archive is like a TAR or Zip archive, but it contains only
the information that Nix considers important.  For instance,
timestamps are elided because all files in the Nix store have their
timestamp set to 0 anyway.  Likewise, all permissions are left out
except for the execute bit, because all files in the Nix store have
644 or 755 permission.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Also, a NAR archive is <fo:inline font-style="italic">canonical</fo:inline>, meaning
that âequalâ paths always produce the same NAR archive.  For instance,
directory entries are always sorted so that the actual on-disk order
doesnât influence the result.  This means that the cryptographic hash
of a NAR dump of a path is usable as a fingerprint of the contents of
the path.  Indeed, the hashes of store paths stored in Nixâs database
(see <fo:basic-link internal-destination="refsec-nix-store-query"><fo:inline><fo:inline font-family="monospace">nix-store -q
--hash</fo:inline></fo:inline></fo:basic-link>) are SHA-256 hashes of the NAR dump of each
store path.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">NAR archives support filenames of unlimited length and 64-bit
file sizes.  They can contain regular files, directories, and symbolic
links, but not other types of files (such as device nodes).</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A Nix archive can be unpacked using <fo:inline font-family="monospace">nix-store
--restore</fo:inline>.</fo:block></fo:block></fo:block><fo:block id="idm6921"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Operation <fo:inline font-family="monospace">--restore</fo:inline></fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="idm6924"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Synopsis</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-store</fo:inline>   <fo:inline font-family="monospace">--restore</fo:inline>   <fo:inline font-style="italic" font-family="monospace">path</fo:inline> </fo:block></fo:block><fo:block id="idm6932"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Description</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The operation <fo:inline font-family="monospace">--restore</fo:inline> unpacks a NAR archive
to <fo:inline font-style="italic" font-family="monospace">path</fo:inline>, which must not already exist.  The
archive is read from standard input.</fo:block></fo:block></fo:block><fo:block id="refsec-nix-store-export"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Operation <fo:inline font-family="monospace">--export</fo:inline></fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="idm6940"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Synopsis</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-store</fo:inline>   <fo:inline font-family="monospace">--export</fo:inline>   <fo:inline font-style="italic" font-family="monospace">paths</fo:inline>... </fo:block></fo:block><fo:block id="idm6948"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Description</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The operation <fo:inline font-family="monospace">--export</fo:inline> writes a serialisation
of the specified store paths to standard output in a format that can
be imported into another Nix store with <fo:inline font-weight="bold"><fo:basic-link internal-destination="refsec-nix-store-import">nix-store --import</fo:basic-link></fo:inline>.  This
is like <fo:inline font-weight="bold"><fo:basic-link internal-destination="refsec-nix-store-dump">nix-store
--dump</fo:basic-link></fo:inline>, except that the NAR archive produced by that command
doesnât contain the necessary meta-information to allow it to be
imported into another Nix store (namely, the set of references of the
path).</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This command does not produce a <fo:inline font-style="italic">closure</fo:inline> of
the specified paths, so if a store path references other store paths
that are missing in the target Nix store, the import will fail.  To
copy a whole closure, do something like:

<fo:block id="idm6956" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-store --export $(nix-store -qR <fo:inline font-style="italic" font-family="monospace">paths</fo:inline>) &gt; out</fo:block>

To import the whole closure again, run:

<fo:block id="idm6958" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-store --import &lt; out</fo:block>

</fo:block></fo:block></fo:block><fo:block id="refsec-nix-store-import"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Operation <fo:inline font-family="monospace">--import</fo:inline></fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="idm6962"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Synopsis</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-store</fo:inline>   <fo:inline font-family="monospace">--import</fo:inline> </fo:block></fo:block><fo:block id="idm6968"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Description</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The operation <fo:inline font-family="monospace">--import</fo:inline> reads a serialisation of
a set of store paths produced by <fo:inline font-weight="bold"><fo:basic-link internal-destination="refsec-nix-store-export">nix-store --export</fo:basic-link></fo:inline> from
standard input and adds those store paths to the Nix store.  Paths
that already exist in the Nix store are ignored.  If a path refers to
another path that doesnât exist in the Nix store, the import
fails.</fo:block></fo:block></fo:block><fo:block id="idm6973"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Operation <fo:inline font-family="monospace">--optimise</fo:inline></fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="idm6976"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Synopsis</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-store</fo:inline>   <fo:inline font-family="monospace">--optimise</fo:inline> </fo:block></fo:block><fo:block id="idm6982"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Description</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The operation <fo:inline font-family="monospace">--optimise</fo:inline> reduces Nix store disk
space usage by finding identical files in the store and hard-linking
them to each other.  It typically reduces the size of the store by
something like 25-35%.  Only regular files and symlinks are
hard-linked in this manner.  Files are considered identical when they
have the same NAR archive serialisation: that is, regular files must
have the same contents and permission (executable or non-executable),
and symlinks must have the same contents.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">After completion, or when the command is interrupted, a report
on the achieved savings is printed on standard error.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Use <fo:inline font-family="monospace">-vv</fo:inline> or <fo:inline font-family="monospace">-vvv</fo:inline> to get some
progress indication.</fo:block></fo:block><fo:block id="idm6990"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Example</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="idm6992" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-store --optimise
hashing files in `/nix/store/qhqx7l2f1kmwihc9bnxs7rc159hsxnf3-gcc-4.1.1'
<fo:inline font-style="italic" font-family="monospace">...</fo:inline>
541838819 bytes (516.74 MiB) freed by hard-linking 54143 files;
there are 114486 files with equal contents out of 215894 files in total
</fo:block></fo:block></fo:block><fo:block id="idm6994"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Operation <fo:inline font-family="monospace">--read-log</fo:inline></fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="idm6997"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Synopsis</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-store</fo:inline>  { <fo:inline font-family="monospace">--read-log</fo:inline>  |   <fo:inline font-family="monospace">-l</fo:inline> }  <fo:inline font-style="italic" font-family="monospace">paths</fo:inline>... </fo:block></fo:block><fo:block id="idm7008"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Description</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The operation <fo:inline font-family="monospace">--read-log</fo:inline> prints the build log
of the specified store paths on standard output.  The build log is
whatever the builder of a derivation wrote to standard output and
standard error.  If a store path is not a derivation, the deriver of
the store path is used.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Build logs are kept in
<fo:inline font-family="monospace">/nix/var/log/nix/drvs</fo:inline>.  However, there is no
guarantee that a build log is available for any particular store path.
For instance, if the path was downloaded as a pre-built binary through
a substitute, then the log is unavailable.</fo:block></fo:block><fo:block id="idm7014"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Example</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="idm7016" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-store -l $(which ktorrent)
building /nix/store/dhc73pvzpnzxhdgpimsd9sw39di66ph1-ktorrent-2.2.1
unpacking sources
unpacking source archive /nix/store/p8n1jpqs27mgkjw07pb5269717nzf5f8-ktorrent-2.2.1.tar.gz
ktorrent-2.2.1/
ktorrent-2.2.1/NEWS
<fo:inline font-style="italic" font-family="monospace">...</fo:inline>
</fo:block></fo:block></fo:block><fo:block id="idm7018"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Operation <fo:inline font-family="monospace">--dump-db</fo:inline></fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="idm7021"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Synopsis</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-store</fo:inline>   <fo:inline font-family="monospace">--dump-db</fo:inline>  [<fo:inline font-style="italic" font-family="monospace">paths</fo:inline>...]</fo:block></fo:block><fo:block id="idm7029"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Description</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The operation <fo:inline font-family="monospace">--dump-db</fo:inline> writes a dump of the
Nix database to standard output.  It can be loaded into an empty Nix
store using <fo:inline font-family="monospace">--load-db</fo:inline>.  This is useful for making
backups and when migrating to different database schemas.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">By default, <fo:inline font-family="monospace">--dump-db</fo:inline> will dump the entire Nix
database.  When one or more store paths is passed, only the subset of
the Nix database for those store paths is dumped.  As with
<fo:inline font-family="monospace">--export</fo:inline>, the user is responsible for passing all the
store paths for a closure.  See <fo:inline font-family="monospace">--export</fo:inline> for an
example.</fo:block></fo:block></fo:block><fo:block id="idm7038"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Operation <fo:inline font-family="monospace">--load-db</fo:inline></fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="idm7041"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Synopsis</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-store</fo:inline>   <fo:inline font-family="monospace">--load-db</fo:inline> </fo:block></fo:block><fo:block id="idm7047"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Description</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The operation <fo:inline font-family="monospace">--load-db</fo:inline> reads a dump of the Nix
database created by <fo:inline font-family="monospace">--dump-db</fo:inline> from standard input and
loads it into the Nix database.</fo:block></fo:block></fo:block><fo:block id="idm7052"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Operation <fo:inline font-family="monospace">--print-env</fo:inline></fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="idm7055"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Synopsis</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-store</fo:inline>   <fo:inline font-family="monospace">--print-env</fo:inline>   <fo:inline font-style="italic" font-family="monospace">drvpath</fo:inline> </fo:block></fo:block><fo:block id="idm7063"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Description</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The operation <fo:inline font-family="monospace">--print-env</fo:inline> prints out the
environment of a derivation in a format that can be evaluated by a
shell.  The command line arguments of the builder are placed in the
variable <fo:inline font-family="monospace">_args</fo:inline>.</fo:block></fo:block><fo:block id="idm7068"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Example</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="idm7070" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-store --print-env $(nix-instantiate '&lt;nixpkgs&gt;' -A firefox)
<fo:inline font-style="italic" font-family="monospace">â¦</fo:inline>
export src; src='/nix/store/plpj7qrwcz94z2psh6fchsi7s8yihc7k-firefox-12.0.source.tar.bz2'
export stdenv; stdenv='/nix/store/7c8asx3yfrg5dg1gzhzyq2236zfgibnn-stdenv'
export system; system='x86_64-linux'
export _args; _args='-e /nix/store/9krlzvny65gdc8s7kpb6lkx8cd02c25c-default-builder.sh'
</fo:block></fo:block></fo:block><fo:block id="rsec-nix-store-generate-binary-cache-key"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Operation <fo:inline font-family="monospace">--generate-binary-cache-key</fo:inline></fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="idm7075"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Synopsis</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-store</fo:inline>   
      <fo:inline font-family="monospace">--generate-binary-cache-key</fo:inline>
      <fo:inline font-family="monospace">key-name</fo:inline>
      <fo:inline font-family="monospace">secret-key-file</fo:inline>
      <fo:inline font-family="monospace">public-key-file</fo:inline>
     </fo:block></fo:block><fo:block id="idm7084"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Description</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This command generates an <fo:basic-link external-destination="url(http://ed25519.cr.yp.to/)"><fo:inline>Ed25519 key pair</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(http://ed25519.cr.yp.to/)">http://ed25519.cr.yp.to/</fo:basic-link>]</fo:inline> that can
be used to create a signed binary cache. It takes three mandatory
parameters:

<fo:list-block id="idm7088" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-distance-between-starts="1.2em" provisional-label-separation="0.2em"><fo:list-item id="idm7089" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>1.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A key name, such as
  <fo:inline font-family="monospace">cache.example.org-1</fo:inline>, that is used to look up keys
  on the client when it verifies signatures. It can be anything, but
  itâs suggested to use the host name of your cache
  (e.g. <fo:inline font-family="monospace">cache.example.org</fo:inline>) with a suffix denoting
  the number of the key (to be incremented every time you need to
  revoke a key).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7093" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>2.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The file name where the secret key is to be
  stored.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7095" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>3.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The file name where the public key is to be
  stored.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block>

</fo:block></fo:block></fo:block><fo:block id="idm7097"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Environment variables</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:list-block id="idm7099" provisional-distance-between-starts="24em * 0.60+1em" provisional-label-separation="1em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em"><fo:list-item id="idm7100" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">IN_NIX_SHELL</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Indicator that tells if the current environment was set up by
  <fo:inline font-weight="bold">nix-shell</fo:inline>.  Since Nix 2.0 the values are
  <fo:inline font-family="monospace">"pure"</fo:inline> and <fo:inline font-family="monospace">"impure"</fo:inline></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7108" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_PATH</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A colon-separated list of directories used to look up Nix
    expressions enclosed in angle brackets (i.e.,
    <fo:inline font-family="monospace">&lt;<fo:inline font-style="italic" font-family="monospace">path</fo:inline>&gt;</fo:inline>).  For
    instance, the value

    <fo:block id="idm7115" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
/home/eelco/Dev:/etc/nixos</fo:block>

    will cause Nix to look for paths relative to
    <fo:inline font-family="monospace">/home/eelco/Dev</fo:inline> and
    <fo:inline font-family="monospace">/etc/nixos</fo:inline>, in that order.  It is also
    possible to match paths against a prefix.  For example, the value

    <fo:block id="idm7118" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
nixpkgs=/home/eelco/Dev/nixpkgs-branch:/etc/nixos</fo:block>

    will cause Nix to search for
    <fo:inline font-family="monospace">&lt;nixpkgs/<fo:inline font-style="italic" font-family="monospace">path</fo:inline>&gt;</fo:inline> in
    <fo:inline font-family="monospace">/home/eelco/Dev/nixpkgs-branch/<fo:inline font-style="italic" font-family="monospace">path</fo:inline></fo:inline>
    and
    <fo:inline font-family="monospace">/etc/nixos/nixpkgs/<fo:inline font-style="italic" font-family="monospace">path</fo:inline></fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If a path in the Nix search path starts with
    <fo:inline font-family="monospace">http://</fo:inline> or <fo:inline font-family="monospace">https://</fo:inline>, it is
    interpreted as the URL of a tarball that will be downloaded and
    unpacked to a temporary location. The tarball must consist of a
    single top-level directory. For example, setting
    <fo:inline font-family="monospace">NIX_PATH</fo:inline> to

    <fo:block id="idm7129" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
nixpkgs=https://github.com/NixOS/nixpkgs-channels/archive/nixos-15.09.tar.gz</fo:block>

    tells Nix to download the latest revision in the Nixpkgs/NixOS
    15.09 channel.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A following shorthand can be used to refer to the official channels:
    
    <fo:block id="idm7131" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">nixpkgs=channel:nixos-15.09</fo:block>
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The search path can be extended using the <fo:inline font-family="monospace">-I</fo:inline> option, which takes precedence over
    <fo:inline font-family="monospace">NIX_PATH</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7135" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_IGNORE_SYMLINK_STORE</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Normally, the Nix store directory (typically
  <fo:inline font-family="monospace">/nix/store</fo:inline>) is not allowed to contain any
  symlink components.  This is to prevent âimpureâ builds.  Builders
  sometimes âcanonicaliseâ paths by resolving all symlink components.
  Thus, builds on different machines (with
  <fo:inline font-family="monospace">/nix/store</fo:inline> resolving to different locations)
  could yield different results.  This is generally not a problem,
  except when builds are deployed to machines where
  <fo:inline font-family="monospace">/nix/store</fo:inline> resolves differently.  If you are
  sure that youâre not going to do that, you can set
  <fo:inline font-family="monospace">NIX_IGNORE_SYMLINK_STORE</fo:inline> to <fo:inline font-family="monospace">1</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Note that if youâre symlinking the Nix store so that you can
  put it on another file system than the root file system, on Linux
  youâre better off using <fo:inline font-family="monospace">bind</fo:inline> mount points, e.g.,

  <fo:block id="idm7147" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ mkdir /nix
$ mount -o bind /mnt/otherdisk/nix /nix</fo:block>

  Consult the mount(8) manual page for details.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7151" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_STORE_DIR</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Overrides the location of the Nix store (default
  <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">prefix</fo:inline>/store</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7158" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_DATA_DIR</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Overrides the location of the Nix static data
  directory (default
  <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">prefix</fo:inline>/share</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7165" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_LOG_DIR</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Overrides the location of the Nix log directory
  (default <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">prefix</fo:inline>/var/log/nix</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7172" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_STATE_DIR</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Overrides the location of the Nix state directory
  (default <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">prefix</fo:inline>/var/nix</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7179" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_CONF_DIR</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Overrides the location of the Nix configuration
  directory (default
  <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">prefix</fo:inline>/etc/nix</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7186" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">TMPDIR</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Use the specified directory to store temporary
  files.  In particular, this includes temporary build directories;
  these can take up substantial amounts of disk space.  The default is
  <fo:inline font-family="monospace">/tmp</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7192" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_REMOTE</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This variable should be set to
  <fo:inline font-family="monospace">daemon</fo:inline> if you want to use the Nix daemon to
  execute Nix operations. This is necessary in <fo:basic-link internal-destination="ssec-multi-user"><fo:inline>multi-user Nix installations</fo:inline></fo:basic-link>.
  If the Nix daemon's Unix socket is at some non-standard path,
  this variable should be set to <fo:inline font-family="monospace">unix://path/to/socket</fo:inline>.
  Otherwise, it should be left unset.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7200" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_SHOW_STATS</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If set to <fo:inline font-family="monospace">1</fo:inline>, Nix will print some
  evaluation statistics, such as the number of values
  allocated.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7206" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_COUNT_CALLS</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If set to <fo:inline font-family="monospace">1</fo:inline>, Nix will print how
  often functions were called during Nix expression evaluation.  This
  is useful for profiling your Nix expressions.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7212" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">GC_INITIAL_HEAP_SIZE</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If Nix has been configured to use the Boehm garbage
  collector, this variable sets the initial size of the heap in bytes.
  It defaults to 384 MiB.  Setting it to a low value reduces memory
  consumption, but will increase runtime due to the overhead of
  garbage collection.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block></fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="true" master-reference="body" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Utilities</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Utilities</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="blank-body"><fo:block text-align="center"/></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block id="ch-utilities"><fo:block font-family="sans-serif,Symbol,ZapfDingbats"><fo:block margin-left="0pt"><fo:block font-size="24.8832pt" font-weight="bold"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0pt" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">ChapterÂ 23.Â Utilities</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This section lists utilities that you can use when you
work with Nix.</fo:block><fo:block break-before="page"><fo:block id="sec-nix-channel"><fo:block id="idm7226"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Name</fo:block></fo:block></fo:block></fo:block><fo:block space-after="1em">nix-channel <fo:inline font-family="serif,Symbol,ZapfDingbats">â</fo:inline> manage Nix channels</fo:block></fo:block><fo:block id="idm7229"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Synopsis</fo:block></fo:block></fo:block></fo:block><fo:block/><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-channel</fo:inline>  { <fo:inline font-family="monospace">--add</fo:inline> <fo:inline font-style="italic" font-family="monospace">url</fo:inline>  [<fo:inline font-style="italic" font-family="monospace">name</fo:inline>]  |   <fo:inline font-family="monospace">--remove</fo:inline> <fo:inline font-style="italic" font-family="monospace">name</fo:inline>  |   <fo:inline font-family="monospace">--list</fo:inline>  |   <fo:inline font-family="monospace">--update</fo:inline>  [<fo:inline font-style="italic" font-family="monospace">names</fo:inline>...]  |   <fo:inline font-family="monospace">--rollback</fo:inline>  [<fo:inline font-style="italic" font-family="monospace">generation</fo:inline>] }</fo:block></fo:block><fo:block id="idm7251"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Description</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A Nix channel is a mechanism that allows you to automatically
stay up-to-date with a set of pre-built Nix expressions.  A Nix
channel is just a URL that points to a place containing a set of Nix
expressions.  <fo:inline>See also <fo:basic-link internal-destination="sec-channels"><fo:inline>ChapterÂ 12, <fo:inline font-style="italic">Channels</fo:inline></fo:inline></fo:basic-link>.</fo:inline></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This command has the following operations:

<fo:list-block id="idm7257" provisional-distance-between-starts="23em * 0.60+1em" provisional-label-separation="1em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em"><fo:list-item id="idm7258" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--add</fo:inline> <fo:inline font-style="italic" font-family="monospace">url</fo:inline> [<fo:inline font-style="italic" font-family="monospace">name</fo:inline>]</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Adds a channel named
    <fo:inline font-style="italic" font-family="monospace">name</fo:inline> with URL
    <fo:inline font-style="italic" font-family="monospace">url</fo:inline> to the list of subscribed channels.
    If <fo:inline font-style="italic" font-family="monospace">name</fo:inline> is omitted, it defaults to the
    last component of <fo:inline font-style="italic" font-family="monospace">url</fo:inline>, with the
    suffixes <fo:inline font-family="monospace">-stable</fo:inline> or
    <fo:inline font-family="monospace">-unstable</fo:inline> removed.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7271" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--remove</fo:inline> <fo:inline font-style="italic" font-family="monospace">name</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Removes the channel named
    <fo:inline font-style="italic" font-family="monospace">name</fo:inline> from the list of subscribed
    channels.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7278" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--list</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Prints the names and URLs of all subscribed
    channels on standard output.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7283" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--update</fo:inline> [<fo:inline font-style="italic" font-family="monospace">names</fo:inline>â¦]</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Downloads the Nix expressions of all subscribed
    channels (or only those included in
    <fo:inline font-style="italic" font-family="monospace">names</fo:inline> if specified) and makes them the
    default for <fo:inline font-weight="bold">nix-env</fo:inline> operations (by symlinking
    them from the directory
    <fo:inline font-family="monospace">~/.nix-defexpr</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7292" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--rollback</fo:inline> [<fo:inline font-style="italic" font-family="monospace">generation</fo:inline>]</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Reverts the previous call to <fo:inline font-weight="bold">nix-channel
    --update</fo:inline>. Optionally, you can specify a specific channel
    generation number to restore.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block>

</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Note that <fo:inline font-family="monospace">--add</fo:inline> does not automatically perform
an update.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The list of subscribed channels is stored in
<fo:inline font-family="monospace">~/.nix-channels</fo:inline>.</fo:block></fo:block><fo:block id="idm7303"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Examples</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To subscribe to the Nixpkgs channel and install the GNU Hello package:</fo:block><fo:block id="idm7306" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-channel --add https://nixos.org/channels/nixpkgs-unstable
$ nix-channel --update
$ nix-env -iA nixpkgs.hello</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You can revert channel updates using <fo:inline font-family="monospace">--rollback</fo:inline>:</fo:block><fo:block id="idm7309" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-instantiate --eval -E '(import &lt;nixpkgs&gt; {}).lib.nixpkgsVersion'
"14.04.527.0e935f1"

$ nix-channel --rollback
switching from generation 483 to 482

$ nix-instantiate --eval -E '(import &lt;nixpkgs&gt; {}).lib.nixpkgsVersion'
"14.04.526.dbadfad"
</fo:block></fo:block><fo:block id="idm7310"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Files</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:list-block id="idm7312" provisional-distance-between-starts="24em * 0.60+1em" provisional-label-separation="1em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em"><fo:list-item id="idm7313" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">/nix/var/nix/profiles/per-user/<fo:inline font-style="italic" font-family="monospace">username</fo:inline>/channels</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-channel</fo:inline> uses a
    <fo:inline font-weight="bold">nix-env</fo:inline> profile to keep track of previous
    versions of the subscribed channels. Every time you run
    <fo:inline font-weight="bold">nix-channel --update</fo:inline>, a new channel generation
    (that is, a symlink to the channel Nix expressions in the Nix store)
    is created. This enables <fo:inline font-weight="bold">nix-channel --rollback</fo:inline>
    to revert to previous versions.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7323" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">~/.nix-defexpr/channels</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This is a symlink to
    <fo:inline font-family="monospace">/nix/var/nix/profiles/per-user/<fo:inline font-style="italic" font-family="monospace">username</fo:inline>/channels</fo:inline>. It
    ensures that <fo:inline font-weight="bold">nix-env</fo:inline> can find your channels. In
    a multi-user installation, you may also have
    <fo:inline font-family="monospace">~/.nix-defexpr/channels_root</fo:inline>, which links to
    the channels of the root user.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="idm7332"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Channel format</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A channel URL should point to a directory containing the
following files:</fo:block><fo:list-block id="idm7335" provisional-distance-between-starts="15em * 0.60+1em" provisional-label-separation="1em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em"><fo:list-item id="idm7336" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">nixexprs.tar.xz</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A tarball containing Nix expressions and files
    referenced by them (such as build scripts and patches). At the
    top level, the tarball should contain a single directory. That
    directory must contain a file <fo:inline font-family="monospace">default.nix</fo:inline>
    that serves as the channelâs âentry pointâ.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block></fo:block></fo:block><fo:block break-before="page"><fo:block id="sec-nix-collect-garbage"><fo:block id="idm7348"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Name</fo:block></fo:block></fo:block></fo:block><fo:block space-after="1em">nix-collect-garbage <fo:inline font-family="serif,Symbol,ZapfDingbats">â</fo:inline> delete unreachable store paths</fo:block></fo:block><fo:block id="idm7351"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Synopsis</fo:block></fo:block></fo:block></fo:block><fo:block/><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-collect-garbage</fo:inline>  [<fo:inline font-family="monospace">--delete-old</fo:inline>] [<fo:inline font-family="monospace">-d</fo:inline>] [<fo:inline font-family="monospace">--delete-older-than</fo:inline> <fo:inline font-style="italic" font-family="monospace">period</fo:inline>] [<fo:inline font-family="monospace">--max-freed</fo:inline> <fo:inline font-style="italic" font-family="monospace">bytes</fo:inline>] [<fo:inline font-family="monospace">--dry-run</fo:inline>]</fo:block></fo:block><fo:block id="idm7366"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Description</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The command <fo:inline font-weight="bold">nix-collect-garbage</fo:inline> is mostly an
alias of <fo:basic-link internal-destination="rsec-nix-store-gc"><fo:inline><fo:inline font-weight="bold">nix-store
--gc</fo:inline></fo:inline></fo:basic-link>, that is, it deletes all unreachable paths in
the Nix store to clean up your system.  However, it provides two
additional options: <fo:inline font-family="monospace">-d</fo:inline> (<fo:inline font-family="monospace">--delete-old</fo:inline>),
which deletes all old generations of all profiles in
<fo:inline font-family="monospace">/nix/var/nix/profiles</fo:inline> by invoking
<fo:inline font-family="monospace">nix-env --delete-generations old</fo:inline> on all profiles
(of course, this makes rollbacks to previous configurations
impossible); and
<fo:inline font-family="monospace">--delete-older-than</fo:inline> <fo:inline font-style="italic" font-family="monospace">period</fo:inline>,
where period is a value such as <fo:inline font-family="monospace">30d</fo:inline>, which deletes
all generations older than the specified number of days in all profiles
in <fo:inline font-family="monospace">/nix/var/nix/profiles</fo:inline> (except for the generations
that were active at that point in time).
</fo:block></fo:block><fo:block id="idm7380"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Example</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To delete from the Nix store everything that is not used by the
current generations of each profile, do

<fo:block id="idm7383" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-collect-garbage -d</fo:block>

</fo:block></fo:block></fo:block></fo:block><fo:block break-before="page"><fo:block id="sec-nix-copy-closure"><fo:block id="idm7390"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Name</fo:block></fo:block></fo:block></fo:block><fo:block space-after="1em">nix-copy-closure <fo:inline font-family="serif,Symbol,ZapfDingbats">â</fo:inline> copy a closure to or from a remote machine via SSH</fo:block></fo:block><fo:block id="idm7393"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Synopsis</fo:block></fo:block></fo:block></fo:block><fo:block/><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-copy-closure</fo:inline>  [ <fo:inline font-family="monospace">--to</fo:inline>  |   <fo:inline font-family="monospace">--from</fo:inline> ] [<fo:inline font-family="monospace">--gzip</fo:inline>] [<fo:inline font-family="monospace">--include-outputs</fo:inline>] [ <fo:inline font-family="monospace">--use-substitutes</fo:inline>  |   <fo:inline font-family="monospace">-s</fo:inline> ] [<fo:inline font-family="monospace">-v</fo:inline>]  
      <fo:inline font-style="italic" font-family="monospace">user@</fo:inline><fo:inline font-style="italic" font-family="monospace">machine</fo:inline>
       <fo:inline font-style="italic" font-family="monospace">paths</fo:inline> </fo:block></fo:block><fo:block id="idm7417"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Description</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-copy-closure</fo:inline> gives you an easy and
efficient way to exchange software between machines.  Given one or
more Nix store <fo:inline font-style="italic" font-family="monospace">paths</fo:inline> on the local
machine, <fo:inline font-weight="bold">nix-copy-closure</fo:inline> computes the closure of
those paths (i.e. all their dependencies in the Nix store), and copies
all paths in the closure to the remote machine via the
<fo:inline font-weight="bold">ssh</fo:inline> (Secure Shell) command.  With the
<fo:inline font-family="monospace">--from</fo:inline>, the direction is reversed:
the closure of <fo:inline font-style="italic" font-family="monospace">paths</fo:inline> on a remote machine is
copied to the Nix store on the local machine.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This command is efficient because it only sends the store paths
that are missing on the target machine.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Since <fo:inline font-weight="bold">nix-copy-closure</fo:inline> calls
<fo:inline font-weight="bold">ssh</fo:inline>, you may be asked to type in the appropriate
password or passphrase.  In fact, you may be asked
<fo:inline font-style="italic">twice</fo:inline> because <fo:inline font-weight="bold">nix-copy-closure</fo:inline>
currently connects twice to the remote machine, first to get the set
of paths missing on the target machine, and second to send the dump of
those paths.  If this bothers you, use
<fo:inline font-weight="bold">ssh-agent</fo:inline>.</fo:block><fo:block id="idm7433"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Options</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:list-block id="idm7435" provisional-distance-between-starts="22em * 0.60+1em" provisional-label-separation="1em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em"><fo:list-item id="idm7436" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--to</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Copy the closure of
    <fo:inline font-style="italic" font-family="monospace">paths</fo:inline> from the local Nix store to the
    Nix store on <fo:inline font-style="italic" font-family="monospace">machine</fo:inline>.  This is the
    default.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7443" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--from</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Copy the closure of
    <fo:inline font-style="italic" font-family="monospace">paths</fo:inline> from the Nix store on
    <fo:inline font-style="italic" font-family="monospace">machine</fo:inline> to the local Nix
    store.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7450" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--gzip</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Enable compression of the SSH
    connection.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7455" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--include-outputs</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Also copy the outputs of store derivations
    included in the closure.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7460" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--use-substitutes</fo:inline> / <fo:inline font-family="monospace">-s</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Attempt to download missing paths on the target
    machine using Nixâs substitute mechanism.  Any paths that cannot
    be substituted on the target are still copied normally from the
    source.  This is useful, for instance, if the connection between
    the source and target machine is slow, but the connection between
    the target machine and <fo:inline font-family="monospace">nixos.org</fo:inline> (the default
    binary cache server) is fast.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7467" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">-v</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Show verbose output.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="idm7472"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Environment variables</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:list-block id="idm7474" provisional-distance-between-starts="11em * 0.60+1em" provisional-label-separation="1em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em"><fo:list-item id="idm7475" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_SSHOPTS</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Additional options to be passed to
    <fo:inline font-weight="bold">ssh</fo:inline> on the command line.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="idm7481"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Examples</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Copy Firefox with all its dependencies to a remote machine:

<fo:block id="idm7484" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-copy-closure --to alice@itchy.labs $(type -tP firefox)</fo:block>

</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Copy Subversion from a remote machine and then install it into a
user environment:

<fo:block id="idm7486" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-copy-closure --from alice@itchy.labs \
    /nix/store/0dj0503hjxy5mbwlafv1rsbdiyx1gkdy-subversion-1.4.4
$ nix-env -i /nix/store/0dj0503hjxy5mbwlafv1rsbdiyx1gkdy-subversion-1.4.4
</fo:block>

</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block break-before="page"><fo:block id="sec-nix-daemon"><fo:block id="idm7493"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Name</fo:block></fo:block></fo:block></fo:block><fo:block space-after="1em">nix-daemon <fo:inline font-family="serif,Symbol,ZapfDingbats">â</fo:inline> Nix multi-user support daemon</fo:block></fo:block><fo:block id="idm7496"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Synopsis</fo:block></fo:block></fo:block></fo:block><fo:block/><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-daemon</fo:inline> </fo:block></fo:block><fo:block id="idm7499"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Description</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The Nix daemon is necessary in multi-user Nix installations.  It
performs build actions and other operations on the Nix store on behalf
of unprivileged users.</fo:block></fo:block></fo:block></fo:block><fo:block break-before="page"><fo:block id="sec-nix-hash"><fo:block id="idm7508"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Name</fo:block></fo:block></fo:block></fo:block><fo:block space-after="1em">nix-hash <fo:inline font-family="serif,Symbol,ZapfDingbats">â</fo:inline> compute the cryptographic hash of a path</fo:block></fo:block><fo:block id="idm7511"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Synopsis</fo:block></fo:block></fo:block></fo:block><fo:block/><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-hash</fo:inline>  [<fo:inline font-family="monospace">--flat</fo:inline>] [<fo:inline font-family="monospace">--base32</fo:inline>] [<fo:inline font-family="monospace">--truncate</fo:inline>] [<fo:inline font-family="monospace">--type</fo:inline> <fo:inline font-style="italic" font-family="monospace">hashAlgo</fo:inline>]  <fo:inline font-style="italic" font-family="monospace">path</fo:inline>... </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-hash</fo:inline>   <fo:inline font-family="monospace">--to-base16</fo:inline>   <fo:inline font-style="italic" font-family="monospace">hash</fo:inline>... </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-hash</fo:inline>   <fo:inline font-family="monospace">--to-base32</fo:inline>   <fo:inline font-style="italic" font-family="monospace">hash</fo:inline>... </fo:block></fo:block><fo:block id="idm7537"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Description</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The command <fo:inline font-weight="bold">nix-hash</fo:inline> computes the
cryptographic hash of the contents of each
<fo:inline font-style="italic" font-family="monospace">path</fo:inline> and prints it on standard output.  By
default, it computes an MD5 hash, but other hash algorithms are
available as well.  The hash is printed in hexadecimal.  To generate
the same hash as <fo:inline font-weight="bold">nix-prefetch-url</fo:inline> you have to
specify multiple arguments, see below for an example.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The hash is computed over a <fo:inline font-style="italic">serialisation</fo:inline>
of each path: a dump of the file system tree rooted at the path.  This
allows directories and symlinks to be hashed as well as regular files.
The dump is in the <fo:inline font-style="italic">NAR format</fo:inline> produced by <fo:basic-link internal-destination="refsec-nix-store-dump"><fo:inline><fo:inline font-weight="bold">nix-store</fo:inline>
<fo:inline font-family="monospace">--dump</fo:inline></fo:inline></fo:basic-link>.  Thus, <fo:inline font-family="monospace">nix-hash
<fo:inline font-style="italic" font-family="monospace">path</fo:inline></fo:inline> yields the same
cryptographic hash as <fo:inline font-family="monospace">nix-store --dump
<fo:inline font-style="italic" font-family="monospace">path</fo:inline> | md5sum</fo:inline>.</fo:block></fo:block><fo:block id="idm7553"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Options</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:list-block id="idm7555" provisional-distance-between-starts="15em * 0.60+1em" provisional-label-separation="1em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em"><fo:list-item id="idm7556" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--flat</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Print the cryptographic hash of the contents of
    each regular file <fo:inline font-style="italic" font-family="monospace">path</fo:inline>.  That is, do
    not compute the hash over the dump of
    <fo:inline font-style="italic" font-family="monospace">path</fo:inline>.  The result is identical to that
    produced by the GNU commands <fo:inline font-weight="bold">md5sum</fo:inline> and
    <fo:inline font-weight="bold">sha1sum</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7565" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--base32</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Print the hash in a base-32 representation rather
    than hexadecimal.  This base-32 representation is more compact and
    can be used in Nix expressions (such as in calls to
    <fo:inline font-family="monospace">fetchurl</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7571" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--truncate</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Truncate hashes longer than 160 bits (such as
    SHA-256) to 160 bits.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7576" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--type</fo:inline> <fo:inline font-style="italic" font-family="monospace">hashAlgo</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Use the specified cryptographic hash algorithm,
    which can be one of <fo:inline font-family="monospace">md5</fo:inline>,
    <fo:inline font-family="monospace">sha1</fo:inline>, and
    <fo:inline font-family="monospace">sha256</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7585" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--to-base16</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Donât hash anything, but convert the base-32 hash
    representation <fo:inline font-style="italic" font-family="monospace">hash</fo:inline> to
    hexadecimal.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7591" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--to-base32</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Donât hash anything, but convert the hexadecimal
    hash representation <fo:inline font-style="italic" font-family="monospace">hash</fo:inline> to
    base-32.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="idm7597"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Examples</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Computing the same hash as <fo:inline font-weight="bold">nix-prefetch-url</fo:inline>:
<fo:block id="idm7601" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-prefetch-url file://&lt;(echo test)
1lkgqb6fclns49861dwk9rzb6xnfkxbpws74mxnx01z9qyv1pjpj
$ nix-hash --type sha256 --flat --base32 &lt;(echo test)
1lkgqb6fclns49861dwk9rzb6xnfkxbpws74mxnx01z9qyv1pjpj
</fo:block>
</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Computing hashes:

<fo:block id="idm7603" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ mkdir test
$ echo "hello" &gt; test/world

$ nix-hash test/ <fo:inline font-style="italic">(MD5 hash; default)</fo:inline>
8179d3caeff1869b5ba1744e5a245c04

$ nix-store --dump test/ | md5sum <fo:inline font-style="italic">(for comparison)</fo:inline>
8179d3caeff1869b5ba1744e5a245c04  -

$ nix-hash --type sha1 test/
e4fd8ba5f7bbeaea5ace89fe10255536cd60dab6

$ nix-hash --type sha1 --base32 test/
nvd61k9nalji1zl9rrdfmsmvyyjqpzg4

$ nix-hash --type sha256 --flat test/
error: reading file `test/': Is a directory

$ nix-hash --type sha256 --flat test/world
5891b5b522d5df086d0ff0b110fbd9d21bb4fc7163af34d08286a2e846f6be03</fo:block>

</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Converting between hexadecimal and base-32:

<fo:block id="idm7607" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-hash --type sha1 --to-base32 e4fd8ba5f7bbeaea5ace89fe10255536cd60dab6
nvd61k9nalji1zl9rrdfmsmvyyjqpzg4

$ nix-hash --type sha1 --to-base16 nvd61k9nalji1zl9rrdfmsmvyyjqpzg4
e4fd8ba5f7bbeaea5ace89fe10255536cd60dab6</fo:block>

</fo:block></fo:block></fo:block></fo:block><fo:block break-before="page"><fo:block id="sec-nix-instantiate"><fo:block id="idm7614"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Name</fo:block></fo:block></fo:block></fo:block><fo:block space-after="1em">nix-instantiate <fo:inline font-family="serif,Symbol,ZapfDingbats">â</fo:inline> instantiate store derivations from Nix expressions</fo:block></fo:block><fo:block id="idm7617"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Synopsis</fo:block></fo:block></fo:block></fo:block><fo:block/><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-instantiate</fo:inline>  [ <fo:inline font-family="monospace">--parse</fo:inline>  |   
        <fo:inline font-family="monospace">--eval</fo:inline>
         [<fo:inline font-family="monospace">--strict</fo:inline>]
         [<fo:inline font-family="monospace">--json</fo:inline>]
         [<fo:inline font-family="monospace">--xml</fo:inline>]
       ] [<fo:inline font-family="monospace">--read-write-mode</fo:inline>] [<fo:inline font-family="monospace">--arg</fo:inline> <fo:inline font-style="italic" font-family="monospace">name</fo:inline> <fo:inline font-style="italic" font-family="monospace">value</fo:inline>] [
      { <fo:inline font-family="monospace">--attr</fo:inline>  |   <fo:inline font-family="monospace">-A</fo:inline> }
      <fo:inline font-style="italic" font-family="monospace">attrPath</fo:inline>
    ] [<fo:inline font-family="monospace">--add-root</fo:inline> <fo:inline font-style="italic" font-family="monospace">path</fo:inline>] [<fo:inline font-family="monospace">--indirect</fo:inline>] [ <fo:inline font-family="monospace">--expr</fo:inline>  |   <fo:inline font-family="monospace">-E</fo:inline> ]  <fo:inline font-style="italic" font-family="monospace">files</fo:inline>... </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-instantiate</fo:inline>   <fo:inline font-family="monospace">--find-file</fo:inline>   <fo:inline font-style="italic" font-family="monospace">files</fo:inline>... </fo:block></fo:block><fo:block id="idm7662"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Description</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The command <fo:inline font-weight="bold">nix-instantiate</fo:inline> generates <fo:basic-link internal-destination="gloss-derivation"><fo:inline>store derivations</fo:inline></fo:basic-link> from (high-level)
Nix expressions.  It evaluates the Nix expressions in each of
<fo:inline font-style="italic" font-family="monospace">files</fo:inline> (which defaults to
<fo:inline font-style="italic" font-family="monospace">./default.nix</fo:inline>).  Each top-level expression
should evaluate to a derivation, a list of derivations, or a set of
derivations.  The paths of the resulting store derivations are printed
on standard output.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If <fo:inline font-style="italic" font-family="monospace">files</fo:inline> is the character
<fo:inline font-family="monospace">-</fo:inline>, then a Nix expression will be read from standard
input.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">See also <fo:basic-link internal-destination="sec-common-options"><fo:inline>ChapterÂ 20, <fo:inline font-style="italic">Common Options</fo:inline></fo:inline></fo:basic-link> for a list of common options.</fo:block></fo:block><fo:block id="idm7674"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Options</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:list-block id="idm7676" provisional-distance-between-starts="17em * 0.60+1em" provisional-label-separation="1em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em"><fo:list-item id="idm7677" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--add-root</fo:inline> <fo:inline font-style="italic" font-family="monospace">path</fo:inline></fo:inline><fo:inline>, </fo:inline><fo:inline><fo:inline font-family="monospace">--indirect</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">See the <fo:basic-link internal-destination="opt-add-root"><fo:inline>corresponding
    options</fo:inline></fo:basic-link> in <fo:inline font-weight="bold">nix-store</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7687" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--parse</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Just parse the input files, and print their
    abstract syntax trees on standard output in ATerm
    format.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7692" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--eval</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Just parse and evaluate the input files, and print
    the resulting values on standard output.  No instantiation of
    store derivations takes place.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7697" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--find-file</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Look up the given files in Nixâs search path (as
    specified by the <fo:inline font-family="monospace">NIX_PATH</fo:inline>
    environment variable).  If found, print the corresponding absolute
    paths on standard output.  For instance, if
    <fo:inline font-family="monospace">NIX_PATH</fo:inline> is
    <fo:inline font-family="monospace">nixpkgs=/home/alice/nixpkgs</fo:inline>, then
    <fo:inline font-family="monospace">nix-instantiate --find-file nixpkgs/default.nix</fo:inline>
    will print
    <fo:inline font-family="monospace">/home/alice/nixpkgs/default.nix</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7707" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--strict</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">When used with <fo:inline font-family="monospace">--eval</fo:inline>,
    recursively evaluate list elements and attributes.  Normally, such
    sub-expressions are left unevaluated (since the Nix expression
    language is lazy).</fo:block><fo:block id="idm7713" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" margin-left="0.25in" margin-right="0.25in"><fo:block keep-with-next.within-column="always" font-size="14pt" font-weight="bold" hyphenate="false">Warning</fo:block><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This option can cause non-termination, because lazy
    data structures can be infinitely large.</fo:block></fo:block></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7715" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--json</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">When used with <fo:inline font-family="monospace">--eval</fo:inline>, print the resulting
    value as an JSON representation of the abstract syntax tree rather
    than as an ATerm.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7721" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--xml</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">When used with <fo:inline font-family="monospace">--eval</fo:inline>, print the resulting
    value as an XML representation of the abstract syntax tree rather than as
    an ATerm. The schema is the same as that used by the <fo:basic-link internal-destination="builtin-toXML"><fo:inline><fo:inline font-family="monospace">toXML</fo:inline> built-in</fo:inline></fo:basic-link>.
    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7729" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--read-write-mode</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">When used with <fo:inline font-family="monospace">--eval</fo:inline>, perform
    evaluation in read/write mode so nix language features that
    require it will still work (at the cost of needing to do
    instantiation of every evaluated derivation). If this option is
    not enabled, there may be uninstantiated store paths in the final
    output.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:list-block id="idm7735" provisional-distance-between-starts="22em * 0.60+1em" provisional-label-separation="1em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em"><fo:list-item id="idm7736" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--help</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Prints out a summary of the command syntax and
  exits.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7741" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--version</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Prints out the Nix version number on standard output
  and exits.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7746" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--verbose</fo:inline> / <fo:inline font-family="monospace">-v</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Increases the level of verbosity of diagnostic messages
  printed on standard error.  For each Nix operation, the information
  printed on standard output is well-defined; any diagnostic
  information is printed on standard error, never on standard
  output.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This option may be specified repeatedly.  Currently, the
  following verbosity levels exist:</fo:block><fo:list-block id="idm7753" provisional-distance-between-starts="1em * 0.60+1em" provisional-label-separation="1em"><fo:list-item id="idm7754" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline>0</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">âErrors onlyâ: only print messages
    explaining why the Nix invocation failed.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7758" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline>1</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">âInformationalâ: print
    <fo:inline font-style="italic">useful</fo:inline> messages about what Nix is doing.
    This is the default.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7763" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline>2</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">âTalkativeâ: print more informational
    messages.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7767" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline>3</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">âChattyâ: print even more
    informational messages.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7771" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline>4</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">âDebugâ: print debug
    information.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7775" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline>5</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">âVomitâ: print vast amounts of debug
    information.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7779" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--quiet</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Decreases the level of verbosity of diagnostic messages
  printed on standard error.  This is the inverse option to
  <fo:inline font-family="monospace">-v</fo:inline> / <fo:inline font-family="monospace">--verbose</fo:inline>.
  </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This option may be specified repeatedly.  See the previous
  verbosity levels list.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7787" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--no-build-output</fo:inline> / <fo:inline font-family="monospace">-Q</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">By default, output written by builders to standard
  output and standard error is echoed to the Nix command's standard
  error.  This option suppresses this behaviour.  Note that the
  builder's standard output and error are always written to a log file
  in
  <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">prefix</fo:inline>/nix/var/log/nix</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7795" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--max-jobs</fo:inline> / <fo:inline font-family="monospace">-j</fo:inline>
<fo:inline font-style="italic" font-family="monospace">number</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Sets the maximum number of build jobs that Nix will
  perform in parallel to the specified number.  Specify
  <fo:inline font-family="monospace">auto</fo:inline> to use the number of CPUs in the system.
  The default is specified by the <fo:basic-link internal-destination="conf-max-jobs"><fo:inline><fo:inline font-family="monospace">max-jobs</fo:inline></fo:inline></fo:basic-link>
  configuration setting, which itself defaults to
  <fo:inline font-family="monospace">1</fo:inline>.  A higher value is useful on SMP systems or to
  exploit I/O latency.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"> Setting it to <fo:inline font-family="monospace">0</fo:inline> disallows building on the local
  machine, which is useful when you want builds to happen only on remote
  builders.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7808" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--cores</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Sets the value of the <fo:inline font-family="monospace">NIX_BUILD_CORES</fo:inline>
  environment variable in the invocation of builders.  Builders can
  use this variable at their discretion to control the maximum amount
  of parallelism.  For instance, in Nixpkgs, if the derivation
  attribute <fo:inline font-family="monospace">enableParallelBuilding</fo:inline> is set to
  <fo:inline font-family="monospace">true</fo:inline>, the builder passes the
  <fo:inline font-family="monospace">-j<fo:inline font-style="italic" font-family="monospace">N</fo:inline></fo:inline> flag to GNU Make.
  It defaults to the value of the <fo:basic-link internal-destination="conf-cores"><fo:inline><fo:inline font-family="monospace">cores</fo:inline></fo:inline></fo:basic-link>
  configuration setting, if set, or <fo:inline font-family="monospace">1</fo:inline> otherwise.
  The value <fo:inline font-family="monospace">0</fo:inline> means that the builder should use all
  available CPU cores in the system.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7822" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--max-silent-time</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Sets the maximum number of seconds that a builder
  can go without producing any data on standard output or standard
  error.  The default is specified by the <fo:basic-link internal-destination="conf-max-silent-time"><fo:inline><fo:inline font-family="monospace">max-silent-time</fo:inline></fo:inline></fo:basic-link>
  configuration setting.  <fo:inline font-family="monospace">0</fo:inline> means no
  time-out.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7830" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--timeout</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Sets the maximum number of seconds that a builder
  can run.  The default is specified by the <fo:basic-link internal-destination="conf-timeout"><fo:inline><fo:inline font-family="monospace">timeout</fo:inline></fo:inline></fo:basic-link>
  configuration setting.  <fo:inline font-family="monospace">0</fo:inline> means no
  timeout.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7838" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--keep-going</fo:inline> / <fo:inline font-family="monospace">-k</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Keep going in case of failed builds, to the
  greatest extent possible.  That is, if building an input of some
  derivation fails, Nix will still build the other inputs, but not the
  derivation itself.  Without this option, Nix stops if any build
  fails (except for builds of substitutes), possibly killing builds in
  progress (in case of parallel or distributed builds).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7844" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--keep-failed</fo:inline> / <fo:inline font-family="monospace">-K</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Specifies that in case of a build failure, the
  temporary directory (usually in <fo:inline font-family="monospace">/tmp</fo:inline>) in which
  the build takes place should not be deleted.  The path of the build
  directory is printed as an informational message.
    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7851" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--fallback</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Whenever Nix attempts to build a derivation for which
  substitutes are known for each output path, but realising the output
  paths through the substitutes fails, fall back on building the
  derivation.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The most common scenario in which this is useful is when we
  have registered substitutes in order to perform binary distribution
  from, say, a network repository.  If the repository is down, the
  realisation of the derivation will fail.  When this option is
  specified, Nix will build the derivation instead.  Thus,
  installation from binaries falls back on installation from source.
  This option is not the default since it is generally not desirable
  for a transient failure in obtaining the substitutes to lead to a
  full build from source (with the related consumption of
  resources).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7857" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--no-build-hook</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Disables the build hook mechanism.  This allows to ignore remote
  builders if they are setup on the machine.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">It's useful in cases where the bandwidth between the client and the
  remote builder is too low.  In that case it can take more time to upload the
  sources to the remote builder and fetch back the result than to do the
  computation locally.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7863" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--readonly-mode</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">When this option is used, no attempt is made to open
  the Nix database.  Most Nix operations do need database access, so
  those operations will fail.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7868" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--arg</fo:inline> <fo:inline font-style="italic" font-family="monospace">name</fo:inline> <fo:inline font-style="italic" font-family="monospace">value</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This option is accepted by
  <fo:inline font-weight="bold">nix-env</fo:inline>, <fo:inline font-weight="bold">nix-instantiate</fo:inline> and
  <fo:inline font-weight="bold">nix-build</fo:inline>.  When evaluating Nix expressions, the
  expression evaluator will automatically try to call functions that
  it encounters.  It can automatically call functions for which every
  argument has a <fo:basic-link internal-destination="ss-functions"><fo:inline>default value</fo:inline></fo:basic-link>
  (e.g., <fo:inline font-family="monospace">{ <fo:inline font-style="italic" font-family="monospace">argName</fo:inline> ?
  <fo:inline font-style="italic" font-family="monospace">defaultValue</fo:inline> }:
  <fo:inline font-style="italic" font-family="monospace">...</fo:inline></fo:inline>).  With
  <fo:inline font-family="monospace">--arg</fo:inline>, you can also call functions that have
  arguments without a default value (or override a default value).
  That is, if the evaluator encounters a function with an argument
  named <fo:inline font-style="italic" font-family="monospace">name</fo:inline>, it will call it with value
  <fo:inline font-style="italic" font-family="monospace">value</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">For instance, the top-level <fo:inline font-family="monospace">default.nix</fo:inline> in
  Nixpkgs is actually a function:

<fo:block id="idm7888" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
{ # The system (e.g., `i686-linux') for which to build the packages.
  system ? builtins.currentSystem
  <fo:inline font-style="italic" font-family="monospace">...</fo:inline>
}: <fo:inline font-style="italic" font-family="monospace">...</fo:inline></fo:block>

  So if you call this Nix expression (e.g., when you do
  <fo:inline font-family="monospace">nix-env -i <fo:inline font-style="italic" font-family="monospace">pkgname</fo:inline></fo:inline>),
  the function will be called automatically using the value <fo:basic-link internal-destination="builtin-currentSystem"><fo:inline><fo:inline font-family="monospace">builtins.currentSystem</fo:inline></fo:inline></fo:basic-link>
  for the <fo:inline font-family="monospace">system</fo:inline> argument.  You can override this
  using <fo:inline font-family="monospace">--arg</fo:inline>, e.g., <fo:inline font-family="monospace">nix-env -i
  <fo:inline font-style="italic" font-family="monospace">pkgname</fo:inline> --arg system
  \"i686-freebsd\"</fo:inline>.  (Note that since the argument is a Nix
  string literal, you have to escape the quotes.)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7899" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--argstr</fo:inline> <fo:inline font-style="italic" font-family="monospace">name</fo:inline> <fo:inline font-style="italic" font-family="monospace">value</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This option is like <fo:inline font-family="monospace">--arg</fo:inline>, only the
  value is not a Nix expression but a string.  So instead of
  <fo:inline font-family="monospace">--arg system \"i686-linux\"</fo:inline> (the outer quotes are
  to keep the shell happy) you can say <fo:inline font-family="monospace">--argstr system
  i686-linux</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7909" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--attr</fo:inline> / <fo:inline font-family="monospace">-A</fo:inline>
<fo:inline font-style="italic" font-family="monospace">attrPath</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Select an attribute from the top-level Nix
  expression being evaluated.  (<fo:inline font-weight="bold">nix-env</fo:inline>,
  <fo:inline font-weight="bold">nix-instantiate</fo:inline>, <fo:inline font-weight="bold">nix-build</fo:inline> and
  <fo:inline font-weight="bold">nix-shell</fo:inline> only.)  The <fo:inline font-style="italic">attribute
  path</fo:inline> <fo:inline font-style="italic" font-family="monospace">attrPath</fo:inline> is a sequence of
  attribute names separated by dots.  For instance, given a top-level
  Nix expression <fo:inline font-style="italic" font-family="monospace">e</fo:inline>, the attribute path
  <fo:inline font-family="monospace">xorg.xorgserver</fo:inline> would cause the expression
  <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">e</fo:inline>.xorg.xorgserver</fo:inline> to
  be used.  See <fo:basic-link internal-destination="refsec-nix-env-install-examples"><fo:inline><fo:inline font-weight="bold">nix-env
  --install</fo:inline></fo:inline></fo:basic-link> for some concrete examples.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In addition to attribute names, you can also specify array
  indices.  For instance, the attribute path
  <fo:inline font-family="monospace">foo.3.bar</fo:inline> selects the <fo:inline font-family="monospace">bar</fo:inline>
  attribute of the fourth element of the array in the
  <fo:inline font-family="monospace">foo</fo:inline> attribute of the top-level
  expression.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7932" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--expr</fo:inline> / <fo:inline font-family="monospace">-E</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Interpret the command line arguments as a list of
  Nix expressions to be parsed and evaluated, rather than as a list
  of file names of Nix expressions.
  (<fo:inline font-weight="bold">nix-instantiate</fo:inline>, <fo:inline font-weight="bold">nix-build</fo:inline>
  and <fo:inline font-weight="bold">nix-shell</fo:inline> only.)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7941" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">-I</fo:inline> <fo:inline font-style="italic" font-family="monospace">path</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Add a path to the Nix expression search path.  This
  option may be given multiple times.  See the <fo:inline font-family="monospace">NIX_PATH</fo:inline> environment variable for
  information on the semantics of the Nix search path.  Paths added
  through <fo:inline font-family="monospace">-I</fo:inline> take precedence over
  <fo:inline font-family="monospace">NIX_PATH</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7950" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--option</fo:inline> <fo:inline font-style="italic" font-family="monospace">name</fo:inline> <fo:inline font-style="italic" font-family="monospace">value</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Set the Nix configuration option
  <fo:inline font-style="italic" font-family="monospace">name</fo:inline> to <fo:inline font-style="italic" font-family="monospace">value</fo:inline>.
  This overrides settings in the Nix configuration file (see
  nix.conf(5)).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm7962" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--repair</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Fix corrupted or missing store paths by
  redownloading or rebuilding them.  Note that this is slow because it
  requires computing a cryptographic hash of the contents of every
  path in the closure of the build.  Also note the warning under
  <fo:inline font-weight="bold">nix-store --repair-path</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="idm7968"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Examples</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Instantiating store derivations from a Nix expression, and
building them using <fo:inline font-weight="bold">nix-store</fo:inline>:

<fo:block id="idm7972" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-instantiate test.nix <fo:inline font-style="italic">(instantiate)</fo:inline>
/nix/store/cigxbmvy6dzix98dxxh9b6shg7ar5bvs-perl-BerkeleyDB-0.26.drv

$ nix-store -r $(nix-instantiate test.nix) <fo:inline font-style="italic">(build)</fo:inline>
<fo:inline font-style="italic" font-family="monospace">...</fo:inline>
/nix/store/qhqk4n8ci095g3sdp93x7rgwyh9rdvgk-perl-BerkeleyDB-0.26 <fo:inline font-style="italic">(output path)</fo:inline>

$ ls -l /nix/store/qhqk4n8ci095g3sdp93x7rgwyh9rdvgk-perl-BerkeleyDB-0.26
dr-xr-xr-x    2 eelco    users        4096 1970-01-01 01:00 lib
...</fo:block>

</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You can also give a Nix expression on the command line:

<fo:block id="idm7978" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-instantiate -E 'with import &lt;nixpkgs&gt; { }; hello'
/nix/store/j8s4zyv75a724q38cb0r87rlczaiag4y-hello-2.8.drv
</fo:block>

This is equivalent to:

<fo:block id="idm7979" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-instantiate '&lt;nixpkgs&gt;' -A hello
</fo:block>

</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Parsing and evaluating Nix expressions:

<fo:block id="idm7981" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-instantiate --parse -E '1 + 2'
1 + 2

$ nix-instantiate --eval -E '1 + 2'
3

$ nix-instantiate --eval --xml -E '1 + 2'
&lt;?xml version='1.0' encoding='utf-8'?&gt;
&lt;expr&gt;
  &lt;int value="3" /&gt;
&lt;/expr&gt;</fo:block>

</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The difference between non-strict and strict evaluation:

<fo:block id="idm7983" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-instantiate --eval --xml -E 'rec { x = "foo"; y = x; }'
<fo:inline font-style="italic" font-family="monospace">...</fo:inline>
  &lt;attr name="x"&gt;
    &lt;string value="foo" /&gt;
  &lt;/attr&gt;
  &lt;attr name="y"&gt;
    &lt;unevaluated /&gt;
  &lt;/attr&gt;
<fo:inline font-style="italic" font-family="monospace">...</fo:inline></fo:block>

Note that <fo:inline font-family="monospace">y</fo:inline> is left unevaluated (the XML
representation doesnât attempt to show non-normal forms).

<fo:block id="idm7987" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-instantiate --eval --xml --strict -E 'rec { x = "foo"; y = x; }'
<fo:inline font-style="italic" font-family="monospace">...</fo:inline>
  &lt;attr name="x"&gt;
    &lt;string value="foo" /&gt;
  &lt;/attr&gt;
  &lt;attr name="y"&gt;
    &lt;string value="foo" /&gt;
  &lt;/attr&gt;
<fo:inline font-style="italic" font-family="monospace">...</fo:inline></fo:block>

</fo:block></fo:block><fo:block id="idm7990"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Environment variables</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:list-block id="idm7992" provisional-distance-between-starts="24em * 0.60+1em" provisional-label-separation="1em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em"><fo:list-item id="idm7993" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">IN_NIX_SHELL</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Indicator that tells if the current environment was set up by
  <fo:inline font-weight="bold">nix-shell</fo:inline>.  Since Nix 2.0 the values are
  <fo:inline font-family="monospace">"pure"</fo:inline> and <fo:inline font-family="monospace">"impure"</fo:inline></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm8001" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_PATH</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A colon-separated list of directories used to look up Nix
    expressions enclosed in angle brackets (i.e.,
    <fo:inline font-family="monospace">&lt;<fo:inline font-style="italic" font-family="monospace">path</fo:inline>&gt;</fo:inline>).  For
    instance, the value

    <fo:block id="idm8008" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
/home/eelco/Dev:/etc/nixos</fo:block>

    will cause Nix to look for paths relative to
    <fo:inline font-family="monospace">/home/eelco/Dev</fo:inline> and
    <fo:inline font-family="monospace">/etc/nixos</fo:inline>, in that order.  It is also
    possible to match paths against a prefix.  For example, the value

    <fo:block id="idm8011" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
nixpkgs=/home/eelco/Dev/nixpkgs-branch:/etc/nixos</fo:block>

    will cause Nix to search for
    <fo:inline font-family="monospace">&lt;nixpkgs/<fo:inline font-style="italic" font-family="monospace">path</fo:inline>&gt;</fo:inline> in
    <fo:inline font-family="monospace">/home/eelco/Dev/nixpkgs-branch/<fo:inline font-style="italic" font-family="monospace">path</fo:inline></fo:inline>
    and
    <fo:inline font-family="monospace">/etc/nixos/nixpkgs/<fo:inline font-style="italic" font-family="monospace">path</fo:inline></fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If a path in the Nix search path starts with
    <fo:inline font-family="monospace">http://</fo:inline> or <fo:inline font-family="monospace">https://</fo:inline>, it is
    interpreted as the URL of a tarball that will be downloaded and
    unpacked to a temporary location. The tarball must consist of a
    single top-level directory. For example, setting
    <fo:inline font-family="monospace">NIX_PATH</fo:inline> to

    <fo:block id="idm8022" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
nixpkgs=https://github.com/NixOS/nixpkgs-channels/archive/nixos-15.09.tar.gz</fo:block>

    tells Nix to download the latest revision in the Nixpkgs/NixOS
    15.09 channel.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A following shorthand can be used to refer to the official channels:
    
    <fo:block id="idm8024" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">nixpkgs=channel:nixos-15.09</fo:block>
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The search path can be extended using the <fo:inline font-family="monospace">-I</fo:inline> option, which takes precedence over
    <fo:inline font-family="monospace">NIX_PATH</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm8028" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_IGNORE_SYMLINK_STORE</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Normally, the Nix store directory (typically
  <fo:inline font-family="monospace">/nix/store</fo:inline>) is not allowed to contain any
  symlink components.  This is to prevent âimpureâ builds.  Builders
  sometimes âcanonicaliseâ paths by resolving all symlink components.
  Thus, builds on different machines (with
  <fo:inline font-family="monospace">/nix/store</fo:inline> resolving to different locations)
  could yield different results.  This is generally not a problem,
  except when builds are deployed to machines where
  <fo:inline font-family="monospace">/nix/store</fo:inline> resolves differently.  If you are
  sure that youâre not going to do that, you can set
  <fo:inline font-family="monospace">NIX_IGNORE_SYMLINK_STORE</fo:inline> to <fo:inline font-family="monospace">1</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Note that if youâre symlinking the Nix store so that you can
  put it on another file system than the root file system, on Linux
  youâre better off using <fo:inline font-family="monospace">bind</fo:inline> mount points, e.g.,

  <fo:block id="idm8040" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ mkdir /nix
$ mount -o bind /mnt/otherdisk/nix /nix</fo:block>

  Consult the mount(8) manual page for details.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm8044" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_STORE_DIR</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Overrides the location of the Nix store (default
  <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">prefix</fo:inline>/store</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm8051" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_DATA_DIR</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Overrides the location of the Nix static data
  directory (default
  <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">prefix</fo:inline>/share</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm8058" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_LOG_DIR</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Overrides the location of the Nix log directory
  (default <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">prefix</fo:inline>/var/log/nix</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm8065" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_STATE_DIR</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Overrides the location of the Nix state directory
  (default <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">prefix</fo:inline>/var/nix</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm8072" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_CONF_DIR</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Overrides the location of the Nix configuration
  directory (default
  <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">prefix</fo:inline>/etc/nix</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm8079" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">TMPDIR</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Use the specified directory to store temporary
  files.  In particular, this includes temporary build directories;
  these can take up substantial amounts of disk space.  The default is
  <fo:inline font-family="monospace">/tmp</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm8085" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_REMOTE</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This variable should be set to
  <fo:inline font-family="monospace">daemon</fo:inline> if you want to use the Nix daemon to
  execute Nix operations. This is necessary in <fo:basic-link internal-destination="ssec-multi-user"><fo:inline>multi-user Nix installations</fo:inline></fo:basic-link>.
  If the Nix daemon's Unix socket is at some non-standard path,
  this variable should be set to <fo:inline font-family="monospace">unix://path/to/socket</fo:inline>.
  Otherwise, it should be left unset.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm8093" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_SHOW_STATS</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If set to <fo:inline font-family="monospace">1</fo:inline>, Nix will print some
  evaluation statistics, such as the number of values
  allocated.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm8099" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">NIX_COUNT_CALLS</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If set to <fo:inline font-family="monospace">1</fo:inline>, Nix will print how
  often functions were called during Nix expression evaluation.  This
  is useful for profiling your Nix expressions.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm8105" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">GC_INITIAL_HEAP_SIZE</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If Nix has been configured to use the Boehm garbage
  collector, this variable sets the initial size of the heap in bytes.
  It defaults to 384 MiB.  Setting it to a low value reduces memory
  consumption, but will increase runtime due to the overhead of
  garbage collection.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block></fo:block></fo:block><fo:block break-before="page"><fo:block id="sec-nix-prefetch-url"><fo:block id="idm8116"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Name</fo:block></fo:block></fo:block></fo:block><fo:block space-after="1em">nix-prefetch-url <fo:inline font-family="serif,Symbol,ZapfDingbats">â</fo:inline> copy a file from a URL into the store and print its hash</fo:block></fo:block><fo:block id="idm8119"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Synopsis</fo:block></fo:block></fo:block></fo:block><fo:block/><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-prefetch-url</fo:inline>  [<fo:inline font-family="monospace">--version</fo:inline>] [<fo:inline font-family="monospace">--type</fo:inline> <fo:inline font-style="italic" font-family="monospace">hashAlgo</fo:inline>] [<fo:inline font-family="monospace">--print-path</fo:inline>] [<fo:inline font-family="monospace">--unpack</fo:inline>] [<fo:inline font-family="monospace">--name</fo:inline> <fo:inline font-style="italic" font-family="monospace">name</fo:inline>]  <fo:inline font-style="italic" font-family="monospace">url</fo:inline>  [<fo:inline font-style="italic" font-family="monospace">hash</fo:inline>]</fo:block></fo:block><fo:block id="idm8138"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Description</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The command <fo:inline font-weight="bold">nix-prefetch-url</fo:inline> downloads the
file referenced by the URL <fo:inline font-style="italic" font-family="monospace">url</fo:inline>, prints its
cryptographic hash, and copies it into the Nix store.  The file name
in the store is
<fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">hash</fo:inline>-<fo:inline font-style="italic" font-family="monospace">baseName</fo:inline></fo:inline>,
where <fo:inline font-style="italic" font-family="monospace">baseName</fo:inline> is everything following the
final slash in <fo:inline font-style="italic" font-family="monospace">url</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This command is just a convenience for Nix expression writers.
Often a Nix expression fetches some source distribution from the
network using the <fo:inline font-family="monospace">fetchurl</fo:inline> expression contained in
Nixpkgs.  However, <fo:inline font-family="monospace">fetchurl</fo:inline> requires a
cryptographic hash.  If you don't know the hash, you would have to
download the file first, and then <fo:inline font-family="monospace">fetchurl</fo:inline> would
download it again when you build your Nix expression.  Since
<fo:inline font-family="monospace">fetchurl</fo:inline> uses the same name for the downloaded file
as <fo:inline font-weight="bold">nix-prefetch-url</fo:inline>, the redundant download can be
avoided.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If <fo:inline font-style="italic" font-family="monospace">hash</fo:inline> is specified, then a download
is not performed if the Nix store already contains a file with the
same hash and base name.  Otherwise, the file is downloaded, and an
error is signaled if the actual hash of the file does not match the
specified hash.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This command prints the hash on standard output.  Additionally,
if the option <fo:inline font-family="monospace">--print-path</fo:inline> is used, the path of the
downloaded file in the Nix store is also printed.</fo:block></fo:block><fo:block id="idm8158"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Options</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:list-block id="idm8160" provisional-distance-between-starts="15em * 0.60+1em" provisional-label-separation="1em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em"><fo:list-item id="idm8161" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--type</fo:inline> <fo:inline font-style="italic" font-family="monospace">hashAlgo</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Use the specified cryptographic hash algorithm,
    which can be one of <fo:inline font-family="monospace">md5</fo:inline>,
    <fo:inline font-family="monospace">sha1</fo:inline>, and
    <fo:inline font-family="monospace">sha256</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm8170" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--print-path</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Print the store path of the downloaded file on
    standard output.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm8175" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--unpack</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Unpack the archive (which must be a tarball or zip
    file) and add the result to the Nix store. The resulting hash can
    be used with functions such as Nixpkgsâs
    <fo:inline font-family="monospace">fetchzip</fo:inline> or
    <fo:inline font-family="monospace">fetchFromGitHub</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm8182" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">--name</fo:inline> <fo:inline font-style="italic" font-family="monospace">name</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Override the name of the file in the Nix store. By
    default, this is
    <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">hash</fo:inline>-<fo:inline font-style="italic" font-family="monospace">basename</fo:inline></fo:inline>,
    where <fo:inline font-style="italic" font-family="monospace">basename</fo:inline> is the last component of
    <fo:inline font-style="italic" font-family="monospace">url</fo:inline>. Overriding the name is necessary
    when <fo:inline font-style="italic" font-family="monospace">basename</fo:inline> contains characters that
    are not allowed in Nix store paths.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="idm8194"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Examples</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="idm8196" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-prefetch-url ftp://ftp.gnu.org/pub/gnu/hello/hello-2.10.tar.gz
0ssi1wpaf7plaswqqjwigppsg5fyh99vdlb9kzl7c9lng89ndq1i

$ nix-prefetch-url --print-path mirror://gnu/hello/hello-2.10.tar.gz
0ssi1wpaf7plaswqqjwigppsg5fyh99vdlb9kzl7c9lng89ndq1i
/nix/store/3x7dwzq014bblazs7kq20p9hyzz0qh8g-hello-2.10.tar.gz

$ nix-prefetch-url --unpack --print-path https://github.com/NixOS/patchelf/archive/0.8.tar.gz
079agjlv0hrv7fxnx9ngipx14gyncbkllxrp9cccnh3a50fxcmy7
/nix/store/19zrmhm3m40xxaw81c8cqm6aljgrnwj2-0.8.tar.gz
</fo:block></fo:block></fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="true" master-reference="body" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Files</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Files</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="blank-body"><fo:block text-align="center"/></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block id="ch-files"><fo:block font-family="sans-serif,Symbol,ZapfDingbats"><fo:block margin-left="0pt"><fo:block font-size="24.8832pt" font-weight="bold"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0pt" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">ChapterÂ 24.Â Files</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This section lists configuration files that you can use when you
work with Nix.</fo:block><fo:block break-before="page"><fo:block id="sec-conf-file"><fo:block id="idm8206"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Name</fo:block></fo:block></fo:block></fo:block><fo:block space-after="1em">nix.conf <fo:inline font-family="serif,Symbol,ZapfDingbats">â</fo:inline> Nix configuration file</fo:block></fo:block><fo:block id="idm8209"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="17.28pt">Description</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix reads settings from two configuration files:</fo:block><fo:list-block id="idm8212" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm8213" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The system-wide configuration file
    <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">sysconfdir</fo:inline>/nix/nix.conf</fo:inline>
    (i.e. <fo:inline font-family="monospace">/etc/nix/nix.conf</fo:inline> on most systems), or
    <fo:inline font-family="monospace">$NIX_CONF_DIR/nix.conf</fo:inline> if
    <fo:inline font-family="monospace">NIX_CONF_DIR</fo:inline> is set.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm8220" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The user configuration file
    <fo:inline font-family="monospace">$XDG_CONFIG_HOME/nix/nix.conf</fo:inline>, or
    <fo:inline font-family="monospace">~/.config/nix/nix.conf</fo:inline> if
    <fo:inline font-family="monospace">XDG_CONFIG_HOME</fo:inline> is not set.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The configuration files consist of
<fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">name</fo:inline> =
<fo:inline font-style="italic" font-family="monospace">value</fo:inline></fo:inline> pairs, one per line. Other
files can be included with a line like <fo:inline font-family="monospace">include
<fo:inline font-style="italic" font-family="monospace">path</fo:inline></fo:inline>, where
<fo:inline font-style="italic" font-family="monospace">path</fo:inline> is interpreted relative to the current
conf file and a missing file is an error unless
<fo:inline font-family="monospace">!include</fo:inline> is used instead.
Comments start with a <fo:inline font-family="monospace">#</fo:inline> character.  Here is an
example configuration file:</fo:block><fo:block id="idm8234" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
keep-outputs = true       # Nice for developers
keep-derivations = true   # Idem
</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You can override settings on the command line using the
<fo:inline font-family="monospace">--option</fo:inline> flag, e.g. <fo:inline font-family="monospace">--option keep-outputs
false</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The following settings are currently available:

<fo:list-block id="idm8239" provisional-distance-between-starts="24em * 0.60+1em" provisional-label-separation="1em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em"><fo:list-item id="conf-allowed-uris" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">allowed-uris</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A list of URI prefixes to which access is allowed in
      restricted evaluation mode. For example, when set to
      <fo:inline font-family="monospace">https://github.com/NixOS</fo:inline>, builtin functions
      such as <fo:inline font-family="monospace">fetchGit</fo:inline> are allowed to access
      <fo:inline font-family="monospace">https://github.com/NixOS/patchelf.git</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-allow-import-from-derivation" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">allow-import-from-derivation</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">By default, Nix allows you to <fo:inline font-family="monospace">import</fo:inline> from a derivation,
    allowing building at evaluation time. With this option set to false, Nix will throw an error
    when evaluating an expression that uses this feature, allowing users to ensure their evaluation
    will not require any builds to take place.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-allow-new-privileges" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">allow-new-privileges</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">(Linux-specific.) By default, builders on Linux
    cannot acquire new privileges by calling setuid/setgid programs or
    programs that have file capabilities. For example, programs such
    as <fo:inline font-weight="bold">sudo</fo:inline> or <fo:inline font-weight="bold">ping</fo:inline> will
    fail. (Note that in sandbox builds, no such programs are available
    unless you bind-mount them into the sandbox via the
    <fo:inline font-family="monospace">sandbox-paths</fo:inline> option.) You can allow the
    use of such programs by enabling this option. This is impure and
    usually undesirable, but may be useful in certain scenarios
    (e.g. to spin up containers or set up userspace network interfaces
    in tests).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-allowed-users" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">allowed-users</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A list of names of users (separated by whitespace) that
      are allowed to connect to the Nix daemon. As with the
      <fo:inline font-family="monospace">trusted-users</fo:inline> option, you can specify groups by
      prefixing them with <fo:inline font-family="monospace">@</fo:inline>. Also, you can allow
      all users by specifying <fo:inline font-family="monospace">*</fo:inline>. The default is
      <fo:inline font-family="monospace">*</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Note that trusted users are always allowed to connect.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-auto-optimise-store" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">auto-optimise-store</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If set to <fo:inline font-family="monospace">true</fo:inline>, Nix
    automatically detects files in the store that have identical
    contents, and replaces them with hard links to a single copy.
    This saves disk space.  If set to <fo:inline font-family="monospace">false</fo:inline> (the
    default), you can still run <fo:inline font-weight="bold">nix-store
    --optimise</fo:inline> to get rid of duplicate
    files.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-builders" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builders</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A list of machines on which to perform builds. <fo:inline>See <fo:basic-link internal-destination="chap-distributed-builds"><fo:inline>ChapterÂ 16, <fo:inline font-style="italic">Remote Builds</fo:inline></fo:inline></fo:basic-link> for details.</fo:inline></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-builders-use-substitutes" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">builders-use-substitutes</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If set to <fo:inline font-family="monospace">true</fo:inline>, Nix will instruct
    remote build machines to use their own binary substitutes if available. In
    practical terms, this means that remote hosts will fetch as many build
    dependencies as possible from their own substitutes (e.g, from
    <fo:inline font-family="monospace">cache.nixos.org</fo:inline>), instead of waiting for this host to
    upload them all. This can drastically reduce build times if the network
    connection between this computer and the remote build host is slow. Defaults
    to <fo:inline font-family="monospace">false</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-build-users-group" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">build-users-group</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This options specifies the Unix group containing
    the Nix build user accounts.  In multi-user Nix installations,
    builds should not be performed by the Nix account since that would
    allow users to arbitrarily modify the Nix store and database by
    supplying specially crafted builders; and they cannot be performed
    by the calling user since that would allow him/her to influence
    the build result.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Therefore, if this option is non-empty and specifies a valid
    group, builds will be performed under the user accounts that are a
    member of the group specified here (as listed in
    <fo:inline font-family="monospace">/etc/group</fo:inline>).  Those user accounts should not
    be used for any other purpose!</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix will never run two builds under the same user account at
    the same time.  This is to prevent an obvious security hole: a
    malicious user writing a Nix expression that modifies the build
    result of a legitimate Nix expression being built by another user.
    Therefore it is good to have as many Nix build user accounts as
    you can spare.  (Remember: uids are cheap.)</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The build users should have permission to create files in
    the Nix store, but not delete them.  Therefore,
    <fo:inline font-family="monospace">/nix/store</fo:inline> should be owned by the Nix
    account, its group should be the group specified here, and its
    mode should be <fo:inline font-family="monospace">1775</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If the build users group is empty, builds will be performed
    under the uid of the Nix process (that is, the uid of the caller
    if <fo:inline font-family="monospace">NIX_REMOTE</fo:inline> is empty, the uid under which the Nix
    daemon runs if <fo:inline font-family="monospace">NIX_REMOTE</fo:inline> is
    <fo:inline font-family="monospace">daemon</fo:inline>).  Obviously, this should not be used in
    multi-user settings with untrusted users.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-compress-build-log" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">compress-build-log</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If set to <fo:inline font-family="monospace">true</fo:inline> (the default),
    build logs written to <fo:inline font-family="monospace">/nix/var/log/nix/drvs</fo:inline>
    will be compressed on the fly using bzip2.  Otherwise, they will
    not be compressed.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-connect-timeout" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">connect-timeout</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The timeout (in seconds) for establishing connections in
      the binary cache substituter.  It corresponds to
      <fo:inline font-weight="bold">curl</fo:inline>âs <fo:inline font-family="monospace">--connect-timeout</fo:inline>
      option.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-cores" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">cores</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Sets the value of the
    <fo:inline font-family="monospace">NIX_BUILD_CORES</fo:inline> environment variable in the
    invocation of builders.  Builders can use this variable at their
    discretion to control the maximum amount of parallelism.  For
    instance, in Nixpkgs, if the derivation attribute
    <fo:inline font-family="monospace">enableParallelBuilding</fo:inline> is set to
    <fo:inline font-family="monospace">true</fo:inline>, the builder passes the
    <fo:inline font-family="monospace">-j<fo:inline font-style="italic" font-family="monospace">N</fo:inline></fo:inline> flag to GNU Make.
    It can be overridden using the <fo:inline font-family="monospace">--cores</fo:inline> command line switch and
    defaults to <fo:inline font-family="monospace">1</fo:inline>.  The value <fo:inline font-family="monospace">0</fo:inline>
    means that the builder should use all available CPU cores in the
    system.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">See also <fo:basic-link internal-destination="chap-tuning-cores-and-jobs"><fo:inline>ChapterÂ 17, <fo:inline font-style="italic">Tuning Cores and Jobs</fo:inline></fo:inline></fo:basic-link>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-diff-hook" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">diff-hook</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      Absolute path to an executable capable of diffing build results.
      The hook executes if <fo:basic-link internal-destination="conf-run-diff-hook"><fo:inline><fo:inline font-family="monospace">run-diff-hook</fo:inline></fo:inline></fo:basic-link> is
      true, and the output of a build is known to not be the same.
      This program is not executed to determine if two results are the
      same.
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      The diff hook is executed by the same user and group who ran the
      build. However, the diff hook does not have write access to the
      store path just built.
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The diff hook program receives three parameters:</fo:block><fo:list-block id="idm8347" provisional-distance-between-starts="1.2em" provisional-label-separation="0.2em"><fo:list-item id="idm8348" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>1.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
          A path to the previous build's results
        </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm8350" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>2.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
          A path to the current build's results
        </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm8352" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>3.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
          The path to the build's derivation
        </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm8354" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>4.</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
          The path to the build's scratch directory. This directory
          will exist only if the build was run with
          <fo:inline font-family="monospace">--keep-failed</fo:inline>.
        </fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      The stderr and stdout output from the diff hook will not be
      displayed to the user. Instead, it will print to the nix-daemon's
      log.
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">When using the Nix daemon, <fo:inline font-family="monospace">diff-hook</fo:inline> must
    be set in the <fo:inline font-family="monospace">nix.conf</fo:inline> configuration file, and
    cannot be passed at the command line.
    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-enforce-determinism" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">enforce-determinism</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">See <fo:basic-link internal-destination="conf-repeat"><fo:inline><fo:inline font-family="monospace">repeat</fo:inline></fo:inline></fo:basic-link>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-extra-sandbox-paths" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">extra-sandbox-paths</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A list of additional paths appended to
    <fo:inline font-family="monospace">sandbox-paths</fo:inline>. Useful if you want to extend
    its default value.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-extra-platforms" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">extra-platforms</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Platforms other than the native one which
    this machine is capable of building for. This can be useful for
    supporting additional architectures on compatible machines:
    i686-linux can be built on x86_64-linux machines (and the default
    for this setting reflects this); armv7 is backwards-compatible with
    armv6 and armv5tel; some aarch64 machines can also natively run
    32-bit ARM code; and qemu-user may be used to support non-native
    platforms (though this may be slow and buggy). Most values for this
    are not enabled by default because build systems will often
    misdetect the target platform and generate incompatible code, so you
    may wish to cross-check the results of using this option against
    proper natively-built versions of your
    derivations.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-extra-substituters" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">extra-substituters</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Additional binary caches appended to those
    specified in <fo:inline font-family="monospace">substituters</fo:inline>.  When used by
    unprivileged users, untrusted substituters (i.e. those not listed
    in <fo:inline font-family="monospace">trusted-substituters</fo:inline>) are silently
    ignored.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-fallback" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">fallback</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If set to <fo:inline font-family="monospace">true</fo:inline>, Nix will fall
    back to building from source if a binary substitute fails.  This
    is equivalent to the <fo:inline font-family="monospace">--fallback</fo:inline> flag.  The
    default is <fo:inline font-family="monospace">false</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-fsync-metadata" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">fsync-metadata</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If set to <fo:inline font-family="monospace">true</fo:inline>, changes to the
    Nix store metadata (in <fo:inline font-family="monospace">/nix/var/nix/db</fo:inline>) are
    synchronously flushed to disk.  This improves robustness in case
    of system crashes, but reduces performance.  The default is
    <fo:inline font-family="monospace">true</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-hashed-mirrors" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">hashed-mirrors</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A list of web servers used by
    <fo:inline font-family="monospace">builtins.fetchurl</fo:inline> to obtain files by
    hash. The default is
    <fo:inline font-family="monospace">http://tarballs.nixos.org/</fo:inline>. Given a hash type
    <fo:inline font-style="italic" font-family="monospace">ht</fo:inline> and a base-16 hash
    <fo:inline font-style="italic" font-family="monospace">h</fo:inline>, Nix will try to download the file
    from
    <fo:inline font-family="monospace">hashed-mirror/<fo:inline font-style="italic" font-family="monospace">ht</fo:inline>/<fo:inline font-style="italic" font-family="monospace">h</fo:inline></fo:inline>.
    This allows files to be downloaded even if they have disappeared
    from their original URI. For example, given the default mirror
    <fo:inline font-family="monospace">http://tarballs.nixos.org/</fo:inline>, when building the derivation

<fo:block id="idm8414" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
builtins.fetchurl {
  url = https://example.org/foo-1.2.3.tar.xz;
  sha256 = "2c26b46b68ffc68ff99b453c1d30413413422d706483bfa0f98a5e886266e7ae";
}
</fo:block>

    Nix will attempt to download this file from
    <fo:inline font-family="monospace">http://tarballs.nixos.org/sha256/2c26b46b68ffc68ff99b453c1d30413413422d706483bfa0f98a5e886266e7ae</fo:inline>
    first. If it is not available there, if will try the original URI.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-http-connections" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">http-connections</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The maximum number of parallel TCP connections
    used to fetch files from binary caches and by other downloads. It
    defaults to 25. 0 means no limit.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-keep-build-log" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">keep-build-log</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If set to <fo:inline font-family="monospace">true</fo:inline> (the default),
    Nix will write the build log of a derivation (i.e. the standard
    output and error of its builder) to the directory
    <fo:inline font-family="monospace">/nix/var/log/nix/drvs</fo:inline>.  The build log can be
    retrieved using the command <fo:inline font-weight="bold">nix-store -l
    <fo:inline font-style="italic" font-family="monospace">path</fo:inline></fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-keep-derivations" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">keep-derivations</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If <fo:inline font-family="monospace">true</fo:inline> (default), the garbage
    collector will keep the derivations from which non-garbage store
    paths were built.  If <fo:inline font-family="monospace">false</fo:inline>, they will be
    deleted unless explicitly registered as a root (or reachable from
    other roots).</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Keeping derivation around is useful for querying and
    traceability (e.g., it allows you to ask with what dependencies or
    options a store path was built), so by default this option is on.
    Turn it off to save a bit of disk space (or a lot if
    <fo:inline font-family="monospace">keep-outputs</fo:inline> is also turned on).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-keep-env-derivations" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">keep-env-derivations</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If <fo:inline font-family="monospace">false</fo:inline> (default), derivations
    are not stored in Nix user environments.  That is, the derivations of
    any build-time-only dependencies may be garbage-collected.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If <fo:inline font-family="monospace">true</fo:inline>, when you add a Nix derivation to
    a user environment, the path of the derivation is stored in the
    user environment.  Thus, the derivation will not be
    garbage-collected until the user environment generation is deleted
    (<fo:inline font-weight="bold">nix-env --delete-generations</fo:inline>).  To prevent
    build-time-only dependencies from being collected, you should also
    turn on <fo:inline font-family="monospace">keep-outputs</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The difference between this option and
    <fo:inline font-family="monospace">keep-derivations</fo:inline> is that this one is
    âstickyâ: it applies to any user environment created while this
    option was enabled, while <fo:inline font-family="monospace">keep-derivations</fo:inline>
    only applies at the moment the garbage collector is
    run.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-keep-outputs" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">keep-outputs</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If <fo:inline font-family="monospace">true</fo:inline>, the garbage collector
    will keep the outputs of non-garbage derivations.  If
    <fo:inline font-family="monospace">false</fo:inline> (default), outputs will be deleted unless
    they are GC roots themselves (or reachable from other roots).</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In general, outputs must be registered as roots separately.
    However, even if the output of a derivation is registered as a
    root, the collector will still delete store paths that are used
    only at build time (e.g., the C compiler, or source tarballs
    downloaded from the network).  To prevent it from doing so, set
    this option to <fo:inline font-family="monospace">true</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-max-build-log-size" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">max-build-log-size</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This option defines the maximum number of bytes that a
      builder can write to its stdout/stderr.  If the builder exceeds
      this limit, itâs killed.  A value of <fo:inline font-family="monospace">0</fo:inline> (the
      default) means that there is no limit.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-max-free" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">max-free</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">When a garbage collection is triggered by the
    <fo:inline font-family="monospace">min-free</fo:inline> option, it stops as soon as
    <fo:inline font-family="monospace">max-free</fo:inline> bytes are available. The default is
    infinity (i.e. delete all garbage).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-max-jobs" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">max-jobs</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This option defines the maximum number of jobs
    that Nix will try to build in parallel.  The default is
    <fo:inline font-family="monospace">1</fo:inline>. The special value <fo:inline font-family="monospace">auto</fo:inline>
    causes Nix to use the number of CPUs in your system.  <fo:inline font-family="monospace">0</fo:inline>
    is useful when using remote builders to prevent any local builds (except for
    <fo:inline font-family="monospace">preferLocalBuild</fo:inline> derivation attribute which executes locally
    regardless).  It can be
    overridden using the <fo:inline font-family="monospace">--max-jobs</fo:inline> (<fo:inline font-family="monospace">-j</fo:inline>)
    command line switch.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">See also <fo:basic-link internal-destination="chap-tuning-cores-and-jobs"><fo:inline>ChapterÂ 17, <fo:inline font-style="italic">Tuning Cores and Jobs</fo:inline></fo:inline></fo:basic-link>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-max-silent-time" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">max-silent-time</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This option defines the maximum number of seconds that a
      builder can go without producing any data on standard output or
      standard error.  This is useful (for instance in an automated
      build system) to catch builds that are stuck in an infinite
      loop, or to catch remote builds that are hanging due to network
      problems.  It can be overridden using the <fo:inline font-family="monospace">--max-silent-time</fo:inline> command
      line switch.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The value <fo:inline font-family="monospace">0</fo:inline> means that there is no
      timeout.  This is also the default.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-min-free" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">min-free</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">When free disk space in <fo:inline font-family="monospace">/nix/store</fo:inline>
      drops below <fo:inline font-family="monospace">min-free</fo:inline> during a build, Nix
      performs a garbage-collection until <fo:inline font-family="monospace">max-free</fo:inline>
      bytes are available or there is no more garbage.  A value of
      <fo:inline font-family="monospace">0</fo:inline> (the default) disables this feature.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-narinfo-cache-negative-ttl" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">narinfo-cache-negative-ttl</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The TTL in seconds for negative lookups. If a store path is
      queried from a substituter but was not found, there will be a
      negative lookup cached in the local disk cache database for the
      specified duration.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-narinfo-cache-positive-ttl" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">narinfo-cache-positive-ttl</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The TTL in seconds for positive lookups. If a store path is
      queried from a substituter, the result of the query will be cached
      in the local disk cache database including some of the NAR
      metadata. The default TTL is a month, setting a shorter TTL for
      positive lookups can be useful for binary caches that have
      frequent garbage collection, in which case having a more frequent
      cache invalidation would prevent trying to pull the path again and
      failing with a hash mismatch if the build isn't reproducible.
      </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-netrc-file" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">netrc-file</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If set to an absolute path to a <fo:inline font-family="monospace">netrc</fo:inline>
    file, Nix will use the HTTP authentication credentials in this file when
    trying to download from a remote host through HTTP or HTTPS. Defaults to
    <fo:inline font-family="monospace">$NIX_CONF_DIR/netrc</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The <fo:inline font-family="monospace">netrc</fo:inline> file consists of a list of
    accounts in the following format:

<fo:block id="idm8523" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
machine <fo:inline font-style="italic" font-family="monospace">my-machine</fo:inline>
login <fo:inline font-style="italic" font-family="monospace">my-username</fo:inline>
password <fo:inline font-style="italic" font-family="monospace">my-password</fo:inline>
</fo:block>

    For the exact syntax, see <fo:basic-link external-destination="url(https://ec.haxx.se/usingcurl-netrc.html)"><fo:inline>the
    <fo:inline font-family="monospace">curl</fo:inline> documentation.</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(https://ec.haxx.se/usingcurl-netrc.html)">https://ec.haxx.se/usingcurl-netrc.html</fo:basic-link>]</fo:inline></fo:block><fo:block id="idm8529" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" margin-left="0.25in" margin-right="0.25in"><fo:block keep-with-next.within-column="always" font-size="14pt" font-weight="bold" hyphenate="false">Note</fo:block><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This must be an absolute path, and <fo:inline font-family="monospace">~</fo:inline>
    is not resolved. For example, <fo:inline font-family="monospace">~/.netrc</fo:inline> won't
    resolve to your home directory's <fo:inline font-family="monospace">.netrc</fo:inline>.</fo:block></fo:block></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-plugin-files" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">plugin-files</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
        A list of plugin files to be loaded by Nix. Each of these
        files will be dlopened by Nix, allowing them to affect
        execution through static initialization. In particular, these
        plugins may construct static instances of RegisterPrimOp to
        add new primops or constants to the expression language,
        RegisterStoreImplementation to add new store implementations,
        RegisterCommand to add new subcommands to the
        <fo:inline font-family="monospace">nix</fo:inline> command, and RegisterSetting to add new
        nix config settings. See the constructors for those types for
        more details.
      </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
        Since these files are loaded into the same address space as
        Nix itself, they must be DSOs compatible with the instance of
        Nix running at the time (i.e. compiled against the same
        headers, not linked to any incompatible libraries). They
        should not be linked to any Nix libs directly, as those will
        be available already at load time.
      </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
        If an entry in the list is a directory, all files in the
        directory are loaded as plugins (non-recursively).
      </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-pre-build-hook" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">pre-build-hook</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If set, the path to a program that can set extra
      derivation-specific settings for this system. This is used for settings
      that can't be captured by the derivation model itself and are too variable
      between different versions of the same system to be hard-coded into nix.
      </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The hook is passed the derivation path and, if sandboxes are enabled,
      the sandbox directory. It can then modify the sandbox and send a series of
      commands to modify various settings to stdout. The currently recognized
      commands are:</fo:block><fo:list-block id="idm8548" provisional-distance-between-starts="19em * 0.60+1em" provisional-label-separation="1em"><fo:list-item id="extra-sandbox-paths" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">extra-sandbox-paths</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Pass a list of files and directories to be included in the
            sandbox for this build. One entry per line, terminated by an empty
            line. Entries have the same format as
            <fo:inline font-family="monospace">sandbox-paths</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-post-build-hook" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">post-build-hook</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Optional. The path to a program to execute after each build.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This option is only settable in the global
      <fo:inline font-family="monospace">nix.conf</fo:inline>, or on the command line by trusted
      users.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">When using the nix-daemon, the daemon executes the hook as
      <fo:inline font-family="monospace">root</fo:inline>. If the nix-daemon is not involved, the
      hook runs as the user executing the nix-build.</fo:block><fo:list-block id="idm8564" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm8565" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The hook executes after an evaluation-time build.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm8567" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The hook does not execute on substituted paths.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm8569" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The hook's output always goes to the user's terminal.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm8571" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If the hook fails, the build succeeds but no further builds execute.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm8573" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The hook executes synchronously, and blocks other builds from progressing while it runs.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The program executes with no arguments. The program's environment
      contains the following environment variables:</fo:block><fo:list-block id="idm8576" provisional-distance-between-starts="9em * 0.60+1em" provisional-label-separation="1em"><fo:list-item id="idm8577" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">DRV_PATH</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The derivation for the built paths.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Example:
            <fo:inline font-family="monospace">/nix/store/5nihn1a7pa8b25l9zafqaqibznlvvp3f-bash-4.4-p23.drv</fo:inline>
            </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm8584" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">OUT_PATHS</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Output paths of the built derivation, separated by a space character.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Example:
            <fo:inline font-family="monospace">/nix/store/zf5lbh336mnzf1nlswdn11g4n2m8zh3g-bash-4.4-p23-dev
            /nix/store/rjxwxwv1fpn9wa2x5ssk5phzwlcv4mna-bash-4.4-p23-doc
            /nix/store/6bqvbzjkcp9695dq0dpl5y43nvy37pq1-bash-4.4-p23-info
            /nix/store/r7fng3kk3vlpdlh2idnrbn37vh4imlj2-bash-4.4-p23-man
            /nix/store/xfghy8ixrhz3kyy6p724iv3cxji088dx-bash-4.4-p23</fo:inline>.
            </fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">See <fo:basic-link internal-destination="chap-post-build-hook"><fo:inline>ChapterÂ 19, <fo:inline font-style="italic">Using the <fo:inline font-family="monospace">post-build-hook</fo:inline></fo:inline></fo:inline></fo:basic-link> for an example
      implementation.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-repeat" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">repeat</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">How many times to repeat builds to check whether
    they are deterministic. The default value is 0. If the value is
    non-zero, every build is repeated the specified number of
    times. If the contents of any of the runs differs from the
    previous ones and <fo:basic-link internal-destination="conf-enforce-determinism"><fo:inline><fo:inline font-family="monospace">enforce-determinism</fo:inline></fo:inline></fo:basic-link> is
    true, the build is rejected and the resulting store paths are not
    registered as âvalidâ in Nixâs database.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-require-sigs" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">require-sigs</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If set to <fo:inline font-family="monospace">true</fo:inline> (the default),
    any non-content-addressed path added or copied to the Nix store
    (e.g. when substituting from a binary cache) must have a valid
    signature, that is, be signed using one of the keys listed in
    <fo:inline font-family="monospace">trusted-public-keys</fo:inline> or
    <fo:inline font-family="monospace">secret-key-files</fo:inline>. Set to <fo:inline font-family="monospace">false</fo:inline>
    to disable signature checking.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-restrict-eval" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">restrict-eval</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If set to <fo:inline font-family="monospace">true</fo:inline>, the Nix evaluator will
      not allow access to any files outside of the Nix search path (as
      set via the <fo:inline font-family="monospace">NIX_PATH</fo:inline> environment variable or the
      <fo:inline font-family="monospace">-I</fo:inline> option), or to URIs outside of
      <fo:inline font-family="monospace">allowed-uri</fo:inline>. The default is
      <fo:inline font-family="monospace">false</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-run-diff-hook" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">run-diff-hook</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      If true, enable the execution of <fo:basic-link internal-destination="conf-diff-hook"><fo:inline><fo:inline font-family="monospace">diff-hook</fo:inline></fo:inline></fo:basic-link>.
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      When using the Nix daemon, <fo:inline font-family="monospace">run-diff-hook</fo:inline> must
      be set in the <fo:inline font-family="monospace">nix.conf</fo:inline> configuration file,
      and cannot be passed at the command line.
    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-sandbox" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">sandbox</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If set to <fo:inline font-family="monospace">true</fo:inline>, builds will be
    performed in a <fo:inline font-style="italic">sandboxed environment</fo:inline>, i.e.,
    theyâre isolated from the normal file system hierarchy and will
    only see their dependencies in the Nix store, the temporary build
    directory, private versions of <fo:inline font-family="monospace">/proc</fo:inline>,
    <fo:inline font-family="monospace">/dev</fo:inline>, <fo:inline font-family="monospace">/dev/shm</fo:inline> and
    <fo:inline font-family="monospace">/dev/pts</fo:inline> (on Linux), and the paths configured with the
    <fo:basic-link internal-destination="conf-sandbox-paths"><fo:inline><fo:inline font-family="monospace">sandbox-paths</fo:inline>
    option</fo:inline></fo:basic-link>. This is useful to prevent undeclared dependencies
    on files in directories such as <fo:inline font-family="monospace">/usr/bin</fo:inline>. In
    addition, on Linux, builds run in private PID, mount, network, IPC
    and UTS namespaces to isolate them from other processes in the
    system (except that fixed-output derivations do not run in private
    network namespace to ensure they can access the network).</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Currently, sandboxing only work on Linux and macOS. The use
    of a sandbox requires that Nix is run as root (so you should use
    the <fo:basic-link internal-destination="conf-build-users-group"><fo:inline>âbuild usersâ
    feature</fo:inline></fo:basic-link> to perform the actual builds under different users
    than root).</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If this option is set to <fo:inline font-family="monospace">relaxed</fo:inline>, then
    fixed-output derivations and derivations that have the
    <fo:inline font-family="monospace">__noChroot</fo:inline> attribute set to
    <fo:inline font-family="monospace">true</fo:inline> do not run in sandboxes.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The default is <fo:inline font-family="monospace">true</fo:inline> on Linux and
    <fo:inline font-family="monospace">false</fo:inline> on all other platforms.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-sandbox-dev-shm-size" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">sandbox-dev-shm-size</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This option determines the maximum size of the
    <fo:inline font-family="monospace">tmpfs</fo:inline> filesystem mounted on
    <fo:inline font-family="monospace">/dev/shm</fo:inline> in Linux sandboxes. For the format,
    see the description of the <fo:inline font-family="monospace">size</fo:inline> option of
    <fo:inline font-family="monospace">tmpfs</fo:inline> in
    mount(8). The
    default is <fo:inline font-family="monospace">50%</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-sandbox-paths" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">sandbox-paths</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A list of paths bind-mounted into Nix sandbox
    environments. You can use the syntax
    <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">target</fo:inline>=<fo:inline font-style="italic" font-family="monospace">source</fo:inline></fo:inline>
    to mount a path in a different location in the sandbox; for
    instance, <fo:inline font-family="monospace">/bin=/nix-bin</fo:inline> will mount the path
    <fo:inline font-family="monospace">/nix-bin</fo:inline> as <fo:inline font-family="monospace">/bin</fo:inline> inside the
    sandbox. If <fo:inline font-style="italic" font-family="monospace">source</fo:inline> is followed by
    <fo:inline font-family="monospace">?</fo:inline>, then it is not an error if
    <fo:inline font-style="italic" font-family="monospace">source</fo:inline> does not exist; for example,
    <fo:inline font-family="monospace">/dev/nvidiactl?</fo:inline> specifies that
    <fo:inline font-family="monospace">/dev/nvidiactl</fo:inline> will only be mounted in the
    sandbox if it exists in the host filesystem.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Depending on how Nix was built, the default value for this option
    may be empty or provide <fo:inline font-family="monospace">/bin/sh</fo:inline> as a
    bind-mount of <fo:inline font-weight="bold">bash</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-secret-key-files" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">secret-key-files</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A whitespace-separated list of files containing
    secret (private) keys. These are used to sign locally-built
    paths. They can be generated using <fo:inline font-weight="bold">nix-store
    --generate-binary-cache-key</fo:inline>. The corresponding public
    key can be distributed to other users, who can add it to
    <fo:inline font-family="monospace">trusted-public-keys</fo:inline> in their
    <fo:inline font-family="monospace">nix.conf</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-show-trace" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">show-trace</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Causes Nix to print out a stack trace in case of Nix
    expression evaluation errors.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-substitute" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">substitute</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If set to <fo:inline font-family="monospace">true</fo:inline> (default), Nix
    will use binary substitutes if available.  This option can be
    disabled to force building from source.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-stalled-download-timeout" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">stalled-download-timeout</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The timeout (in seconds) for receiving data from servers
      during download. Nix cancels idle downloads after this timeout's
      duration.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-substituters" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">substituters</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A list of URLs of substituters, separated by
    whitespace.  The default is
    <fo:inline font-family="monospace">https://cache.nixos.org</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-system" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">system</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This option specifies the canonical Nix system
    name of the current installation, such as
    <fo:inline font-family="monospace">i686-linux</fo:inline> or
    <fo:inline font-family="monospace">x86_64-darwin</fo:inline>.  Nix can only build derivations
    whose <fo:inline font-family="monospace">system</fo:inline> attribute equals the value
    specified here.  In general, it never makes sense to modify this
    value from its default, since you can use it to âlieâ about the
    platform you are building on (e.g., perform a Mac OS build on a
    Linux machine; the result would obviously be wrong).  It only
    makes sense if the Nix binaries can run on multiple platforms,
    e.g., âuniversal binariesâ that run on <fo:inline font-family="monospace">x86_64-linux</fo:inline> and
    <fo:inline font-family="monospace">i686-linux</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">It defaults to the canonical Nix system name detected by
    <fo:inline font-family="monospace">configure</fo:inline> at build time.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-system-features" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">system-features</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A set of system âfeaturesâ supported by this
    machine, e.g. <fo:inline font-family="monospace">kvm</fo:inline>. Derivations can express a
    dependency on such features through the derivation attribute
    <fo:inline font-family="monospace">requiredSystemFeatures</fo:inline>. For example, the
    attribute

<fo:block id="idm8731" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
requiredSystemFeatures = [ "kvm" ];
</fo:block>

    ensures that the derivation can only be built on a machine with
    the <fo:inline font-family="monospace">kvm</fo:inline> feature.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This setting by default includes <fo:inline font-family="monospace">kvm</fo:inline> if
    <fo:inline font-family="monospace">/dev/kvm</fo:inline> is accessible, and the
    pseudo-features <fo:inline font-family="monospace">nixos-test</fo:inline>,
    <fo:inline font-family="monospace">benchmark</fo:inline> and <fo:inline font-family="monospace">big-parallel</fo:inline>
    that are used in Nixpkgs to route builds to specific
    machines.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-tarball-ttl" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">tarball-ttl</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Default: <fo:inline font-family="monospace">3600</fo:inline> seconds.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The number of seconds a downloaded tarball is considered
      fresh. If the cached tarball is stale, Nix will check whether
      it is still up to date using the ETag header. Nix will download
      a new version if the ETag header is unsupported, or the
      cached ETag doesn't match.
      </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Setting the TTL to <fo:inline font-family="monospace">0</fo:inline> forces Nix to always
      check if the tarball is up to date.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix caches tarballs in
      <fo:inline font-family="monospace">$XDG_CACHE_HOME/nix/tarballs</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Files fetched via <fo:inline font-family="monospace">NIX_PATH</fo:inline>,
      <fo:inline font-family="monospace">fetchGit</fo:inline>, <fo:inline font-family="monospace">fetchMercurial</fo:inline>,
      <fo:inline font-family="monospace">fetchTarball</fo:inline>, and <fo:inline font-family="monospace">fetchurl</fo:inline>
      respect this TTL.
      </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-timeout" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">timeout</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This option defines the maximum number of seconds that a
      builder can run.  This is useful (for instance in an automated
      build system) to catch builds that are stuck in an infinite loop
      but keep writing to their standard output or standard error.  It
      can be overridden using the <fo:inline font-family="monospace">--timeout</fo:inline> command line
      switch.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The value <fo:inline font-family="monospace">0</fo:inline> means that there is no
      timeout.  This is also the default.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-trace-function-calls" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">trace-function-calls</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Default: <fo:inline font-family="monospace">false</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If set to <fo:inline font-family="monospace">true</fo:inline>, the Nix evaluator will
      trace every function call. Nix will print a log message at the
      "vomit" level for every function entrance and function exit.</fo:block><fo:block id="idm8772" space-before.minimum="0.5em" space-before.optimum="1em" space-before.maximum="2em" space-after.minimum="0.5em" space-after.optimum="1em" space-after.maximum="2em"><fo:block id="idm8773" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
function-trace entered undefined position at 1565795816999559622
function-trace exited undefined position at 1565795816999581277
function-trace entered /nix/store/.../example.nix:226:41 at 1565795253249935150
function-trace exited /nix/store/.../example.nix:226:41 at 1565795253249941684
</fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The <fo:inline font-family="monospace">undefined position</fo:inline> means the function
      call is a builtin.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Use the <fo:inline font-family="monospace">contrib/stack-collapse.py</fo:inline> script
      distributed with the Nix source code to convert the trace logs
      in to a format suitable for <fo:inline font-weight="bold">flamegraph.pl</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-trusted-public-keys" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">trusted-public-keys</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A whitespace-separated list of public keys. When
    paths are copied from another Nix store (such as a binary cache),
    they must be signed with one of these keys. For example:
    <fo:inline font-family="monospace">cache.nixos.org-1:6NCHdD59X431o0gWypbMrAURkbJ16ZPMQFGspcDShjY=
    hydra.nixos.org-1:CNHJZBh9K4tP3EKF6FkkgeVYsS3ohTl+oS0Qa8bezVs=</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-trusted-substituters" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">trusted-substituters</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A list of URLs of substituters, separated by
    whitespace.  These are not used by default, but can be enabled by
    users of the Nix daemon by specifying <fo:inline font-family="monospace">--option
    substituters <fo:inline font-style="italic" font-family="monospace">urls</fo:inline></fo:inline> on the
    command line.  Unprivileged users are only allowed to pass a
    subset of the URLs listed in <fo:inline font-family="monospace">substituters</fo:inline> and
    <fo:inline font-family="monospace">trusted-substituters</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-trusted-users" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">trusted-users</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A list of names of users (separated by whitespace) that
      have additional rights when connecting to the Nix daemon, such
      as the ability to specify additional binary caches, or to import
      unsigned NARs. You can also specify groups by prefixing them
      with <fo:inline font-family="monospace">@</fo:inline>; for instance,
      <fo:inline font-family="monospace">@wheel</fo:inline> means all users in the
      <fo:inline font-family="monospace">wheel</fo:inline> group. The default is
      <fo:inline font-family="monospace">root</fo:inline>.</fo:block><fo:block id="idm8803" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" margin-left="0.25in" margin-right="0.25in"><fo:block keep-with-next.within-column="always" font-size="14pt" font-weight="bold" hyphenate="false">Warning</fo:block><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Adding a user to <fo:inline font-family="monospace">trusted-users</fo:inline>
      is essentially equivalent to giving that user root access to the
      system. For example, the user can set
      <fo:inline font-family="monospace">sandbox-paths</fo:inline> and thereby obtain read access to
      directories that are otherwise inacessible to
      them.</fo:block></fo:block></fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block>
</fo:block><fo:block id="idm8807"><fo:block><fo:block><fo:block font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker"/><fo:block font-size="14.4pt">Deprecated Settings</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">

<fo:list-block id="idm8810" provisional-distance-between-starts="24em * 0.60+1em" provisional-label-separation="1em" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em"><fo:list-item id="conf-binary-caches" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">binary-caches</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-style="italic">Deprecated:</fo:inline>
    <fo:inline font-family="monospace">binary-caches</fo:inline> is now an alias to
    <fo:basic-link internal-destination="conf-substituters"><fo:inline><fo:inline font-family="monospace">substituters</fo:inline></fo:inline></fo:basic-link>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-binary-cache-public-keys" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">binary-cache-public-keys</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-style="italic">Deprecated:</fo:inline>
    <fo:inline font-family="monospace">binary-cache-public-keys</fo:inline> is now an alias to
    <fo:basic-link internal-destination="conf-trusted-public-keys"><fo:inline><fo:inline font-family="monospace">trusted-public-keys</fo:inline></fo:inline></fo:basic-link>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-build-compress-log" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">build-compress-log</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-style="italic">Deprecated:</fo:inline>
    <fo:inline font-family="monospace">build-compress-log</fo:inline> is now an alias to
    <fo:basic-link internal-destination="conf-compress-build-log"><fo:inline><fo:inline font-family="monospace">compress-build-log</fo:inline></fo:inline></fo:basic-link>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-build-cores" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">build-cores</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-style="italic">Deprecated:</fo:inline>
    <fo:inline font-family="monospace">build-cores</fo:inline> is now an alias to
    <fo:basic-link internal-destination="conf-cores"><fo:inline><fo:inline font-family="monospace">cores</fo:inline></fo:inline></fo:basic-link>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-build-extra-chroot-dirs" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">build-extra-chroot-dirs</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-style="italic">Deprecated:</fo:inline>
    <fo:inline font-family="monospace">build-extra-chroot-dirs</fo:inline> is now an alias to
    <fo:basic-link internal-destination="conf-extra-sandbox-paths"><fo:inline><fo:inline font-family="monospace">extra-sandbox-paths</fo:inline></fo:inline></fo:basic-link>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-build-extra-sandbox-paths" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">build-extra-sandbox-paths</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-style="italic">Deprecated:</fo:inline>
    <fo:inline font-family="monospace">build-extra-sandbox-paths</fo:inline> is now an alias to
    <fo:basic-link internal-destination="conf-extra-sandbox-paths"><fo:inline><fo:inline font-family="monospace">extra-sandbox-paths</fo:inline></fo:inline></fo:basic-link>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-build-fallback" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">build-fallback</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-style="italic">Deprecated:</fo:inline>
    <fo:inline font-family="monospace">build-fallback</fo:inline> is now an alias to
    <fo:basic-link internal-destination="conf-fallback"><fo:inline><fo:inline font-family="monospace">fallback</fo:inline></fo:inline></fo:basic-link>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-build-max-jobs" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">build-max-jobs</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-style="italic">Deprecated:</fo:inline>
    <fo:inline font-family="monospace">build-max-jobs</fo:inline> is now an alias to
    <fo:basic-link internal-destination="conf-max-jobs"><fo:inline><fo:inline font-family="monospace">max-jobs</fo:inline></fo:inline></fo:basic-link>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-build-max-log-size" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">build-max-log-size</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-style="italic">Deprecated:</fo:inline>
    <fo:inline font-family="monospace">build-max-log-size</fo:inline> is now an alias to
    <fo:basic-link internal-destination="conf-max-build-log-size"><fo:inline><fo:inline font-family="monospace">max-build-log-size</fo:inline></fo:inline></fo:basic-link>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-build-max-silent-time" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">build-max-silent-time</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-style="italic">Deprecated:</fo:inline>
    <fo:inline font-family="monospace">build-max-silent-time</fo:inline> is now an alias to
    <fo:basic-link internal-destination="conf-max-silent-time"><fo:inline><fo:inline font-family="monospace">max-silent-time</fo:inline></fo:inline></fo:basic-link>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-build-repeat" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">build-repeat</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-style="italic">Deprecated:</fo:inline>
    <fo:inline font-family="monospace">build-repeat</fo:inline> is now an alias to
    <fo:basic-link internal-destination="conf-repeat"><fo:inline><fo:inline font-family="monospace">repeat</fo:inline></fo:inline></fo:basic-link>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-build-timeout" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">build-timeout</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-style="italic">Deprecated:</fo:inline>
    <fo:inline font-family="monospace">build-timeout</fo:inline> is now an alias to
    <fo:basic-link internal-destination="conf-timeout"><fo:inline><fo:inline font-family="monospace">timeout</fo:inline></fo:inline></fo:basic-link>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-build-use-chroot" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">build-use-chroot</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-style="italic">Deprecated:</fo:inline>
    <fo:inline font-family="monospace">build-use-chroot</fo:inline> is now an alias to
    <fo:basic-link internal-destination="conf-sandbox"><fo:inline><fo:inline font-family="monospace">sandbox</fo:inline></fo:inline></fo:basic-link>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-build-use-sandbox" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">build-use-sandbox</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-style="italic">Deprecated:</fo:inline>
    <fo:inline font-family="monospace">build-use-sandbox</fo:inline> is now an alias to
    <fo:basic-link internal-destination="conf-sandbox"><fo:inline><fo:inline font-family="monospace">sandbox</fo:inline></fo:inline></fo:basic-link>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-build-use-substitutes" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">build-use-substitutes</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-style="italic">Deprecated:</fo:inline>
    <fo:inline font-family="monospace">build-use-substitutes</fo:inline> is now an alias to
    <fo:basic-link internal-destination="conf-substitute"><fo:inline><fo:inline font-family="monospace">substitute</fo:inline></fo:inline></fo:basic-link>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-gc-keep-derivations" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">gc-keep-derivations</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-style="italic">Deprecated:</fo:inline>
    <fo:inline font-family="monospace">gc-keep-derivations</fo:inline> is now an alias to
    <fo:basic-link internal-destination="conf-keep-derivations"><fo:inline><fo:inline font-family="monospace">keep-derivations</fo:inline></fo:inline></fo:basic-link>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-gc-keep-outputs" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">gc-keep-outputs</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-style="italic">Deprecated:</fo:inline>
    <fo:inline font-family="monospace">gc-keep-outputs</fo:inline> is now an alias to
    <fo:basic-link internal-destination="conf-keep-outputs"><fo:inline><fo:inline font-family="monospace">keep-outputs</fo:inline></fo:inline></fo:basic-link>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-env-keep-derivations" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">env-keep-derivations</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-style="italic">Deprecated:</fo:inline>
    <fo:inline font-family="monospace">env-keep-derivations</fo:inline> is now an alias to
    <fo:basic-link internal-destination="conf-keep-env-derivations"><fo:inline><fo:inline font-family="monospace">keep-env-derivations</fo:inline></fo:inline></fo:basic-link>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-extra-binary-caches" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">extra-binary-caches</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-style="italic">Deprecated:</fo:inline>
    <fo:inline font-family="monospace">extra-binary-caches</fo:inline> is now an alias to
    <fo:basic-link internal-destination="conf-extra-substituters"><fo:inline><fo:inline font-family="monospace">extra-substituters</fo:inline></fo:inline></fo:basic-link>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="conf-trusted-binary-caches" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()" text-align="start"><fo:block><fo:inline><fo:inline font-family="monospace">trusted-binary-caches</fo:inline></fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-style="italic">Deprecated:</fo:inline>
    <fo:inline font-family="monospace">trusted-binary-caches</fo:inline> is now an alias to
    <fo:basic-link internal-destination="conf-trusted-substituters"><fo:inline><fo:inline font-family="monospace">trusted-substituters</fo:inline></fo:inline></fo:basic-link>.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block>
</fo:block></fo:block></fo:block></fo:block></fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="true" master-reference="back" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Glossary</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Glossary</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="blank-body"><fo:block text-align="center"/></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block id="part-glossary"><fo:block><fo:block><fo:block margin-left="0pt" font-size="24.8832pt" font-weight="bold" font-family="sans-serif,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0pt" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">AppendixÂ A.Â Glossary</fo:block></fo:block></fo:block></fo:block></fo:block><fo:list-block provisional-distance-between-starts="2in" provisional-label-separation="0.25in" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="gloss-derivation"><fo:list-item-label end-indent="label-end()"><fo:block><fo:inline id="idm8975">derivation</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A description of a build action.  The result of a
  derivation is a store object.  Derivations are typically specified
  in Nix expressions using the <fo:basic-link internal-destination="ssec-derivation"><fo:inline><fo:inline font-family="monospace">derivation</fo:inline>
  primitive</fo:inline></fo:basic-link>.  These are translated into low-level
  <fo:inline font-style="italic">store derivations</fo:inline> (implicitly by
  <fo:inline font-weight="bold">nix-env</fo:inline> and <fo:inline font-weight="bold">nix-build</fo:inline>, or
  explicitly by <fo:inline font-weight="bold">nix-instantiate</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block><fo:inline id="idm8985">store</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The location in the file system where store objects
  live.  Typically <fo:inline font-family="monospace">/nix/store</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block><fo:inline id="idm8990">store path</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The location in the file system of a store object,
  i.e., an immediate child of the Nix store
  directory.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block><fo:inline id="idm8994">store object</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A file that is an immediate child of the Nix store
  directory.  These can be regular files, but also entire directory
  trees.  Store objects can be sources (objects copied from outside of
  the store), derivation outputs (objects produced by running a build
  action), or derivations (files describing a build
  action).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="gloss-substitute"><fo:list-item-label end-indent="label-end()"><fo:block><fo:inline id="idm8998">substitute</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A substitute is a command invocation stored in the
  Nix database that describes how to build a store object, bypassing
  the normal build mechanism (i.e., derivations).  Typically, the
  substitute builds the store object by downloading a pre-built
  version of the store object from some server.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block><fo:inline id="idm9002">purity</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The assumption that equal Nix derivations when run
  always produce the same output.  This cannot be guaranteed in
  general (e.g., a builder can rely on external inputs such as the
  network or the system time) but the Nix model assumes
  it.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block><fo:inline id="idm9006">Nix expression</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A high-level description of software packages and
  compositions thereof.  Deploying software using Nix entails writing
  Nix expressions for your packages.  Nix expressions are translated
  to derivations that are stored in the Nix store.  These derivations
  can then be built.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="gloss-reference"><fo:list-item-label end-indent="label-end()"><fo:block><fo:inline id="idm9010">reference</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A store path <fo:inline font-family="monospace">P</fo:inline> is said to have a
    reference to a store path <fo:inline font-family="monospace">Q</fo:inline> if the store object
    at <fo:inline font-family="monospace">P</fo:inline> contains the path <fo:inline font-family="monospace">Q</fo:inline>
    somewhere. The <fo:inline font-style="italic">references</fo:inline> of a store path are
    the set of store paths to which it has a reference.
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A derivation can reference other derivations and sources
    (but not output paths), whereas an output path only references other
    output paths.
    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="gloss-reachable"><fo:list-item-label end-indent="label-end()"><fo:block><fo:inline id="idm9020">reachable</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A store path <fo:inline font-family="monospace">Q</fo:inline> is reachable from
  another store path <fo:inline font-family="monospace">P</fo:inline> if <fo:inline font-family="monospace">Q</fo:inline> is in the
  <fo:basic-link internal-destination="gloss-closure"><fo:inline>closure</fo:inline></fo:basic-link> of the
  <fo:basic-link internal-destination="gloss-reference"><fo:inline>references</fo:inline></fo:basic-link> relation.
  </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="gloss-closure"><fo:list-item-label end-indent="label-end()"><fo:block><fo:inline id="idm9029">closure</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The closure of a store path is the set of store
  paths that are directly or indirectly âreachableâ from that store
  path; that is, itâs the closure of the path under the <fo:basic-link internal-destination="gloss-reference"><fo:inline>references</fo:inline></fo:basic-link> relation. For a package, the
  closure of its derivation is equivalent to the build-time
  dependencies, while the closure of its output path is equivalent to its
  runtime dependencies. For correct deployment it is necessary to deploy whole
  closures, since otherwise at runtime files could be missing. The command
  <fo:inline font-weight="bold">nix-store -qR</fo:inline> prints out closures of store paths.
  </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">As an example, if the store object at path <fo:inline font-family="monospace">P</fo:inline> contains
  a reference to path <fo:inline font-family="monospace">Q</fo:inline>, then <fo:inline font-family="monospace">Q</fo:inline> is
  in the closure of <fo:inline font-family="monospace">P</fo:inline>. Further, if <fo:inline font-family="monospace">Q</fo:inline>
  references <fo:inline font-family="monospace">R</fo:inline> then <fo:inline font-family="monospace">R</fo:inline> is also in
  the closure of <fo:inline font-family="monospace">P</fo:inline>.
  </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="gloss-output-path"><fo:list-item-label end-indent="label-end()"><fo:block><fo:inline id="idm9044">output path</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A store path produced by a derivation.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="gloss-deriver"><fo:list-item-label end-indent="label-end()"><fo:block><fo:inline id="idm9048">deriver</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The deriver of an <fo:basic-link internal-destination="gloss-output-path"><fo:inline>output path</fo:inline></fo:basic-link> is the store
  derivation that built it.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="gloss-validity"><fo:list-item-label end-indent="label-end()"><fo:block><fo:inline id="idm9053">validity</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A store path is considered
  <fo:inline font-style="italic">valid</fo:inline> if it exists in the file system, is
  listed in the Nix database as being valid, and if all paths in its
  closure are also valid.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="gloss-user-env"><fo:list-item-label end-indent="label-end()"><fo:block><fo:inline id="idm9058">user environment</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">An automatically generated store object that
  consists of a set of symlinks to âactiveâ applications, i.e., other
  store paths.  These are generated automatically by <fo:basic-link internal-destination="sec-nix-env"><fo:inline><fo:inline font-weight="bold">nix-env</fo:inline></fo:inline></fo:basic-link>.  See <fo:basic-link internal-destination="sec-profiles"><fo:inline>ChapterÂ 10, <fo:inline font-style="italic">Profiles</fo:inline></fo:inline></fo:basic-link>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="gloss-profile"><fo:list-item-label end-indent="label-end()"><fo:block><fo:inline id="idm9065">profile</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A symlink to the current <fo:basic-link internal-destination="gloss-user-env"><fo:inline>user environment</fo:inline></fo:basic-link> of a user, e.g.,
  <fo:inline font-family="monospace">/nix/var/nix/profiles/default</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" id="gloss-nar"><fo:list-item-label end-indent="label-end()"><fo:block><fo:inline id="idm9071">NAR</fo:inline></fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A <fo:inline font-style="italic">N</fo:inline>ix
  <fo:inline font-style="italic">AR</fo:inline>chive.  This is a serialisation of a path in
  the Nix store.  It can contain regular files, directories and
  symbolic links.  NARs are generated and unpacked using
  <fo:inline font-weight="bold">nix-store --dump</fo:inline> and <fo:inline font-weight="bold">nix-store
  --restore</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="true" master-reference="back" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Hacking</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Hacking</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="blank-body"><fo:block text-align="center"/></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block id="chap-hacking"><fo:block><fo:block><fo:block margin-left="0pt" font-size="24.8832pt" font-weight="bold" font-family="sans-serif,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0pt" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">AppendixÂ B.Â Hacking</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This section provides some notes on how to hack on Nix.  To get
the latest version of Nix from GitHub:
<fo:block id="idm9081" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ git clone git://github.com/NixOS/nix.git
$ cd nix
</fo:block>
</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To build it and its dependencies:
<fo:block id="idm9083" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-build release.nix -A build.x86_64-linux
</fo:block>
</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To build all dependencies and start a shell in which all
environment variables are set up so that those dependencies can be
found:
<fo:block id="idm9085" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-shell
</fo:block>
To build Nix itself in this shell:
<fo:block id="idm9086" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
[nix-shell]$ ./bootstrap.sh
[nix-shell]$ configurePhase
[nix-shell]$ make
</fo:block>
To install it in <fo:inline font-family="monospace">$(pwd)/inst</fo:inline> and test it:
<fo:block id="idm9088" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
[nix-shell]$ make install
[nix-shell]$ make installcheck
</fo:block>

</fo:block></fo:flow></fo:page-sequence><fo:page-sequence xmlns:axf="http://www.antennahouse.com/names/XSL/Extensions" hyphenate="true" master-reference="back" language="en" format="1" initial-page-number="auto" force-page-count="no-force" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2"><fo:static-content flow-name="xsl-region-before-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Nix Release Notes</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block>Nix Release Notes</fo:block></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-before-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-bottom-width="0.5pt" border-bottom-style="solid" border-bottom-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="right" display-align="before" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-footnote-separator"><fo:block><fo:leader color="black" leader-pattern="rule" leader-length="1in"/></fo:block></fo:static-content><fo:static-content flow-name="blank-body"><fo:block text-align="center"/></fo:static-content><fo:static-content flow-name="xsl-region-inner-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-inner-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-first"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-odd"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-even"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-outer-blank"><fo:block/></fo:static-content><fo:static-content flow-name="xsl-region-after-first"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-odd"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-even"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:static-content flow-name="xsl-region-after-blank"><fo:block font-family="serif,Symbol,ZapfDingbats" margin-left="0pt"><fo:table table-layout="fixed" width="100%" border-top-width="0.5pt" border-top-style="solid" border-top-color="black"><fo:table-body><fo:table-row block-progression-dimension.minimum="14pt"><fo:table-cell text-align="start" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell><fo:table-cell text-align="center" display-align="after" relative-align="baseline"><fo:block><fo:block><fo:page-number/></fo:block></fo:block></fo:table-cell><fo:table-cell text-align="end" display-align="after" relative-align="baseline"><fo:block><fo:block/></fo:block></fo:table-cell></fo:table-row></fo:table-body></fo:table></fo:block></fo:static-content><fo:flow flow-name="xsl-region-body" start-indent="4pc" end-indent="0pt"><fo:block id="sec-relnotes"><fo:block><fo:block><fo:block margin-left="0pt" font-size="24.8832pt" font-weight="bold" font-family="sans-serif,Symbol,ZapfDingbats"><fo:block keep-with-next.within-column="always" space-before.optimum="10pt" space-before.minimum="10pt * 0.8" space-before.maximum="10pt * 1.2" hyphenate="false" text-align="start" start-indent="0pt" hyphenation-character="-" hyphenation-push-character-count="2" hyphenation-remain-character-count="2">AppendixÂ C.Â Nix Release Notes</fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="ssec-relnotes-2.3"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Release 2.3 (2019-09-04)</fo:marker><fo:block font-size="20.736pt">Release 2.3 (2019-09-04)</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This is primarily a bug fix release. However, it makes some
incompatible changes:</fo:block><fo:list-block id="idm9094" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm9095" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix now uses BSD file locks instead of POSIX file
    locks. Because of this, you should not use Nix 2.3 and previous
    releases at the same time on a Nix store.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">It also has the following changes:</fo:block><fo:list-block id="idm9098" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm9099" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">builtins.fetchGit</fo:inline>'s <fo:inline font-family="monospace">ref</fo:inline>
    argument now allows specifying an absolute remote ref.
    Nix will automatically prefix <fo:inline font-family="monospace">ref</fo:inline> with
    <fo:inline font-family="monospace">refs/heads</fo:inline> only if <fo:inline font-family="monospace">ref</fo:inline> doesn't
    already begin with <fo:inline font-family="monospace">refs/</fo:inline>.
    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9107" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The installer now enables sandboxing by default on Linux when the
    system has the necessary kernel support.
    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9109" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The <fo:inline font-family="monospace">max-jobs</fo:inline> setting now defaults to 1.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9112" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">New builtin functions:
    <fo:inline font-family="monospace">builtins.isPath</fo:inline>,
    <fo:inline font-family="monospace">builtins.hashFile</fo:inline>.
    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9116" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The <fo:inline font-weight="bold">nix</fo:inline> command has a new
    <fo:inline font-family="monospace">--print-build-logs</fo:inline> (<fo:inline font-family="monospace">-L</fo:inline>) flag to
    print build log output to stderr, rather than showing the last log
    line in the progress bar. To distinguish between concurrent
    builds, log lines are prefixed by the name of the package.
    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9121" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Builds are now executed in a pseudo-terminal, and the
    <fo:inline font-family="monospace">TERM</fo:inline> environment variable is set to
    <fo:inline font-family="monospace">xterm-256color</fo:inline>. This allows many programs
    (e.g. <fo:inline font-weight="bold">gcc</fo:inline>, <fo:inline font-weight="bold">clang</fo:inline>,
    <fo:inline font-weight="bold">cmake</fo:inline>) to print colorized log output.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9128" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Add <fo:inline font-family="monospace">--no-net</fo:inline> convenience flag. This flag
    disables substituters; sets the <fo:inline font-family="monospace">tarball-ttl</fo:inline>
    setting to infinity (ensuring that any previously downloaded files
    are considered current); and disables retrying downloads and sets
    the connection timeout to the minimum. This flag is enabled
    automatically if there are no configured non-loopback network
    interfaces.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9132" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Add a <fo:inline font-family="monospace">post-build-hook</fo:inline> setting to run a
    program after a build has succeeded.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9135" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Add a <fo:inline font-family="monospace">trace-function-calls</fo:inline> setting to log
    the duration of Nix function calls to stderr.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="ssec-relnotes-2.2"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Release 2.2 (2019-01-11)</fo:marker><fo:block font-size="20.736pt">Release 2.2 (2019-01-11)</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This is primarily a bug fix release. It also has the following
changes:</fo:block><fo:list-block id="idm9141" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm9142" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In derivations that use structured attributes (i.e. that
    specify set the <fo:inline font-family="monospace">__structuredAttrs</fo:inline> attribute to
    <fo:inline font-family="monospace">true</fo:inline> to cause all attributes to be passed to
    the builder in JSON format), you can now specify closure checks
    per output, e.g.:

<fo:block id="idm9146" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
outputChecks."out" = {
  # The closure of 'out' must not be larger than 256 MiB.
  maxClosureSize = 256 * 1024 * 1024;

  # It must not refer to C compiler or to the 'dev' output.
  disallowedRequisites = [ stdenv.cc "dev" ];
};

outputChecks."dev" = {
  # The 'dev' output must not be larger than 128 KiB.
  maxSize = 128 * 1024;
};
</fo:block>

    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9147" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The derivation attribute
    <fo:inline font-family="monospace">requiredSystemFeatures</fo:inline> is now enforced for
    local builds, and not just to route builds to remote builders.
    The supported features of a machine can be specified through the
    configuration setting <fo:inline font-family="monospace">system-features</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">By default, <fo:inline font-family="monospace">system-features</fo:inline> includes
    <fo:inline font-family="monospace">kvm</fo:inline> if <fo:inline font-family="monospace">/dev/kvm</fo:inline>
    exists. For compatibility, it also includes the pseudo-features
    <fo:inline font-family="monospace">nixos-test</fo:inline>, <fo:inline font-family="monospace">benchmark</fo:inline> and
    <fo:inline font-family="monospace">big-parallel</fo:inline> which are used by Nixpkgs to route
    builds to particular Hydra build machines.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9158" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Sandbox builds are now enabled by default on Linux.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9160" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The new command <fo:inline font-weight="bold">nix doctor</fo:inline> shows
    potential issues with your Nix installation.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9163" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The <fo:inline font-family="monospace">fetchGit</fo:inline> builtin function now uses a
    caching scheme that puts different remote repositories in distinct
    local repositories, rather than a single shared repository. This
    may require more disk space but is faster.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9166" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The <fo:inline font-family="monospace">dirOf</fo:inline> builtin function now works on
    relative paths.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9169" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix now supports <fo:basic-link external-destination="url(https://www.w3.org/TR/SRI/)"><fo:inline>SRI hashes</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(https://www.w3.org/TR/SRI/)">https://www.w3.org/TR/SRI/</fo:basic-link>]</fo:inline>,
    allowing the hash algorithm and hash to be specified in a single
    string. For example, you can write:

<fo:block id="idm9172" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
import &lt;nix/fetchurl.nix&gt; {
  url = https://nixos.org/releases/nix/nix-2.1.3/nix-2.1.3.tar.xz;
  hash = "sha256-XSLa0FjVyADWWhFfkZ2iKTjFDda6mMXjoYMXLRSYQKQ=";
};
</fo:block>

    instead of

<fo:block id="idm9173" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
import &lt;nix/fetchurl.nix&gt; {
  url = https://nixos.org/releases/nix/nix-2.1.3/nix-2.1.3.tar.xz;
  sha256 = "5d22dad058d5c800d65a115f919da22938c50dd6ba98c5e3a183172d149840a4";
};
</fo:block>

    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In fixed-output derivations, the
    <fo:inline font-family="monospace">outputHashAlgo</fo:inline> attribute is no longer mandatory
    if <fo:inline font-family="monospace">outputHash</fo:inline> specifies the hash.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix hash-file</fo:inline> and <fo:inline font-weight="bold">nix
    hash-path</fo:inline> now print hashes in SRI format by
    default. They also use SHA-256 by default instead of SHA-512
    because that's what we use most of the time in Nixpkgs.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9180" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Integers are now 64 bits on all platforms.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9182" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The evaluator now prints profiling statistics (enabled via
    the <fo:inline font-family="monospace">NIX_SHOW_STATS</fo:inline> and
    <fo:inline font-family="monospace">NIX_COUNT_CALLS</fo:inline> environment variables) in JSON
    format.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9186" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The option <fo:inline font-family="monospace">--xml</fo:inline> in <fo:inline font-weight="bold">nix-store
    --query</fo:inline> has been removed. Instead, there now is an
    option <fo:inline font-family="monospace">--graphml</fo:inline> to output the dependency graph
    in GraphML format.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9191" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">All <fo:inline font-family="monospace">nix-*</fo:inline> commands are now symlinks to
    <fo:inline font-family="monospace">nix</fo:inline>. This saves a bit of disk space.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9195" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix repl</fo:inline> now uses
    <fo:inline font-family="monospace">libeditline</fo:inline> or
    <fo:inline font-family="monospace">libreadline</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="ssec-relnotes-2.1"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Release 2.1 (2018-09-02)</fo:marker><fo:block font-size="20.736pt">Release 2.1 (2018-09-02)</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This is primarily a bug fix release. It also reduces memory
consumption in certain situations. In addition, it has the following
new features:</fo:block><fo:list-block id="idm9203" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm9204" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The Nix installer will no longer default to the Multi-User
    installation for macOS. You can still <fo:basic-link internal-destination="sect-multi-user-installation"><fo:inline>instruct the installer to
    run in multi-user mode</fo:inline></fo:basic-link>.
    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9207" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The Nix installer now supports performing a Multi-User
    installation for Linux computers which are running systemd. You
    can <fo:basic-link internal-destination="sect-multi-user-installation"><fo:inline>select a Multi-User installation</fo:inline></fo:basic-link> by passing the
    <fo:inline font-family="monospace">--daemon</fo:inline> flag to the installer: <fo:inline font-weight="bold">sh &lt;(curl
    https://nixos.org/nix/install) --daemon</fo:inline>.
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The multi-user installer cannot handle systems with SELinux.
    If your system has SELinux enabled, you can <fo:basic-link internal-destination="sect-single-user-installation"><fo:inline>force the installer to run
    in single-user mode</fo:inline></fo:basic-link>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9214" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">New builtin functions:
    <fo:inline font-family="monospace">builtins.bitAnd</fo:inline>,
    <fo:inline font-family="monospace">builtins.bitOr</fo:inline>,
    <fo:inline font-family="monospace">builtins.bitXor</fo:inline>,
    <fo:inline font-family="monospace">builtins.fromTOML</fo:inline>,
    <fo:inline font-family="monospace">builtins.concatMap</fo:inline>,
    <fo:inline font-family="monospace">builtins.mapAttrs</fo:inline>.
    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9222" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The S3 binary cache store now supports uploading NARs larger
    than 5 GiB.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9224" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The S3 binary cache store now supports uploading to
    S3-compatible services with the <fo:inline font-family="monospace">endpoint</fo:inline>
    option.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9227" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The flag <fo:inline font-family="monospace">--fallback</fo:inline> is no longer required
    to recover from disappeared NARs in binary caches.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9230" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-daemon</fo:inline> now respects
    <fo:inline font-family="monospace">--store</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9234" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix run</fo:inline> now respects
    <fo:inline font-family="monospace">nix-support/propagated-user-env-packages</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This release has contributions from

Adrien Devresse,
Aleksandr Pashkov,
Alexandre Esteves,
Amine Chikhaoui,
Andrew Dunham,
Asad Saeeduddin,
aszlig,
Ben Challenor,
Ben Gamari,
Benjamin Hipple,
Bogdan Seniuc,
Corey O'Connor,
Daiderd Jordan,
Daniel Peebles,
Daniel Poelzleithner,
Danylo Hlynskyi,
Dmitry Kalinkin,
Domen KoÅ¾ar,
Doug Beardsley,
Eelco Dolstra,
Erik Arvstedt,
FÃ©lix Baylac-JacquÃ©,
Gleb Peregud,
Graham Christensen,
Guillaume Maudoux,
Ivan Kozik,
John Arnold,
Justin Humm,
Linus Heckemann,
Lorenzo Manacorda,
Matthew Justin Bauer,
Matthew O'Gorman,
Maximilian Bosch,
Michael Bishop,
Michael Fiano,
Michael Mercier,
Michael Raskin,
Michael Weiss,
Nicolas Dudebout,
Peter Simons,
Ryan Trinkle,
Samuel Dionne-Riel,
Sean Seefried,
Shea Levy,
Symphorien Gibol,
Tim Engler,
Tim Sears,
Tuomas Tynkkynen,
volth,
Will Dietz,
Yorick van Pelt and
zimbatm.
</fo:block></fo:block><fo:block id="ssec-relnotes-2.0"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Release 2.0 (2018-02-22)</fo:marker><fo:block font-size="20.736pt">Release 2.0 (2018-02-22)</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The following incompatible changes have been made:</fo:block><fo:list-block id="idm9242" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm9243" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The manifest-based substituter mechanism
    (<fo:inline font-weight="bold">download-using-manifests</fo:inline>) has been <fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/867967265b80946dfe1db72d40324b4f9af988ed)"><fo:inline>removed</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/867967265b80946dfe1db72d40324b4f9af988ed)">https://github.com/NixOS/nix/commit/867967265b80946dfe1db72d40324b4f9af988ed</fo:basic-link>]</fo:inline>. It
    has been superseded by the binary cache substituter mechanism
    since several years. As a result, the following programs have been
    removed:

    <fo:list-block id="idm9247" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm9248" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-pull</fo:inline></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9251" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-generate-patches</fo:inline></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9254" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">bsdiff</fo:inline></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9257" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">bspatch</fo:inline></fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block>
    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9260" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The âcopy from other storesâ substituter mechanism
    (<fo:inline font-weight="bold">copy-from-other-stores</fo:inline> and the
    <fo:inline font-family="monospace">NIX_OTHER_STORES</fo:inline> environment variable) has been
    removed. It was primarily used by the NixOS installer to copy
    available paths from the installation medium. The replacement is
    to use a chroot store as a substituter
    (e.g. <fo:inline font-family="monospace">--substituters /mnt</fo:inline>), or to build into a
    chroot store (e.g. <fo:inline font-family="monospace">--store /mnt --substituters /</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9266" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The command <fo:inline font-weight="bold">nix-push</fo:inline> has been removed as
    part of the effort to eliminate Nix's dependency on Perl. You can
    use <fo:inline font-weight="bold">nix copy</fo:inline> instead, e.g. <fo:inline font-family="monospace">nix copy
    --to file:///tmp/my-binary-cache <fo:inline font-style="italic" font-family="monospace">pathsâ¦</fo:inline></fo:inline></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9272" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The ânestedâ log output feature (<fo:inline font-family="monospace">--log-type
    pretty</fo:inline>) has been removed. As a result,
    <fo:inline font-weight="bold">nix-log2xml</fo:inline> was also removed.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9276" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">OpenSSL-based signing has been <fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/f435f8247553656774dd1b2c88e9de5d59cab203)"><fo:inline>removed</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/f435f8247553656774dd1b2c88e9de5d59cab203)">https://github.com/NixOS/nix/commit/f435f8247553656774dd1b2c88e9de5d59cab203</fo:basic-link>]</fo:inline>. This
    feature was never well-supported. A better alternative is provided
    by the <fo:inline font-family="monospace">secret-key-files</fo:inline> and
    <fo:inline font-family="monospace">trusted-public-keys</fo:inline> options.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9281" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Failed build caching has been <fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/8cffec84859cec8b610a2a22ab0c4d462a9351ff)"><fo:inline>removed</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/8cffec84859cec8b610a2a22ab0c4d462a9351ff)">https://github.com/NixOS/nix/commit/8cffec84859cec8b610a2a22ab0c4d462a9351ff</fo:basic-link>]</fo:inline>. This
    feature was introduced to support the Hydra continuous build
    system, but Hydra no longer uses it.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9284" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-mode.el</fo:inline> has been removed from
    Nix. It is now <fo:basic-link external-destination="url(https://github.com/NixOS/nix-mode)"><fo:inline>a separate
    repository</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(https://github.com/NixOS/nix-mode)">https://github.com/NixOS/nix-mode</fo:basic-link>]</fo:inline> and can be installed through the MELPA package
    repository.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This release has the following new features:</fo:block><fo:list-block id="idm9289" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm9290" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">It introduces a new command named <fo:inline font-weight="bold">nix</fo:inline>,
    which is intended to eventually replace all
    <fo:inline font-weight="bold">nix-*</fo:inline> commands with a more consistent and
    better designed user interface. It currently provides replacements
    for some (but not all) of the functionality provided by
    <fo:inline font-weight="bold">nix-store</fo:inline>, <fo:inline font-weight="bold">nix-build</fo:inline>,
    <fo:inline font-weight="bold">nix-shell -p</fo:inline>, <fo:inline font-weight="bold">nix-env -qa</fo:inline>,
    <fo:inline font-weight="bold">nix-instantiate --eval</fo:inline>,
    <fo:inline font-weight="bold">nix-push</fo:inline> and
    <fo:inline font-weight="bold">nix-copy-closure</fo:inline>. It has the following major
    features:</fo:block><fo:list-block id="idm9301" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm9302" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Unlike the legacy commands, it has a consistent way to
        refer to packages and package-like arguments (like store
        paths). For example, the following commands all copy the GNU
        Hello package to a remote machine:

        <fo:block id="idm9304" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">nix copy --to ssh://machine nixpkgs.hello</fo:block>
        <fo:block id="idm9305" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">nix copy --to ssh://machine /nix/store/0i2jd68mp5g6h2sa5k9c85rb80sn8hi9-hello-2.10</fo:block>
        <fo:block id="idm9306" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">nix copy --to ssh://machine '(with import &lt;nixpkgs&gt; {}; hello)'</fo:block>

        By contrast, <fo:inline font-weight="bold">nix-copy-closure</fo:inline> only accepted
        store paths as arguments.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9308" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">It is self-documenting: <fo:inline font-family="monospace">--help</fo:inline> shows
        all available command-line arguments. If
        <fo:inline font-family="monospace">--help</fo:inline> is given after a subcommand, it shows
        examples for that subcommand. <fo:inline font-weight="bold">nix
        --help-config</fo:inline> shows all configuration
        options.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9313" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">It is much less verbose. By default, it displays a
        single-line progress indicator that shows how many packages
        are left to be built or downloaded, and (if there are running
        builds) the most recent line of builder output. If a build
        fails, it shows the last few lines of builder output. The full
        build log can be retrieved using <fo:inline font-weight="bold">nix
        log</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9316" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">It <fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/b8283773bd64d7da6859ed520ee19867742a03ba)"><fo:inline>provides</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/b8283773bd64d7da6859ed520ee19867742a03ba)">https://github.com/NixOS/nix/commit/b8283773bd64d7da6859ed520ee19867742a03ba</fo:basic-link>]</fo:inline>
        all <fo:inline font-family="monospace">nix.conf</fo:inline> configuration options as
        command line flags. For example, instead of <fo:inline font-family="monospace">--option
        http-connections 100</fo:inline> you can write
        <fo:inline font-family="monospace">--http-connections 100</fo:inline>. Boolean options can
        be written as
        <fo:inline font-family="monospace">--<fo:inline font-style="italic" font-family="monospace">foo</fo:inline></fo:inline> or
        <fo:inline font-family="monospace">--no-<fo:inline font-style="italic" font-family="monospace">foo</fo:inline></fo:inline>
        (e.g. <fo:inline font-family="monospace">--no-auto-optimise-store</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9327" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Many subcommands have a <fo:inline font-family="monospace">--json</fo:inline> flag to
        write results to stdout in JSON format.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block id="idm9330" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" margin-left="0.25in" margin-right="0.25in"><fo:block keep-with-next.within-column="always" font-size="14pt" font-weight="bold" hyphenate="false">Warning</fo:block><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Please note that the <fo:inline font-weight="bold">nix</fo:inline> command
    is a work in progress and the interface is subject to
    change.</fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">It provides the following high-level (âporcelainâ)
    subcommands:</fo:block><fo:list-block id="idm9334" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm9335" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix build</fo:inline> is a replacement for
        <fo:inline font-weight="bold">nix-build</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9339" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix run</fo:inline> executes a command in an
        environment in which the specified packages are available. It
        is (roughly) a replacement for <fo:inline font-weight="bold">nix-shell
        -p</fo:inline>. Unlike that command, it does not execute the
        command in a shell, and has a flag (<fo:inline font-weight="bold">-c</fo:inline>)
        that specifies the unquoted command line to be
        executed.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">It is particularly useful in conjunction with chroot
        stores, allowing Linux users who do not have permission to
        install Nix in <fo:inline font-weight="bold">/nix/store</fo:inline> to still use
        binary substitutes that assume
        <fo:inline font-weight="bold">/nix/store</fo:inline>. For example,

        <fo:block id="idm9347" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">nix run --store ~/my-nix nixpkgs.hello -c hello --greeting 'Hi everybody!'</fo:block>

        downloads (or if not substitutes are available, builds) the
        GNU Hello package into
        <fo:inline font-family="monospace">~/my-nix/nix/store</fo:inline>, then runs
        <fo:inline font-weight="bold">hello</fo:inline> in a mount namespace where
        <fo:inline font-family="monospace">~/my-nix/nix/store</fo:inline> is mounted onto
        <fo:inline font-weight="bold">/nix/store</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9352" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix search</fo:inline> replaces <fo:inline font-weight="bold">nix-env
        -qa</fo:inline>. It searches the available packages for
        occurrences of a search string in the attribute name, package
        name or description. Unlike <fo:inline font-weight="bold">nix-env -qa</fo:inline>, it
        has a cache to speed up subsequent searches.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9357" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix copy</fo:inline> copies paths between
        arbitrary Nix stores, generalising
        <fo:inline font-weight="bold">nix-copy-closure</fo:inline> and
        <fo:inline font-weight="bold">nix-push</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9362" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix repl</fo:inline> replaces the external
        program <fo:inline font-weight="bold">nix-repl</fo:inline>. It provides an
        interactive environment for evaluating and building Nix
        expressions. Note that it uses <fo:inline font-family="monospace">linenoise-ng</fo:inline>
        instead of GNU Readline.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9367" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix upgrade-nix</fo:inline> upgrades Nix to the
        latest stable version. This requires that Nix is installed in
        a profile. (Thus it wonât work on NixOS, or if itâs installed
        outside of the Nix store.)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9370" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix verify</fo:inline> checks whether store paths
        are unmodified and/or âtrustedâ (see below). It replaces
        <fo:inline font-weight="bold">nix-store --verify</fo:inline> and <fo:inline font-weight="bold">nix-store
        --verify-path</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9375" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix log</fo:inline> shows the build log of a
        package or path. If the build log is not available locally, it
        will try to obtain it from the configured substituters (such
        as <fo:inline font-family="monospace">cache.nixos.org</fo:inline>, which now provides build
        logs).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9379" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix edit</fo:inline> opens the source code of a
        package in your editor.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9382" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix eval</fo:inline> replaces
        <fo:inline font-weight="bold">nix-instantiate --eval</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9386" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold"><fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/d41c5eb13f4f3a37d80dbc6d3888644170c3b44a)">nix
        why-depends</fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/d41c5eb13f4f3a37d80dbc6d3888644170c3b44a)">https://github.com/NixOS/nix/commit/d41c5eb13f4f3a37d80dbc6d3888644170c3b44a</fo:basic-link>]</fo:inline></fo:inline> shows why one store path has another in
        its closure. This is primarily useful to finding the causes of
        closure bloat. For example,

        <fo:block id="idm9389" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">nix why-depends nixpkgs.vlc nixpkgs.libdrm.dev</fo:block>

        shows a chain of files and fragments of file contents that
        cause the VLC package to have the âdevâ output of
        <fo:inline font-family="monospace">libdrm</fo:inline> in its closure â an undesirable
        situation.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9391" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix path-info</fo:inline> shows information about
        store paths, replacing <fo:inline font-weight="bold">nix-store -q</fo:inline>. A
        useful feature is the option <fo:inline font-family="monospace">--closure-size</fo:inline>
        (<fo:inline font-family="monospace">-S</fo:inline>). For example, the following command show
        the closure sizes of every path in the current NixOS system
        closure, sorted by size:

        <fo:block id="idm9397" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">nix path-info -rS /run/current-system | sort -nk2</fo:block>

        </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9398" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix optimise-store</fo:inline> replaces
        <fo:inline font-weight="bold">nix-store --optimise</fo:inline>. The main difference
        is that it has a progress indicator.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A number of low-level (âplumbingâ) commands are also
    available:</fo:block><fo:list-block id="idm9403" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm9404" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix ls-store</fo:inline> and <fo:inline font-weight="bold">nix
        ls-nar</fo:inline> list the contents of a store path or NAR
        file. The former is primarily useful in conjunction with
        remote stores, e.g.

        <fo:block id="idm9408" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">nix ls-store --store https://cache.nixos.org/ -lR /nix/store/0i2jd68mp5g6h2sa5k9c85rb80sn8hi9-hello-2.10</fo:block>

        lists the contents of path in a binary cache.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9409" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix cat-store</fo:inline> and <fo:inline font-weight="bold">nix
        cat-nar</fo:inline> allow extracting a file from a store path or
        NAR file.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9413" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix dump-path</fo:inline> writes the contents of
        a store path to stdout in NAR format. This replaces
        <fo:inline font-weight="bold">nix-store --dump</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9417" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold"><fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/e8d6ee7c1b90a2fe6d824f1a875acc56799ae6e2)">nix
        show-derivation</fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/e8d6ee7c1b90a2fe6d824f1a875acc56799ae6e2)">https://github.com/NixOS/nix/commit/e8d6ee7c1b90a2fe6d824f1a875acc56799ae6e2</fo:basic-link>]</fo:inline></fo:inline> displays a store derivation in JSON
        format. This is an alternative to
        <fo:inline font-weight="bold">pp-aterm</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9421" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold"><fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/970366266b8df712f5f9cedb45af183ef5a8357f)">nix
        add-to-store</fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/970366266b8df712f5f9cedb45af183ef5a8357f)">https://github.com/NixOS/nix/commit/970366266b8df712f5f9cedb45af183ef5a8357f</fo:basic-link>]</fo:inline></fo:inline> replaces <fo:inline font-weight="bold">nix-store
        --add</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9425" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix sign-paths</fo:inline> signs store
        paths.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9428" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix copy-sigs</fo:inline> copies signatures from
        one store to another.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9431" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix show-config</fo:inline> shows all
        configuration options and their current values.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9434" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The store abstraction that Nix has had for a long time to
    support store access via the Nix daemon has been extended
    significantly. In particular, substituters (which used to be
    external programs such as
    <fo:inline font-weight="bold">download-from-binary-cache</fo:inline>) are now subclasses
    of the abstract <fo:inline font-family="monospace">Store</fo:inline> class. This allows
    many Nix commands to operate on such store types. For example,
    <fo:inline font-weight="bold">nix path-info</fo:inline> shows information about paths in
    your local Nix store, while <fo:inline font-weight="bold">nix path-info --store
    https://cache.nixos.org/</fo:inline> shows information about paths
    in the specified binary cache. Similarly,
    <fo:inline font-weight="bold">nix-copy-closure</fo:inline>, <fo:inline font-weight="bold">nix-push</fo:inline>
    and substitution are all instances of the general notion of
    copying paths between different kinds of Nix stores.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Stores are specified using an URI-like syntax,
    e.g. <fo:inline font-family="monospace">https://cache.nixos.org/</fo:inline> or
    <fo:inline font-family="monospace">ssh://machine</fo:inline>. The following store types are supported:

    <fo:list-block id="idm9445" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm9446" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">LocalStore</fo:inline> (stori URI
        <fo:inline font-family="monospace">local</fo:inline> or an absolute path) and the misnamed
        <fo:inline font-family="monospace">RemoteStore</fo:inline> (<fo:inline font-family="monospace">daemon</fo:inline>)
        provide access to a local Nix store, the latter via the Nix
        daemon. You can use <fo:inline font-family="monospace">auto</fo:inline> or the empty
        string to auto-select a local or daemon store depending on
        whether you have write permission to the Nix store. It is no
        longer necessary to set the <fo:inline font-family="monospace">NIX_REMOTE</fo:inline>
        environment variable to use the Nix daemon.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">As noted above, <fo:inline font-family="monospace">LocalStore</fo:inline> now
        supports chroot builds, allowing the âphysicalâ location of
        the Nix store
        (e.g. <fo:inline font-family="monospace">/home/alice/nix/store</fo:inline>) to differ
        from its âlogicalâ location (typically
        <fo:inline font-family="monospace">/nix/store</fo:inline>). This allows non-root users
        to use Nix while still getting the benefits from prebuilt
        binaries from <fo:inline font-family="monospace">cache.nixos.org</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9459" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">BinaryCacheStore</fo:inline> is the abstract
        superclass of all binary cache stores. It supports writing
        build logs and NAR content listings in JSON format.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9462" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">HttpBinaryCacheStore</fo:inline>
        (<fo:inline font-family="monospace">http://</fo:inline>, <fo:inline font-family="monospace">https://</fo:inline>)
        supports binary caches via HTTP or HTTPS. If the server
        supports <fo:inline font-family="monospace">PUT</fo:inline> requests, it supports
        uploading store paths via commands such as <fo:inline font-weight="bold">nix
        copy</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9469" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">LocalBinaryCacheStore</fo:inline>
        (<fo:inline font-family="monospace">file://</fo:inline>) supports binary caches in the
        local filesystem.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9473" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">S3BinaryCacheStore</fo:inline>
        (<fo:inline font-family="monospace">s3://</fo:inline>) supports binary caches stored in
        Amazon S3, if enabled at compile time.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9477" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">LegacySSHStore</fo:inline> (<fo:inline font-family="monospace">ssh://</fo:inline>)
        is used to implement remote builds and
        <fo:inline font-weight="bold">nix-copy-closure</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9482" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">SSHStore</fo:inline>
        (<fo:inline font-family="monospace">ssh-ng://</fo:inline>) supports arbitrary Nix
        operations on a remote machine via the same protocol used by
        <fo:inline font-weight="bold">nix-daemon</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block>

    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9487" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Security has been improved in various ways:

    <fo:list-block id="idm9489" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm9490" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix now stores signatures for local store
        paths. When paths are copied between stores (e.g., copied from
        a binary cache to a local store), signatures are
        propagated.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Locally-built paths are signed automatically using the
        secret keys specified by the <fo:inline font-family="monospace">secret-key-files</fo:inline>
        store option. Secret/public key pairs can be generated using
        <fo:inline font-weight="bold">nix-store
        --generate-binary-cache-key</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In addition, locally-built store paths are marked as
        âultimately trustedâ, but this bit is not propagated when
        paths are copied between stores.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9496" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Content-addressable store paths no longer require
        signatures â they can be imported into a store by unprivileged
        users even if they lack signatures.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9498" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The command <fo:inline font-weight="bold">nix verify</fo:inline> checks whether
        the specified paths are trusted, i.e., have a certain number
        of trusted signatures, are ultimately trusted, or are
        content-addressed.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9501" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Substitutions from binary caches <fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/ecbc3fedd3d5bdc5a0e1a0a51b29062f2874ac8b)"><fo:inline>now</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/ecbc3fedd3d5bdc5a0e1a0a51b29062f2874ac8b)">https://github.com/NixOS/nix/commit/ecbc3fedd3d5bdc5a0e1a0a51b29062f2874ac8b</fo:basic-link>]</fo:inline>
        require signatures by default. This was already the case on
        NixOS.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9504" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In Linux sandbox builds, we <fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/eba840c8a13b465ace90172ff76a0db2899ab11b)"><fo:inline>now</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/eba840c8a13b465ace90172ff76a0db2899ab11b)">https://github.com/NixOS/nix/commit/eba840c8a13b465ace90172ff76a0db2899ab11b</fo:basic-link>]</fo:inline>
        use <fo:inline font-family="monospace">/build</fo:inline> instead of
        <fo:inline font-family="monospace">/tmp</fo:inline> as the temporary build
        directory. This fixes potential security problems when a build
        accidentally stores its <fo:inline font-family="monospace">TMPDIR</fo:inline> in some
        security-sensitive place, such as an RPATH.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block>

    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9510" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-style="italic">Pure evaluation mode</fo:inline>. This is a variant
    of the existing restricted evaluation mode. In pure mode, the Nix
    evaluator forbids access to anything that could cause different
    evaluations of the same command line arguments to produce a
    different result. This includes builtin functions such as
    <fo:inline font-family="monospace">builtins.getEnv</fo:inline>, but more importantly,
    <fo:inline font-style="italic">all</fo:inline> filesystem or network access unless a
    content hash or commit hash is specified. For example, calls to
    <fo:inline font-family="monospace">builtins.fetchGit</fo:inline> are only allowed if a
    <fo:inline font-family="monospace">rev</fo:inline> attribute is specified.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The goal of this feature is to enable true reproducibility
    and traceability of builds (including NixOS system configurations)
    at the evaluation level. For example, in the future,
    <fo:inline font-weight="bold">nixos-rebuild</fo:inline> might build configurations from a
    Nix expression in a Git repository in pure mode. That expression
    might fetch other repositories such as Nixpkgs via
    <fo:inline font-family="monospace">builtins.fetchGit</fo:inline>. The commit hash of the
    top-level repository then uniquely identifies a running system,
    and, in conjunction with that repository, allows it to be
    reproduced or modified.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9520" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">There are several new features to support binary
    reproducibility (i.e. to help ensure that multiple builds of the
    same derivation produce exactly the same output). When
    <fo:inline font-family="monospace">enforce-determinism</fo:inline> is set to
    <fo:inline font-family="monospace">false</fo:inline>, itâs <fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/8bdf83f936adae6f2c907a6d2541e80d4120f051)"><fo:inline>no
    longer</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/8bdf83f936adae6f2c907a6d2541e80d4120f051)">https://github.com/NixOS/nix/commit/8bdf83f936adae6f2c907a6d2541e80d4120f051</fo:basic-link>]</fo:inline> a fatal error if build rounds produce different
    output. Also, a hook named <fo:inline font-family="monospace">diff-hook</fo:inline> is <fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/9a313469a4bdea2d1e8df24d16289dc2a172a169)"><fo:inline>provided</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/9a313469a4bdea2d1e8df24d16289dc2a172a169)">https://github.com/NixOS/nix/commit/9a313469a4bdea2d1e8df24d16289dc2a172a169</fo:basic-link>]</fo:inline>
    to allow you to run tools such as <fo:inline font-weight="bold">diffoscope</fo:inline>
    when build rounds produce different output.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9528" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Configuring remote builds is a lot easier now. Provided you
    are not using the Nix daemon, you can now just specify a remote
    build machine on the command line, e.g. <fo:inline font-family="monospace">--option builders
    'ssh://my-mac x86_64-darwin'</fo:inline>. The environment variable
    <fo:inline font-family="monospace">NIX_BUILD_HOOK</fo:inline> has been removed and is no longer
    needed. The environment variable <fo:inline font-family="monospace">NIX_REMOTE_SYSTEMS</fo:inline>
    is still supported for compatibility, but it is also possible to
    specify builders in <fo:inline font-weight="bold">nix.conf</fo:inline> by setting the
    option <fo:inline font-family="monospace">builders =
    @<fo:inline font-style="italic" font-family="monospace">path</fo:inline></fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9536" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If a fixed-output derivation produces a result with an
    incorrect hash, the output path is moved to the location
    corresponding to the actual hash and registered as valid. Thus, a
    subsequent build of the fixed-output derivation with the correct
    hash is unnecessary.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9538" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-shell</fo:inline> <fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/ea59f39326c8e9dc42dfed4bcbf597fbce58797c)"><fo:inline>now</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/ea59f39326c8e9dc42dfed4bcbf597fbce58797c)">https://github.com/NixOS/nix/commit/ea59f39326c8e9dc42dfed4bcbf597fbce58797c</fo:basic-link>]</fo:inline>
    sets the <fo:inline font-family="monospace">IN_NIX_SHELL</fo:inline> environment variable
    during evaluation and in the shell itself. This can be used to
    perform different actions depending on whether youâre in a Nix
    shell or in a regular build. Nixpkgs provides
    <fo:inline font-family="monospace">lib.inNixShell</fo:inline> to check this variable during
    evaluation.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9544" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">NIX_PATH</fo:inline> is now lazy, so URIs in the path are
    only downloaded if they are needed for evaluation.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9547" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You can now use
    <fo:inline font-family="monospace">channel:<fo:inline font-style="italic" font-family="monospace">channel-name</fo:inline></fo:inline> as a
    short-hand for
    <fo:inline font-family="monospace">https://nixos.org/channels/<fo:inline font-style="italic" font-family="monospace">channel-name</fo:inline>/nixexprs.tar.xz</fo:inline>. For
    example, <fo:inline font-family="monospace">nix-build channel:nixos-15.09 -A hello</fo:inline>
    will build the GNU Hello package from the
    <fo:inline font-family="monospace">nixos-15.09</fo:inline> channel. In the future, this may
    use Git to fetch updates more efficiently.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9555" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">When <fo:inline font-family="monospace">--no-build-output</fo:inline> is given, the last
    10 lines of the build log will be shown if a build
    fails.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9558" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Networking has been improved:

    <fo:list-block id="idm9560" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm9561" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">HTTP/2 is now supported. This makes binary cache lookups
        <fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/90ad02bf626b885a5dd8967894e2eafc953bdf92)"><fo:inline>much
        more efficient</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/90ad02bf626b885a5dd8967894e2eafc953bdf92)">https://github.com/NixOS/nix/commit/90ad02bf626b885a5dd8967894e2eafc953bdf92</fo:basic-link>]</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9564" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">We now retry downloads on many HTTP errors, making
        binary caches substituters more resilient to temporary
        failures.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9566" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">HTTP credentials can now be configured via the standard
        <fo:inline font-family="monospace">netrc</fo:inline> mechanism.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9569" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If S3 support is enabled at compile time,
        <fo:inline font-family="monospace">s3://</fo:inline> URIs are <fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/9ff9c3f2f80ba4108e9c945bbfda2c64735f987b)"><fo:inline>supported</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/9ff9c3f2f80ba4108e9c945bbfda2c64735f987b)">https://github.com/NixOS/nix/commit/9ff9c3f2f80ba4108e9c945bbfda2c64735f987b</fo:basic-link>]</fo:inline>
        in all places where Nix allows URIs.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9573" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Brotli compression is now supported. In particular,
        <fo:inline font-family="monospace">cache.nixos.org</fo:inline> build logs are now compressed using
        Brotli.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block>

    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9576" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-env</fo:inline> <fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/b0cb11722626e906a73f10dd9a0c9eea29faf43a)"><fo:inline>now</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/b0cb11722626e906a73f10dd9a0c9eea29faf43a)">https://github.com/NixOS/nix/commit/b0cb11722626e906a73f10dd9a0c9eea29faf43a</fo:basic-link>]</fo:inline>
    ignores packages with bad derivation names (in particular those
    starting with a digit or containing a dot).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9580" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Many configuration options have been renamed, either because
    they were unnecessarily verbose
    (e.g. <fo:inline font-family="monospace">build-use-sandbox</fo:inline> is now just
    <fo:inline font-family="monospace">sandbox</fo:inline>) or to reflect generalised behaviour
    (e.g. <fo:inline font-family="monospace">binary-caches</fo:inline> is now
    <fo:inline font-family="monospace">substituters</fo:inline> because it allows arbitrary store
    URIs). The old names are still supported for compatibility.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9586" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The <fo:inline font-family="monospace">max-jobs</fo:inline> option can <fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/7251d048fa812d2551b7003bc9f13a8f5d4c95a5)"><fo:inline>now</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/7251d048fa812d2551b7003bc9f13a8f5d4c95a5)">https://github.com/NixOS/nix/commit/7251d048fa812d2551b7003bc9f13a8f5d4c95a5</fo:basic-link>]</fo:inline>
    be set to <fo:inline font-family="monospace">auto</fo:inline> to use the number of CPUs in the
    system.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9591" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Hashes can <fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/c0015e87af70f539f24d2aa2bc224a9d8b84276b)"><fo:inline>now</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/c0015e87af70f539f24d2aa2bc224a9d8b84276b)">https://github.com/NixOS/nix/commit/c0015e87af70f539f24d2aa2bc224a9d8b84276b</fo:basic-link>]</fo:inline>
    be specified in base-64 format, in addition to base-16 and the
    non-standard base-32.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9594" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-shell</fo:inline> now uses
    <fo:inline font-family="monospace">bashInteractive</fo:inline> from Nixpkgs, rather than the
    <fo:inline font-weight="bold">bash</fo:inline> command that happens to be in the callerâs
    <fo:inline font-family="monospace">PATH</fo:inline>. This is especially important on macOS where
    the <fo:inline font-weight="bold">bash</fo:inline> provided by the system is seriously
    outdated and cannot execute <fo:inline font-family="monospace">stdenv</fo:inline>âs setup
    script.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9602" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix can now automatically trigger a garbage collection if
    free disk space drops below a certain level during a build. This
    is configured using the <fo:inline font-family="monospace">min-free</fo:inline> and
    <fo:inline font-family="monospace">max-free</fo:inline> options.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9606" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-store -q --roots</fo:inline> and
    <fo:inline font-weight="bold">nix-store --gc --print-roots</fo:inline> now show temporary
    and in-memory roots.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9610" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      Nix can now be extended with plugins. See the documentation of
      the <fo:inline font-family="monospace">plugin-files</fo:inline> option for more details.
    </fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The Nix language has the following new features:

<fo:list-block id="idm9614" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm9615" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">It supports floating point numbers. They are based on the
    C++ <fo:inline font-family="monospace">float</fo:inline> type and are supported by the
    existing numerical operators. Export and import to and from JSON
    and XML works, too.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9618" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Derivation attributes can now reference the outputs of the
    derivation using the <fo:inline font-family="monospace">placeholder</fo:inline> builtin
    function. For example, the attribute

<fo:block id="idm9621" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
configureFlags = "--prefix=${placeholder "out"} --includedir=${placeholder "dev"}";
</fo:block>

    will cause the <fo:inline font-family="monospace">configureFlags</fo:inline> environment variable
    to contain the actual store paths corresponding to the
    <fo:inline font-family="monospace">out</fo:inline> and <fo:inline font-family="monospace">dev</fo:inline> outputs.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block>

</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The following builtin functions are new or extended:

<fo:list-block id="idm9626" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm9627" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace"><fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/38539b943a060d9cdfc24d6e5d997c0885b8aa2f)">builtins.fetchGit</fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/38539b943a060d9cdfc24d6e5d997c0885b8aa2f)">https://github.com/NixOS/nix/commit/38539b943a060d9cdfc24d6e5d997c0885b8aa2f</fo:basic-link>]</fo:inline></fo:inline>
    allows Git repositories to be fetched at evaluation time. Thus it
    differs from the <fo:inline font-family="monospace">fetchgit</fo:inline> function in
    Nixpkgs, which fetches at build time and cannot be used to fetch
    Nix expressions during evaluation. A typical use case is to import
    external NixOS modules from your configuration, e.g.

    <fo:block id="idm9631" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">imports = [ (builtins.fetchGit https://github.com/edolstra/dwarffs + "/module.nix") ];</fo:block>

    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9632" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Similarly, <fo:inline font-family="monospace">builtins.fetchMercurial</fo:inline>
    allows you to fetch Mercurial repositories.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9635" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">builtins.path</fo:inline> generalises
    <fo:inline font-family="monospace">builtins.filterSource</fo:inline> and path literals
    (e.g. <fo:inline font-family="monospace">./foo</fo:inline>). It allows specifying a store path
    name that differs from the source path name
    (e.g. <fo:inline font-family="monospace">builtins.path { path = ./foo; name = "bar";
    }</fo:inline>) and also supports filtering out unwanted
    files.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9641" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">builtins.fetchurl</fo:inline> and
    <fo:inline font-family="monospace">builtins.fetchTarball</fo:inline> now support
    <fo:inline font-family="monospace">sha256</fo:inline> and <fo:inline font-family="monospace">name</fo:inline>
    attributes.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9647" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace"><fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/b8867a0239b1930a16f9ef3f7f3e864b01416dff)">builtins.split</fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/b8867a0239b1930a16f9ef3f7f3e864b01416dff)">https://github.com/NixOS/nix/commit/b8867a0239b1930a16f9ef3f7f3e864b01416dff</fo:basic-link>]</fo:inline></fo:inline>
    splits a string using a POSIX extended regular expression as the
    separator.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9650" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace"><fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/26d92017d3b36cff940dcb7d1611c42232edb81a)">builtins.partition</fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/26d92017d3b36cff940dcb7d1611c42232edb81a)">https://github.com/NixOS/nix/commit/26d92017d3b36cff940dcb7d1611c42232edb81a</fo:basic-link>]</fo:inline></fo:inline>
    partitions the elements of a list into two lists, depending on a
    Boolean predicate.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9653" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">&lt;nix/fetchurl.nix&gt;</fo:inline> now uses the
    content-addressable tarball cache at
    <fo:inline font-family="monospace">http://tarballs.nixos.org/</fo:inline>, just like
    <fo:inline font-family="monospace">fetchurl</fo:inline> in
    Nixpkgs. (f2682e6e18a76ecbfb8a12c17e3a0ca15c084197)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9658" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In restricted and pure evaluation mode, builtin functions
    that download from the network (such as
    <fo:inline font-family="monospace">fetchGit</fo:inline>) are permitted to fetch underneath a
    list of URI prefixes specified in the option
    <fo:inline font-family="monospace">allowed-uris</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block>

</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The Nix build environment has the following changes:

<fo:list-block id="idm9663" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm9664" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Values such as Booleans, integers, (nested) lists and
    attribute sets can <fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/6de33a9c675b187437a2e1abbcb290981a89ecb1)"><fo:inline>now</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/6de33a9c675b187437a2e1abbcb290981a89ecb1)">https://github.com/NixOS/nix/commit/6de33a9c675b187437a2e1abbcb290981a89ecb1</fo:basic-link>]</fo:inline>
    be passed to builders in a non-lossy way. If the special attribute
    <fo:inline font-family="monospace">__structuredAttrs</fo:inline> is set to
    <fo:inline font-family="monospace">true</fo:inline>, the other derivation attributes are
    serialised in JSON format and made available to the builder via
    the file <fo:inline font-family="monospace">.attrs.json</fo:inline> in the builderâs temporary
    directory. This obviates the need for
    <fo:inline font-family="monospace">passAsFile</fo:inline> since JSON files have no size
    restrictions, unlike process environments.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/2d5b1b24bf70a498e4c0b378704cfdb6471cc699)"><fo:inline>As
    a convenience to Bash builders</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/2d5b1b24bf70a498e4c0b378704cfdb6471cc699)">https://github.com/NixOS/nix/commit/2d5b1b24bf70a498e4c0b378704cfdb6471cc699</fo:basic-link>]</fo:inline>, Nix writes a script named
    <fo:inline font-family="monospace">.attrs.sh</fo:inline> to the builderâs directory that
    initialises shell variables corresponding to all attributes that
    are representable in Bash. This includes non-nested (associative)
    arrays. For example, the attribute <fo:inline font-family="monospace">hardening.format =
    true</fo:inline> ends up as the Bash associative array element
    <fo:inline font-family="monospace">${hardening[format]}</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9676" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Builders can <fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/88e6bb76de5564b3217be9688677d1c89101b2a3)"><fo:inline>now</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/88e6bb76de5564b3217be9688677d1c89101b2a3)">https://github.com/NixOS/nix/commit/88e6bb76de5564b3217be9688677d1c89101b2a3</fo:basic-link>]</fo:inline>
    communicate what build phase they are in by writing messages to
    the file descriptor specified in <fo:inline font-family="monospace">NIX_LOG_FD</fo:inline>. The
    current phase is shown by the <fo:inline font-weight="bold">nix</fo:inline> progress
    indicator.
    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9681" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In Linux sandbox builds, we <fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/a2d92bb20e82a0957067ede60e91fab256948b41)"><fo:inline>now</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/a2d92bb20e82a0957067ede60e91fab256948b41)">https://github.com/NixOS/nix/commit/a2d92bb20e82a0957067ede60e91fab256948b41</fo:basic-link>]</fo:inline>
    provide a default <fo:inline font-family="monospace">/bin/sh</fo:inline> (namely
    <fo:inline font-family="monospace">ash</fo:inline> from BusyBox).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9686" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In structured attribute mode,
    <fo:inline font-family="monospace">exportReferencesGraph</fo:inline> <fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/c2b0d8749f7e77afc1c4b3e8dd36b7ee9720af4a)"><fo:inline>exports</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/c2b0d8749f7e77afc1c4b3e8dd36b7ee9720af4a)">https://github.com/NixOS/nix/commit/c2b0d8749f7e77afc1c4b3e8dd36b7ee9720af4a</fo:basic-link>]</fo:inline>
    extended information about closures in JSON format. In particular,
    it includes the sizes and hashes of paths. This is primarily
    useful for NixOS image builders.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9690" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Builds are <fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/21948deed99a3295e4d5666e027a6ca42dc00b40)"><fo:inline>now</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/21948deed99a3295e4d5666e027a6ca42dc00b40)">https://github.com/NixOS/nix/commit/21948deed99a3295e4d5666e027a6ca42dc00b40</fo:basic-link>]</fo:inline>
    killed as soon as Nix receives EOF on the builderâs stdout or
    stderr. This fixes a bug that allowed builds to hang Nix
    indefinitely, regardless of
    timeouts.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9693" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The <fo:inline font-family="monospace">sandbox-paths</fo:inline> configuration
    option can now specify optional paths by appending a
    <fo:inline font-family="monospace">?</fo:inline>, e.g. <fo:inline font-family="monospace">/dev/nvidiactl?</fo:inline> will
    bind-mount <fo:inline font-family="monospace">/dev/nvidiactl</fo:inline> only if it
    exists.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9699" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">On Linux, builds are now executed in a user
    namespace with UID 1000 and GID 100.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block>

</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A number of significant internal changes were made:

<fo:list-block id="idm9702" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm9703" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix no longer depends on Perl and all Perl components have
    been rewritten in C++ or removed. The Perl bindings that used to
    be part of Nix have been moved to a separate package,
    <fo:inline font-family="monospace">nix-perl</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9706" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">All <fo:inline font-family="monospace">Store</fo:inline> classes are now
    thread-safe. <fo:inline font-family="monospace">RemoteStore</fo:inline> supports multiple
    concurrent connections to the daemon. This is primarily useful in
    multi-threaded programs such as
    <fo:inline font-weight="bold">hydra-queue-runner</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block>

</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This release has contributions from

Adrien Devresse,
Alexander Ried,
Alex Cruice,
Alexey Shmalko,
AmineChikhaoui,
Andy Wingo,
Aneesh Agrawal,
Anthony Cowley,
Armijn Hemel,
aszlig,
Ben Gamari,
Benjamin Hipple,
Benjamin Staffin,
Benno FÃ¼nfstÃ¼ck,
BjÃ¸rn Forsman,
Brian McKenna,
Charles Strahan,
Chase Adams,
Chris Martin,
Christian Theune,
Chris Warburton,
Daiderd Jordan,
Dan Connolly,
Daniel Peebles,
Dan Peebles,
davidak,
David McFarland,
Dmitry Kalinkin,
Domen KoÅ¾ar,
Eelco Dolstra,
Emery Hemingway,
Eric Litak,
Eric Wolf,
Fabian Schmitthenner,
Frederik Rietdijk,
Gabriel Gonzalez,
Giorgio Gallo,
Graham Christensen,
Guillaume Maudoux,
Harmen,
Iavael,
James Broadhead,
James Earl Douglas,
Janus Troelsen,
Jeremy Shaw,
Joachim Schiele,
Joe Hermaszewski,
Joel Moberg,
Johannes 'fish' Ziemke,
JÃ¶rg Thalheim,
Jude Taylor,
kballou,
Keshav Kini,
Kjetil Orbekk,
Langston Barrett,
Linus Heckemann,
Ludovic CourtÃ¨s,
Manav Rathi,
Marc Scholten,
Markus Hauck,
Matt Audesse,
Matthew Bauer,
Matthias Beyer,
Matthieu Coudron,
N1X,
Nathan Zadoks,
Neil Mayhew,
Nicolas B. Pierron,
Niklas HambÃ¼chen,
Nikolay Amiantov,
Ole JÃ¸rgen BrÃ¸nner,
Orivej Desh,
Peter Simons,
Peter Stuart,
Pyry Jahkola,
regnat,
Renzo Carbonara,
Rhys,
Robert Vollmert,
Scott Olson,
Scott R. Parish,
Sergei Trofimovich,
Shea Levy,
Sheena Artrip,
Spencer Baugh,
Stefan Junker,
Susan Potter,
Thomas Tuegel,
Timothy Allen,
Tristan Hume,
Tuomas Tynkkynen,
tv,
Tyson Whitehead,
VladimÃ­r ÄunÃ¡t,
Will Dietz,
wmertens,
Wout Mertens,
zimbatm and
Zoran PlesivÄak.
</fo:block></fo:block><fo:block id="ssec-relnotes-1.11.10"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Release 1.11.10 (2017-06-12)</fo:marker><fo:block font-size="20.736pt">Release 1.11.10 (2017-06-12)</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This release fixes a security bug in Nixâs âbuild userâ build
isolation mechanism. Previously, Nix builders had the ability to
create setuid binaries owned by a <fo:inline font-family="monospace">nixbld</fo:inline>
user. Such a binary could then be used by an attacker to assume a
<fo:inline font-family="monospace">nixbld</fo:inline> identity and interfere with subsequent
builds running under the same UID.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">To prevent this issue, Nix now disallows builders to create
setuid and setgid binaries. On Linux, this is done using a seccomp BPF
filter. Note that this imposes a small performance penalty (e.g. 1%
when building GNU Hello). Using seccomp, we now also prevent the
creation of extended attributes and POSIX ACLs since these cannot be
represented in the NAR format and (in the case of POSIX ACLs) allow
bypassing regular Nix store permissions. On macOS, the restriction is
implemented using the existing sandbox mechanism, which now uses a
minimal âallow all except the creation of setuid/setgid binariesâ
profile when regular sandboxing is disabled. On other platforms, the
âbuild userâ mechanism is now disabled.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Thanks go to Linus Heckemann for discovering and reporting this
bug.</fo:block></fo:block><fo:block id="ssec-relnotes-1.11"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Release 1.11 (2016-01-19)</fo:marker><fo:block font-size="20.736pt">Release 1.11 (2016-01-19)</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This is primarily a bug fix release. It also has a number of new
features:</fo:block><fo:list-block id="idm9722" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm9723" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-prefetch-url</fo:inline> can now download URLs
    specified in a Nix expression. For example,

<fo:block id="idm9726" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-prefetch-url -A hello.src
</fo:block>

    will prefetch the file specified by the
    <fo:inline font-family="monospace">fetchurl</fo:inline> call in the attribute
    <fo:inline font-family="monospace">hello.src</fo:inline> from the Nix expression in the
    current directory, and print the cryptographic hash of the
    resulting file on stdout. This differs from <fo:inline font-family="monospace">nix-build -A
    hello.src</fo:inline> in that it doesn't verify the hash, and is
    thus useful when youâre updating a Nix expression.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You can also prefetch the result of functions that unpack a
    tarball, such as <fo:inline font-family="monospace">fetchFromGitHub</fo:inline>. For example:

<fo:block id="idm9732" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-prefetch-url --unpack https://github.com/NixOS/patchelf/archive/0.8.tar.gz
</fo:block>

    or from a Nix expression:

<fo:block id="idm9733" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-prefetch-url -A nix-repl.src
</fo:block>

    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9734" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The builtin function
    <fo:inline font-family="monospace">&lt;nix/fetchurl.nix&gt;</fo:inline> now supports
    downloading and unpacking NARs. This removes the need to have
    multiple downloads in the Nixpkgs stdenv bootstrap process (like a
    separate busybox binary for Linux, or curl/mkdir/sh/bzip2 for
    Darwin). Now all those files can be combined into a single NAR,
    optionally compressed using <fo:inline font-weight="bold">xz</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9738" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix now supports SHA-512 hashes for verifying fixed-output
    derivations, and in <fo:inline font-family="monospace">builtins.hashString</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9741" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      The new flag <fo:inline font-family="monospace">--option build-repeat
      <fo:inline font-style="italic" font-family="monospace">N</fo:inline></fo:inline> will cause every build to
      be executed <fo:inline font-style="italic" font-family="monospace">N</fo:inline>+1 times. If the build
      output differs between any round, the build is rejected, and the
      output paths are not registered as valid. This is primarily
      useful to verify build determinism. (We already had a
      <fo:inline font-family="monospace">--check</fo:inline> option to repeat a previously succeeded
      build. However, with <fo:inline font-family="monospace">--check</fo:inline>, non-deterministic
      builds are registered in the DB. Preventing that is useful for
      Hydra to ensure that non-deterministic builds don't end up
      getting published to the binary cache.)
    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9748" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      The options <fo:inline font-family="monospace">--check</fo:inline> and <fo:inline font-family="monospace">--option
      build-repeat <fo:inline font-style="italic" font-family="monospace">N</fo:inline></fo:inline>, if they
      detect a difference between two runs of the same derivation and
      <fo:inline font-family="monospace">-K</fo:inline> is given, will make the output of the other
      run available under
      <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">store-path</fo:inline>-check</fo:inline>. This
      makes it easier to investigate the non-determinism using tools
      like <fo:inline font-weight="bold">diffoscope</fo:inline>, e.g.,

<fo:block id="idm9757" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-build pkgs/stdenv/linux -A stage1.pkgs.zlib --check -K
error: derivation â/nix/store/l54i8wlw2265â¦-zlib-1.2.8.drvâ may not
be deterministic: output â/nix/store/11a27shh6n2iâ¦-zlib-1.2.8â
differs from â/nix/store/11a27shh6n2iâ¦-zlib-1.2.8-checkâ

$ diffoscope /nix/store/11a27shh6n2iâ¦-zlib-1.2.8 /nix/store/11a27shh6n2iâ¦-zlib-1.2.8-check
â¦
âââ lib/libz.a
â   âââ metadata
â   â @@ -1,15 +1,15 @@
â   â -rw-r--r-- 30001/30000   3096 Jan 12 15:20 2016 adler32.o
â¦
â   â +rw-r--r-- 30001/30000   3096 Jan 12 15:28 2016 adler32.o
â¦
</fo:block>

    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9758" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Improved FreeBSD support.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9760" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-env -qa --xml --meta</fo:inline> now prints
    license information.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9763" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The maximum number of parallel TCP connections that the
    binary cache substituter will use has been decreased from 150 to
    25. This should prevent upsetting some broken NAT routers, and
    also improves performance.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9765" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">All "chroot"-containing strings got renamed to "sandbox".
      In particular, some Nix options got renamed, but the old names
      are still accepted as lower-priority aliases.
    </fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This release has contributions from Anders Claesson, Anthony
Cowley, BjÃ¸rn Forsman, Brian McKenna, Danny Wilson, davidak, Eelco Dolstra,
Fabian Schmitthenner, FrankHB, Ilya Novoselov, janus, Jim Garrison, John
Ericson, Jude Taylor, Ludovic CourtÃ¨s, Manuel Jacob, Mathnerd314,
Pascal Wittmann, Peter Simons, Philip Potter, Preston Bennes, Rommel
M. Martinez, Sander van der Burg, Shea Levy, Tim Cuthbertson, Tuomas
Tynkkynen, Utku Demir and VladimÃ­r ÄunÃ¡t.</fo:block></fo:block><fo:block id="ssec-relnotes-1.10"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Release 1.10 (2015-09-03)</fo:marker><fo:block font-size="20.736pt">Release 1.10 (2015-09-03)</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This is primarily a bug fix release. It also has a number of new
features:</fo:block><fo:list-block id="idm9771" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm9772" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A number of builtin functions have been added to reduce
    Nixpkgs/NixOS evaluation time and memory consumption:
    <fo:inline font-family="monospace">all</fo:inline>,
    <fo:inline font-family="monospace">any</fo:inline>,
    <fo:inline font-family="monospace">concatStringsSep</fo:inline>,
    <fo:inline font-family="monospace">foldlâ</fo:inline>,
    <fo:inline font-family="monospace">genList</fo:inline>,
    <fo:inline font-family="monospace">replaceStrings</fo:inline>,
    <fo:inline font-family="monospace">sort</fo:inline>.
    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9781" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The garbage collector is more robust when the disk is full.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9783" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix supports a new API for building derivations that doesnât
    require a <fo:inline font-family="monospace">.drv</fo:inline> file to be present on disk; it
    only requires an in-memory representation of the derivation. This
    is used by the Hydra continuous build system to make remote builds
    more efficient.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9786" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The function <fo:inline font-family="monospace">&lt;nix/fetchurl.nix&gt;</fo:inline> now
    uses a <fo:inline font-style="italic">builtin</fo:inline> builder (i.e. it doesnât
    require starting an external process; the download is performed by
    Nix itself). This ensures that derivation paths donât change when
    Nix is upgraded, and obviates the need for ugly hacks to support
    chroot execution.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9790" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">--version -v</fo:inline> now prints some configuration
    information, in particular what compile-time optional features are
    enabled, and the paths of various directories.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9793" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Build users have their supplementary groups set correctly.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This release has contributions from Eelco Dolstra, Guillaume
Maudoux, Iwan Aucamp, Jaka Hudoklin, Kirill Elagin, Ludovic CourtÃ¨s,
Manolis Ragkousis, Nicolas B. Pierron and Shea Levy.</fo:block></fo:block><fo:block id="ssec-relnotes-1.9"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Release 1.9 (2015-06-12)</fo:marker><fo:block font-size="20.736pt">Release 1.9 (2015-06-12)</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In addition to the usual bug fixes, this release has the
following new features:</fo:block><fo:list-block id="idm9799" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm9800" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Signed binary cache support. You can enable signature
    checking by adding the following to <fo:inline font-family="monospace">nix.conf</fo:inline>:

<fo:block id="idm9803" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
signed-binary-caches = *
binary-cache-public-keys = cache.nixos.org-1:6NCHdD59X431o0gWypbMrAURkbJ16ZPMQFGspcDShjY=
</fo:block>

    This will prevent Nix from downloading any binary from the cache
    that is not signed by one of the keys listed in
    <fo:inline font-family="monospace">binary-cache-public-keys</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Signature checking is only supported if you built Nix with
    the <fo:inline font-family="monospace">libsodium</fo:inline> package.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Note that while Nix has had experimental support for signed
    binary caches since version 1.7, this release changes the
    signature format in a backwards-incompatible way.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9808" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Automatic downloading of Nix expression tarballs. In various
    places, you can now specify the URL of a tarball containing Nix
    expressions (such as Nixpkgs), which will be downloaded and
    unpacked automatically. For example:</fo:block><fo:list-block id="idm9810" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm9811" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In <fo:inline font-weight="bold">nix-env</fo:inline>:

<fo:block id="idm9814" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env -f https://github.com/NixOS/nixpkgs-channels/archive/nixos-14.12.tar.gz -iA firefox
</fo:block>

      This installs Firefox from the latest tested and built revision
      of the NixOS 14.12 channel.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9815" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In <fo:inline font-weight="bold">nix-build</fo:inline> and
      <fo:inline font-weight="bold">nix-shell</fo:inline>:

<fo:block id="idm9819" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-build https://github.com/NixOS/nixpkgs/archive/master.tar.gz -A hello
</fo:block>

      This builds GNU Hello from the latest revision of the Nixpkgs
      master branch.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9820" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In the Nix search path (as specified via
      <fo:inline font-family="monospace">NIX_PATH</fo:inline> or <fo:inline font-family="monospace">-I</fo:inline>). For example, to
      start a shell containing the Pan package from a specific version
      of Nixpkgs:

<fo:block id="idm9824" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-shell -p pan -I nixpkgs=https://github.com/NixOS/nixpkgs-channels/archive/8a3eea054838b55aca962c3fbde9c83c102b8bf2.tar.gz
</fo:block>

      </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9825" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In <fo:inline font-weight="bold">nixos-rebuild</fo:inline> (on NixOS):

<fo:block id="idm9828" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nixos-rebuild test -I nixpkgs=https://github.com/NixOS/nixpkgs-channels/archive/nixos-unstable.tar.gz
</fo:block>

      </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9829" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In Nix expressions, via the new builtin function <fo:inline font-family="monospace">fetchTarball</fo:inline>:

<fo:block id="idm9832" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
with import (fetchTarball https://github.com/NixOS/nixpkgs-channels/archive/nixos-14.12.tar.gz) {}; â¦
</fo:block>

      (This is not allowed in restricted mode.)</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9833" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-shell</fo:inline> improvements:</fo:block><fo:list-block id="idm9836" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm9837" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-shell</fo:inline> now has a flag
      <fo:inline font-family="monospace">--run</fo:inline> to execute a command in the
      <fo:inline font-weight="bold">nix-shell</fo:inline> environment,
      e.g. <fo:inline font-family="monospace">nix-shell --run make</fo:inline>. This is like
      the existing <fo:inline font-family="monospace">--command</fo:inline> flag, except that it
      uses a non-interactive shell (ensuring that hitting Ctrl-C wonât
      drop you into the child shell).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9844" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-shell</fo:inline> can now be used as
      a <fo:inline font-family="monospace">#!</fo:inline>-interpreter. This allows you to write
      scripts that dynamically fetch their own dependencies. For
      example, here is a Haskell script that, when invoked, first
      downloads GHC and the Haskell packages on which it depends:

<fo:block id="idm9848" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
#! /usr/bin/env nix-shell
#! nix-shell -i runghc -p haskellPackages.ghc haskellPackages.HTTP

import Network.HTTP

main = do
  resp &lt;- Network.HTTP.simpleHTTP (getRequest "http://nixos.org/")
  body &lt;- getResponseBody resp
  print (take 100 body)
</fo:block>

      Of course, the dependencies are cached in the Nix store, so the
      second invocation of this script will be much
      faster.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9849" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Chroot improvements:</fo:block><fo:list-block id="idm9851" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm9852" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Chroot builds are now supported on Mac OS X
      (using its sandbox mechanism).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9854" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If chroots are enabled, they are now used for
      all derivations, including fixed-output derivations (such as
      <fo:inline font-family="monospace">fetchurl</fo:inline>). The latter do have network
      access, but can no longer access the host filesystem. If you
      need the old behaviour, you can set the option
      <fo:inline font-family="monospace">build-use-chroot</fo:inline> to
      <fo:inline font-family="monospace">relaxed</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9859" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">On Linux, if chroots are enabled, builds are
      performed in a private PID namespace once again. (This
      functionality was lost in Nix 1.8.)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9861" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Store paths listed in
      <fo:inline font-family="monospace">build-chroot-dirs</fo:inline> are now automatically
      expanded to their closure. For instance, if you want
      <fo:inline font-family="monospace">/nix/store/â¦-bash/bin/sh</fo:inline> mounted in your
      chroot as <fo:inline font-family="monospace">/bin/sh</fo:inline>, you only need to say
      <fo:inline font-family="monospace">build-chroot-dirs =
      /bin/sh=/nix/store/â¦-bash/bin/sh</fo:inline>; it is no longer
      necessary to specify the dependencies of Bash.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9867" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The new derivation attribute
  <fo:inline font-family="monospace">passAsFile</fo:inline> allows you to specify that the
  contents of derivation attributes should be passed via files rather
  than environment variables. This is useful if you need to pass very
  long strings that exceed the size limit of the environment. The
  Nixpkgs function <fo:inline font-family="monospace">writeTextFile</fo:inline> uses
  this.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9871" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You can now use <fo:inline font-family="monospace">~</fo:inline> in Nix file
  names to refer to your home directory, e.g. <fo:inline font-family="monospace">import
  ~/.nixpkgs/config.nix</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9875" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix has a new option <fo:inline font-family="monospace">restrict-eval</fo:inline>
  that allows limiting what paths the Nix evaluator has access to. By
  passing <fo:inline font-family="monospace">--option restrict-eval true</fo:inline> to Nix, the
  evaluator will throw an exception if an attempt is made to access
  any file outside of the Nix search path. This is primarily intended
  for Hydra to ensure that a Hydra jobset only refers to its declared
  inputs (and is therefore reproducible).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9879" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-env</fo:inline> now only creates a new
  âgenerationâ symlink in <fo:inline font-family="monospace">/nix/var/nix/profiles</fo:inline>
  if something actually changed.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9883" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The environment variable <fo:inline font-family="monospace">NIX_PAGER</fo:inline>
  can now be set to override <fo:inline font-family="monospace">PAGER</fo:inline>. You can set it to
  <fo:inline font-family="monospace">cat</fo:inline> to disable paging for Nix commands
  only.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9888" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Failing <fo:inline font-family="monospace">&lt;...&gt;</fo:inline>
  lookups now show position information.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9891" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Improved Boehm GC use: we disabled scanning for
  interior pointers, which should reduce the â<fo:inline font-family="monospace">Repeated
  allocation of very large block</fo:inline>â warnings and associated
  retention of memory.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This release has contributions from aszlig, Benjamin Staffin,
Charles Strahan, Christian Theune, Daniel Hahler, Danylo Hlynskyi
Daniel Peebles, Dan Peebles, Domen KoÅ¾ar, Eelco Dolstra, Harald van
Dijk, Hoang Xuan Phu, Jaka Hudoklin, Jeff Ramnani, j-keck, Linquize,
Luca Bruno, Michael Merickel, Oliver Dunkl, Rob Vermaas, Rok Garbas,
Shea Levy, Tobias Geerinckx-Rice and William A. Kennington III.</fo:block></fo:block><fo:block id="ssec-relnotes-1.8"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Release 1.8 (2014-12-14)</fo:marker><fo:block font-size="20.736pt">Release 1.8 (2014-12-14)</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:list-block id="idm9897" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm9898" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Breaking change: to address a race condition, the
  remote build hook mechanism now uses <fo:inline font-weight="bold">nix-store
  --serve</fo:inline> on the remote machine. This requires build slaves
  to be updated to Nix 1.8.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9901" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix now uses HTTPS instead of HTTP to access the
  default binary cache,
  <fo:inline font-family="monospace">cache.nixos.org</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9904" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-env</fo:inline> selectors are now regular
  expressions. For instance, you can do

<fo:block id="idm9907" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env -qa '.*zip.*'
</fo:block>

  to query all packages with a name containing
  <fo:inline font-family="monospace">zip</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9909" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-store --read-log</fo:inline> can now
  fetch remote build logs. If a build log is not available locally,
  then ânix-store -lâ will now try to download it from the servers
  listed in the âlog-serversâ option in nix.conf. For instance, if you
  have the configuration option

<fo:block id="idm9912" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
log-servers = http://hydra.nixos.org/log
</fo:block>

then it will try to get logs from
<fo:inline font-family="monospace">http://hydra.nixos.org/log/<fo:inline font-style="italic" font-family="monospace">base name of the
store path</fo:inline></fo:inline>. This allows you to do things like:

<fo:block id="idm9915" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-store -l $(which xterm)
</fo:block>

  and get a log even if <fo:inline font-weight="bold">xterm</fo:inline> wasn't built
  locally.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9917" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">New builtin functions:
  <fo:inline font-family="monospace">attrValues</fo:inline>, <fo:inline font-family="monospace">deepSeq</fo:inline>,
  <fo:inline font-family="monospace">fromJSON</fo:inline>, <fo:inline font-family="monospace">readDir</fo:inline>,
  <fo:inline font-family="monospace">seq</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9924" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-instantiate --eval</fo:inline> now has a
  <fo:inline font-family="monospace">--json</fo:inline> flag to print the resulting value in JSON
  format.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9928" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-copy-closure</fo:inline> now uses
  <fo:inline font-weight="bold">nix-store --serve</fo:inline> on the remote side to send or
  receive closures. This fixes a race condition between
  <fo:inline font-weight="bold">nix-copy-closure</fo:inline> and the garbage
  collector.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9933" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Derivations can specify the new special attribute
  <fo:inline font-family="monospace">allowedRequisites</fo:inline>, which has a similar meaning to
  <fo:inline font-family="monospace">allowedReferences</fo:inline>. But instead of only enforcing
  to explicitly specify the immediate references, it requires the
  derivation to specify all the dependencies recursively (hence the
  name, requisites) that are used by the resulting
  output.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9937" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">On Mac OS X, Nix now handles case collisions when
  importing closures from case-sensitive file systems. This is mostly
  useful for running NixOps on Mac OS X.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9939" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The Nix daemon has new configuration options
  <fo:inline font-family="monospace">allowed-users</fo:inline> (specifying the users and groups that
  are allowed to connect to the daemon) and
  <fo:inline font-family="monospace">trusted-users</fo:inline> (specifying the users and groups that
  can perform privileged operations like specifying untrusted binary
  caches).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9943" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The configuration option
  <fo:inline font-family="monospace">build-cores</fo:inline> now defaults to the number of available
  CPU cores.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9946" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Build users are now used by default when Nix is
  invoked as root. This prevents builds from accidentally running as
  root.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9948" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix now includes systemd units and Upstart
  jobs.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9950" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Speed improvements to <fo:inline font-weight="bold">nix-store
  --optimise</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9953" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Language change: the <fo:inline font-family="monospace">==</fo:inline> operator
  now ignores string contexts (the âdependenciesâ of a
  string).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9956" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix now filters out Nix-specific ANSI escape
  sequences on standard error. They are supposed to be invisible, but
  some terminals show them anyway.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9958" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Various commands now automatically pipe their output
  into the pager as specified by the <fo:inline font-family="monospace">PAGER</fo:inline> environment
  variable.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9961" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Several improvements to reduce memory consumption in
  the evaluator.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This release has contributions from Adam Szkoda, Aristid
Breitkreuz, Bob van der Linden, Charles Strahan, darealshinji, Eelco
Dolstra, Gergely Risko, Joel Taylor, Ludovic CourtÃ¨s, Marko Durkovic,
Mikey Ariel, Paul Colomiets, Ricardo M.  Correia, Ricky Elrod, Robert
Helgesson, Rob Vermaas, Russell O'Connor, Shea Levy, Shell Turner,
SÃ¶nke Hahn, Steve Purcell, VladimÃ­r ÄunÃ¡t and Wout Mertens.</fo:block></fo:block><fo:block id="ssec-relnotes-1.7"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Release 1.7 (2014-04-11)</fo:marker><fo:block font-size="20.736pt">Release 1.7 (2014-04-11)</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In addition to the usual bug fixes, this release has the
following new features:</fo:block><fo:list-block id="idm9967" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm9968" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Antiquotation is now allowed inside of quoted attribute
    names (e.g. <fo:inline font-family="monospace">set."${foo}"</fo:inline>). In the case where
    the attribute name is just a single antiquotation, the quotes can
    be dropped (e.g. the above example can be written
    <fo:inline font-family="monospace">set.${foo}</fo:inline>). If an attribute name inside of a
    set declaration evaluates to <fo:inline font-family="monospace">null</fo:inline> (e.g.
    <fo:inline font-family="monospace">{ ${null} = false; }</fo:inline>), then that attribute is
    not added to the set.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9974" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Experimental support for cryptographically signed binary
    caches.  See <fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/0fdf4da0e979f992db75cc17376e455ddc5a96d8)"><fo:inline>the
    commit for details</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/0fdf4da0e979f992db75cc17376e455ddc5a96d8)">https://github.com/NixOS/nix/commit/0fdf4da0e979f992db75cc17376e455ddc5a96d8</fo:basic-link>]</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9977" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">An experimental new substituter,
    <fo:inline font-weight="bold">download-via-ssh</fo:inline>, that fetches binaries from
    remote machines via SSH.  Specifying the flags <fo:inline font-family="monospace">--option
    use-ssh-substituter true --option ssh-substituter-hosts
    <fo:inline font-style="italic" font-family="monospace">user@hostname</fo:inline></fo:inline> will cause Nix
    to download binaries from the specified machine, if it has
    them.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9982" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-store -r</fo:inline> and
    <fo:inline font-weight="bold">nix-build</fo:inline> have a new flag,
    <fo:inline font-family="monospace">--check</fo:inline>, that builds a previously built
    derivation again, and prints an error message if the output is not
    exactly the same. This helps to verify whether a derivation is
    truly deterministic.  For example:

<fo:block id="idm9987" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-build '&lt;nixpkgs&gt;' -A patchelf
<fo:inline font-style="italic" font-family="monospace">â¦</fo:inline>
$ nix-build '&lt;nixpkgs&gt;' -A patchelf --check
<fo:inline font-style="italic" font-family="monospace">â¦</fo:inline>
error: derivation `/nix/store/1ipvxsâ¦-patchelf-0.6' may not be deterministic:
  hash mismatch in output `/nix/store/4pc1dmâ¦-patchelf-0.6.drv'
</fo:block>

    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9990" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The <fo:inline font-weight="bold">nix-instantiate</fo:inline> flags
    <fo:inline font-family="monospace">--eval-only</fo:inline> and <fo:inline font-family="monospace">--parse-only</fo:inline>
    have been renamed to <fo:inline font-family="monospace">--eval</fo:inline> and
    <fo:inline font-family="monospace">--parse</fo:inline>, respectively.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm9997" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-instantiate</fo:inline>,
    <fo:inline font-weight="bold">nix-build</fo:inline> and <fo:inline font-weight="bold">nix-shell</fo:inline> now
    have a flag <fo:inline font-family="monospace">--expr</fo:inline> (or <fo:inline font-family="monospace">-E</fo:inline>) that
    allows you to specify the expression to be evaluated as a command
    line argument.  For instance, <fo:inline font-family="monospace">nix-instantiate --eval -E
    '1 + 2'</fo:inline> will print <fo:inline font-family="monospace">3</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10006" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-shell</fo:inline> improvements:</fo:block><fo:list-block id="idm10009" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm10010" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">It has a new flag, <fo:inline font-family="monospace">--packages</fo:inline> (or
        <fo:inline font-family="monospace">-p</fo:inline>), that sets up a build environment
        containing the specified packages from Nixpkgs. For example,
        the command

<fo:block id="idm10014" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-shell -p sqlite xorg.libX11 hello
</fo:block>

        will start a shell in which the given packages are
        present.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10015" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">It now uses <fo:inline font-family="monospace">shell.nix</fo:inline> as the
        default expression, falling back to
        <fo:inline font-family="monospace">default.nix</fo:inline> if the former doesnât
        exist.  This makes it convenient to have a
        <fo:inline font-family="monospace">shell.nix</fo:inline> in your project to set up a
        nice development environment.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10020" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">It evaluates the derivation attribute
        <fo:inline font-family="monospace">shellHook</fo:inline>, if set. Since
        <fo:inline font-family="monospace">stdenv</fo:inline> does not normally execute this hook,
        it allows you to do <fo:inline font-weight="bold">nix-shell</fo:inline>-specific
        setup.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10025" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">It preserves the userâs timezone setting.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10027" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In chroots, Nix now sets up a <fo:inline font-family="monospace">/dev</fo:inline>
    containing only a minimal set of devices (such as
    <fo:inline font-family="monospace">/dev/null</fo:inline>). Note that it only does this if
    you <fo:inline font-style="italic">donât</fo:inline> have <fo:inline font-family="monospace">/dev</fo:inline>
    listed in your <fo:inline font-family="monospace">build-chroot-dirs</fo:inline> setting;
    otherwise, it will bind-mount the <fo:inline font-family="monospace">/dev</fo:inline> from
    outside the chroot.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Similarly, if you donât have <fo:inline font-family="monospace">/dev/pts</fo:inline> listed
    in <fo:inline font-family="monospace">build-chroot-dirs</fo:inline>, Nix will mount a private
    <fo:inline font-family="monospace">devpts</fo:inline> filesystem on the chrootâs
    <fo:inline font-family="monospace">/dev/pts</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10040" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">New built-in function: <fo:inline font-family="monospace">builtins.toJSON</fo:inline>,
    which returns a JSON representation of a value.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10043" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-env -q</fo:inline> has a new flag
    <fo:inline font-family="monospace">--json</fo:inline> to print a JSON representation of the
    installed or available packages.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10047" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-env</fo:inline> now supports meta attributes with
    more complex values, such as attribute sets.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10050" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The <fo:inline font-family="monospace">-A</fo:inline> flag now allows attribute names with
    dots in them, e.g.

<fo:block id="idm10053" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-instantiate --eval '&lt;nixos&gt;' -A 'config.systemd.units."nscd.service".text'
</fo:block>

    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10054" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The <fo:inline font-family="monospace">--max-freed</fo:inline> option to
    <fo:inline font-weight="bold">nix-store --gc</fo:inline> now accepts a unit
    specifier. For example, <fo:inline font-family="monospace">nix-store --gc --max-freed
    1G</fo:inline> will free up to 1 gigabyte of disk space.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10059" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-collect-garbage</fo:inline> has a new flag
    <fo:inline font-family="monospace">--delete-older-than</fo:inline>
    <fo:inline font-style="italic" font-family="monospace">N</fo:inline><fo:inline font-family="monospace">d</fo:inline>, which deletes
    all user environment generations older than
    <fo:inline font-style="italic" font-family="monospace">N</fo:inline> days.  Likewise, <fo:inline font-weight="bold">nix-env
    --delete-generations</fo:inline> accepts a
    <fo:inline font-style="italic" font-family="monospace">N</fo:inline><fo:inline font-family="monospace">d</fo:inline> age limit.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10069" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix now heuristically detects whether a build failure was
    due to a disk-full condition. In that case, the build is not
    flagged as âpermanently failedâ. This is mostly useful for Hydra,
    which needs to distinguish between permanent and transient build
    failures.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10071" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">There is a new symbol <fo:inline font-family="monospace">__curPos</fo:inline> that
    expands to an attribute set containing its file name and line and
    column numbers, e.g. <fo:inline font-family="monospace">{ file = "foo.nix"; line = 10;
    column = 5; }</fo:inline>.  There also is a new builtin function,
    <fo:inline font-family="monospace">unsafeGetAttrPos</fo:inline>, that returns the position of
    an attribute.  This is used by Nixpkgs to provide location
    information in error messages, e.g.

<fo:block id="idm10076" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-build '&lt;nixpkgs&gt;' -A libreoffice --argstr system x86_64-darwin
error: the package âlibreoffice-4.0.5.2â in â.../applications/office/libreoffice/default.nix:263â
  is not supported on âx86_64-darwinâ
</fo:block>

    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10077" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The garbage collector is now more concurrent with other Nix
    processes because it releases certain locks earlier.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10079" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The binary tarball installer has been improved.  You can now
    install Nix by running:

<fo:block id="idm10081" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ bash &lt;(curl https://nixos.org/nix/install)
</fo:block>

    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10082" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">More evaluation errors include position information. For
    instance, selecting a missing attribute will print something like

<fo:block id="idm10084" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
error: attribute `nixUnstabl' missing, at /etc/nixos/configurations/misc/eelco/mandark.nix:216:15
</fo:block>

    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10085" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The command <fo:inline font-weight="bold">nix-setuid-helper</fo:inline> is
    gone.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10088" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix no longer uses Automake, but instead has a
    non-recursive, GNU Make-based build system.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10090" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">All installed libraries now have the prefix
    <fo:inline font-family="monospace">libnix</fo:inline>.  In particular, this gets rid of
    <fo:inline font-family="monospace">libutil</fo:inline>, which could clash with libraries with
    the same name from other packages.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10094" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix now requires a compiler that supports C++11.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This release has contributions from Danny Wilson, Domen KoÅ¾ar,
Eelco Dolstra, Ian-Woo Kim, Ludovic CourtÃ¨s, Maxim Ivanov, Petr
Rockai, Ricardo M. Correia and Shea Levy.</fo:block></fo:block><fo:block id="ssec-relnotes-1.6.1"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Release 1.6.1 (2013-10-28)</fo:marker><fo:block font-size="20.736pt">Release 1.6.1 (2013-10-28)</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This is primarily a bug fix release.  Changes of interest
are:</fo:block><fo:list-block id="idm10100" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm10101" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix 1.6 accidentally changed the semantics of antiquoted
    paths in strings, such as <fo:inline font-family="monospace">"${/foo}/bar"</fo:inline>.  This
    release reverts to the Nix 1.5.3 behaviour.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10104" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Previously, Nix optimised expressions such as
    <fo:inline font-family="monospace">"${<fo:inline font-style="italic" font-family="monospace">expr</fo:inline>}"</fo:inline> to
    <fo:inline font-style="italic" font-family="monospace">expr</fo:inline>.  Thus it neither checked whether
    <fo:inline font-style="italic" font-family="monospace">expr</fo:inline> could be coerced to a string, nor
    applied such coercions.  This meant that
    <fo:inline font-family="monospace">"${123}"</fo:inline> evaluatued to <fo:inline font-family="monospace">123</fo:inline>,
    and <fo:inline font-family="monospace">"${./foo}"</fo:inline> evaluated to
    <fo:inline font-family="monospace">./foo</fo:inline> (even though
    <fo:inline font-family="monospace">"${./foo} "</fo:inline> evaluates to
    <fo:inline font-family="monospace">"/nix/store/<fo:inline font-style="italic" font-family="monospace">hash</fo:inline>-foo "</fo:inline>).
    Nix now checks the type of antiquoted expressions and
    applies coercions.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10117" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix now shows the exact position of undefined variables.  In
    particular, undefined variable errors in a <fo:inline font-family="monospace">with</fo:inline>
    previously didn't show <fo:inline font-style="italic">any</fo:inline> position
    information, so this makes it a lot easier to fix such
    errors.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10121" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Undefined variables are now treated consistently.
    Previously, the <fo:inline font-family="monospace">tryEval</fo:inline> function would catch
    undefined variables inside a <fo:inline font-family="monospace">with</fo:inline> but not
    outside.  Now <fo:inline font-family="monospace">tryEval</fo:inline> never catches undefined
    variables.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10126" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Bash completion in <fo:inline font-weight="bold">nix-shell</fo:inline> now works
    correctly.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10129" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Stack traces are less verbose: they no longer show calls to
    builtin functions and only show a single line for each derivation
    on the call stack.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10131" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">New built-in function: <fo:inline font-family="monospace">builtins.typeOf</fo:inline>,
    which returns the type of its argument as a string.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="ssec-relnotes-1.6.0"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Release 1.6 (2013-09-10)</fo:marker><fo:block font-size="20.736pt">Release 1.6 (2013-09-10)</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In addition to the usual bug fixes, this release has several new
features:</fo:block><fo:list-block id="idm10137" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm10138" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The command <fo:inline font-weight="bold">nix-build --run-env</fo:inline> has been
    renamed to <fo:inline font-weight="bold">nix-shell</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10142" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-shell</fo:inline> now sources
    <fo:inline font-family="monospace">$stdenv/setup</fo:inline> <fo:inline font-style="italic">inside</fo:inline> the
    interactive shell, rather than in a parent shell.  This ensures
    that shell functions defined by <fo:inline font-family="monospace">stdenv</fo:inline> can be
    used in the interactive shell.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10148" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-shell</fo:inline> has a new flag
    <fo:inline font-family="monospace">--pure</fo:inline> to clear the environment, so you get an
    environment that more closely corresponds to the ârealâ Nix build.
    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10152" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-shell</fo:inline> now sets the shell prompt
    (<fo:inline font-family="monospace">PS1</fo:inline>) to ensure that Nix shells are distinguishable
    from your regular shells.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10156" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-env</fo:inline> no longer requires a
    <fo:inline font-family="monospace">*</fo:inline> argument to match all packages, so
    <fo:inline font-family="monospace">nix-env -qa</fo:inline> is equivalent to <fo:inline font-family="monospace">nix-env
    -qa '*'</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10162" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-env -i</fo:inline> has a new flag
    <fo:inline font-family="monospace">--remove-all</fo:inline> (<fo:inline font-family="monospace">-r</fo:inline>) to remove all
    previous packages from the profile.  This makes it easier to do
    declarative package management similar to NixOSâs
    <fo:inline font-family="monospace">environment.systemPackages</fo:inline>.  For instance, if you
    have a specification <fo:inline font-family="monospace">my-packages.nix</fo:inline> like this:

<fo:block id="idm10169" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
with import &lt;nixpkgs&gt; {};
[ thunderbird
  geeqie
  ...
]
</fo:block>

    then after any change to this file, you can run:

<fo:block id="idm10170" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env -f my-packages.nix -ir
</fo:block>

    to update your profile to match the specification.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10171" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The â<fo:inline font-family="monospace">with</fo:inline>â language construct is now more
    lazy.  It only evaluates its argument if a variable might actually
    refer to an attribute in the argument.  For instance, this now
    works:

<fo:block id="idm10174" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
let
  pkgs = with pkgs; { foo = "old"; bar = foo; } // overrides;
  overrides = { foo = "new"; };
in pkgs.bar
</fo:block>

    This evaluates to <fo:inline font-family="monospace">"new"</fo:inline>, while previously it
    gave an âinfinite recursionâ error.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10176" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix now has proper integer arithmetic operators. For
    instance, you can write <fo:inline font-family="monospace">x + y</fo:inline> instead of
    <fo:inline font-family="monospace">builtins.add x y</fo:inline>, or <fo:inline font-family="monospace">x &lt;
    y</fo:inline> instead of <fo:inline font-family="monospace">builtins.lessThan x y</fo:inline>.
    The comparison operators also work on strings.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10182" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">On 64-bit systems, Nix integers are now 64 bits rather than
    32 bits.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10184" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">When using the Nix daemon, the <fo:inline font-weight="bold">nix-daemon</fo:inline>
    worker process now runs on the same CPU as the client, on systems
    that support setting CPU affinity.  This gives a significant speedup
    on some systems.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10187" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If a stack overflow occurs in the Nix evaluator, you now get
    a proper error message (rather than âSegmentation faultâ) on some
    systems.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10189" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In addition to directories, you can now bind-mount regular
    files in chroots through the (now misnamed) option
    <fo:inline font-family="monospace">build-chroot-dirs</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This release has contributions from Domen KoÅ¾ar, Eelco Dolstra,
Florian Friesdorf, Gergely Risko, Ivan Kozik, Ludovic CourtÃ¨s and Shea
Levy.</fo:block></fo:block><fo:block id="ssec-relnotes-1.5.2"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Release 1.5.2 (2013-05-13)</fo:marker><fo:block font-size="20.736pt">Release 1.5.2 (2013-05-13)</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This is primarily a bug fix release.  It has contributions from
Eelco Dolstra, LluÃ­s Batlle i Rossell and Shea Levy.</fo:block></fo:block><fo:block id="ssec-relnotes-1.5"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Release 1.5 (2013-02-27)</fo:marker><fo:block font-size="20.736pt">Release 1.5 (2013-02-27)</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This is a brown paper bag release to fix a regression introduced
by the hard link security fix in 1.4.</fo:block></fo:block><fo:block id="ssec-relnotes-1.4"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Release 1.4 (2013-02-26)</fo:marker><fo:block font-size="20.736pt">Release 1.4 (2013-02-26)</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This release fixes a security bug in multi-user operation.  It
was possible for derivations to cause the mode of files outside of the
Nix store to be changed to 444 (read-only but world-readable) by
creating hard links to those files (<fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/5526a282b5b44e9296e61e07d7d2626a79141ac4)"><fo:inline>details</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(https://github.com/NixOS/nix/commit/5526a282b5b44e9296e61e07d7d2626a79141ac4)">https://github.com/NixOS/nix/commit/5526a282b5b44e9296e61e07d7d2626a79141ac4</fo:basic-link>]</fo:inline>).</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">There are also the following improvements:</fo:block><fo:list-block id="idm10204" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm10205" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">New built-in function:
  <fo:inline font-family="monospace">builtins.hashString</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10208" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Build logs are now stored in
  <fo:inline font-family="monospace">/nix/var/log/nix/drvs/<fo:inline font-style="italic" font-family="monospace">XX</fo:inline>/</fo:inline>,
  where <fo:inline font-style="italic" font-family="monospace">XX</fo:inline> is the first two characters of
  the derivation.  This is useful on machines that keep a lot of build
  logs (such as Hydra servers).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10213" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The function <fo:inline font-family="monospace">corepkgs/fetchurl</fo:inline>
  can now make the downloaded file executable.  This will allow
  getting rid of all bootstrap binaries in the Nixpkgs source
  tree.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10216" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Language change: The expression <fo:inline font-family="monospace">"${./path}
  ..."</fo:inline> now evaluates to a string instead of a
  path.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="ssec-relnotes-1.3"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Release 1.3 (2013-01-04)</fo:marker><fo:block font-size="20.736pt">Release 1.3 (2013-01-04)</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This is primarily a bug fix release.  When this version is first
run on Linux, it removes any immutable bits from the Nix store and
increases the schema version of the Nix store.  (The previous release
removed support for setting the immutable bit; this release clears any
remaining immutable bits to make certain operations more
efficient.)</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This release has contributions from Eelco Dolstra and Stuart
Pernsteiner.</fo:block></fo:block><fo:block id="ssec-relnotes-1.2"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Release 1.2 (2012-12-06)</fo:marker><fo:block font-size="20.736pt">Release 1.2 (2012-12-06)</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This release has the following improvements and changes:</fo:block><fo:list-block id="idm10226" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm10227" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix has a new binary substituter mechanism: the
    <fo:inline font-style="italic">binary cache</fo:inline>.  A binary cache contains
    pre-built binaries of Nix packages.  Whenever Nix wants to build a
    missing Nix store path, it will check a set of binary caches to
    see if any of them has a pre-built binary of that path.  The
    configuration setting <fo:inline font-family="monospace">binary-caches</fo:inline> contains a
    list of URLs of binary caches.  For instance, doing
<fo:block id="idm10231" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env -i thunderbird --option binary-caches http://cache.nixos.org
</fo:block>
    will install Thunderbird and its dependencies, using the available
    pre-built binaries in <fo:inline font-family="monospace">http://cache.nixos.org</fo:inline>.
    The main advantage over the old âmanifestâ-based method of getting
    pre-built binaries is that you donât have to worry about your
    manifest being in sync with the Nix expressions youâre installing
    from; i.e., you donât need to run <fo:inline font-weight="bold">nix-pull</fo:inline> to
    update your manifest.  Itâs also more scalable because you donât
    need to redownload a giant manifest file every time.
    </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A Nix channel can provide a binary cache URL that will be
    used automatically if you subscribe to that channel.  If you use
    the Nixpkgs or NixOS channels
    (<fo:inline font-family="monospace">http://nixos.org/channels</fo:inline>) you automatically get the
    cache <fo:inline font-family="monospace">http://cache.nixos.org</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Binary caches are created using <fo:inline font-weight="bold">nix-push</fo:inline>.
    For details on the operation and format of binary caches, see the
    <fo:inline font-weight="bold">nix-push</fo:inline> manpage.  More details are provided in
    <fo:basic-link external-destination="url(https://nixos.org/nix-dev/2012-September/009826.html)"><fo:inline>this
    nix-dev posting</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(https://nixos.org/nix-dev/2012-September/009826.html)">https://nixos.org/nix-dev/2012-September/009826.html</fo:basic-link>]</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10241" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Multiple output support should now be usable.  A derivation
    can declare that it wants to produce multiple store paths by
    saying something like
<fo:block id="idm10243" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
outputs = [ "lib" "headers" "doc" ];
</fo:block>
    This will cause Nix to pass the intended store path of each output
    to the builder through the environment variables
    <fo:inline font-family="monospace">lib</fo:inline>, <fo:inline font-family="monospace">headers</fo:inline> and
    <fo:inline font-family="monospace">doc</fo:inline>.  Other packages can refer to a specific
    output by referring to
    <fo:inline font-family="monospace"><fo:inline font-style="italic" font-family="monospace">pkg</fo:inline>.<fo:inline font-style="italic" font-family="monospace">output</fo:inline></fo:inline>,
    e.g.
<fo:block id="idm10250" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
buildInputs = [ pkg.lib pkg.headers ];
</fo:block>
    If you install a package with multiple outputs using
    <fo:inline font-weight="bold">nix-env</fo:inline>, each output path will be symlinked
    into the user environment.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10252" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Dashes are now valid as part of identifiers and attribute
    names.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10254" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The new operation <fo:inline font-weight="bold">nix-store --repair-path</fo:inline>
    allows corrupted or missing store paths to be repaired by
    redownloading them.  <fo:inline font-weight="bold">nix-store --verify --check-contents
    --repair</fo:inline> will scan and repair all paths in the Nix
    store.  Similarly, <fo:inline font-weight="bold">nix-env</fo:inline>,
    <fo:inline font-weight="bold">nix-build</fo:inline>, <fo:inline font-weight="bold">nix-instantiate</fo:inline>
    and <fo:inline font-weight="bold">nix-store --realise</fo:inline> have a
    <fo:inline font-family="monospace">--repair</fo:inline> flag to detect and fix bad paths by
    rebuilding or redownloading them.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10263" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix no longer sets the immutable bit on files in the Nix
    store.  Instead, the recommended way to guard the Nix store
    against accidental modification on Linux is to make it a read-only
    bind mount, like this:

<fo:block id="idm10265" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ mount --bind /nix/store /nix/store
$ mount -o remount,ro,bind /nix/store
</fo:block>

    Nix will automatically make <fo:inline font-family="monospace">/nix/store</fo:inline>
    writable as needed (using a private mount namespace) to allow
    modifications.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10267" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Store optimisation (replacing identical files in the store
    with hard links) can now be done automatically every time a path
    is added to the store.  This is enabled by setting the
    configuration option <fo:inline font-family="monospace">auto-optimise-store</fo:inline> to
    <fo:inline font-family="monospace">true</fo:inline> (disabled by default).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10271" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix now supports <fo:inline font-weight="bold">xz</fo:inline> compression for NARs
    in addition to <fo:inline font-weight="bold">bzip2</fo:inline>.  It compresses about 30%
    better on typical archives and decompresses about twice as
    fast.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10275" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Basic Nix expression evaluation profiling: setting the
    environment variable <fo:inline font-family="monospace">NIX_COUNT_CALLS</fo:inline> to
    <fo:inline font-family="monospace">1</fo:inline> will cause Nix to print how many times each
    primop or function was executed.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10279" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">New primops: <fo:inline font-family="monospace">concatLists</fo:inline>,
    <fo:inline font-family="monospace">elem</fo:inline>, <fo:inline font-family="monospace">elemAt</fo:inline> and
    <fo:inline font-family="monospace">filter</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10285" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The command <fo:inline font-weight="bold">nix-copy-closure</fo:inline> has a new
    flag <fo:inline font-family="monospace">--use-substitutes</fo:inline> (<fo:inline font-family="monospace">-s</fo:inline>) to
    download missing paths on the target machine using the substitute
    mechanism.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10290" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The command <fo:inline font-weight="bold">nix-worker</fo:inline> has been renamed
    to <fo:inline font-weight="bold">nix-daemon</fo:inline>.  Support for running the Nix
    worker in âslaveâ mode has been removed.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10294" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The <fo:inline font-family="monospace">--help</fo:inline> flag of every Nix command now
    invokes <fo:inline font-weight="bold">man</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10298" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Chroot builds are now supported on systemd machines.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This release has contributions from Eelco Dolstra, Florian
Friesdorf, Mats Erik Andersson and Shea Levy.</fo:block></fo:block><fo:block id="ssec-relnotes-1.1"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Release 1.1 (2012-07-18)</fo:marker><fo:block font-size="20.736pt">Release 1.1 (2012-07-18)</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This release has the following improvements:</fo:block><fo:list-block id="idm10304" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm10305" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">On Linux, when doing a chroot build, Nix now uses various
    namespace features provided by the Linux kernel to improve
    build isolation.  Namely:
    <fo:list-block id="idm10307" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm10308" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The private network namespace ensures that
      builders cannot talk to the outside world (or vice versa): each
      build only sees a private loopback interface.  This also means
      that two concurrent builds can listen on the same port (e.g. as
      part of a test) without conflicting with each
      other.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10310" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The PID namespace causes each build to start as
      PID 1.  Processes outside of the chroot are not visible to those
      on the inside.  On the other hand, processes inside the chroot
      <fo:inline font-style="italic">are</fo:inline> visible from the outside (though with
      different PIDs).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10313" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The IPC namespace prevents the builder from
      communicating with outside processes using SysV IPC mechanisms
      (shared memory, message queues, semaphores).  It also ensures
      that all IPC objects are destroyed when the builder
      exits.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10315" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The UTS namespace ensures that builders see a
      hostname of <fo:inline font-family="monospace">localhost</fo:inline> rather than the actual
      hostname.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10318" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The private mount namespace was already used by
      Nix to ensure that the bind-mounts used to set up the chroot are
      cleaned up automatically.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block>
    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10320" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Build logs are now compressed using
    <fo:inline font-weight="bold">bzip2</fo:inline>.  The command <fo:inline font-weight="bold">nix-store
    -l</fo:inline> decompresses them on the fly.  This can be disabled
    by setting the option <fo:inline font-family="monospace">build-compress-log</fo:inline> to
    <fo:inline font-family="monospace">false</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10326" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The creation of build logs in
    <fo:inline font-family="monospace">/nix/var/log/nix/drvs</fo:inline> can be disabled by
    setting the new option <fo:inline font-family="monospace">build-keep-log</fo:inline> to
    <fo:inline font-family="monospace">false</fo:inline>.  This is useful, for instance, for Hydra
    build machines.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10331" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix now reserves some space in
    <fo:inline font-family="monospace">/nix/var/nix/db/reserved</fo:inline> to ensure that the
    garbage collector can run successfully if the disk is full.  This
    is necessary because SQLite transactions fail if the disk is
    full.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10334" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Added a basic <fo:inline font-family="monospace">fetchurl</fo:inline> function.  This
    is not intended to replace the <fo:inline font-family="monospace">fetchurl</fo:inline> in
    Nixpkgs, but is useful for bootstrapping; e.g., it will allow us
    to get rid of the bootstrap binaries in the Nixpkgs source tree
    and download them instead.  You can use it by doing
    <fo:inline font-family="monospace">import &lt;nix/fetchurl.nix&gt; { url =
    <fo:inline font-style="italic" font-family="monospace">url</fo:inline>; sha256 =
    "<fo:inline font-style="italic" font-family="monospace">hash</fo:inline>"; }</fo:inline>. (Shea Levy)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10341" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Improved RPM spec file. (Michel Alexandre Salim)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10343" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Support for on-demand socket-based activation in the Nix
    daemon with <fo:inline font-weight="bold">systemd</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10346" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Added a manpage for
    nix.conf(5).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10351" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">When using the Nix daemon, the <fo:inline font-family="monospace">-s</fo:inline> flag in
    <fo:inline font-weight="bold">nix-env -qa</fo:inline> is now much faster.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="ssec-relnotes-1.0"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Release 1.0 (2012-05-11)</fo:marker><fo:block font-size="20.736pt">Release 1.0 (2012-05-11)</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">There have been numerous improvements and bug fixes since the
previous release.  Here are the most significant:</fo:block><fo:list-block id="idm10358" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm10359" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix can now optionally use the Boehm garbage collector.
    This significantly reduces the Nix evaluatorâs memory footprint,
    especially when evaluating large NixOS system configurations.  It
    can be enabled using the <fo:inline font-family="monospace">--enable-gc</fo:inline> configure
    option.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10362" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix now uses SQLite for its database.  This is faster and
    more flexible than the old <fo:inline font-style="italic">ad hoc</fo:inline> format.
    SQLite is also used to cache the manifests in
    <fo:inline font-family="monospace">/nix/var/nix/manifests</fo:inline>, resulting in a
    significant speedup.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10366" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix now has an search path for expressions.  The search path
    is set using the environment variable <fo:inline font-family="monospace">NIX_PATH</fo:inline> and
    the <fo:inline font-family="monospace">-I</fo:inline> command line option.  In Nix expressions,
    paths between angle brackets are used to specify files that must
    be looked up in the search path.  For instance, the expression
    <fo:inline font-family="monospace">&lt;nixpkgs/default.nix&gt;</fo:inline> looks for a file
    <fo:inline font-family="monospace">nixpkgs/default.nix</fo:inline> relative to every element
    in the search path.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10372" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The new command <fo:inline font-weight="bold">nix-build --run-env</fo:inline>
    builds all dependencies of a derivation, then starts a shell in an
    environment containing all variables from the derivation.  This is
    useful for reproducing the environment of a derivation for
    development.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10375" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The new command <fo:inline font-weight="bold">nix-store --verify-path</fo:inline>
    verifies that the contents of a store path have not
    changed.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10378" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The new command <fo:inline font-weight="bold">nix-store --print-env</fo:inline>
    prints out the environment of a derivation in a format that can be
    evaluated by a shell.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10381" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Attribute names can now be arbitrary strings.  For instance,
    you can write <fo:inline font-family="monospace">{ "foo-1.2" = â¦; "bla bla" = â¦; }."bla
    bla"</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10384" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Attribute selection can now provide a default value using
    the <fo:inline font-family="monospace">or</fo:inline> operator.  For instance, the expression
    <fo:inline font-family="monospace">x.y.z or e</fo:inline> evaluates to the attribute
    <fo:inline font-family="monospace">x.y.z</fo:inline> if it exists, and <fo:inline font-family="monospace">e</fo:inline>
    otherwise.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10390" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The right-hand side of the <fo:inline font-family="monospace">?</fo:inline> operator can
    now be an attribute path, e.g., <fo:inline font-family="monospace">attrs ?
    a.b.c</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10394" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">On Linux, Nix will now make files in the Nix store immutable
    on filesystems that support it.  This prevents accidental
    modification of files in the store by the root user.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10396" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix has preliminary support for derivations with multiple
    outputs.  This is useful because it allows parts of a package to
    be deployed and garbage-collected separately.  For instance,
    development parts of a package such as header files or static
    libraries would typically not be part of the closure of an
    application, resulting in reduced disk usage and installation
    time.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10398" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The Nix store garbage collector is faster and holds the
    global lock for a shorter amount of time.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10400" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The option <fo:inline font-family="monospace">--timeout</fo:inline> (corresponding to the
    configuration setting <fo:inline font-family="monospace">build-timeout</fo:inline>) allows you
    to set an absolute timeout on builds â if a build runs for more than
    the given number of seconds, it is terminated.  This is useful for
    recovering automatically from builds that are stuck in an infinite
    loop but keep producing output, and for which
    <fo:inline font-family="monospace">--max-silent-time</fo:inline> is ineffective.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10405" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix development has moved to GitHub (<fo:basic-link external-destination="url(https://github.com/NixOS/nix)"><fo:inline><fo:inline hyphenate="false">https://github.com/NixOS/nix</fo:inline></fo:inline></fo:basic-link>).</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="ssec-relnotes-0.16"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Release 0.16 (2010-08-17)</fo:marker><fo:block font-size="20.736pt">Release 0.16 (2010-08-17)</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This release has the following improvements:</fo:block><fo:list-block id="idm10411" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm10412" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The Nix expression evaluator is now much faster in most
    cases: typically, <fo:basic-link external-destination="url(http://www.mail-archive.com/nix-dev@cs.uu.nl/msg04113.html)"><fo:inline>3
    to 8 times compared to the old implementation</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(http://www.mail-archive.com/nix-dev@cs.uu.nl/msg04113.html)">http://www.mail-archive.com/nix-dev@cs.uu.nl/msg04113.html</fo:basic-link>]</fo:inline>.  It also
    uses less memory.  It no longer depends on the ATerm
    library.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10415" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">
      Support for configurable parallelism inside builders.  Build
      scripts have always had the ability to perform multiple build
      actions in parallel (for instance, by running <fo:inline font-weight="bold">make -j
      2</fo:inline>), but this was not desirable because the number of
      actions to be performed in parallel was not configurable.  Nix
      now has an option <fo:inline font-family="monospace">--cores
      <fo:inline font-style="italic" font-family="monospace">N</fo:inline></fo:inline> as well as a configuration
      setting <fo:inline font-family="monospace">build-cores =
      <fo:inline font-style="italic" font-family="monospace">N</fo:inline></fo:inline> that causes the
      environment variable <fo:inline font-family="monospace">NIX_BUILD_CORES</fo:inline> to be set to
      <fo:inline font-style="italic" font-family="monospace">N</fo:inline> when the builder is invoked.  The
      builder can use this at its discretion to perform a parallel
      build, e.g., by calling <fo:inline font-weight="bold">make -j
      <fo:inline font-style="italic" font-family="monospace">N</fo:inline></fo:inline>.  In Nixpkgs, this can be
      enabled on a per-package basis by setting the derivation
      attribute <fo:inline font-family="monospace">enableParallelBuilding</fo:inline> to
      <fo:inline font-family="monospace">true</fo:inline>.
    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10428" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-store -q</fo:inline> now supports XML output
    through the <fo:inline font-family="monospace">--xml</fo:inline> flag.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10432" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Several bug fixes.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="ssec-relnotes-0.15"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Release 0.15 (2010-03-17)</fo:marker><fo:block font-size="20.736pt">Release 0.15 (2010-03-17)</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This is a bug-fix release.  Among other things, it fixes
building on Mac OS X (Snow Leopard), and improves the contents of
<fo:inline font-family="monospace">/etc/passwd</fo:inline> and <fo:inline font-family="monospace">/etc/group</fo:inline>
in <fo:inline font-family="monospace">chroot</fo:inline> builds.</fo:block></fo:block><fo:block id="ssec-relnotes-0.14"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Release 0.14 (2010-02-04)</fo:marker><fo:block font-size="20.736pt">Release 0.14 (2010-02-04)</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This release has the following improvements:</fo:block><fo:list-block id="idm10443" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm10444" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The garbage collector now starts deleting garbage much
    faster than before.  It no longer determines liveness of all paths
    in the store, but does so on demand.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10446" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Added a new operation, <fo:inline font-weight="bold">nix-store --query
    --roots</fo:inline>, that shows the garbage collector roots that
    directly or indirectly point to the given store paths.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10449" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Removed support for converting Berkeley DB-based Nix
    databases to the new schema.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10451" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Removed the <fo:inline font-family="monospace">--use-atime</fo:inline> and
    <fo:inline font-family="monospace">--max-atime</fo:inline> garbage collector options.  They were
    not very useful in practice.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10455" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">On Windows, Nix now requires Cygwin 1.7.x.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10457" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A few bug fixes.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="ssec-relnotes-0.13"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Release 0.13 (2009-11-05)</fo:marker><fo:block font-size="20.736pt">Release 0.13 (2009-11-05)</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This is primarily a bug fix release.  It has some new
features:</fo:block><fo:list-block id="idm10462" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm10463" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Syntactic sugar for writing nested attribute sets.  Instead of

<fo:block id="idm10465" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
{
  foo = {
    bar = 123;
    xyzzy = true;
  };
  a = { b = { c = "d"; }; };
}
</fo:block>

    you can write

<fo:block id="idm10466" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
{
  foo.bar = 123;
  foo.xyzzy = true;
  a.b.c = "d";
}
</fo:block>

    This is useful, for instance, in NixOS configuration files.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10467" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Support for Nix channels generated by Hydra, the Nix-based
    continuous build system.  (Hydra generates NAR archives on the
    fly, so the size and hash of these archives isnât known in
    advance.)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10469" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Support <fo:inline font-family="monospace">i686-linux</fo:inline> builds directly on
    <fo:inline font-family="monospace">x86_64-linux</fo:inline> Nix installations.  This is
    implemented using the <fo:inline font-family="monospace">personality()</fo:inline> syscall,
    which causes <fo:inline font-weight="bold">uname</fo:inline> to return
    <fo:inline font-family="monospace">i686</fo:inline> in child processes.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10476" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Various improvements to the <fo:inline font-family="monospace">chroot</fo:inline>
    support.  Building in a <fo:inline font-family="monospace">chroot</fo:inline> works quite well
    now.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10480" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix no longer blocks if it tries to build a path and another
    process is already building the same path.  Instead it tries to
    build another buildable path first.  This improves
    parallelism.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10482" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Support for large (&gt; 4 GiB) files in NAR archives.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10484" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Various (performance) improvements to the remote build
    mechanism.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10486" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">New primops: <fo:inline font-family="monospace">builtins.addErrorContext</fo:inline> (to
    add a string to stack traces â useful for debugging),
    <fo:inline font-family="monospace">builtins.isBool</fo:inline>,
    <fo:inline font-family="monospace">builtins.isString</fo:inline>,
    <fo:inline font-family="monospace">builtins.isInt</fo:inline>,
    <fo:inline font-family="monospace">builtins.intersectAttrs</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10493" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">OpenSolaris support (Sander van der Burg).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10495" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Stack traces are no longer displayed unless the
    <fo:inline font-family="monospace">--show-trace</fo:inline> option is used.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10498" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The scoping rules for <fo:inline font-family="monospace">inherit
    (<fo:inline font-style="italic" font-family="monospace">e</fo:inline>) ...</fo:inline> in recursive
    attribute sets have changed.  The expression
    <fo:inline font-style="italic" font-family="monospace">e</fo:inline> can now refer to the attributes
    defined in the containing set.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="ssec-relnotes-0.12"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Release 0.12 (2008-11-20)</fo:marker><fo:block font-size="20.736pt">Release 0.12 (2008-11-20)</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:list-block id="idm10505" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm10506" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix no longer uses Berkeley DB to store Nix store metadata.
    The principal advantages of the new storage scheme are: it works
    properly over decent implementations of NFS (allowing Nix stores
    to be shared between multiple machines); no recovery is needed
    when a Nix process crashes; no write access is needed for
    read-only operations; no more running out of Berkeley DB locks on
    certain operations.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You still need to compile Nix with Berkeley DB support if
    you want Nix to automatically convert your old Nix store to the
    new schema.  If you donât need this, you can build Nix with the
    <fo:inline font-family="monospace">configure</fo:inline> option
    <fo:inline font-family="monospace">--disable-old-db-compat</fo:inline>.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">After the automatic conversion to the new schema, you can
    delete the old Berkeley DB files:

    <fo:block id="idm10512" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ cd /nix/var/nix/db
$ rm __db* log.* derivers references referrers reserved validpaths DB_CONFIG</fo:block>

    The new metadata is stored in the directories
    <fo:inline font-family="monospace">/nix/var/nix/db/info</fo:inline> and
    <fo:inline font-family="monospace">/nix/var/nix/db/referrer</fo:inline>.  Though the
    metadata is stored in human-readable plain-text files, they are
    not intended to be human-editable, as Nix is rather strict about
    the format.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The new storage schema may or may not require less disk
    space than the Berkeley DB environment, mostly depending on the
    cluster size of your file system.  With 1 KiB clusters (which
    seems to be the <fo:inline font-family="monospace">ext3</fo:inline> default nowadays) it
    usually takes up much less space.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10517" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">There is a new substituter that copies paths
  directly from other (remote) Nix stores mounted somewhere in the
  filesystem.  For instance, you can speed up an installation by
  mounting some remote Nix store that already has the packages in
  question via NFS or <fo:inline font-family="monospace">sshfs</fo:inline>.  The environment
  variable <fo:inline font-family="monospace">NIX_OTHER_STORES</fo:inline> specifies the locations of
  the remote Nix directories,
  e.g. <fo:inline font-family="monospace">/mnt/remote-fs/nix</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10522" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">New <fo:inline font-weight="bold">nix-store</fo:inline> operations
  <fo:inline font-family="monospace">--dump-db</fo:inline> and <fo:inline font-family="monospace">--load-db</fo:inline> to dump
  and reload the Nix database.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10527" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The garbage collector has a number of new options to
  allow only some of the garbage to be deleted.  The option
  <fo:inline font-family="monospace">--max-freed <fo:inline font-style="italic" font-family="monospace">N</fo:inline></fo:inline> tells the
  collector to stop after at least <fo:inline font-style="italic" font-family="monospace">N</fo:inline> bytes
  have been deleted.  The option <fo:inline font-family="monospace">--max-links
  <fo:inline font-style="italic" font-family="monospace">N</fo:inline></fo:inline> tells it to stop after the
  link count on <fo:inline font-family="monospace">/nix/store</fo:inline> has dropped below
  <fo:inline font-style="italic" font-family="monospace">N</fo:inline>.  This is useful for very large Nix
  stores on filesystems with a 32000 subdirectories limit (like
  <fo:inline font-family="monospace">ext3</fo:inline>).  The option <fo:inline font-family="monospace">--use-atime</fo:inline>
  causes store paths to be deleted in order of ascending last access
  time.  This allows non-recently used stuff to be deleted.  The
  option <fo:inline font-family="monospace">--max-atime <fo:inline font-style="italic" font-family="monospace">time</fo:inline></fo:inline>
  specifies an upper limit to the last accessed time of paths that may
  be deleted.  For instance,

    <fo:block id="idm10540" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
    $ nix-store --gc -v --max-atime $(date +%s -d "2 months ago")</fo:block>

  deletes everything that hasnât been accessed in two months.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10541" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-env</fo:inline> now uses optimistic
  profile locking when performing an operation like installing or
  upgrading, instead of setting an exclusive lock on the profile.
  This allows multiple <fo:inline font-weight="bold">nix-env -i / -u / -e</fo:inline>
  operations on the same profile in parallel.  If a
  <fo:inline font-weight="bold">nix-env</fo:inline> operation sees at the end that the profile
  was changed in the meantime by another process, it will just
  restart.  This is generally cheap because the build results are
  still in the Nix store.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10546" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The option <fo:inline font-family="monospace">--dry-run</fo:inline> is now
  supported by <fo:inline font-weight="bold">nix-store -r</fo:inline> and
  <fo:inline font-weight="bold">nix-build</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10551" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The information previously shown by
  <fo:inline font-family="monospace">--dry-run</fo:inline> (i.e., which derivations will be built
  and which paths will be substituted) is now always shown by
  <fo:inline font-weight="bold">nix-env</fo:inline>, <fo:inline font-weight="bold">nix-store -r</fo:inline> and
  <fo:inline font-weight="bold">nix-build</fo:inline>.  The total download size of
  substitutable paths is now also shown.  For instance, a build will
  show something like

    <fo:block id="idm10557" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
the following derivations will be built:
  /nix/store/129sbxnk5n466zg6r1qmq1xjv9zymyy7-activate-configuration.sh.drv
  /nix/store/7mzy971rdm8l566ch8hgxaf89x7lr7ik-upstart-jobs.drv
  ...
the following paths will be downloaded/copied (30.02 MiB):
  /nix/store/4m8pvgy2dcjgppf5b4cj5l6wyshjhalj-samba-3.2.4
  /nix/store/7h1kwcj29ip8vk26rhmx6bfjraxp0g4l-libunwind-0.98.6
  ...</fo:block>

  </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10558" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Language features:

    <fo:list-block id="idm10560" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm10561" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">@-patterns as in Haskell.  For instance, in a
      function definition

      <fo:block id="idm10563" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">f = args @ {x, y, z}: <fo:inline font-style="italic" font-family="monospace">...</fo:inline>;</fo:block>

      <fo:inline font-family="monospace">args</fo:inline> refers to the argument as a whole, which
      is further pattern-matched against the attribute set pattern
      <fo:inline font-family="monospace">{x, y, z}</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10567" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">â<fo:inline font-family="monospace">...</fo:inline>â (ellipsis) patterns.
      An attribute set pattern can now say <fo:inline font-family="monospace">...</fo:inline>  at
      the end of the attribute name list to specify that the function
      takes <fo:inline font-style="italic">at least</fo:inline> the listed attributes, while
      ignoring additional attributes.  For instance,

      <fo:block id="idm10572" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">{stdenv, fetchurl, fuse, ...}: <fo:inline font-style="italic" font-family="monospace">...</fo:inline></fo:block>

      defines a function that accepts any attribute set that includes
      at least the three listed attributes.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10574" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">New primops:
      <fo:inline font-family="monospace">builtins.parseDrvName</fo:inline> (split a package name
      string like <fo:inline font-family="monospace">"nix-0.12pre12876"</fo:inline> into its name
      and version components, e.g. <fo:inline font-family="monospace">"nix"</fo:inline> and
      <fo:inline font-family="monospace">"0.12pre12876"</fo:inline>),
      <fo:inline font-family="monospace">builtins.compareVersions</fo:inline> (compare two version
      strings using the same algorithm that <fo:inline font-weight="bold">nix-env</fo:inline>
      uses), <fo:inline font-family="monospace">builtins.length</fo:inline> (efficiently compute
      the length of a list), <fo:inline font-family="monospace">builtins.mul</fo:inline> (integer
      multiplication), <fo:inline font-family="monospace">builtins.div</fo:inline> (integer
      division).
      
      </fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block>

  </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10585" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-prefetch-url</fo:inline> now supports
  <fo:inline font-family="monospace">mirror://</fo:inline> URLs, provided that the environment
  variable <fo:inline font-family="monospace">NIXPKGS_ALL</fo:inline> points at a Nixpkgs
  tree.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10590" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Removed the commands
  <fo:inline font-weight="bold">nix-pack-closure</fo:inline> and
  <fo:inline font-weight="bold">nix-unpack-closure</fo:inline>.   You can do almost the same
  thing but much more efficiently by doing <fo:inline font-family="monospace">nix-store --export
  $(nix-store -qR <fo:inline font-style="italic" font-family="monospace">paths</fo:inline>) &gt; closure</fo:inline> and
  <fo:inline font-family="monospace">nix-store --import &lt;
  closure</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10597" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Lots of bug fixes, including a big performance bug in
  the handling of <fo:inline font-family="monospace">with</fo:inline>-expressions.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="ssec-relnotes-0.11"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Release 0.11 (2007-12-31)</fo:marker><fo:block font-size="20.736pt">Release 0.11 (2007-12-31)</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix 0.11 has many improvements over the previous stable release.
The most important improvement is secure multi-user support.  It also
features many usability enhancements and language extensions, many of
them prompted by NixOS, the purely functional Linux distribution based
on Nix.  Here is an (incomplete) list:</fo:block><fo:list-block id="idm10603" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm10604" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Secure multi-user support.  A single Nix store can
  now be shared between multiple (possible untrusted) users.  This is
  an important feature for NixOS, where it allows non-root users to
  install software.  The old setuid method for sharing a store between
  multiple users has been removed.  Details for setting up a
  multi-user store can be found in the manual.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10606" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The new command <fo:inline font-weight="bold">nix-copy-closure</fo:inline>
  gives you an easy and efficient way to exchange software between
  machines.  It copies the missing parts of the closure of a set of
  store path to or from a remote machine via
  <fo:inline font-weight="bold">ssh</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10610" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A new kind of string literal: strings between double
  single-quotes (<fo:inline font-family="monospace">''</fo:inline>) have indentation
  âintelligentlyâ removed.  This allows large strings (such as shell
  scripts or configuration file fragments in NixOS) to cleanly follow
  the indentation of the surrounding expression.  It also requires
  much less escaping, since <fo:inline font-family="monospace">''</fo:inline> is less common in
  most languages than <fo:inline font-family="monospace">"</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10615" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-env</fo:inline> <fo:inline font-family="monospace">--set</fo:inline>
  modifies the current generation of a profile so that it contains
  exactly the specified derivation, and nothing else.  For example,
  <fo:inline font-family="monospace">nix-env -p /nix/var/nix/profiles/browser --set
  firefox</fo:inline> lets the profile named
  <fo:inline font-family="monospace">browser</fo:inline> contain just Firefox.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10621" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-env</fo:inline> now maintains
  meta-information about installed packages in profiles.  The
  meta-information is the contents of the <fo:inline font-family="monospace">meta</fo:inline>
  attribute of derivations, such as <fo:inline font-family="monospace">description</fo:inline> or
  <fo:inline font-family="monospace">homepage</fo:inline>.  The command <fo:inline font-family="monospace">nix-env -q --xml
  --meta</fo:inline> shows all meta-information.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10628" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-env</fo:inline> now uses the
  <fo:inline font-family="monospace">meta.priority</fo:inline> attribute of derivations to resolve
  filename collisions between packages.  Lower priority values denote
  a higher priority.  For instance, the GCC wrapper package and the
  Binutils package in Nixpkgs both have a file
  <fo:inline font-family="monospace">bin/ld</fo:inline>, so previously if you tried to install
  both you would get a collision.  Now, on the other hand, the GCC
  wrapper declares a higher priority than Binutils, so the formerâs
  <fo:inline font-family="monospace">bin/ld</fo:inline> is symlinked in the user
  environment.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10634" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-env -i / -u</fo:inline>: instead of
  breaking package ties by version, break them by priority and version
  number.  That is, if there are multiple packages with the same name,
  then pick the package with the highest priority, and only use the
  version if there are multiple packages with the same
  priority.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This makes it possible to mark specific versions/variant in
  Nixpkgs more or less desirable than others.  A typical example would
  be a beta version of some package (e.g.,
  <fo:inline font-family="monospace">gcc-4.2.0rc1</fo:inline>) which should not be installed even
  though it is the highest version, except when it is explicitly
  selected (e.g., <fo:inline font-family="monospace">nix-env -i
  gcc-4.2.0rc1</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10640" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-env --set-flag</fo:inline> allows meta
  attributes of installed packages to be modified.  There are several
  attributes that can be usefully modified, because they affect the
  behaviour of <fo:inline font-weight="bold">nix-env</fo:inline> or the user environment
  build script:

    <fo:list-block id="idm10644" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm10645" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">meta.priority</fo:inline> can be changed
      to resolve filename clashes (see above).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10648" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">meta.keep</fo:inline> can be set to
      <fo:inline font-family="monospace">true</fo:inline> to prevent the package from being
      upgraded or replaced.  Useful if you want to hang on to an older
      version of a package.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10652" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">meta.active</fo:inline> can be set to
      <fo:inline font-family="monospace">false</fo:inline> to âdisableâ the package.  That is, no
      symlinks will be generated to the files of the package, but it
      remains part of the profile (so it wonât be garbage-collected).
      Set it back to <fo:inline font-family="monospace">true</fo:inline> to re-enable the
      package.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block>

  </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10657" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-env -q</fo:inline> now has a flag
  <fo:inline font-family="monospace">--prebuilt-only</fo:inline> (<fo:inline font-family="monospace">-b</fo:inline>) that causes
  <fo:inline font-weight="bold">nix-env</fo:inline> to show only those derivations whose
  output is already in the Nix store or that can be substituted (i.e.,
  downloaded from somewhere).  In other words, it shows the packages
  that can be installed âquicklyâ, i.e., donât need to be built from
  source.  The <fo:inline font-family="monospace">-b</fo:inline> flag is also available in
  <fo:inline font-weight="bold">nix-env -i</fo:inline> and <fo:inline font-weight="bold">nix-env -u</fo:inline> to
  filter out derivations for which no pre-built binary is
  available.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10666" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The new option <fo:inline font-family="monospace">--argstr</fo:inline> (in
  <fo:inline font-weight="bold">nix-env</fo:inline>, <fo:inline font-weight="bold">nix-instantiate</fo:inline> and
  <fo:inline font-weight="bold">nix-build</fo:inline>) is like <fo:inline font-family="monospace">--arg</fo:inline>, except
  that the value is a string.  For example, <fo:inline font-family="monospace">--argstr system
  i686-linux</fo:inline> is equivalent to <fo:inline font-family="monospace">--arg system
  \"i686-linux\"</fo:inline> (note that <fo:inline font-family="monospace">--argstr</fo:inline>
  prevents annoying quoting around shell arguments).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10676" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-store</fo:inline> has a new operation
  <fo:inline font-family="monospace">--read-log</fo:inline> (<fo:inline font-family="monospace">-l</fo:inline>)
  <fo:inline font-style="italic" font-family="monospace">paths</fo:inline> that shows the build log of the given
  paths.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10682" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix now uses Berkeley DB 4.5.  The database is
  upgraded automatically, but you should be careful not to use old
  versions of Nix that still use Berkeley DB 4.4.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10684" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The option <fo:inline font-family="monospace">--max-silent-time</fo:inline>
  (corresponding to the configuration setting
  <fo:inline font-family="monospace">build-max-silent-time</fo:inline>) allows you to set a
  timeout on builds â if a build produces no output on
  <fo:inline font-family="monospace">stdout</fo:inline> or <fo:inline font-family="monospace">stderr</fo:inline> for the given
  number of seconds, it is terminated.  This is useful for recovering
  automatically from builds that are stuck in an infinite
  loop.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10690" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-channel</fo:inline>: each subscribed
  channel is its own attribute in the top-level expression generated
  for the channel.  This allows disambiguation (e.g. <fo:inline font-family="monospace">nix-env
  -i -A nixpkgs_unstable.firefox</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10694" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The substitutes table has been removed from the
  database.  This makes operations such as <fo:inline font-weight="bold">nix-pull</fo:inline>
  and <fo:inline font-weight="bold">nix-channel --update</fo:inline> much, much
  faster.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10698" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-pull</fo:inline> now supports
  bzip2-compressed manifests.  This speeds up
  channels.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10701" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-prefetch-url</fo:inline> now has a
  limited form of caching.  This is used by
  <fo:inline font-weight="bold">nix-channel</fo:inline> to prevent unnecessary downloads when
  the channel hasnât changed.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10705" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-prefetch-url</fo:inline> now by default
  computes the SHA-256 hash of the file instead of the MD5 hash.  In
  calls to <fo:inline font-family="monospace">fetchurl</fo:inline> you should pass the
  <fo:inline font-family="monospace">sha256</fo:inline> attribute instead of
  <fo:inline font-family="monospace">md5</fo:inline>.  You can pass either a hexadecimal or a
  base-32 encoding of the hash.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10711" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix can now perform builds in an automatically
  generated âchrootâ.  This prevents a builder from accessing stuff
  outside of the Nix store, and thus helps ensure purity.  This is an
  experimental feature.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10713" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The new command <fo:inline font-weight="bold">nix-store
  --optimise</fo:inline> reduces Nix store disk space usage by finding
  identical files in the store and hard-linking them to each other.
  It typically reduces the size of the store by something like
  25-35%.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10716" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">~/.nix-defexpr</fo:inline> can now be a
  directory, in which case the Nix expressions in that directory are
  combined into an attribute set, with the file names used as the
  names of the attributes.  The command <fo:inline font-weight="bold">nix-env
  --import</fo:inline> (which set the
  <fo:inline font-family="monospace">~/.nix-defexpr</fo:inline> symlink) is
  removed.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10721" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Derivations can specify the new special attribute
  <fo:inline font-family="monospace">allowedReferences</fo:inline> to enforce that the references
  in the output of a derivation are a subset of a declared set of
  paths.  For example, if <fo:inline font-family="monospace">allowedReferences</fo:inline> is an
  empty list, then the output must not have any references.  This is
  used in NixOS to check that generated files such as initial ramdisks
  for booting Linux donât have any dependencies.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10725" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The new attribute
  <fo:inline font-family="monospace">exportReferencesGraph</fo:inline> allows builders access to
  the references graph of their inputs.  This is used in NixOS for
  tasks such as generating ISO-9660 images that contain a Nix store
  populated with the closure of certain paths.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10728" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Fixed-output derivations (like
  <fo:inline font-family="monospace">fetchurl</fo:inline>) can define the attribute
  <fo:inline font-family="monospace">impureEnvVars</fo:inline> to allow external environment
  variables to be passed to builders.  This is used in Nixpkgs to
  support proxy configuration, among other things.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10732" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Several new built-in functions:
  <fo:inline font-family="monospace">builtins.attrNames</fo:inline>,
  <fo:inline font-family="monospace">builtins.filterSource</fo:inline>,
  <fo:inline font-family="monospace">builtins.isAttrs</fo:inline>,
  <fo:inline font-family="monospace">builtins.isFunction</fo:inline>,
  <fo:inline font-family="monospace">builtins.listToAttrs</fo:inline>,
  <fo:inline font-family="monospace">builtins.stringLength</fo:inline>,
  <fo:inline font-family="monospace">builtins.sub</fo:inline>,
  <fo:inline font-family="monospace">builtins.substring</fo:inline>,
  <fo:inline font-family="monospace">throw</fo:inline>,
  <fo:inline font-family="monospace">builtins.trace</fo:inline>,
  <fo:inline font-family="monospace">builtins.readFile</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="ch-relnotes-0.10.1"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Release 0.10.1 (2006-10-11)</fo:marker><fo:block font-size="20.736pt">Release 0.10.1 (2006-10-11)</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This release fixes two somewhat obscure bugs that occur when
evaluating Nix expressions that are stored inside the Nix store
(<fo:inline font-family="monospace">NIX-67</fo:inline>).  These do not affect most users.</fo:block></fo:block><fo:block id="ch-relnotes-0.10"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Release 0.10 (2006-10-06)</fo:marker><fo:block font-size="20.736pt">Release 0.10 (2006-10-06)</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block id="idm10751" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" margin-left="0.25in" margin-right="0.25in"><fo:block keep-with-next.within-column="always" font-size="14pt" font-weight="bold" hyphenate="false">Note</fo:block><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This version of Nix uses Berkeley DB 4.4 instead of 4.3.
The database is upgraded automatically, but you should be careful not
to use old versions of Nix that still use Berkeley DB 4.3.  In
particular, if you use a Nix installed through Nix, you should run

<fo:block id="idm10753" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-store --clear-substitutes</fo:block>

first.</fo:block></fo:block></fo:block><fo:block id="idm10754" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" margin-left="0.25in" margin-right="0.25in"><fo:block keep-with-next.within-column="always" font-size="14pt" font-weight="bold" hyphenate="false">Warning</fo:block><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Also, the database schema has changed slighted to fix a
performance issue (see below).  When you run any Nix 0.10 command for
the first time, the database will be upgraded automatically.  This is
irreversible.</fo:block></fo:block></fo:block><fo:list-block id="idm10756" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm10757" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-env</fo:inline> usability improvements:

    <fo:list-block id="idm10760" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm10761" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">An option <fo:inline font-family="monospace">--compare-versions</fo:inline>
      (or <fo:inline font-family="monospace">-c</fo:inline>) has been added to <fo:inline font-weight="bold">nix-env
      --query</fo:inline> to allow you to compare installed versions of
      packages to available versions, or vice versa.  An easy way to
      see if you are up to date with whatâs in your subscribed
      channels is <fo:inline font-family="monospace">nix-env -qc \*</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10767" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-env --query</fo:inline> now takes as
      arguments a list of package names about which to show
      information, just like <fo:inline font-family="monospace">--install</fo:inline>, etc.: for
      example, <fo:inline font-family="monospace">nix-env -q gcc</fo:inline>.  Note that to show
      all derivations, you need to specify
      <fo:inline font-family="monospace">\*</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10773" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-env -i
      <fo:inline font-style="italic" font-family="monospace">pkgname</fo:inline></fo:inline> will now install
      the highest available version of
      <fo:inline font-style="italic" font-family="monospace">pkgname</fo:inline>, rather than installing all
      available versions (which would probably give collisions)
      (<fo:inline font-family="monospace">NIX-31</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10779" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-env (-i|-u) --dry-run</fo:inline> now
      shows exactly which missing paths will be built or
      substituted.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10782" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-env -qa --description</fo:inline>
      shows human-readable descriptions of packages, provided that
      they have a <fo:inline font-family="monospace">meta.description</fo:inline> attribute (which
      most packages in Nixpkgs donât have yet).</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block>

  </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10786" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">New language features:

    <fo:list-block id="idm10788" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm10789" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Reference scanning (which happens after each
      build) is much faster and takes a constant amount of
      memory.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10791" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">String interpolation.  Expressions like

<fo:block id="idm10793" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
"--with-freetype2-library=" + freetype + "/lib"</fo:block>

      can now be written as

<fo:block id="idm10794" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
"--with-freetype2-library=${freetype}/lib"</fo:block>

      You can write arbitrary expressions within
      <fo:inline font-family="monospace">${<fo:inline font-style="italic" font-family="monospace">...</fo:inline>}</fo:inline>, not just
      identifiers.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10797" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Multi-line string literals.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10799" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">String concatenations can now involve
      derivations, as in the example <fo:inline font-family="monospace">"--with-freetype2-library="
      + freetype + "/lib"</fo:inline>.  This was not previously possible
      because we need to register that a derivation that uses such a
      string is dependent on <fo:inline font-family="monospace">freetype</fo:inline>.  The
      evaluator now properly propagates this information.
      Consequently, the subpath operator (<fo:inline font-family="monospace">~</fo:inline>) has
      been deprecated.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10804" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Default values of function arguments can now
      refer to other function arguments; that is, all arguments are in
      scope in the default values
      (<fo:inline font-family="monospace">NIX-45</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10807" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Lots of new built-in primitives, such as
      functions for list manipulation and integer arithmetic.  See the
      manual for a complete list.  All primops are now available in
      the set <fo:inline font-family="monospace">builtins</fo:inline>, allowing one to test for
      the availability of primop in a backwards-compatible
      way.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10810" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Real let-expressions: <fo:inline font-family="monospace">let x = ...;
      ... z = ...; in ...</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block>

  </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10813" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">New commands <fo:inline font-weight="bold">nix-pack-closure</fo:inline> and
  <fo:inline font-weight="bold">nix-unpack-closure</fo:inline> than can be used to easily
  transfer a store path with all its dependencies to another machine.
  Very convenient whenever you have some package on your machine and
  you want to copy it somewhere else.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10817" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">XML support:

    <fo:list-block id="idm10819" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm10820" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-env -q --xml</fo:inline> prints the
      installed or available packages in an XML representation for
      easy processing by other tools.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10823" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-instantiate --eval-only
      --xml</fo:inline> prints an XML representation of the resulting
      term.  (The new flag <fo:inline font-family="monospace">--strict</fo:inline> forces âdeepâ
      evaluation of the result, i.e., list elements and attributes are
      evaluated recursively.)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10827" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">In Nix expressions, the primop
      <fo:inline font-family="monospace">builtins.toXML</fo:inline> converts a term to an XML
      representation.  This is primarily useful for passing structured
      information to builders.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block>

  </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10830" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">You can now unambiguously specify which derivation to
  build or install in <fo:inline font-weight="bold">nix-env</fo:inline>,
  <fo:inline font-weight="bold">nix-instantiate</fo:inline> and <fo:inline font-weight="bold">nix-build</fo:inline>
  using the <fo:inline font-family="monospace">--attr</fo:inline> / <fo:inline font-family="monospace">-A</fo:inline> flags, which
  takes an attribute name as argument.  (Unlike symbolic package names
  such as <fo:inline font-family="monospace">subversion-1.4.0</fo:inline>, attribute names in an
  attribute set are unique.)  For instance, a quick way to perform a
  test build of a package in Nixpkgs is <fo:inline font-family="monospace">nix-build
  pkgs/top-level/all-packages.nix -A
  <fo:inline font-style="italic" font-family="monospace">foo</fo:inline></fo:inline>.  <fo:inline font-family="monospace">nix-env -q
  --attr</fo:inline> shows the attribute names corresponding to each
  derivation.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10841" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If the top-level Nix expression used by
  <fo:inline font-weight="bold">nix-env</fo:inline>, <fo:inline font-weight="bold">nix-instantiate</fo:inline> or
  <fo:inline font-weight="bold">nix-build</fo:inline> evaluates to a function whose arguments
  all have default values, the function will be called automatically.
  Also, the new command-line switch <fo:inline font-family="monospace">--arg
  <fo:inline font-style="italic" font-family="monospace">name</fo:inline>
  <fo:inline font-style="italic" font-family="monospace">value</fo:inline></fo:inline> can be used to specify
  function arguments on the command line.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10849" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-install-package --url
  <fo:inline font-style="italic" font-family="monospace">URL</fo:inline></fo:inline> allows a package to be
  installed directly from the given URL.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10853" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix now works behind an HTTP proxy server; just set
  the standard environment variables <fo:inline font-family="monospace">http_proxy</fo:inline>,
  <fo:inline font-family="monospace">https_proxy</fo:inline>, <fo:inline font-family="monospace">ftp_proxy</fo:inline> or
  <fo:inline font-family="monospace">all_proxy</fo:inline> appropriately.  Functions such as
  <fo:inline font-family="monospace">fetchurl</fo:inline> in Nixpkgs also respect these
  variables.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10860" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-build -o
  <fo:inline font-style="italic" font-family="monospace">symlink</fo:inline></fo:inline> allows the symlink to
  the build result to be named something other than
  <fo:inline font-family="monospace">result</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10865" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Platform support:

    <fo:list-block id="idm10867" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm10868" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Support for 64-bit platforms, provided a <fo:basic-link external-destination="url(http://bugzilla.sen.cwi.nl:8080/show_bug.cgi?id=606)"><fo:inline>suitably
      patched ATerm library</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(http://bugzilla.sen.cwi.nl:8080/show_bug.cgi?id=606)">http://bugzilla.sen.cwi.nl:8080/show_bug.cgi?id=606</fo:basic-link>]</fo:inline> is used.  Also, files larger than 2
      GiB are now supported.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10871" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Added support for Cygwin (Windows,
      <fo:inline font-family="monospace">i686-cygwin</fo:inline>), Mac OS X on Intel
      (<fo:inline font-family="monospace">i686-darwin</fo:inline>) and Linux on PowerPC
      (<fo:inline font-family="monospace">powerpc-linux</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10876" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Users of SMP and multicore machines will
      appreciate that the number of builds to be performed in parallel
      can now be specified in the configuration file in the
      <fo:inline font-family="monospace">build-max-jobs</fo:inline> setting.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block>

  </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10879" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Garbage collector improvements:

    <fo:list-block id="idm10881" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm10882" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Open files (such as running programs) are now
      used as roots of the garbage collector.  This prevents programs
      that have been uninstalled from being garbage collected while
      they are still running.  The script that detects these
      additional runtime roots
      (<fo:inline font-family="monospace">find-runtime-roots.pl</fo:inline>) is inherently
      system-specific, but it should work on Linux and on all
      platforms that have the <fo:inline font-weight="bold">lsof</fo:inline>
      utility.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10886" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-store --gc</fo:inline>
      (a.k.a. <fo:inline font-weight="bold">nix-collect-garbage</fo:inline>) prints out the
      number of bytes freed on standard output.  <fo:inline font-family="monospace">nix-store
      --gc --print-dead</fo:inline> shows how many bytes would be freed
      by an actual garbage collection.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10891" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">nix-collect-garbage -d</fo:inline>
      removes all old generations of <fo:inline font-style="italic">all</fo:inline> profiles
      before calling the actual garbage collector (<fo:inline font-family="monospace">nix-store
      --gc</fo:inline>).  This is an easy way to get rid of all old
      packages in the Nix store.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10896" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-store</fo:inline> now has an
      operation <fo:inline font-family="monospace">--delete</fo:inline> to delete specific paths
      from the Nix store.  It wonât delete reachable (non-garbage)
      paths unless <fo:inline font-family="monospace">--ignore-liveness</fo:inline> is
      specified.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block>

  </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10901" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Berkeley DB 4.4âs process registry feature is used
  to recover from crashed Nix processes.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10903" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A performance issue has been fixed with the
  <fo:inline font-family="monospace">referer</fo:inline> table, which stores the inverse of the
  <fo:inline font-family="monospace">references</fo:inline> table (i.e., it tells you what store
  paths refer to a given path).  Maintaining this table could take a
  quadratic amount of time, as well as a quadratic amount of Berkeley
  DB log file space (in particular when running the garbage collector)
  (<fo:inline font-family="monospace">NIX-23</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10908" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix now catches the <fo:inline font-family="monospace">TERM</fo:inline> and
  <fo:inline font-family="monospace">HUP</fo:inline> signals in addition to the
  <fo:inline font-family="monospace">INT</fo:inline> signal.  So you can now do a <fo:inline font-family="monospace">killall
  nix-store</fo:inline> without triggering a database
  recovery.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10914" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">bsdiff</fo:inline> updated to version
  4.3.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10917" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Substantial performance improvements in expression
  evaluation and <fo:inline font-family="monospace">nix-env -qa</fo:inline>, all thanks to <fo:basic-link external-destination="url(http://valgrind.org/)"><fo:inline>Valgrind</fo:inline></fo:basic-link><fo:inline hyphenate="false"> [<fo:basic-link external-destination="url(http://valgrind.org/)">http://valgrind.org/</fo:basic-link>]</fo:inline>.  Memory use has
  been reduced by a factor 8 or so.  Big speedup by memoisation of
  path hashing.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10921" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Lots of bug fixes, notably:

    <fo:list-block id="idm10923" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm10924" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Make sure that the garbage collector can run
      successfully when the disk is full
      (<fo:inline font-family="monospace">NIX-18</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10927" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-env</fo:inline> now locks the profile
      to prevent races between concurrent <fo:inline font-weight="bold">nix-env</fo:inline>
      operations on the same profile
      (<fo:inline font-family="monospace">NIX-7</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10932" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Removed misleading messages from
      <fo:inline font-family="monospace">nix-env -i</fo:inline> (e.g., <fo:inline font-family="monospace">installing
      `foo'</fo:inline> followed by <fo:inline font-family="monospace">uninstalling
      `foo'</fo:inline>) (<fo:inline font-family="monospace">NIX-17</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block>

  </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10938" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix source distributions are a lot smaller now since
  we no longer include a full copy of the Berkeley DB source
  distribution (but only the bits we need).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10940" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Header files are now installed so that external
  programs can use the Nix libraries.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="ch-relnotes-0.9.2"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Release 0.9.2 (2005-09-21)</fo:marker><fo:block font-size="20.736pt">Release 0.9.2 (2005-09-21)</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This bug fix release fixes two problems on Mac OS X:

<fo:list-block id="idm10945" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm10946" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If Nix was linked against statically linked versions
  of the ATerm or Berkeley DB library, there would be dynamic link
  errors at runtime.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10948" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-pull</fo:inline> and
  <fo:inline font-weight="bold">nix-push</fo:inline> intermittently failed due to race
  conditions involving pipes and child processes with error messages
  such as <fo:inline font-family="monospace">open2: open(GLOB(0x180b2e4), &gt;&amp;=9) failed: Bad
  file descriptor at /nix/bin/nix-pull line 77</fo:inline> (issue
  <fo:inline font-family="monospace">NIX-14</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block>

</fo:block></fo:block><fo:block id="ch-relnotes-0.9.1"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Release 0.9.1 (2005-09-20)</fo:marker><fo:block font-size="20.736pt">Release 0.9.1 (2005-09-20)</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This bug fix release addresses a problem with the ATerm library
when the <fo:inline font-family="monospace">--with-aterm</fo:inline> flag in
<fo:inline font-weight="bold">configure</fo:inline> was <fo:inline font-style="italic">not</fo:inline> used.</fo:block></fo:block><fo:block id="ch-relnotes-0.9"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Release 0.9 (2005-09-16)</fo:marker><fo:block font-size="20.736pt">Release 0.9 (2005-09-16)</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">NOTE: this version of Nix uses Berkeley DB 4.3 instead of 4.2.
The database is upgraded automatically, but you should be careful not
to use old versions of Nix that still use Berkeley DB 4.2.  In
particular, if you use a Nix installed through Nix, you should run

<fo:block id="idm10963" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-store --clear-substitutes</fo:block>

first.</fo:block><fo:list-block id="idm10964" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm10965" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Unpacking of patch sequences is much faster now
  since we no longer do redundant unpacking and repacking of
  intermediate paths.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10967" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix now uses Berkeley DB 4.3.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10969" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The <fo:inline font-family="monospace">derivation</fo:inline> primitive is
  lazier.  Attributes of dependent derivations can mutually refer to
  each other (as long as there are no data dependencies on the
  <fo:inline font-family="monospace">outPath</fo:inline> and <fo:inline font-family="monospace">drvPath</fo:inline> attributes
  computed by <fo:inline font-family="monospace">derivation</fo:inline>).</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">For example, the expression <fo:inline font-family="monospace">derivation
  attrs</fo:inline> now evaluates to (essentially)

  <fo:block id="idm10977" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
attrs // {
  type = "derivation";
  outPath = derivation! attrs;
  drvPath = derivation! attrs;
}</fo:block>

  where <fo:inline font-family="monospace">derivation!</fo:inline> is a primop that does the
  actual derivation instantiation (i.e., it does what
  <fo:inline font-family="monospace">derivation</fo:inline> used to do).  The advantage is that
  it allows commands such as <fo:inline font-weight="bold">nix-env -qa</fo:inline> and
  <fo:inline font-weight="bold">nix-env -i</fo:inline> to be much faster since they no longer
  need to instantiate all derivations, just the
  <fo:inline font-family="monospace">name</fo:inline> attribute.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Also, it allows derivations to cyclically reference each
  other, for example,

  <fo:block id="idm10984" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
webServer = derivation {
  ...
  hostName = "svn.cs.uu.nl";
  services = [svnService];
};
 
svnService = derivation {
  ...
  hostName = webServer.hostName;
};</fo:block>

  Previously, this would yield a black hole (infinite recursion).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10985" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-build</fo:inline> now defaults to using
  <fo:inline font-family="monospace">./default.nix</fo:inline> if no Nix expression is
  specified.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10989" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-instantiate</fo:inline>, when applied to
  a Nix expression that evaluates to a function, will call the
  function automatically if all its arguments have
  defaults.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10992" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix now uses libtool to build dynamic libraries.
  This reduces the size of executables.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10994" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A new list concatenation operator
  <fo:inline font-family="monospace">++</fo:inline>.  For example, <fo:inline font-family="monospace">[1 2 3] ++ [4 5
  6]</fo:inline> evaluates to <fo:inline font-family="monospace">[1 2 3 4 5
  6]</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm10999" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Some currently undocumented primops to support
  low-level build management using Nix (i.e., using Nix as a Make
  replacement).  See the commit messages for <fo:inline font-family="monospace">r3578</fo:inline>
  and <fo:inline font-family="monospace">r3580</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm11003" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Various bug fixes and performance
  improvements.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="ch-relnotes-0.8.1"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Release 0.8.1 (2005-04-13)</fo:marker><fo:block font-size="20.736pt">Release 0.8.1 (2005-04-13)</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">This is a bug fix release.</fo:block><fo:list-block id="idm11008" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm11009" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Patch downloading was broken.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm11011" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The garbage collector would not delete paths that
  had references from invalid (but substitutable)
  paths.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="ch-relnotes-0.8"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Release 0.8 (2005-04-11)</fo:marker><fo:block font-size="20.736pt">Release 0.8 (2005-04-11)</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">NOTE: the hashing scheme in Nix 0.8 changed (as detailed below).
As a result, <fo:inline font-weight="bold">nix-pull</fo:inline> manifests and channels built
for Nix 0.7 and below will now work anymore.  However, the Nix
expression language has not changed, so you can still build from
source.  Also, existing user environments continue to work.  Nix 0.8
will automatically upgrade the database schema of previous
installations when it is first run.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">If you get the error message

<fo:block id="idm11018" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
you have an old-style manifest `/nix/var/nix/manifests/[...]'; please
delete it</fo:block>

you should delete previously downloaded manifests:

<fo:block id="idm11019" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ rm /nix/var/nix/manifests/*</fo:block>

If <fo:inline font-weight="bold">nix-channel</fo:inline> gives the error message

<fo:block id="idm11021" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
manifest `http://catamaran.labs.cs.uu.nl/dist/nix/channels/[channel]/MANIFEST'
is too old (i.e., for Nix &lt;= 0.7)</fo:block>

then you should unsubscribe from the offending channel
(<fo:inline font-weight="bold">nix-channel --remove
<fo:inline font-style="italic" font-family="monospace">URL</fo:inline></fo:inline>; leave out
<fo:inline font-family="monospace">/MANIFEST</fo:inline>), and subscribe to the same URL, with
<fo:inline font-family="monospace">channels</fo:inline> replaced by <fo:inline font-family="monospace">channels-v3</fo:inline>
(e.g., <fo:basic-link external-destination="url(http://catamaran.labs.cs.uu.nl/dist/nix/channels-v3/nixpkgs-unstable)"><fo:inline><fo:inline hyphenate="false">http://catamaran.labs.cs.uu.nl/dist/nix/channels-v3/nixpkgs-unstable</fo:inline></fo:inline></fo:basic-link>).</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix 0.8 has the following improvements:

<fo:list-block id="idm11029" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm11030" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The cryptographic hashes used in store paths are now
  160 bits long, but encoded in base-32 so that they are still only 32
  characters long (e.g.,
  <fo:inline font-family="monospace">/nix/store/csw87wag8bqlqk7ipllbwypb14xainap-atk-1.9.0</fo:inline>).
  (This is actually a 160 bit truncation of a SHA-256
  hash.)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm11033" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Big cleanups and simplifications of the basic store
  semantics.  The notion of âclosure store expressionsâ is gone (and
  so is the notion of âsuccessorsâ); the file system references of a
  store path are now just stored in the database.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">For instance, given any store path, you can query its closure:

  <fo:block id="idm11036" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-store -qR $(which firefox)
... lots of paths ...</fo:block>

  Also, Nix now remembers for each store path the derivation that
  built it (the âderiverâ):

  <fo:block id="idm11037" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-store -qR $(which firefox)
/nix/store/4b0jx7vq80l9aqcnkszxhymsf1ffa5jd-firefox-1.0.1.drv</fo:block>

  So to see the build-time dependencies, you can do

  <fo:block id="idm11038" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-store -qR $(nix-store -qd $(which firefox))</fo:block>

  or, in a nicer format:

  <fo:block id="idm11039" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-store -q --tree $(nix-store -qd $(which firefox))</fo:block>

  </fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">File system references are also stored in reverse.  For
  instance, you can query all paths that directly or indirectly use a
  certain Glibc:

  <fo:block id="idm11041" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-store -q --referrers-closure \
    /nix/store/8lz9yc6zgmc0vlqmn2ipcpkjlmbi51vv-glibc-2.3.4</fo:block>

  </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm11042" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The concept of fixed-output derivations has been
  formalised.  Previously, functions such as
  <fo:inline font-family="monospace">fetchurl</fo:inline> in Nixpkgs used a hack (namely,
  explicitly specifying a store path hash) to prevent changes to, say,
  the URL of the file from propagating upwards through the dependency
  graph, causing rebuilds of everything.  This can now be done cleanly
  by specifying the <fo:inline font-family="monospace">outputHash</fo:inline> and
  <fo:inline font-family="monospace">outputHashAlgo</fo:inline> attributes.  Nix itself checks
  that the content of the output has the specified hash.  (This is
  important for maintaining certain invariants necessary for future
  work on secure shared stores.)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm11047" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">One-click installation :-) It is now possible to
  install any top-level component in Nixpkgs directly, through the web
  â see, e.g., <fo:basic-link external-destination="url(http://catamaran.labs.cs.uu.nl/dist/nixpkgs-0.8/)"><fo:inline><fo:inline hyphenate="false">http://catamaran.labs.cs.uu.nl/dist/nixpkgs-0.8/</fo:inline></fo:inline></fo:basic-link>.
  All you have to do is associate
  <fo:inline font-family="monospace">/nix/bin/nix-install-package</fo:inline> with the MIME type
  <fo:inline font-family="monospace">application/nix-package</fo:inline> (or the extension
  <fo:inline font-family="monospace">.nixpkg</fo:inline>), and clicking on a package link will
  cause it to be installed, with all appropriate dependencies.  If you
  just want to install some specific application, this is easier than
  subscribing to a channel.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm11053" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-store -r
  <fo:inline font-style="italic" font-family="monospace">PATHS</fo:inline></fo:inline> now builds all the
  derivations PATHS in parallel.  Previously it did them sequentially
  (though exploiting possible parallelism between subderivations).
  This is nice for build farms.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm11057" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-channel</fo:inline> has new operations
  <fo:inline font-family="monospace">--list</fo:inline> and
  <fo:inline font-family="monospace">--remove</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm11062" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">New ways of installing components into user
  environments:

  <fo:list-block id="idm11064" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm11065" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Copy from another user environment:

    <fo:block id="idm11067" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env -i --from-profile .../other-profile firefox</fo:block>

    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm11068" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Install a store derivation directly (bypassing the
    Nix expression language entirely):

    <fo:block id="idm11070" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env -i /nix/store/z58v41v21xd3...-aterm-2.3.1.drv</fo:block>

    (This is used to implement <fo:inline font-weight="bold">nix-install-package</fo:inline>,
    which is therefore immune to evolution in the Nix expression
    language.)</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm11072" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Install an already built store path directly:

    <fo:block id="idm11074" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env -i /nix/store/hsyj5pbn0d9i...-aterm-2.3.1</fo:block>

    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm11075" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Install the result of a Nix expression specified
    as a command-line argument:

    <fo:block id="idm11077" text-align="start" space-before.minimum="0.8em" space-before.optimum="1em" space-before.maximum="1.2em" space-after.minimum="0.8em" space-after.optimum="1em" space-after.maximum="1.2em" hyphenate="false" white-space-collapse="false" white-space-treatment="preserve" linefeed-treatment="preserve" font-family="monospace">
$ nix-env -f .../i686-linux.nix -i -E 'x: x.firefoxWrapper'</fo:block>

    The difference with the normal installation mode is that
    <fo:inline font-family="monospace">-E</fo:inline> does not use the <fo:inline font-family="monospace">name</fo:inline>
    attributes of derivations.  Therefore, this can be used to
    disambiguate multiple derivations with the same
    name.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm11080" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A hash of the contents of a store path is now stored
  in the database after a successful build.  This allows you to check
  whether store paths have been tampered with: <fo:inline font-weight="bold">nix-store
  --verify --check-contents</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm11083" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Implemented a concurrent garbage collector.  It is now
    always safe to run the garbage collector, even if other Nix
    operations are happening simultaneously.</fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">However, there can still be GC races if you use
    <fo:inline font-weight="bold">nix-instantiate</fo:inline> and <fo:inline font-weight="bold">nix-store
    --realise</fo:inline> directly to build things.  To prevent races,
    use the <fo:inline font-family="monospace">--add-root</fo:inline> flag of those commands.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm11089" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The garbage collector now finally deletes paths in
  the right order (i.e., topologically sorted under the âreferencesâ
  relation), thus making it safe to interrupt the collector without
  risking a store that violates the closure
  invariant.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm11091" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Likewise, the substitute mechanism now downloads
  files in the right order, thus preserving the closure invariant at
  all times.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm11093" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The result of <fo:inline font-weight="bold">nix-build</fo:inline> is now
  registered as a root of the garbage collector.  If the
  <fo:inline font-family="monospace">./result</fo:inline> link is deleted, the GC root
  disappears automatically.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm11097" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">The behaviour of the garbage collector can be changed
    globally by setting options in
    <fo:inline font-family="monospace">/nix/etc/nix/nix.conf</fo:inline>.

    <fo:list-block id="idm11100" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm11101" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">gc-keep-derivations</fo:inline> specifies
      whether deriver links should be followed when searching for live
      paths.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm11104" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">gc-keep-outputs</fo:inline> specifies
      whether outputs of derivations should be followed when searching
      for live paths.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm11107" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">env-keep-derivations</fo:inline>
      specifies whether user environments should store the paths of
      derivations when they are added (thus keeping the derivations
      alive).</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block>

  </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm11110" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">New <fo:inline font-weight="bold">nix-env</fo:inline> query flags
  <fo:inline font-family="monospace">--drv-path</fo:inline> and
  <fo:inline font-family="monospace">--out-path</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm11115" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">fetchurl</fo:inline> allows SHA-1 and SHA-256
  in addition to MD5.  Just specify the attribute
  <fo:inline font-family="monospace">sha1</fo:inline> or <fo:inline font-family="monospace">sha256</fo:inline> instead of
  <fo:inline font-family="monospace">md5</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm11121" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Manual updates.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block>

</fo:block></fo:block><fo:block id="ch-relnotes-0.7"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Release 0.7 (2005-01-12)</fo:marker><fo:block font-size="20.736pt">Release 0.7 (2005-01-12)</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:list-block id="idm11125" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm11126" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Binary patching.  When upgrading components using
  pre-built binaries (through nix-pull / nix-channel), Nix can
  automatically download and apply binary patches to already installed
  components instead of full downloads.  Patching is âsmartâ: if there
  is a <fo:inline font-style="italic">sequence</fo:inline> of patches to an installed
  component, Nix will use it.  Patches are currently generated
  automatically between Nixpkgs (pre-)releases.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm11129" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Simplifications to the substitute
  mechanism.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm11131" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix-pull now stores downloaded manifests in
  <fo:inline font-family="monospace">/nix/var/nix/manifests</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm11134" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Metadata on files in the Nix store is canonicalised
  after builds: the last-modified timestamp is set to 0 (00:00:00
  1/1/1970), the mode is set to 0444 or 0555 (readable and possibly
  executable by all; setuid/setgid bits are dropped), and the group is
  set to the default.  This ensures that the result of a build and an
  installation through a substitute is the same; and that timestamp
  dependencies are revealed.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="ch-relnotes-0.6"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Release 0.6 (2004-11-14)</fo:marker><fo:block font-size="20.736pt">Release 0.6 (2004-11-14)</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:list-block id="idm11138" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em" space-after.optimum="1em" space-after.minimum="0.8em" space-after.maximum="1.2em" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm11139" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Rewrite of the normalisation engine.

    <fo:list-block id="idm11141" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm11142" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Multiple builds can now be performed in parallel
      (option <fo:inline font-family="monospace">-j</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm11145" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Distributed builds.  Nix can now call a shell
      script to forward builds to Nix installations on remote
      machines, which may or may not be of the same platform
      type.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm11147" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Option <fo:inline font-family="monospace">--fallback</fo:inline> allows
      recovery from broken substitutes.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm11150" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Option <fo:inline font-family="monospace">--keep-going</fo:inline> causes
      building of other (unaffected) derivations to continue if one
      failed.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block>

    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm11153" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Improvements to the garbage collector (i.e., it
  should actually work now).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm11155" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Setuid Nix installations allow a Nix store to be
  shared among multiple users.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm11157" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Substitute registration is much faster
  now.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm11159" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">A utility <fo:inline font-weight="bold">nix-build</fo:inline> to build a
  Nix expression and create a symlink to the result int the current
  directory; useful for testing Nix derivations.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm11162" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Manual updates.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm11164" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-weight="bold">nix-env</fo:inline> changes:

    <fo:list-block id="idm11167" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm11168" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Derivations for other platforms are filtered out
      (which can be overridden using
      <fo:inline font-family="monospace">--system-filter</fo:inline>).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm11171" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">--install</fo:inline> by default now
      uninstall previous derivations with the same
      name.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm11174" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:inline font-family="monospace">--upgrade</fo:inline> allows upgrading to a
      specific version.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm11177" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">New operation
      <fo:inline font-family="monospace">--delete-generations</fo:inline> to remove profile
      generations (necessary for effective garbage
      collection).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm11180" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nicer output (sorted,
      columnised).</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block>

    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm11182" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">More sensible verbosity levels all around (builder
  output is now shown always, unless <fo:inline font-family="monospace">-Q</fo:inline> is
  given).</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm11185" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Nix expression language changes:

    <fo:list-block id="idm11187" provisional-label-separation="0.2em" provisional-distance-between-starts="1.0em"><fo:list-item id="idm11188" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">New language construct: <fo:inline font-family="monospace">with
      <fo:inline font-style="italic" font-family="monospace">E1</fo:inline>;
      <fo:inline font-style="italic" font-family="monospace">E2</fo:inline></fo:inline> brings all attributes
      defined in the attribute set <fo:inline font-style="italic" font-family="monospace">E1</fo:inline> in
      scope in <fo:inline font-style="italic" font-family="monospace">E2</fo:inline>.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm11195" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Added a <fo:inline font-family="monospace">map</fo:inline>
      function.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm11198" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Various new operators (e.g., string
      concatenation).</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block>

    </fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm11200" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Expression evaluation is much
  faster.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm11202" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">An Emacs mode for editing Nix expressions (with
  syntax highlighting and indentation) has been
  added.</fo:block></fo:block></fo:list-item-body></fo:list-item><fo:list-item id="idm11204" space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em"><fo:list-item-label end-indent="label-end()"><fo:block>â¢</fo:block></fo:list-item-label><fo:list-item-body start-indent="body-start()"><fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Many bug fixes.</fo:block></fo:block></fo:list-item-body></fo:list-item></fo:list-block></fo:block><fo:block id="ch-relnotes-0.5"><fo:block><fo:block><fo:block margin-left="0pt" font-family="sans-serif,Symbol,ZapfDingbats" keep-together.within-column="always"><fo:block keep-with-next.within-column="always"><fo:block font-family="sans-serif,Symbol,ZapfDingbats" font-weight="bold" keep-with-next.within-column="always" space-before.minimum="0.8em" space-before.optimum="1.0em" space-before.maximum="1.2em" text-align="start" start-indent="0pt"><fo:marker marker-class-name="section.head.marker">Release 0.5 and earlier</fo:marker><fo:block font-size="20.736pt">Release 0.5 and earlier</fo:block></fo:block></fo:block></fo:block></fo:block></fo:block><fo:block space-before.optimum="1em" space-before.minimum="0.8em" space-before.maximum="1.2em">Please refer to the Subversion commit log messages.</fo:block></fo:block></fo:flow></fo:page-sequence></fo:root>